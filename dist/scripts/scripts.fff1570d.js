"use strict";var letsService=angular.module("letsService",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTable","ngCookies","ngS3upload","ngIdle","ngTouch","ui.bootstrap","ui.bootstrap.datetimepicker","angular-input-stars","google.places","ui.router","chart.js","ngResource","notifications","ui.grid","directive.g+signin","toastr","angularjs-dropdown-multiselect","ui.grid.pagination"]);letsService.value("serviceURL","http://crmstagging-env.us-west-2.elasticbeanstalk.com/"),letsService.value("pickupAndDropServiceURL","https://letsservicetech.in/"),letsService.filter("rounded",function(){return function(a){return Math.ceil(a)}}),letsService.filter("formatDate",["dateFilter",function(a){var b="";return function(c){if(c)return b=a(new Date(c.split("-").join("/")),"d/MMM/yyyy h:mm:ss a")}}]),letsService.filter("formatTime",["dateFilter",function(a){var b="";return function(c){return c?b=a(new Date(c.split("-").join("/")),"h:mm a"):"NA"}}]),angular.module("letsService").filter("unique",function(){return function(a,b){if(!1===b)return a;if((b||angular.isUndefined(b))&&angular.isArray(a)){var c=[],d=function(a){return angular.isObject(a)&&angular.isString(b)?a[b]:a};angular.forEach(a,function(a){for(var b=!1,e=0;e<c.length;e++)if(angular.equals(d(c[e]),d(a))){b=!0;break}b||c.push(a)}),a=c}return a}}),angular.module("directive.g+signin",[]).directive("googlePlusSignin",["$window","$rootScope",function(a,b){var c=/\.apps\.googleusercontent\.com$/;return{restrict:"E",transclude:!0,template:"<span></span>",replace:!0,link:function(d,e,f,g,h){function i(a){b.$broadcast("event:google-plus-signin-success",a)}function j(){b.$broadcast("event:google-plus-signin-failure",null)}f.clientid+=c.test(f.clientid)?"":".apps.googleusercontent.com",f.$set("data-clientid",f.clientid);var k={onsuccess:i,cookiepolicy:"single_host_origin",onfailure:j,scope:"profile email",longtitle:!1,theme:"dark",autorender:!0,customtargetid:"googlebutton"};k.clientid=f.clientid,angular.forEach(Object.getOwnPropertyNames(k),function(a){f.hasOwnProperty(a)&&(k[a]=f[a])});var l=void 0!==k.autorender&&("true"===k.autorender||!0===k.autorender);l||"googlebutton"!==k.customtargetid||(console.log("element",e),e[0].innerHTML='<div id="googlebutton"> <div class="google-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" viewBox="0 0 14 14" class="abcRioButtonSvg">   <g><path d="m7.228,7.958l-.661-.514c-.201-.166-.476-.386-.476-.79 0-.405 .275-.663 .513-.901 .769-.606 1.538-1.25 1.538-2.611 0-1.256-.632-1.862-.94-2.24h.899l.899-.902h-3.622c-.989,0-2.235,.147-3.278,1.01-.788,.68-1.172,1.618-1.172,2.464 0,1.433 1.098,2.885 3.04,2.885 .183,0 .384-.018 .586-.036-.092,.22-.183,.405-.183,.717 0,.569 .048,.809 .305,1.14-.824,.055-2.119,.12-3.254,.819-1.082,.644-1.411,1.717-1.411,2.379 0,1.361 1.281,2.629 3.938,2.629 3.149,0 4.816-1.747 4.816-3.474 .001-1.269-.731-1.894-1.537-2.575zm-4.689-5.384c0-.479 .091-.975 .402-1.361 .293-.368 .806-.607 1.283-.607 1.519,0 2.306,2.06 2.306,3.383 0,.33-.037,.918-.457,1.341-.294,.295-.786,.515-1.244,.515-1.575,0-2.29-2.041-2.29-3.271zm2.308,10.66c-1.96,0-3.224-.938-3.224-2.243s1.063-1.691 1.466-1.839c.77-.256 1.788-.348 1.788-.348s.456,.026 .665,.019c1.115,.546 1.997,1.487 1.997,2.428 0,1.138-.935,1.983-2.692,1.983z"></path></g> </svg></div> <div class="sign-in-text">Sign in</div></div>'),f.$observe("language",function(b){a.___gcfg={lang:b||"en"}});var m=document.createElement("script");m.type="text/javascript",m.async=!0,m.src="https://apis.google.com/js/client:platform.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(m,n),h(function(a,b){m.onload=function(){a.length&&e.append(a),gapi.load("auth2",function(){var a=gapi.auth2.init({client_id:k.clientid,cookie_policy:k.cookiepolicy});l?gapi.signin2.render(e[0],k):a.attachClickHandler(k.customtargetid,{},k.onsuccess,k.onfailure)})}})}}}]).run(),letsService.config(["$routeProvider","$httpProvider","$stateProvider","$urlRouterProvider","ChartJsProvider","KeepaliveProvider","IdleProvider",function(a,b,c,d,e,f,g){b.defaults.headers.common={},b.defaults.headers.get={},b.defaults.headers.post={},b.defaults.headers.put={},b.defaults.headers.option={},b.defaults.headers.patch={},g.idle(1800),g.timeout(5),f.interval(10),e.setOptions({responsive:!0,maintainAspectRatio:!0}),c.state("/",{url:"/",templateUrl:"views/crmLogin.html",controller:"CrmLoginCtrl"}).state("dashboard",{url:"/dashboard",templateUrl:"views/crmDashboard.html",controller:"crmDashboardController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("menu",{url:"/menu/createCaller",templateUrl:"views/tcCreate.html",controller:"TCManageController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("SMS",{url:"/menu/sms",templateUrl:"views/crmSms.html",controller:"SMSController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("SMSHistory",{url:"/menu/smsHistory",templateUrl:"views/crmSmsHistory.html",controller:"SMSHistoryController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("status",{url:"/menu/status",templateUrl:"views/tcStatus.html",controller:"TCStatusController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("teleCallerStatus",{url:"/menu/tcStatus",templateUrl:"views/teleCallerStatus.html",controller:"TeleCallerStatusController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("teleCallerHourWiseStatus",{url:"/menu/tcStatusHourWise",templateUrl:"views/teleCallerHourWiseStatus.html",controller:"TCHourWiseStatusController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("uploadHistory",{url:"/menu/uploadHistory",templateUrl:"views/crmUploadHistory.html",controller:"TCUploadHistoryController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("assignHistory",{url:"/menu/assignHistory",templateUrl:"views/crmAssignHistory.html",controller:"TCAssignHistoryController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("PSF",{url:"/menu/psf",templateUrl:"views/crmPsf.html",controller:"PSFController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("updatePSF",{url:"/menu/updatePSF",templateUrl:"views/feedbackUpdate.html",controller:"FeedbackUpdateController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("salesFeedback",{url:"/menu/salesFeedback",templateUrl:"views/salesFeedback.html",controller:"SalesFeedbackController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("crmDetailed",{url:"/crmDetailed/:apptId/:dataTypeId/:status",templateUrl:"views/detailedPage.html",controller:"crmDetailedPageController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("lostCustomer",{url:"/lostCustomer",templateUrl:"views/crmLostCustomerPage.html",controller:"crmLostCustomerPageController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("lostCustomerDetailed",{url:"/lostCustomerDetailed/:apptId/:dataTypeId/:status",templateUrl:"views/lostCustomerDetailedPage.html",controller:"LostCustomerDetailedPageController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("psfDetailed",{url:"/menu/psfDetailed/:apptId/:dataTypeId/:status",templateUrl:"views/crmPsfDetailedPage.html",controller:"crmPSFDetailedPageController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("salesFeedbackDetailed",{url:"/menu/salesFeedbackDetailed/:apptId/:dataTypeId:/status",templateUrl:"views/crmSalesFeedbackDetailedPage.html",controller:"crmSalesFeedbackDetailedController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("statistics",{url:"/statistics",templateUrl:"views/crmStatistics.html",controller:"crmStatisticsController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("Profile",{url:"/menu/profile",templateUrl:"views/adminProfile.html",controller:"profileController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("insurance",{url:"/insurance",templateUrl:"views/crmInsurance.html",controller:"CrmInsuranceController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("insuranceStats",{url:"/insuranceStats",templateUrl:"views/crmInsuranceStats.html",controller:"CrmInsuranceStatsController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("insuranceDetailed",{url:"/insuranceDetailed/:apptId/:dataTypeId",templateUrl:"views/crmInsuranceDetailedPage.html",controller:"CrmInsuranceDetailedController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("serviceCenterPerformance",{url:"/serviceCenterPerformance",templateUrl:"views/crmServiceCenterPerformance.html",controller:"ServiceCenterPerformanceController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("tcAdminDashboard",{url:"/tcAdminDashboard",templateUrl:"views/crmAdminCallerDashboard.html",controller:"crmAdminCallerDashboardController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("upload",{url:"/upload",templateUrl:"views/crmUpload.html",controller:"CrmUploadController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("BuySMS",{url:"/menu/buySms",templateUrl:"views/crmBuySms.html",controller:"BuySMSController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("updateDateOfSale",{url:"/menu/updateDateOfSale",templateUrl:"views/crmUpdateDateOfSale.html",controller:"CrmUpdateDateOfSaleController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("aboutUs",{url:"/aboutUs",templateUrl:"views/aboutUs.html",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("support",{url:"/support",templateUrl:"views/supportPage.html",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("faqSupport",{url:"/support/faqSupport",templateUrl:"views/faqSupportPage.html",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("adminFaqs",{url:"/support/faqSupport/adminFaqs",templateUrl:"views/adminFaqQuestions.html",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("callerFaqs",{url:"/support/faqSupport/callerFaqs",templateUrl:"views/callerFaqQuestions.html",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("uploadFaqs",{url:"/support/faqSupport/uploadFaqs",templateUrl:"views/uploadFaqQuestions.html",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("emailSupport",{url:"/support/emailSupport",templateUrl:"views/emailSupport.html",controller:"EmailSupportPageController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("sales",{url:"/sales",templateUrl:"views/crmSalesDashboard.html",controller:"CrmSalesDashboardController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("salesDetailed",{url:"/salesDetailed/:apptId/:dataTypeId",templateUrl:"views/crmSalesDetailedPage.html",controller:"CrmSalesDetailedController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("psfPerformance",{url:"/psfPerformance",templateUrl:"views/crmPsfPerformance.html",controller:"PSFPerformanceController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("salesFeedbackPerformance",{url:"/salesFeedbackPerformance",templateUrl:"views/crmSalesFeedbackPerformance.html",controller:"SalesFeedbackPerformanceController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("insurancePerformance",{url:"/insurancePerformance",templateUrl:"views/crmInsurancePerformance.html",controller:"crmInsurancePerformanceController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("dealerPerformance",{url:"/dealerPerformance",templateUrl:"views/crmDealerPerformance.html",controller:"CrmDealerPerformanceController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("manageSMS",{url:"/manageSMS",templateUrl:"views/crmManageSMS.html",controller:"ManageSMSController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("onboard",{url:"/onboard",templateUrl:"views/crmAdminCreation.html",controller:"CrmAdminCreationController",resolve:{checkAdminLogin:["$rootScope",function(a){a.letsServiceLogout("abc"),a.checkInternetAvailability()}]}}).state("overallReport",{url:"/overallReport",templateUrl:"views/crmOverallReport.html",controller:"CrmOverallReportController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkAdminLogin(),a.checkInternetAvailability()}]}}).state("supportView",{url:"/supportView",templateUrl:"views/crmSupportTool.html",controller:"CrmSupportToolController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkInternetAvailability()}]}}).state("adminTickets",{url:"/adminTickets",templateUrl:"views/adminTicketView.html",controller:"AdminTicketViewController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkInternetAvailability()}]}}).state("supportStats",{url:"/supportStats",templateUrl:"views/supportStats.html",controller:"CrmSupportStatsController",resolve:{checkAdminLogin:["$rootScope",function(a){a.checkInternetAvailability()}]}}).state("supportTool",{url:"/supportTool",templateUrl:"views/crmSupportLogin.html",controller:"CrmSupportLoginCtrl",resolve:{checkAdminLogin:["$rootScope",function(a){a.letsServiceLogout("abc"),a.checkInternetAvailability()}]}}).state("devConsole",{url:"/devConsole",templateUrl:"views/crmDeveloperConsole.html",controller:"CrmDeveloperConsoleCtrl",resolve:{checkAdminLogin:["$rootScope",function(a){a.letsServiceLogout("abc"),a.checkInternetAvailability()}]}})}]),letsService.run(["$http","$rootScope","$cookies","$state","$window","CrmValidationService","$location","TeleCallingSearchService","TokenService","NotificationCountService","GetPresentHourService","toastr",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){k.get(function(a){b.currentDate=a.date,console.log("Todays Date",b.currentDate);var c=new Date(b.currentDate);b.newDate=c.setDate(c.getDate()+2)},function(a){})}function n(){var a=c.get("loggedInUserId"),d=c.get("loggedInUserScId"),e=i.getToken(d);j.get({scId:d,callerId:a,token:e},function(a){console.log("CRE over due total counts :",a),c.put("NotificationCount",a.apptCount),b.overdueFilterCounts=c.get("NotificationCount")},function(a){b.overdueFilterCounts="0"})}function o(){a.get("https://api.ipify.org/?format&callback").then(function(a){console.log("Logged In PUBLIC IP ADDRESS : : :",a.data),b.loginIpAddress=c.put("loginIpAddress",a.data),b.signedInUser||b.signedInSupportRole||(document.getElementById("ip").innerHTML=c.get("loginIpAddress"))})}screen.width<=480&&e.alert("This portal cannot be accessable in mobile."),b.letsServiceInitialization=function(){b.signedInUser=c.get("loggedInUserName"),b.signedInUserRole=c.get("loggedInUserRole"),b.signedInBrand=c.get("loggedInUserBikeBrand"),b.signedInScId=c.get("loggedInUserScId"),b.signedInUser&&(m(),n())},b.letsServiceSupportInitialization=function(){console.log(e.sessionStorage.getItem("loggedInUser")),b.signedInSupportUser=e.sessionStorage.getItem("loggedInUser"),b.signedInSupportRole=e.sessionStorage.getItem("loggedInSupportRole")},b.letsServiceSupportInitialization(),b.letsServiceSupportLogout=function(a){e.sessionStorage.clear(),e.localStorage.clear(),b.signedInSupportUser=null,b.signedInSupportRole=null,e.location.href="#/"},c.get("loggedInUserName")?"caller"===c.get("loggedInUserRole")?"/"!==g.path()&&"/dashboard"!==g.path()||"/"===g.path()&&g.path("/dashboard"):"/"!==g.path()&&"/tcAdminDashboard"!==g.path()||g.path("/tcAdminDashboard"):"/onboard"===g.path()?g.path("/onboard"):"/supportTool"===g.path()?g.path("/supportTool"):"/supportView"===g.path()?g.path("/supportView"):"/supportStats"===g.path()?g.path("/supportStats"):"/devConsole"===g.path()?g.path("/devConsole"):"/adminTickets"===g.path()?g.path("/adminTickets"):g.path("/"),b.letsServiceInitialization(),b.letsServiceLogout=function(a){e.sessionStorage.clear(),e.localStorage.clear(),c.remove("loggedInUserId"),c.remove("loggedInUserScId"),c.remove("loggedInUserRole"),c.remove("loggedInUserName"),c.remove("loggedInUserToken"),c.remove("loggedInUserSessionToken"),c.remove("loggedInUserBikeBrand"),c.remove("loggedInVersionCode"),c.remove("csvFileUploadStatus"),c.remove("NotificationCount"),c.remove("insuranceAccess"),b.overdueFilterCounts="",c.remove("loggedInUserIdAdmin"),c.remove("loggedInUserScIdAdmin"),c.remove("loggedInUserRoleAdmin"),c.remove("loggedInUserNameAdmin"),c.remove("loggedInUserTokenAdmin"),c.remove("loggedInUserSessionTokenAdmin"),c.remove("loggedInUserBikeBrandAdmin"),c.remove("loggedInVersionCodeAdmin"),c.remove("csvFileUploadStatusAdmin"),c.remove("insuranceAccessAdmin"),c.remove("loggedInZone"),c.remove("loginIpAddress"),b.letsServiceInitialization(),a?(b.signedInUser=!1,d.go("onboard")):(e.location.href="#/",o())},b.checkAdminLogin=function(){var a=c.get("loggedInUserId"),d=c.get("loggedInUserRole"),e=c.get("loggedInUserToken"),g=c.get("loggedInUserSessionToken"),h=c.get("loginIpAddress");void 0!==h&&null!==h||(h="NA"),f.get({callerId:a,token:e,role:d,sessionToken:g,loginIp:h},function(a){o(),console.log("Dynamic IP ::",c.get("loginIpAddress"))},function(a){b.invalidUserLogoutMsg=a.data.message,$("#loggedOutMsgModal").modal("show"),b.letsServiceLogout()})},b.checkInternetAvailability=function(){navigator.onLine||(e.alert("Congrats, Now you have a Life as It Seems Your System is not connected to the Internet. Connect to the Internet and get going"),b.letsServiceLogout())};var p;b.$on("$stateChangeSuccess",function(a,b,c,e,f){d.current=b,console.log("CURRUNT STATE : :",b.name),p=b.name});var q="general";b.dataTypeForBranch=q,b.tcAppointmentSearch=function(a){b.defaultStatus="status",b.defaultDataTypename="",b.defaultDataTypeId="",b.defaultSubStatus="",b.selDataTypeValue="","dashboard"===p?(q="sr",b.dataTypeForBranch=q):"lostCustomer"===p||"lostCustomerDetailed"===p?(q="others",b.dataTypeForBranch=q):"insurance"===p||"insuranceDetailed"===p||"insurancePerformance"===p?(q="Insurance",b.dataTypeForBranch=q):"PSF"===p||"psfDetailed"===p||"psfPerformance"===p?(q="Psf",b.dataTypeForBranch=q):"sales"!==p&&"salesDetailed"!==p&&"salesFeedbackPerformance"!==p||(q="Sales",b.dataTypeForBranch=q),console.log("DATA TYPE SEARCHING FOR : :",q);var e=c.get("loggedInUserId"),f=c.get("loggedInUserScId");"caller"===b.signedInUserRole?"Insurance"===q?d.go("insurance"):"Sales"===q?d.go("sales"):"Psf"===q?d.go("PSF"):d.go("dashboard"):"admin"===b.signedInUserRole?(e="caller","Insurance"===q?d.go("insurancePerformance"):"Sales"===q?d.go("salesFeedbackPerformance"):"Psf"===q?d.go("psfPerformance"):d.go("tcAdminDashboard")):"superAdmin"===b.signedInUserRole&&(e="caller",f=b.scIdSuperAdmin,d.go("tcAdminDashboard"));var g=i.getToken(f);h.query({key:a,scId:f,callerId:e,dataTypeId:q,token:g},function(a){console.log("cre Search Table Data global :",a),b.creTableDataErrorMsg="",b.creTableData=a,b.globalSerarchStatus=!0,b.showTable=!0,b.tableParams.reload(),"admin"!==b.signedInUserRole&&"superAdmin"!==b.signedInUserRole||(b.exportType=!1,$("#adminDataTableModal").modal("show")),q="general"},function(a){"admin"!==b.signedInUserRole&&"superAdmin"!==b.signedInUserRole||$("#adminDataTableModal").modal("show"),b.creTableData=[],b.showTable=!0,b.tableParams.reload(),b.creTableDataErrorMsg=a.data.message,console.log(a)})},o()}]),angular.module("letsService").controller("CrmLoginCtrl",["$scope","$window","$cookies","$http","$state","$filter","$rootScope","TokenService","AdminLoginService","ForgotPasswordService","ChangePasswordService","GetPresentHourService","Idle",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){l.get(function(a){console.log("present date : ",a),o=a.date},function(a){})}var o,p=parseInt(100*Math.random()),q=(c.put("randomId",p),b.sessionStorage.setItem("randomId",p),h.getToken(p));n(),a.login=function(d){if(console.log(c.get("randomId")),console.log(b.sessionStorage.getItem("randomId")),g.creTableData=[],g.showTable=!1,g.defaultDataTypename="",g.defaultStatus="",g.defaultDataTypeId="",g.defaultSubStatus="",g.selDataTypeValue="",g.defaultDataTypenameOthers="",g.defaultStatusOthers="",g.defaultDataTypeIdOthers="",g.defaultSubStatusOthers="",g.selDataTypeValueOthers="",g.defaultStatusInsurance="",g.defaultSubStatusInsurance="",g.defaultStatusSales="",g.defaultDataTypeSales="",g.globalSerarchStatus=!1,c.remove("loggedInUserId"),c.remove("loggedInUserScId"),c.remove("loggedInUserRole"),c.remove("loggedInUserName"),c.remove("loggedInUserToken"),c.remove("loggedInUserSessionToken"),c.remove("loggedInUserBikeBrand"),c.remove("loggedInVersionCode"),c.remove("csvFileUploadStatus"),c.remove("insuranceAccess"),c.remove("loggedInUserIdAdmin"),c.remove("loggedInUserScIdAdmin"),c.remove("loggedInUserRoleAdmin"),c.remove("loggedInUserNameAdmin"),c.remove("loggedInUserTokenAdmin"),c.remove("loggedInUserSessionTokenAdmin"),c.remove("loggedInUserBikeBrandAdmin"),c.remove("loggedInVersionCodeAdmin"),c.remove("csvFileUploadStatusAdmin"),c.remove("insuranceAccessAdmin"),c.remove("loggedInModelCode"),c.remove("loggedInZone"),c.get("randomId")===b.sessionStorage.getItem("randomId")){var f=c.get("loginIpAddress"),h={username:d.adminUsername,password:d.adminLoginPassword,loginIp:f};console.log("login req :",JSON.stringify(h)),i.save({id:p,token:q},h,function(b){a.loginData=b,console.log("login:",b),m.watch(),g.$on("IdleStart",function(){$("#timeOutMsgModal").modal("show")}),g.$on("IdleTimeout",function(){$("#timeOutMsgModal").modal("hide"),$("#logoutMsgModalForInactive").modal("show"),g.letsServiceLogout(),e.reload()}),"Yes"!==b.otp&&(c.put("loggedInUserId",b.loginId),c.put("loggedInUserScId",b.scId),c.put("loggedInUserRole",b.role),c.put("loggedInUserName",b.username),c.put("loggedInUserToken",b.password_token),c.put("loggedInUserSessionToken",b.sessionToken),c.put("loggedInUserBikeBrand",b.bikeBrand),c.put("loggedInVersionCode",b.version),c.put("csvFileUploadStatus",b.autoFileUpload),c.put("insuranceAccess",b.insuranceAccess),c.put("loginCallingType",b.callingType),c.put("loginMobile",b.mobile),c.put("loggedInUserIdAdmin",b.loginId),c.put("loggedInEmail",b.ticketingEmail),c.put("loggedInDealerName",b.scName),c.put("loggedInModelCode",b.modelCode),c.put("loggedInZone",b.zone)),g.letsServiceInitialization(),"caller"===b.role?e.go("dashboard"):"Yes"!==b.otp?(c.put("loggedInUserIdAdmin",b.loginId),c.put("loggedInUserScIdAdmin",b.scId),c.put("loggedInUserRoleAdmin",b.role),c.put("loggedInUserNameAdmin",b.username),c.put("loggedInUserTokenAdmin",b.password_token),c.put("loggedInUserSessionTokenAdmin",b.sessionToken),c.put("loggedInUserBikeBrandAdmin",b.bikeBrand),c.put("loggedInVersionCodeAdmin",b.version),c.put("csvFileUploadStatusAdmin",b.autoFileUpload),c.put("insuranceAccessAdmin",b.insuranceAccess),c.put("loginOtp",b.otp),c.put("loggedInEmail",b.ticketingEmail),c.put("loggedInDealerName",b.scName),c.put("loggedInModelCode",b.modelCode),c.put("loggedInZone",b.zone),e.go("tcAdminDashboard")):"Yes"===b.otp&&(g.signedInUserRole="",g.signedInUser="",g.signedInBrand="",$("#confirmEmailModal").modal("show"))},function(b){a.loginErrorMsg=b.data.message,console.log(b)})}else c.get("randomId")!==b.sessionStorage.getItem("randomId")&&b.alert("Invalid User. You cannot access two login in same browser Simultaneously.!!")};var r;a.forgotPassword=function(b){a.forgotPasswordObj={},a.forgotPasswordForm.$setPristine(),j.save({id:p,token:q},b,function(a){$("#forgotPasswordModal").modal("hide"),$("#changePasswordModal").modal("show"),r=a.message},function(b){a.forgotPasswordErrorMsg=b.data.message,console.log(b)})},a.checkOtp=function(b){parseInt(r)===parseInt(b)?(a.showPassword=!0,a.invalidOtpErrorMsg=""):a.invalidOtpErrorMsg="Invalid OTP"},a.checkOtpForEmailConfirm=function(b){parseInt(r)===parseInt(b)?(a.showPassword=!1,$("#confirmEmailModal").modal("hide"),$("#otpModal").modal("hide"),c.put("loggedInUserId",a.loginData.loginId),c.put("loggedInUserScId",a.loginData.scId),c.put("loggedInUserRole",a.loginData.role),c.put("loggedInUserName",a.loginData.username),c.put("loggedInUserToken",a.loginData.password_token),c.put("loggedInUserSessionToken",a.loginData.sessionToken),c.put("loggedInUserBikeBrand",a.loginData.bikeBrand),c.put("loggedInVersionCode",a.loginData.version),c.put("csvFileUploadStatus",a.loginData.autoFileUpload),c.put("insuranceAccess",a.loginData.insuranceAccess),c.put("loginCallingType",a.loginData.callingType),c.put("loginMobile",a.loginData.mobile),c.put("loggedInEmail",a.loginData.ticketingEmail),c.put("loggedInDealerName",a.loginData.scName),c.put("loggedInModelCode",a.loginData.modelCode),c.put("loggedInZone",a.loginData.zone),c.put("loggedInUserIdAdmin",a.loginData.loginId),c.put("loggedInUserScIdAdmin",a.loginData.scId),c.put("loggedInUserRoleAdmin",a.loginData.role),c.put("loggedInUserNameAdmin",a.loginData.username),c.put("loggedInUserTokenAdmin",a.loginData.password_token),c.put("loggedInUserSessionTokenAdmin",a.loginData.sessionToken),c.put("loggedInUserBikeBrandAdmin",a.loginData.bikeBrand),c.put("loggedInVersionCodeAdmin",a.loginData.version),c.put("csvFileUploadStatusAdmin",a.loginData.autoFileUpload),c.put("insuranceAccessAdmin",a.loginData.insuranceAccess),g.signedInUser=c.get("loggedInUserName"),g.signedInUserRole=c.get("loggedInUserRole"),g.signedInBrand=c.get("loggedInUserBikeBrand"),e.go("tcAdminDashboard"),a.invalidOtpForEmailErrorMsg=""):a.invalidOtpForEmailErrorMsg="Invalid OTP"},a.clearPasswordUpdateMsg=function(){a.forgotPasswordErrorMsg=""},a.changePassword=function(b){a.changePasswordObj={},a.changePasswordForm.$setPristine(),k.save({id:p,token:q},b,function(b){console.log(b),a.changePasswordSuccessMsg=" Username : "+b.username+"   Password : "+b.password},function(b){a.changePasswordSuccessMsg=b.data.message,console.log(b)})},a.confirmEmail=function(b){a.confirmEmailObj={},b.username=a.loginData.username,a.confirmEmailForm.$setPristine(),console.log(JSON.stringify(b)),j.save({id:p,token:q},b,function(b){console.log("Confirm OTP resp:",b),a.confirmEmailErrorMsg="",$("#confirmEmailModal").modal("hide"),$("#otpModal").modal("show"),r=b.message},function(b){a.confirmEmailErrorMsg=b.data.message,console.log(b)})}}]),angular.module("letsService").controller("crmDashboardController",["$scope","$filter","$anchorScroll","$state","ngTableParams","$rootScope","$timeout","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCAppointmentStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","FeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","TeleCallerStatusWiseDataService","TeleCallerWiseServiceCenterService","CreDashboardDataService","CreDashboardDueTypeDataService","CreDashboardDataTableService","$cookies","CreDashboardFilterTypeDataService","CreAppointmentActiveStatusService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T){function U(b){a.loaderIcon=b}function V(b){var c=0,d=0,e=0,f=0,g=0,h=0,i=0,j=0,l=0;fa=b,a.creDashboardDataErrorMsg="",U(!0);var m=k.getToken(aa);O.query({scId:aa,callerId:_,branchId:fa,token:m},function(b){console.log("cre dashboard data :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,k){void 0!==a.creDashboardData[k]&&null!==a.creDashboardData[k]&&(c+=parseInt(a.creDashboardData[k].allocated),d+=parseInt(a.creDashboardData[k].attemptedCount),e+=parseInt(a.creDashboardData[k].callLaterCount),f+=parseInt(a.creDashboardData[k].notInterested),j+=parseInt(a.creDashboardData[k].overDueCalls),g+=parseInt(a.creDashboardData[k].nonConverted),h+=parseInt(a.creDashboardData[k].pendingCount),i+=parseInt(a.creDashboardData[k].freshCalls),l+=parseInt(a.creDashboardData[k].totalAttempted))}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardData.push({dataTypename:"Total",allocated:c,attemptedCount:d,callLaterCount:e,nonConverted:g,pendingCount:h,freshCalls:i,overDueCalls:j,notInterested:f,totalAttempted:l}),U(!1)},function(b){U(!1),a.creDashboardData=[],a.creDashboardDataErrorMsg=b.data.message})}function W(a){f.tableParams.page(a),f.tableParams.reload()}function X(a){f.tableParams.count(a)}function Y(a){0===a.indexOf(f.tableParams.count())&&(a.push(f.tableParams.count()),a.sort()),f.tableParams.settings({counts:a})}function Z(){var b=k.getToken(aa);B.query({callerId:_,id:aa,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}var _=R.get("loggedInUserId"),aa=R.get("loggedInUserScId");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var ba,ca,da,ea="noSubStatus",fa="all";V(fa),f.creTableData=[],f.apptIdList=[],a.filteredServiceDueTypes=[],f.showTable=!1,a.getSelectedServiceCenter=function(a){console.log(a),fa=a,null===a&&(fa="all"),V(fa)},a.selDataType,a.selDataTypeValue,a.getPericularStatsData=function(b,c,d,e){"pendingcalls"!==c&&(f.showTable=!1),a.selDataType=b,f.selDataTypeValue=e,console.log("highlight",a.selDataTypeValue),a.filteredServiceDueTypes=[],U(!0),f.defaultDataTypename=b,ba=d,f.defaultDataTypeId=d,
"Regular Data Free"===b||"Service Reminder Free"===b?da="Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?da="Paid":"Service Reminder Post Warranty"===b?da="Post Warranty":"Service Reminder Extended Warranty"===b?da="Extended Warranty":"Service Reminder Chain Lube Service"===b?da="Chain Lube Service":"Service Reminder Maintenance Service"===b?da="Maintenance Service":"Service Reminder Fitness Certificate"===b&&(da="Fitness Certificate"),ca=c,f.defaultStatus=c,a.selectedStatus=ca,a.selectedDueType=da;var g=k.getToken(aa);S.get({callerId:_,status:ca,dataTypeId:ba,scheduleType:da,scId:aa,branchId:fa,token:g},function(b){console.log("CRE filtered count success :",b),a.creFilteredDataTypes=b,a.statusOption={},a.creFilteredDataTypes||(a.creFilteredDataTypes=!1),U(!1)},function(b){console.log("Error",b),U(!1),a.creFilteredDataTypesErrorMsg=b.data.message},function(a){console.log(a)})},a.getPericularStatsData(f.defaultDataTypename,f.defaultStatus,f.defaultDataTypeId,f.selDataTypeValue),a.getPerticularStatsTableData=function(c,d,e,g,h){console.log("+++++++++++++++++++++++++++++++=",g),a.selDataType=c,f.selDataTypeValue=h,console.log("highlight",a.selDataTypeValue),f.selDataTypeStatusValue=d,a.filteredServiceDueTypes=[],U(!0),ea=g,f.defaultSubStatus=g,f.defaultDataTypename=c,ba=e,f.defaultDataTypeId=e,"Regular Data Free"===c||"Service Reminder Free"===c?da="Free":"Regular Data Paid"===c||"Service Reminder Paid"===c?da="Paid":"Service Reminder Post Warranty"===c?da="Post Warranty":"Service Reminder Extended Warranty"===c?da="Extended Warranty":"Service Reminder Chain Lube Service"===c?da="Chain Lube Service":"Service Reminder Maintenance Service"===c?da="Maintenance Service":"Service Reminder Fitness Certificate"===c&&(da="Fitness Certificate"),ca=d,f.defaultStatus=d,a.selectedStatus=ca,a.selectedDueType=da;var i=k.getToken(aa);Q.query({scId:aa,callerId:_,dataTypeId:ba,status:ca,scheduleType:da,subStatus:ea,branchId:fa,token:i},function(c){console.log("cre Table Data success :",c),f.creTableDataErrorMsg="",f.creTableData=c;var e=b("unique")(f.creTableData,"serviceDueType");a.filteredServiceDueTypes.push({id:"",title:""}),angular.forEach(e,function(b,c){a.filteredServiceDueTypes.push({id:e[c].serviceDueType,title:e[c].serviceDueType})}),console.log(" $scope.filteredServiceDueTypes ++++++++++",a.filteredServiceDueTypes),f.showTable=!0,ca=d,f.tableParams.reload(),U(!1),a.crePerticularStatsData=!0,f.tableParams.page(1)},function(a){console.log("Error",a),f.globalSerarchStatus||(f.creTableData=[],f.tableParams.reload()),void 0!==g&&null!==g&&""!==g&&(f.showTable=!0,f.tableParams.reload(),f.creTableDataErrorMsg=a.data.message),f.globalSerarchStatus&&(f.showTable=!0,f.tableParams.reload(),f.globalSerarchStatus=!1),U(!1),f.creTableDataErrorMsg=a.data.message},function(a){console.log(a)})},a.getPerticularStatsTableData(f.defaultDataTypename,f.defaultStatus,f.defaultDataTypeId,f.defaultSubStatus,f.selDataTypeValue),f.tableParams=new e({page:1,count:20},{total:f.creTableData.length,getData:function(c,d){var e=d.sorting()?b("orderBy")(f.creTableData,d.orderBy()):f.creTableData;e=d.filter()?b("filter")(e,d.filter()):e,a.orderedData=e,d.total(e.length),c.resolve(a.users=e.slice((d.page()-1)*d.count(),d.page()*d.count())),angular.forEach(a.users,function(b,c){f.apptIdList.push(a.users[c].apptId)})}},{counts:[10,20]}),f.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=f.tableParams.settings().counts,a.changePage=W,a.changePageSize=X,a.changePageSizes=Y,Z(),$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})}),$(window).on("scroll",function(){$(window).scrollTop()>100?(alert(2),$(".header").addClass("active")):(alert(3),$(".header").removeClass("active"))}),$(window).scroll(function(){alert("scrolled")}),angular.element(h).bind("scroll",function(a){alert("scrolled")}),window.onscroll=function(){console.log("window was scrolled!")}}]),angular.module("letsService").controller("TCAdminDashboardController",["$scope","$timeout","$cookies","$rootScope","$window","TokenService","TcAdminDashboardService","TeleCallerWiseServiceCenterService","TeleCallerDataTypeService","GetScWiseTeleCallerService","TcAdminDashboardDetailService","serviceURL","TeleCallerExcelUploadService","TeleCallingSearchService","TeleCallingCallRecordService","TeleCallerExcelUploadJobcardDataService","TeleCallerPerticularAppointmentHistoryDataService","TeleCallerExcelUploadServiceReminderDataService","TeleCallerJobCardDataService","TeleCallerCallStatsDataService","TeleCallerFeedbackRatingService","GetFeedbackTitleService","AddFeedbackQuestionService","TeleCallerExcelUploadSalesFeedbackDataService","BrandWiseModelService","TeleCallerExcelUploadAMCDataService","TeleCallerCSVUploadServiceReminderDataService","TeleCallerCSVUploadJobCardDataService","AppointmentDueTypeStats","ConversionDueTypeStatsService","TeleCallerCSVUploadRegularDataService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){function F(b,c,d,e,h){a.loadingStats=!0;var i=f.getToken(ba);d=d||"branch",e=e||"datatype",h=h||"caller",g.get({fromDate:b,toDate:c,tcId:aa,id:ba,branchId:d,callerId:h,datatypeId:e,token:i},function(b){a.tcStatusStats=b,a.loadingStats=!1,console.log("hai admin",b),a.tcAdminStatsLabels=["Free Service Count","Paid Service Count"],a.serviceTypeGraphColors=["#adadad","#0083ca"],a.tcAdminStatsData=[parseInt(a.tcStatusStats.freeScCount),parseInt(a.tcStatusStats.paidScCount)],a.showChartStats=parseInt(a.tcStatusStats.freeScCount)+parseInt(a.tcStatusStats.paidScCount),a.serviceComplaintLabel=[],a.scServiceComplaintData=[],angular.forEach(a.tcStatusStats.scComplaint,function(b,c){a.serviceComplaintLabel.push(c),a.scServiceComplaintData.push(b)}),a.serviceCentreComplaintsGraphColors=["#004266","#0083ca","#adadad","#dbdbdb"],a.tcAdminStatsConvertedCountLabels=["Free Converted Count","Paid Converted Count"],a.serviceConvertedGraphColors=["#adadad","#0083ca"],a.serviceCentrePDGraphColors=["#adadad","#0083ca"],a.tcAdminStatsConvertedCountData=[parseInt(a.tcStatusStats.freeConvertedCount),parseInt(a.tcStatusStats.paidConvertedCount)],a.showChartConvertedCountStats=parseInt(a.tcStatusStats.freeConvertedCount)+parseInt(a.tcStatusStats.paidConvertedCount),a.pickupandDropStatsData=[],a.pickupandDropStatsLabels=[],a.pickupandDropStatsSeries=["Pickup and Drop Completed","Pending Pickup and Drop"];var c=[],d=[],e=a.tcStatusStats.conversionChart;void 0!==e&&angular.forEach(e.pickupAndDropConversion,function(b){if(null!==b.month&&null!==b.day){var e=b.month+" "+b.day;a.pickupandDropStatsLabels.push(e)}d.push(b.completed),c.push(b.progress)}),a.pickupandDropStatsData.push(d),a.pickupandDropStatsData.push(c),a.walkinStatsLabels=[],a.walkinStatsSeries=["Walkin Completed","Pending Walkin"];var f=[],g=[];a.walkinStatsData=[],void 0!==e&&angular.forEach(e.walkInConversion,function(b){if(null!==b.month&&null!==b.day){var c=b.month+" "+b.day;a.walkinStatsLabels.push(c)}g.push(b.completed),f.push(b.progress)}),a.walkinStatsData.push(g),a.walkinStatsData.push(f),a.loading=!1},function(b){console.log(b),a.tcStatusStatsErrorMsg=b.data.message,a.loading=!1,a.loadingStats=!1})}function G(b,c,d,e,g,h,i,j,m){console.log(b+"/"+c+"/"+d+"/"+e),a.loading=!0;var n=f.getToken(ba);g=g||"branch",h=h||"datatype",i=i||"caller",na=m,"freeScCount"===d||"paidScCount"===d?(a.dueTypeAppointmentStatus=!0,H(b,c,d,g,i,h)):"freeConvertedCount"!==d&&"paidConvertedCount"!==d||(a.dueTypeAppointmentStatus=!0,I(b,c,d,g,i,h)),k.query({fromDate:b,toDate:c,status:d,subStatus:e,tcId:aa,id:ba,branchId:g,callerId:i,datatypeId:h,export:j,feedBackListId:na,token:n},function(f){console.log("url ::  "+l+"get_admin_status_details/"+b+"/"+c+"/"+d+"/"+e+"/"+aa+"/"+ba+"/"+g+"/"+i+"/"+h+"/"+j+"/"+na+"/"+n),console.log("table data: ",f),a.tcAdminStatsGrid.data=f,a.tcAdminStatsGridErrorMsg="";for(var k=0;k<a.tcAdminStatsGrid.data.length;k++)void 0!==a.tcAdminStatsGrid.data[k].serviceDueType&&null!==a.tcAdminStatsGrid.data[k].serviceDueType&&""!==a.tcAdminStatsGrid.data[k].serviceDueType||(a.tcAdminStatsGrid.data[k].serviceDueType="NA"),void 0!==a.tcAdminStatsGrid.data[k].apptStatus&&null!==a.tcAdminStatsGrid.data[k].apptStatus&&""!==a.tcAdminStatsGrid.data[k].apptStatus||(a.tcAdminStatsGrid.data[k].apptStatus="NA"),void 0!==a.tcAdminStatsGrid.data[k].serviceDueDate&&null!==a.tcAdminStatsGrid.data[k].serviceDueDate&&""!==a.tcAdminStatsGrid.data[k].serviceDueDate||(a.tcAdminStatsGrid.data[k].serviceDueDate="NA"),void 0!==a.tcAdminStatsGrid.data[k].apptSubStatus&&null!==a.tcAdminStatsGrid.data[k].apptSubStatus&&""!==a.tcAdminStatsGrid.data[k].apptSubStatus||(a.tcAdminStatsGrid.data[k].apptSubStatus="NA");a.loading=!1},function(b){console.log("table data error :",b),a.tcAdminStatsGridErrorMsg=b.data.message,a.loading=!1,a.tcAdminStatsGrid.data=[]})}function H(b,c,d,e,g,h){a.loadingStats=!0;var i=f.getToken(ba);C.query({fromDate:b,toDate:c,status:d,adminId:aa,scId:ba,branchId:e,callerId:g,dataTypeId:h,token:i},function(b){a.appointmentDueTypeStats=b,a.loadingStats=!1},function(b){a.loadingStats=!1,a.appointmentDueTypeStatsErrorMsg=b.data.message})}function I(b,c,d,e,g,h){a.loadingStats=!0;var i=f.getToken(ba);D.query({fromDate:b,toDate:c,status:d,adminId:aa,scId:ba,branchId:e,callerId:g,dataTypeId:h,token:i},function(b){a.appointmentDueTypeStats=b,a.loadingStats=!1},function(b){a.loadingStats=!1,a.appointmentDueTypeStatsErrorMsg=b.data.message})}function J(){var b=f.getToken(ba);i.query({id:ba,token:b},function(b){a.dataTypes=b},function(b){a.datatypeErrorMsg=b.data.message})}function K(){var b=f.getToken(ba);i.query({id:ba,token:b},function(b){a.dataTypesForUpload=b,console.log(" $scope.dataTypesForUpload :",a.dataTypesForUpload);for(var c=0;c<b.length;c++)"Non Convereted Data"===b[c].description&&(b[c].description="Job Card Data")},function(b){a.datatypeErrorMsg=b.data.message})}function L(){var b=f.getToken(ba);h.query({id:ba,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function M(){var b=f.getToken(ba);j.query({id:ba,token:b},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}function N(b){a.callRecording=[];var c=parseInt(b.apptId),d=f.getToken(ba);o.query({apptId:c,logInId:aa,scId:ba,token:d},function(b){a.callRecording=b},function(b){var c={recordingUrl:b.data.message,create_ts:""};a.callRecording.push(c)})}function O(b,c){var d=f.getToken(ba);q.query({chassisNo:b,id:ba,dataTypeId:c,token:d},function(b){a.tcAppointmentHistoryData=b},function(b){a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function P(b){f.getToken(ba);y.query({brandName:b},function(b){console.log("Brand Wise Models",b),a.brandWiseVehicleTypes=b},function(a){console.log(a)})}function Q(c){if(void 0!==pa&&void 0!==ta||(e.alert("Kindly select the ServiceCenter/DataType to upload the file."),$('input[type="file"]').val(null)),void 0!==pa&&void 0!==ta&&(za=e.confirm("Are you sure this is the file you want to upload?")),!0===za){b(function(){"Service Reminder"!==ua&&"Service Remainder"!==ua&&"Sales FeedBack"!==ua?($("#uploadDataMapping").show(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("html, body").animate({scrollTop:$("#uploadDataMapping").position().top})):"Service Reminder"===ua||"Service Remainder"===ua?($("#uploadDataMappingForServiceRemainder").show(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMapping").hide(),$("html, body").animate({scrollTop:$("#uploadDataMappingForServiceRemainder").position().top})):"Sales FeedBack"===ua&&($("#uploadDataMappingForSalesFeedback").show(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMapping").hide(),$("html, body").animate({scrollTop:$("#uploadDataMappingForSalesFeedback").position().top}))},1e3);var d=c.target.files[0],f=d.name;console.log(f.substr(-5)),".xls"!==f.substr(-4)&&(e.alert("Only .xls file format is allowed"),$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide());var g=new FileReader;g.onload=function(b){var c=b.target.result,d=XLS.CFB.read(c,{type:"binary"}),e=XLS.parse_xlscfb(d);e.SheetNames.forEach(function(b){var c=XLS.utils.sheet_to_row_object_array(e.Sheets[b]);if(console.log("oJS",c),c.length>0){wa=c;for(var d=0;d<wa.length;d++)angular.forEach(wa[d],function(a,b){Aa.push(b)});var f,g=[],h=function(a,b,c){f=c[b];for(var b in g)if(g[b]===f)return!0;g.push(f)};Aa.forEach(h),a.uploadedFileColumnNames=g,console.log("column names: ",a.uploadedFileColumnNames)}})},g.readAsBinaryString(d)}else a.loading=!1,console.log("File Cancelled!"),$('input[type="file"]').val(null)}function R(b){console.log(JSON.stringify(b)),a.loading=!0,a.loadingMapping=!0,a.uploadColumn={},a.MapUploadDataForm.$setPristine();var c=f.getToken(ba);m.save({id:ba,token:c},b,function(b){e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1,Aa=[],$("#uploadDataMapping").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}function S(b){a.loading=!0,a.loadingMapping=!0;var c=f.getToken(ba);console.log(JSON.stringify(b)),p.save({id:ba,token:c},b,function(b){e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1,Aa=[],$("#uploadDataMapping").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}function T(b){a.loading=!0,a.loadingMapping=!0;var c=f.getToken(ba);console.log(JSON.stringify(b)),r.save({id:ba,token:c},b,function(b){e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1,Aa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}function U(b){a.loading=!0,a.loadingMapping=!0;var c=f.getToken(ba);console.log(JSON.stringify(b)),x.save({id:ba,token:c},b,function(b){e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1,Aa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}function V(b){a.loading=!0,a.loadingMapping=!0,console.log("AMC Data request :",b);var c=f.getToken(ba);console.log(JSON.stringify(b)),z.save({id:ba,token:c},b,function(b){e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1,Aa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}function W(b){a.loading=!0,a.loadingMapping=!0,console.log("AMC Data request :",b);var c=f.getToken(ba);console.log(JSON.stringify(b)),E.save({id:ba,token:c},b,function(b){e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1,Aa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}function X(){angular.forEach(wa,function(a){angular.forEach(a,function(a,b){})});if(void 0!==wa||null!==wa||wa!==[])for(var a=0;a<wa.length;a++){Object.keys(wa[a])}for(var b=0;b<wa.length;b++){wa[b]}return!0}function Y(){var b=f.getToken(ba);t.query({scId:ba,token:b},function(b){console.log("caller stats data",b),c=b;for(var e=0;e<c.length;e++)null!==c[e]&&(""===c[e].update_ts&&(c[e].update_ts="NA"),a.callerNamesData.push(c[e].callername+"("+c[e].update_ts+")"),"red"===c[e].status&&(c[e].status="#FF0000"),"green"===c[e].status&&(c[e].status="#008000"),a.callerStatsGraphColors.push(c[e].status),d.push(parseInt(c[e].apptCount)),console.log("callerCallCount",d),console.log(c[e].update_ts));a.callerCallCountSeries.push(Ea),console.log(JSON.stringify(a.callerStatsGraphColors)),a.datasetOverride=[{fill:!0,backgroundColor:a.callerStatsGraphColors}],a.callerCallCountSeries=["Call Count"],console.log("$scope.callerCallCountSeries",a.callerCallCountSeries),a.callerCallCountData.push(d)},function(b){a.callerListErrorMsg=b.data.message}),setTimeout(Y,3e5),a.callerStatsGraphColors=[];var c=[];a.callerNamesData=[];var d=[];a.callerCallCountData=[]}function Z(b){a.loading=!0,a.loadingMapping=!0;var c=f.getToken(ba);console.log(JSON.stringify(b)),A.save({id:ba,token:c},b,function(b){console.log("csv upload resp",b),e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}function _(b){a.loading=!0,a.loadingMapping=!0;var c=f.getToken(ba);console.log(JSON.stringify(b)),B.save({id:ba,token:c},b,function(b){e.alert(b.message),F(fa,ga,ia,ja,ka),a.loading=!1,a.loadingMapping=!1},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,e.alert(b.data.error)})}var aa=c.get("loggedInUserId"),ba=c.get("loggedInUserScId"),ca=c.get("loggedInUserBikeBrand"),da=c.get("loggedInVersionCode"),ea=c.get("csvFileUploadStatus");a.csvStatus=!0,"Yes"===ea?ea=!0:"No"===ea&&(ea=!1),a.csvUploadStatus=ea,a.adminUserIdUtility=ba,a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)},a.getSubOption=function(a){alert(a)};var fa="month",ga="month",ha="submit",ia="branch",ja="datatype",ka="caller",la="status",ma="noStatus",na="feedback";F(fa,ga,ia,ja,ka),a.teleCallingDataByDate=function(a,b){"export"===b&&(ha="export"),fa=a.selectedFromDate,ga=a.selectedToDate,fa>ga?e.alert("To Date should be greater than From Date"):(fa=fa.getFullYear()+"-"+(fa.getMonth()+1)+"-"+fa.getDate(),ga=ga.getFullYear()+"-"+(ga.getMonth()+1)+"-"+ga.getDate(),fa=fa,ga=ga,ia=a.selectedServiceCenter,ja=a.selectedDataType,ka=a.selectedCaller,F(fa,ga,a.selectedServiceCenter,a.selectedDataType,a.selectedCaller))},d.tcAppointmentSearch=function(b){if(b){a.loading=!0;var c=f.getToken(ba);n.query({key:b,id:ba,token:c},function(b){a.tcAdminStatsGrid.data=b;for(var c=0;c<a.tcAdminStatsGrid.data.length;c++)void 0!==a.tcAdminStatsGrid.data[c].serviceDueType&&null!==a.tcAdminStatsGrid.data[c].serviceDueType&&""!==a.tcAdminStatsGrid.data[c].serviceDueType||(a.tcAdminStatsGrid.data[c].serviceDueType="NA"),void 0!==a.tcAdminStatsGrid.data[c].apptStatus&&null!==a.tcAdminStatsGrid.data[c].apptStatus&&""!==a.tcAdminStatsGrid.data[c].apptStatus||(a.tcAdminStatsGrid.data[c].apptStatus="NA"),void 0!==a.tcAdminStatsGrid.data[c].serviceDueDate&&null!==a.tcAdminStatsGrid.data[c].serviceDueDate&&""!==a.tcAdminStatsGrid.data[c].serviceDueDate||(a.tcAdminStatsGrid.data[c].serviceDueDate="NA"),void 0!==a.tcAdminStatsGrid.data[c].apptSubStatus&&null!==a.tcAdminStatsGrid.data[c].apptSubStatus&&""!==a.tcAdminStatsGrid.data[c].apptSubStatus||(a.tcAdminStatsGrid.data[c].apptSubStatus="NA");a.appointmentDataErrorMsg="",a.loading=!1},function(b){a.appointmentDataErrorMsg=b.data.message,a.loading=!1,a.tcAdminStatsGrid.data=[]})}},G(fa,ga,la,ma,ia,ja,ka,ha,na),a.getDueTypeDetailedList=function(a){G(fa,ga,la,a,ia,ja,ka,ha,na)},a.dismissAppointmentDueTypePage=function(){a.dueTypeAppointmentStatus=!1};var oa;a.getTcAdminStatsStatusDetail=function(a){console.log("status :  :",Array.isArray(a)),!0===Array.isArray(a)?(console.log("status graph :  :",a[0]._model.label),oa=a[0]._model.label,"Free Converted Count"===oa?la="freeConvertedCount":"Paid Converted Count"===oa?la="paidConvertedCount":"Free Service Count"===oa?la="freeScCount":"Paid Service Count"===oa?la="paidScCount":"Unaddressed Issue"===oa?(la="SC Complaint",ma="Unaddressed Issue"):"Non Responsive Service Team"===oa?(la="SC Complaint",ma="Non Responsive Service Team"):"Water Wash Complaints"===oa?(la="SC Complaint",ma="Water Wash Complaints"):"Uninformed Parts Changed"===oa&&(la="SC Complaint",ma="Uninformed Parts Changed")):!1===Array.isArray(a)&&(la=a),G(fa,ga,la,ma,ia,ja,ka,ha,na)},J(),K(),L(),M(),a.tcAdminStatsGrid={paginationPageSizes:[25,50,75],paginationPageSize:25,enableFiltering:!0,enableColumnResizing:!0,enableSorting:!0,columnDefs:[{name:"slNo",displayName:"Sl No.",width:80},{name:"customer_name",displayName:"Customer Name"},{name:"customer_mobile",displayName:"Mobile"},{name:"serviceDueType",displayName:"Service Type"},{name:"serviceDueDate",displayName:"Date/Time"},{name:"apptStatus",displayName:"Status"},{name:"apptSubStatus",displayName:"Sub Status"},{name:"record",displayName:"Call Record",cellTemplate:'<div><center><button class="btn btn-primary btn-sm" style="background-color: #0083ca;color:#FFFFFF;border-radius: 15px;padding: 0px 25px 0px 25px;outline:0;border:none !important;" ng-click="grid.appScope.getCallRecord(row)">View</button></center></div>',width:170}]},a.getCallRecord=function(a){N(a.entity),O(a.entity.chassisNo,a.entity.dataTypeId),$("#callRecordModal").modal()},a.viewCallRecord=function(a){e.open(a.recordingUrl,"_blank")};var pa,qa,ra,sa;a.getSelectedServiceCenter=function(a){console.log(a),pa=a},P(ca),a.getSelectedBikeType=function(a){qa=a,console.log(a)},a.getSelectedAMCCount=function(a){ra=a,console.log(a)},a.getSelectedValidMonth=function(a){sa=a,console.log(a)};var ta,ua;a.getSelectedDataType=function(b,c){ta=b,ua=c,console.log(ua),console.log(ta),a.selectedDataType=ta,a.selectedDataTypeDesc=ua,a.selectedDataTypeIdForUpload=b,console.log(ua)},a.getSelectedDataTypeForCsv=function(b,c){a.csvStatus="Service Reminder"!==c&&"Service Remainder"!==c&&"Job Card Data"!==c,ta=b,ua=c,console.log(ua),console.log(ta),a.selectedDataType=ta,a.selectedDataTypeDesc=ua,a.selectedDataTypeIdForUpload=b,console.log(ua)};var va;$(function(){va=document.getElementById("teleCallingSMSXlFileInput"),va.addEventListener&&va.addEventListener("change",Q,!1)});var wa,xa,ya,za,Aa=[];$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),a.dateFormat=["yyyy/mm/dd","mm/dd/yyyy"];var Ba;a.mapUplodedData=function(b){if(Ba=b.serviceDueDate,b){var c=[];if(!0===X()){for(var d=0;d<wa.length;d++){ya=!1;var f={},g={},h={},i={};f.model=wa[d][b.model],f.chassisNo=wa[d][b.chassisNo],f.registrationNo=wa[d][b.regNo],f.customerName=wa[d][b.customerName],f.addressDetail=wa[d][b.address],f.mobile=wa[d][b.mobile],f.presentServiceDueType=wa[d][b.serviceDueType],f.serviceAvailedAt=wa[d][b.serviceAvailedAt],f.lastServiceType=wa[d][b.lastServiceType],f.lastServiceKM=wa[d][b.lastServiceKm],f.dateOfSale=wa[d][b.dateOfSale],f.lastServiceDate=wa[d][b.lastServiceDate],"4"===ta?f.presentServiceDueDate=wa[d][b.serviceDate]:"4"!==ta&&(f.presentServiceDueDate=wa[d][b.serviceDueDate]),f.serviceAvailedDate=wa[d][b.serviceAvailedDate],f.dateFormat=b.dateFormat,f.version=da,f.amcCount=ra,f.validMonth=sa,f.dealerId=ba,f.logInId=aa,f.branchId=pa,f.dataTypeId=ta,g.registrationNo=wa[d][b.regNo],g.customerName=wa[d][b.customerName],g.mobile=wa[d][b.mobile],g.dealerId=ba,g.branchId=pa,g.chassisNo=wa[d][b.chassisNo],g.jobCardDate=wa[d][b.serviceDate],g.bikeModel=wa[d][b.bikeModel],g.serviceType=wa[d][b.serviceType],g.bikeBrand=ca,g.dateFormat=b.dateFormat,g.version=da,h.model=wa[d][b.model],h.dateOfSale=wa[d][b.dateOfSale],h.registrationNo=wa[d][b.regNo],h.customerName=wa[d][b.customerName],h.mobile=wa[d][b.mobile],h.addressDetail=wa[d][b.address],h.dealerId=ba,h.branchId=pa,h.logInId=aa,h.chassisNo=wa[d][b.chassisNo],h.bikeType=qa,h.dataTypeId=ta,h.dateFormat=b.dateFormat,h.version=da,i.model=wa[d][b.model],i.dateOfSale=wa[d][b.dateOfSale],i.customerName=wa[d][b.customerName],i.mobile=wa[d][b.mobile],i.addressDetail=wa[d][b.address],i.dealerId=ba,i.branchId=pa,i.logInId=aa,i.chassisNo=wa[d][b.chassisNo],i.dataTypeId=ta,i.dateFormat=b.dateFormat,i.version=da,"3"!==ta&&"5"!==ta&&"Service Reminder"!==ua&&"Service Remainder"!==ua&&"Sales FeedBack"!==ua?c.push(f):"3"===ta?c.push(g):"Service Reminder"===ua||"Service Remainder"===ua?c.push(h):"Sales FeedBack"===ua?c.push(i):"5"===ta&&c.push(f)}a.csvUploadStatus||("3"!==ta&&"5"!==ta&&"Service Reminder"!==ua&&"Service Remainder"!==ua&&"Sales FeedBack"!==ua?R(c):"3"===ta?S(c):"Service Reminder"===ua||"Service Remainder"===ua?T(c):"Sales FeedBack"===ua?U(c):"5"===ta&&V(c)),a.csvUploadStatus&&"3"!==ta&&"5"!==ta&&"Service Reminder"!==ua&&"Service Remainder"!==ua&&"Sales FeedBack"!==ua&&W(c)}else a.loading=!1,e.alert(xa),e.location.reload()}},Array.prototype.containsArray=function(a){var b,c;return arguments[1]?(b=arguments[1],c=arguments[2]):(b=0,c=0,this.sort(),a.sort()),b===a.length||(c=this.indexOf(a[b],c))>-1&&this.containsArray(a,++b,++c)};var Ca=[];a.jobcardMonthData=[];var Da=[];a.jobcardCountData=[],a.getTCJobcardData=function(b){Da=[],a.jobcardMonthData=[],a.jobcardCountData=[],null===b&&(b="sc"),console.log("selectedBranchId",b);var c=f.getToken(ba);s.query({scId:ba,branchId:b,token:c},function(b){console.log("jobcard list",b),Ca=b;for(var c=0;c<Ca.length;c++)null!==Ca[c]&&(a.jobcardMonthData.push(Ca[c].month),Da.push(parseInt(Ca[c].count)));a.jobcardCountData.push(Da),a.jobcardSeries=["Count "]},function(b){a.callerListErrorMsg=b.data.message})},a.getTCJobcardData("sc"),a.callerStatsGraphColors=[];a.callerNamesData=[];a.callerCallCountData=[];var Ea=[];a.updatedTime=[],a.callerCallCountSeries=[],Y(),a.chartParamsCallerStats={options:{scales:{yAxes:[{id:"y-axis-1",ticks:{beginAtZero:!0,min:0}}]}}},a.dismissFeedbackPage=function(){a.feedbackDetailStatus=!1},a.getFeedbackList=function(a,b){la=a,na=b,G(fa,ga,la,ma,ia,ja,ka,ha,na)},a.amcCounts=[{count:"1"},{count:"2"},{count:"3"}],a.validMonths=[{id:"1",month:"Jan"},{id:"2",month:"Feb"},{id:"3",month:"March"},{id:"4",month:"April"},{id:"5",month:"May"},{id:"6",month:"June"},{id:"7",month:"July"},{id:"8",month:"August"},{id:"9",month:"Sept"},{id:"10",month:"Oct"},{id:"11",month:"Nov"},{id:"12",month:"Dec"}],a.csvFileRequest={};var Fa={};a.uploadCsvFile=function(b){console.log("File Path : ",b),Fa={dealerId:ba,logInId:aa,branchId:pa,dataTypeId:ta,version:da,bikeType:qa,brandName:ca,filePath:b},console.log("csv File Object",JSON.stringify(Fa)),"Service Reminder"===ua||"Service Remainder"===ua?(a.csvFileRequest={},a.selectedServiceCenterForUpload=null,a.selectedDataTypeDesc=void 0,Z(Fa)):"3"===ta&&(a.csvFileRequest={},a.selectedServiceCenterForUpload=null,a.selectedDataTypeDesc=void 0,_(Fa))}}]),angular.module("letsService").controller("TCManageController",["$scope","$window","$http","$cookies","$timeout","$state","TokenService","CreateTeleCallerService","TeleCallerWiseServiceCenterService","GetCallerService","ManageCallerService","AssignCallerService","TeleCallerStatusService","TeleCallerDataTypeService","GetScWiseTeleCallerService","UpdateTelecallingTargetService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){var b=g.getToken(y);i.query({id:y,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function r(){var b=g.getToken(y);j.query({scId:y,token:b},function(b){a.saasCaller=b},function(a){console.log(a)})}function s(){var b=g.getToken(y);m.query({id:y,token:b},function(b){a.teleCallingStatus=[],console.log(b),angular.forEach(b,function(c,d){"Status Not Changed"!==b[d].description&&a.teleCallingStatus.push(b[d])}),console.log(JSON.stringify(a.teleCallingStatus))},function(b){a.statusErrorMsg=b.data.message})}function t(c){a.loading=!0;var d=g.getToken(y);p.save({id:y,token:d},c,function(c){b.alert(c.message),a.updateTelecallerTargetMsg=c.message,a.loading=!1},function(b){a.updateTelecallerTargetErrorMsg=b.data.message})}function u(){var b=g.getToken(y);i.query({id:y,token:b},function(b){angular.forEach(b,function(b){a.teleCallerServiceCenterData.push({id:b.scId,label:b.scName})})},function(b){a.serviceCenterErrorMsg=b.data.message})}function v(){var b=g.getToken(y);n.query({id:y,token:b},function(b){angular.forEach(b,function(b){a.teleCallerDataTypeData.push({id:b.dataTypeId,label:b.description})})},function(b){a.datatypeErrorMsg=b.data.message})}function w(){var b=g.getToken(y);o.query({id:y,token:b},function(b){a.callerList=b,console.log("callerList",b),angular.forEach(b,function(b){a.teleCallerDataCallerData.push({id:b.loginId,label:b.username,slNo:b.slNo})})},function(b){a.callerListErrorMsg=b.data.message})}var x=d.get("loggedInUserId"),y=d.get("loggedInUserScId"),z=d.get("loggedInUserRole");q(),a.createTeleCaller=function(b){a.callerCreateMsg="",a.callerCreateErrorMsg="";for(var c=g.getToken(y),d=[],f=b.selectedServiceCenter,i=0;i<f.length;i++)d.push(f[i]);var j={username:b.username,password:b.password,mobile:b.mobile,role:z,adminId:x,branchIds:d.toString(),scId:y};console.log(j),a.createTellecaller={},a.createTelecallerForm.$setPristine(),a.callerCreateMsg=!1,h.save({id:y,token:c},j,function(b){a.callerCreateMessageAlert=!1,a.callerCreateErrorMessageAlert=!1,console.log(b),a.callerCreateMsg=" Username : "+b.Username+"   Password : "+b.Password,a.callerCreateErrorMsg="",e(function(){a.callerCreateMessageAlert=!0},3e3)},function(b){console.log(b),a.callerCreateErrorMsg=b.data.message,e(function(){a.callerCreateErrorMessageAlert=!0},3e3)})},r(),a.updateCallerStatus=function(a){var c,d;if("active"===a.status?(c="inactive",d="Are you sure you want to deactivate caller "+a.username):"inactive"===a.status&&(c="active",d="Are you sure you want to activate caller "+a.username),b.confirm(d)){var e={status:c,callerId:a.loginId,adminId:x,scId:y},f=parseInt(100*Math.random()),h=g.getToken(f);k.save({id:f,token:h},e,function(a){b.alert(a.message),r()},function(a){console.log(a)})}},a.assignCallerStatus=function(a){var c={callerId:a.loginId,logInId:x,walkInCount:a.walkInCount,pickAndDropCount:a.pickAndDropCount,scId:y},d=g.getToken(y);l.save({id:y,token:d},c,function(a){b.alert(a.message),r()},function(a){console.log(a)})},a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)},s();a.teleCallingAssignTarget=function(a){var b={adminId:x,branchId:A.toString(),dataTypeId:B.toString(),callerId:C.toString(),scId:y};console.log(JSON.stringify(b)),t(b)},a.teleCallerServiceCenterData=[],a.manageServiceCenterSettings={displayProp:"label"},u();var A=[];a.updateTCServiceCenter={onItemSelect:function(a){A.push(parseInt(a.id))},onItemDeselect:function(a){var b=A.indexOf(parseInt(a.id));A.splice(b,1)}},a.resetAssignServiceCenter=function(){a.manageServiceCenter=[],A=[]},a.resetAssignServiceCenter(),a.teleCallerDataTypeData=[],a.manageDataTypeSettings={displayProp:"label"},v();var B=[];a.updateTCDataType={onItemSelect:function(a){B.push(parseInt(a.id))},onItemDeselect:function(a){var b=B.indexOf(parseInt(a.id));B.splice(b,1)}},a.resetAssignDataType=function(){a.manageDataType=[],B=[]},a.resetAssignDataType(),a.teleCallerDataCallerData=[],a.manageCallerSettings={displayProp:"label"};var C=[];w(),a.updateTCCaller={onItemSelect:function(a){C.push(parseInt(a.id))},onItemDeselect:function(a){var b=C.indexOf(parseInt(a.id));C.splice(b,1)}},a.resetAssignCaller=function(){a.manageCaller=[],C=[]},a.resetAssignCaller(),a.deAssignCallingData=function(){var a={adminId:x,branchId:A.toString(),dataTypeId:B.toString(),callerId:C.toString(),scId:y};console.log(JSON.stringify(a))}}]),angular.module("letsService").controller("SMSController",["$scope","$timeout","$filter","serviceURL","$cookies","GetScSMSStatsService","$window","TokenService","SendSMSService","TeleCallingSMSPackageService","TeleCallingSMSPricingService","GetSMSHistoryService","GetSuperAdminDealerListService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){a.loading=!0;var b=h.getToken(u);f.get({scId:u,token:b},function(b){a.scSMSStats=b,a.loading=!1},function(b){a.loading=!1,console.log(b)})}function o(a){g.alert(a)}function p(b){
!0===(A=g.confirm("Are you sure this is the file you want to upload?"))||(a.loading=!1,console.log("File Cancelled!"),$('input[type="file"]').val(null));var d=b.target.files[0];".xls"!==d.name.substr(-4)&&g.alert("Only .xls file format is allowed");var e=new FileReader;e.onload=function(b){var d=b.target.result,e=XLS.CFB.read(d,{type:"binary"}),f=XLS.parse_xlscfb(e);f.SheetNames.forEach(function(b){var d=XLS.utils.sheet_to_row_object_array(f.Sheets[b]);if(d.length>0){w=d;if(!0===q()){w=c("unique")(w,"mobile");for(var e=0;e<w.length;e++){z=!1;var h={};h=w[e].mobile,B.push(h)}a.validateMobileNumber(B.toString())}else g.alert(y),g.location.reload()}})},e.readAsBinaryString(d)}function q(){angular.forEach(w,function(a){angular.forEach(a,function(b,c){delete a[c],a[c.replace(/\s/g,"").toLowerCase()]=b.trim()})});if(void 0!==w||null!==w||w!==[])for(var a=0;a<w.length;a++){Object.keys(w[a])}console.log("mobile numbers : ",JSON.stringify(w));for(var b=0;b<w.length;b++){var c=w[b];if(r(c.mobile))return x=b+1,y=" Some mandatory fields are empty in your sheet at row "+(x+1)+" .",!1;if(10!==c.mobile.length||!/^\d+$/.test(c.mobile))return x=b+1,y=" Kindly enter a 10 digit valid mobile number at row "+(x+1)+" .",!1}return!0}function r(a){return console.log(a),a&&void 0!==a||g.alert("Empty row/column in the sheet."),null===a||!a.trim()}function s(){var b=h.getToken(t);m.query({logInId:t,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}var t=e.get("loggedInUserId"),u=e.get("loggedInUserScId");n(),a.sendSCSMS=function(c){a.loading=!0;var d={scId:e.get("loggedInUserScId"),logInId:e.get("loggedInUserId"),mobileNumber:c.mobileNumber,message:c.message,charCount:c.message.length};a.scSMS={},a.sendSMSForm.$setPristine(),console.log(JSON.stringify(d));var f=parseInt(100*Math.random()),j=h.getToken(f);i.save({id:f,token:j},d,function(b){console.log(b),a.loading=!1,n()},function(b){console.log(b),o(b.data.message),a.loading=!1}),b(function(){g.alert("SMSs are sending successfully..It will be reflect in SMS History soon.!"),a.loading=!1},3e3)},a.validateMobileNumber=function(b){a.scSMS={mobileNumber:b};var c=b.split(","),d=!0;angular.forEach(c,function(a){if(d){if(/^\d+$/.test(a)){10===a.length||(d=!1,o("Kindly enter 10 digit mobile number"))}else d=!1,o("Kindly enter multiple 10 digit mobile number comma separated.")}})};var v;$(function(){v=document.getElementById("teleCallingSMSXlFileInput"),v.addEventListener&&v.addEventListener("change",p,!1)});var w,x,y,z,A,B=[];Array.prototype.containsArray=function(a){var b,c;return arguments[1]?(b=arguments[1],c=arguments[2]):(b=0,c=0,this.sort(),a.sort()),b===a.length||(c=this.indexOf(a[b],c))>-1&&this.containsArray(a,++b,++c)},s(),a.getSelectedDealer=function(a){console.log(a),u=a,n()}}]),angular.module("letsService").controller("TCStatusController",["$scope","$window","$cookies","TokenService","TeleCallerWiseServiceCenterService","GetScWiseTeleCallerService","TeleCallerReasonService","TeleCallerStatusService","TeleCallerStatusDataService","serviceURL","GetSuperAdminDealerListService",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=d.getToken(p);e.query({id:p,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function m(){var b=d.getToken(p);f.query({id:p,token:b},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}function n(){var b=d.getToken(o);k.query({logInId:o,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}var o=c.get("loggedInUserId"),p=c.get("loggedInUserScId");c.get("loggedInUserRole");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)};var q="report";a.reportTypes=[{key:"serviceduedate",description:"Service Due Date"},{key:"calldate",description:"Call Date"},{key:"rescheduledate",description:"Rescheduled Date"},{key:"jobcardDate",description:"Jobcard Date"},{key:"overduedate",description:"Over Due Date"}],a.teleCallingStatus=[{key:"walkin",description:"Walkin"},{key:"pickup and drop",description:"Pickup And Drop"},{key:"call later",description:"Call Later"},{key:"not interested",description:"Not Interested"},{key:"service done",description:"Service Done"},{key:"insurance",description:"Insurance"},{key:"job card",description:"Jobcard"},{key:"non converted",description:"Non Converted"},{key:"Service PSF",description:"Service PSF"},{key:"Sales PSF",description:"Sales PSF"},{key:"other dealership customers",description:"Other Dealership Customers"},{key:"own dealership customers",description:"Own Dealership Customers"},{key:"conversions",description:"Caller Conversion"},{key:"All",description:"All"}],a.getSubStatus=function(b){a.teleCallingSubStatus=[],a.selectedStatusDesc=b,"Sales PSF"===b?a.psfTypes=[{key:"feedback",description:"Feedback"},{key:"walkin",description:"Walkin"},{key:"call later",description:"Call Later"},{key:"not interested",description:"Not Interested"},{key:"all",description:"All"}]:"Service PSF"===b&&(a.psfTypes=[{key:"feedback",description:"Feedback"},{key:"walkin",description:"Walkin"},{key:"pickup and drop",description:"Pickup And Drop"},{key:"call later",description:"Call Later"},{key:"not interested",description:"Not Interested"},{key:"all",description:"All"}]),a.teleCallingSubStatus=[];var c=d.getToken(p);g.query({status:b,id:p,token:c},function(b){a.teleCallingSubStatus=b},function(a){console.log(a)})},l(),m();var r="status",s="subStatus",t="branch",u="caller";a.getReportType=function(b){a.selectedType=b,"serviceduedate"===b?a.teleCallingStatus=[{key:"walkin",description:"Walkin"},{key:"pickup and drop",description:"Pickup And Drop"},{key:"call later",description:"Call Later"},{key:"not interested",description:"Not Interested"},{key:"service done",description:"Service Done"},{key:"non converted",description:"Non Converted"},{key:"insurance",description:"Insurance"},{key:"other dealership customers",description:"Other Dealership Customers"},{key:"own dealership customers",description:"Own Dealership Customers"},{key:"All",description:"All"}]:"jobcardDate"===b?a.teleCallingStatus=[{key:"conversions",description:"Caller Conversion"},{key:"job card",description:"Jobcard"}]:"overduedate"===b?r="overdue customers":a.teleCallingStatus=[{key:"walkin",description:"Walkin"},{key:"pickup and drop",description:"Pickup And Drop"},{key:"call later",description:"Call Later"},{key:"not interested",description:"Not Interested"},{key:"service done",description:"Service Done"},{key:"insurance",description:"Insurance"},{key:"non converted",description:"Non Converted"},{key:"Service PSF",description:"Service PSF"},{key:"Sales PSF",description:"Sales PSF"},{key:"other dealership customers",description:"Other Dealership Customers"},{key:"own dealership customers",description:"Own Dealership Customers"},{key:"All",description:"All"}]},a.psfTypes=[{key:"feedback",description:"Feedback"},{key:"walkin",description:"Walkin"},{key:"pickup and drop",description:"Pickup And Drop"},{key:"call later",description:"Call Later"},{key:"not interested",description:"Not Interested"},{key:"all",description:"All"}];var v="";a.getTeleCallerStatusList=function(c){var e=d.getToken(p);if(c.selectedFromDate>c.selectedToDate)b.alert("From Date cannot be greater than To Date");else{q=c.reportType,t=c.selectedServiceCenter||"branch",u=c.selectedCaller||"caller",r=c.selectedStatus||"status",console.log("tcStatusData.selectedPsfType",c.selectedPsfType),"Service PSF"===c.selectedStatus?(v="-servicepsf",c.selectedPsfType?r=c.selectedPsfType:v=""):"Sales PSF"===c.selectedStatus?(v="-salespsf",c.selectedPsfType?r=c.selectedPsfType:v=""):v="",s=c.selectedSubStatus||"subStatus","overduedate"===a.selectedType&&(r="overdue customers");var f=c.selectedFromDate.getFullYear()+"-"+("0"+(c.selectedFromDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedFromDate.getDate()).slice(-2),g=c.selectedToDate.getFullYear()+"-"+("0"+(c.selectedToDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedToDate.getDate()).slice(-2);console.log(j+"lsConnectReports/"+f+"/"+g+"/"+r+v+"/"+s+"/"+t+"/"+u+"/"+p+"/"+q+"/"+e),b.open(j+"lsConnectReports/"+f+"/"+g+"/"+r+v+"/"+s+"/"+t+"/"+u+"/"+p+"/"+q+"/"+e)}},a.getPsfType=function(b){a.teleCallingSubStatus=[];var c=d.getToken(p);g.query({status:b,id:p,token:c},function(b){a.teleCallingSubStatus=b,console.log("teleCallingSubStatus",b)},function(a){console.log(a)})},a.MTDReports=[{name:"Service Center Complaint Customers",key:"mtdsccomplaints"},{name:"Appointment Taken",key:"mtdappointments"},{name:"Call Later",key:"mtdcalllater"},{name:"Jobcard Data",key:"mtdjobcard"},{name:"Conversions",key:"mtdconversion"},{name:"Pending Calls (Service Reminder)",key:"mtdpendingcalls"}],a.otherReports=[{name:"Today Appointments",key:"todayappts"},{name:"Today Call Later",key:"todaycalllater"},{name:"Today Service Center Complaint",key:"todaysccomplaints"},{name:"Today Jobcard Data",key:"todayjobcard"},{name:"Tomorrow Appointments",key:"tmrwappts"}];var w="month",x="month",y="subStatus",z="caller",A="branch";a.getMtdReport=function(c){A="branch",z="caller",q="report",A=c.selectedBranch||"branch",z=c.selectedCaller||"caller",console.log("selected report type",c);var e=d.getToken(p);console.log(j+"lsConnectReports/"+w+"/"+x+"/"+c.selectedType+"/"+y+"/"+A+"/"+z+"/"+p+"/"+q+"/"+e),b.open(j+"lsConnectReports/"+w+"/"+x+"/"+c.selectedType+"/"+y+"/"+A+"/"+z+"/"+p+"/"+q+"/"+e),a.reportType={},a.mtdReportsForm.$setPristine()},a.getOtherReport=function(a){q="report",console.log("selected report type",a);var c=d.getToken(p);console.log(j+"lsConnectReports/"+w+"/"+x+"/"+a.selectedType+"/"+y+"/"+a.selectedBranch+"/"+z+"/"+p+"/"+q+"/"+c),b.open(j+"lsConnectReports/"+w+"/"+x+"/"+a.selectedType+"/"+y+"/"+a.selectedBranch+"/"+z+"/"+p+"/"+q+"/"+c)},n(),a.getSelectedDealer=function(a){u="caller",t="branch",console.log(a),p=a,l(),m()},a.getCallerList=function(a){"mtdpendingcalls"===a&&m()}}]),angular.module("letsService").controller("TeleCallerStatusController",["$scope","$window","$cookies","TokenService","TeleCallerStatusDataService",function(a,b,c,d,e){var f=(c.get("loggedInUserId"),c.get("loggedInUserScId"));c.get("loggedInUserRole");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)},a.getTeleCallerStatusDataByDate=function(c){a.loading=!0;var g=d.getToken(f);if(c.selectedFromDate>c.selectedToDate)b.alert("From Date cannot be greater than To Date");else{var h=c.selectedFromDate.getFullYear()+"-"+("0"+(c.selectedFromDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedFromDate.getDate()).slice(-2),i=c.selectedToDate.getFullYear()+"-"+("0"+(c.selectedToDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedToDate.getDate()).slice(-2);e.query({fromDate:h,toDate:i,id:f,token:g},function(b){a.teleCallerStatusData=b,a.loading=!1,console.log(b)},function(b){a.loading=!1,a.teleCallerStatusErrorData=b.data.message})}}}]),angular.module("letsService").controller("TCUploadHistoryController",["$scope","$window","$filter","$rootScope","ngTableParams","$cookies","TokenService","GetUploadHistoryService",function(a,b,c,d,e,f,g,h){function i(){a.loading=!0;var b=f.get("loggedInUserScId"),c=g.getToken(b);h.query({scId:b,token:c},function(b){a.creTableData=b,a.tableParams.reload(),console.log("uploadHistoy",b),a.loading=!1},function(b){a.creTableData=[],a.uploadHistoryErrorMsg=b.data.message,console.log(b),a.loading=!1})}function j(b){a.tableParams.page(b),a.tableParams.reload()}function k(b){a.tableParams.count(b)}function l(b){0===b.indexOf(a.tableParams.count())&&(b.push(a.tableParams.count()),b.sort()),a.tableParams.settings({counts:b})}var m=f.get("csvFileUploadStatus");a.creTableData=[],i(),"caller"!==d.signedInUserRole&&("Yes"===m?(a.uploadLead=!0,a.failLead=!0):"No"===m&&(a.uploadLead=!1,a.failLead=!0)),"caller"===d.signedInUserRole&&(a.uploadLead=!1,a.failLead=!0),a.tableParams=new e({page:1,count:20},{total:a.creTableData.length,getData:function(b,d){var e=d.sorting()?c("orderBy")(a.creTableData,d.orderBy()):a.creTableData;e=d.filter()?c("filter")(e,d.filter()):e,a.orderedData=e,d.total(e.length),b.resolve(a.users=e.slice((d.page()-1)*d.count(),d.page()*d.count()))}},{counts:[10,20]}),a.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=a.tableParams.settings().counts,a.changePage=j,a.changePageSize=k,a.changePageSizes=l,a.exportUploadHistory=function(a){console.log(a),null!==a.filePath&&void 0!==a.filePath&&""!==a.filePath||b.alert("No Data Available..!"),b.open(a.filePath,"_blank")},a.exportUploadFailedHistory=function(a){console.log(a),null!==a.summaryFile&&void 0!==a.summaryFile&&""!==a.summaryFile||b.alert("No Data Available..!"),b.open(a.summaryFile,"_blank")}}]),angular.module("letsService").controller("TCHourWiseStatusController",["$scope","$window","$cookies","TokenService","GetScWiseTeleCallerService","TeleCallerHourWiseDataService","TeleCallerDataTypeStatsService",function(a,b,c,d,e,f,g){function h(){var b=d.getToken(j);e.query({id:j,token:b},function(b){console.log("caller list",b),a.callerList=b,a.callerList.values=a.callerList},function(b){a.callerListErrorMsg=b.data.message})}function i(b,c){"today"!==b?l=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2):"today"===b&&(l=b),"caller"!==c?k=c.loginId:"caller"===c&&(k=c);var e=d.getToken(j);g.query({fromDate:l,toDate:l,scId:j,callerId:k,token:e},function(b){console.log("data Type Stats",b),a.dataTypeStats=b,a.dataTypeStatsErrorMsg=""},function(b){a.dataTypeStatsErrorMsg=b.data.message,a.dataTypeStats=[]})}var j=c.get("loggedInUserScId");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)};var k=(d.getToken(j),"caller"),l="today";h(),i(l,k),a.selectedCallerName="",a.getCallerNmae=function(b){a.selectedCallerName=b};var m=[];a.calStatsSeries=["  Total Calls ","  Connected Calls "],a.calStatsColors=["#FF0000","#008000"],a.callsCountData=[],a.hourLables=[],a.getHourWiseTeleCallerData=function(b,c){a.callsCountData=[],a.hourLables=[];var e=[],g=[];i(b,c),"caller"!==c?k=c.loginId:"caller"===c&&(k=c),a.loading=!0,"today"!==b?l=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2):"today"===b&&(l=b);var h=d.getToken(j);f.get({date:l,scId:j,callerId:k,token:h},function(b){m=b,console.log("Hour wise data :",b);for(var c=0;c<m.callsAttempted.length;c++)null!==m.callsAttempted[c]&&(e.push(parseInt(m.callsAttempted[c].callsAttempted)),a.hourLables.push(m.callsAttempted[c].Hour));for(var d=0;d<m.callsConnected.length;d++)null!==m.callsConnected[d]&&g.push(parseInt(m.callsConnected[d].callsConnected));a.callsCountData.push(e),a.callsCountData.push(g),console.log("calls Count Data",JSON.stringify(a.callsCountData)),console.log("hourLables",JSON.stringify(a.hourLables)),a.tcHourWiseDataErrorMsg="",a.loading=!1},function(b){a.tcHourWiseDataErrorMsg=b.data.message,console.log(b),a.loading=!1})},a.getHourWiseTeleCallerData(l,k),a.options={legend:{display:!0}}}]),angular.module("letsService").controller("TCAssignHistoryController",["$scope","$window","$cookies","ngTableParams","$filter","TokenService","GetAssignHistoryService",function(a,b,c,d,e,f,g){function h(){a.loading=!0;var b=c.get("loggedInUserScId"),d=f.getToken(b);g.query({scId:b,token:d},function(b){a.creTableData=b,a.tableParams.reload(),console.log("assignHistoy",b),a.loading=!1},function(b){a.creTableData=[],a.assignHistoryErrorMsg=b.data.message,console.log(b),a.loading=!1})}function i(b){a.tableParams.page(b),a.tableParams.reload()}function j(b){a.tableParams.count(b)}function k(b){0===b.indexOf(a.tableParams.count())&&(b.push(a.tableParams.count()),b.sort()),a.tableParams.settings({counts:b})}a.creTableData=[],h(),a.tableParams=new d({page:1,count:20},{total:a.creTableData.length,getData:function(b,c){var d=c.sorting()?e("orderBy")(a.creTableData,c.orderBy()):a.creTableData;d=c.filter()?e("filter")(d,c.filter()):d,a.orderedData=d,c.total(d.length),b.resolve(a.users=d.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),a.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=a.tableParams.settings().counts,a.changePage=i,a.changePageSize=j,a.changePageSizes=k}]),angular.module("letsService").controller("SMSHistoryController",["$scope","$timeout","$cookies","$filter","ngTableParams","serviceURL","$window","TokenService","GetSMSHistoryService",function(a,b,c,d,e,f,g,h,i){function j(b){a.loading=!0;var d=c.get("loggedInUserScId"),e=h.getToken(d);i.query({scId:d,export:b,fromDate:n,toDate:o,token:e},function(b){a.smsHistoryErrorMsg="",a.creTableData=b,a.tableParams.reload(),console.log("smsHistoy",b),a.loading=!1},function(b){a.creTableData=[],a.smsHistoryErrorMsg=b.data.message,console.log(b),a.loading=!1})}function k(b){a.tableParams.page(b),a.tableParams.reload()}function l(b){a.tableParams.count(b)}function m(b){0===b.indexOf(a.tableParams.count())&&(b.push(a.tableParams.count()),b.sort()),a.tableParams.settings({counts:b})}a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var n="fromDate",o="toDate";a.creTableData=[],j("submit"),a.exportSmsHistory=function(a){var b=c.get("loggedInUserScId"),d=h.getToken(b);g.open(f+"get_sent_sms_list/"+b+"/"+a+"/"+n+"/"+o+"/"+d)},a.adminCallerStatsByDate=function(a,b){a>b?g.alert("To Date should be greater than From Date"):(n=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),o=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate()),j("submit")},a.tableParams=new e({page:1,count:20},{total:a.creTableData.length,getData:function(b,c){var e=c.sorting()?d("orderBy")(a.creTableData,c.orderBy()):a.creTableData;e=c.filter()?d("filter")(e,c.filter()):e,a.orderedData=e,c.total(e.length),b.resolve(a.users=e.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),a.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=a.tableParams.settings().counts,a.changePage=k,a.changePageSize=l,a.changePageSizes=m}]),angular.module("letsService").controller("PSFController",["$scope","$window","$rootScope","$filter","ngTableParams","$cookies","TokenService","GetCallerWiseServiceCenterService","PostServiceFeedbackService","serviceURL","TeleCallerPsfDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","GetFeedbackTitleService","FeedBackDataService","TCAppointmentStatusUpdateService","TeleCallerReasonService","TeleCallingSearchService","TeleCallerWiseServiceCenterService","TeleCallingCallService","UpdateTelecallerServiceCenterService","TimeSlotSelected",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){a.loading=!0;var b=g.getToken(D);i.query({callerId:C,scId:D,dataType:I,branchId:G,token:b},function(b){a.psfStats=b[0],a.loading=!1,console.log("psfStats : ",a.psfStats)},function(b){a.loading=!1,a.psfStatsErrorMsg=b.data.message})}function x(){var b=g.getToken(D);s.query({callerId:C,id:D,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function y(){var b=g.getToken(D);h.query({callerId:C,id:D,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function z(a){c.tableParams.page(a),c.tableParams.reload()}function A(a){c.tableParams.count(a)}function B(a){0===a.indexOf(c.tableParams.count())&&(a.push(c.tableParams.count()),a.sort()),c.tableParams.settings({counts:a})}var C=f.get("loggedInUserId"),D=f.get("loggedInUserScId");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var E="fromDate",F="toDate",G="branch",H="freshData",I="PSF Data";a.getSelectedServiceCenter=function(b){console.log(b),G=b,null===b&&(G="branch"),w(),a.getPericularStatsData(H,E,F,G)},w(),x(),y(),a.teleCallingStatus=[{apptStatusId:"3",description:"Call Later",slNo:5},{apptStatusId:"2",description:"Walkin",slNo:6}],a.getFeedbackFilter=function(b){a.feedBackFilter=!!b},a.psfDataByDate=function(c){c.selectedFromDate>c.selectedToDate&&b.alert("From Date cannot be greater than To Date"),E=c.selectedFromDate.getFullYear()+"-"+("0"+(c.selectedFromDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedFromDate.getDate()).slice(-2),F=c.selectedToDate.getFullYear()+"-"+("0"+(c.selectedToDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedToDate.getDate()).slice(-2),G=c.selectedServiceCenter,"Call Later"===c.selectedStatus&&(H="callLater"),"Walkin"===c.selectedStatus&&(H="walkIn"),a.getPericularStatsData(H,E,F,G)},c.defaultStatusFeedback="freshData",a.getPSFDataStatsWise=function(b){H=b,c.defaultStatusFeedback=b,a.getPericularStatsData(H,E,F,G)},c.creTableData=[],c.apptIdList=[],a.getPericularStatsData=function(b,d,e,f){a.loading=!0,E=d,F=e,G=f,H=b;var h=g.getToken(D);console.log(j+H+"/"+C+"/"+D+"/"+E+"/"+F+"/"+G+"/"+I+"/"+h),k.query({status:H,callerId:C,scId:D,fromDate:E,toDate:F,branchId:G,dataType:I,token:h},function(b){console.log(j+H+"/"+C+"/"+D+"/"+E+"/"+F+"/"+G+"/"+I+"/"+h),console.log("PSF table data :",b),c.creTableDataErrorMsg="",c.creTableData=b,angular.forEach(c.creTableData,function(a,b){c.apptIdList.push(c.creTableData[b].apptId)}),console.log("appt Id List",c.apptIdList),c.tableParams.reload(),c.tableParams.page(1),a.loading=!1},function(b){console.log("Error",b),a.loading=!1,c.creTableData=[],c.tableParams.reload(),c.creTableDataErrorMsg=b.data.message})},a.getPericularStatsData(H,E,F,G),c.tableParams=new e({page:1,count:20},{total:c.creTableData.length,getData:function(b,e){var f=e.sorting()?d("orderBy")(c.creTableData,e.orderBy()):c.creTableData;f=e.filter()?d("filter")(f,e.filter()):f,a.orderedData=f,e.total(f.length),b.resolve(a.users=f.slice((e.page()-1)*e.count(),e.page()*e.count()))}},{counts:[10,20]}),c.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=c.tableParams.settings().counts,a.changePage=z,a.changePageSize=A,a.changePageSizes=B}]),angular.module("letsService").controller("FeedbackUpdateController",["$scope","$window","$timeout","$cookies","TokenService","GetFeedbackTitleService","AddFeedbackQuestionService","UpdateFeedbackQuestionService",function(a,b,c,d,e,f,g,h){function i(){a.loading=!0;var b=e.getToken(j);f.query({id:j,token:b},function(b){console.log(b),a.feedbackTitleList=b,a.feedbackTitleListErrorMsg="",a.loading=!1,console.log("feedback",b)},function(b){a.feedbackTitleListErrorMsg=b.data.message,a.feedbackTitleList=[],a.loading=!1,console.log(b)})}var j=d.get("loggedInUserScId");i(),a.clearUpdateFeedbackMsg=function(){a.addFeddbackDescSuccess="",a.feedback={}},a.addFeedbackQuestion=function(b){console.log(b),a.addFeddbackDescSuccess="";var d=e.getToken(j),f={description:b.description,feedBackType:b.feedbackType,feedbackQuestionType:b.feedbackQuestionType,scId:j};console.log(JSON.stringify(f)),g.save({scId:j,token:d},f,function(b){console.log(b),a.addFeddbackDescSuccess=b.message,a.feedback={},a.addFeedbackForm.$setPristine(),i(),c(function(){$("#addFeedbackModal").modal("hide")},3e3),console.log("addFeddbackDesc : ",b)},function(b){console.log(b),a.addFeddbackDescErrorMsg=b.data.message})},a.updateFeedbackMsg=function(b){console.log(b),a.updateFeddbackDescSuccess="",a.feedback={description:b.description,feedBackListId:b.feedBackListId}},a.updateFeedbackQuestion=function(b){a.updateFeddbackDescSuccess="";var d=e.getToken(j),f={description:b.description,feedback_list_id:a.feedback.feedBackListId,scId:j,status:"update"};console.log(JSON.stringify(f)),h.save({scId:j,token:d},f,function(b){console.log("update:-----",b),a.updateFeddbackDescSuccess=b.message,a.feedback={},a.updateFeedbackForm.$setPristine(),i(),c(function(){$("#updateFeedbackModal").modal("hide")},3e3)},function(b){console.log(b),a.updateFeddbackDescErrorMsg=b.data.message})},a.deleteFeedbackMsg=function(a){if(b.confirm("Are you sure to delete the question..?")){var c=e.getToken(j),d={feedback_list_id:a.feedBackListId,scId:j,status:"delete"};console.log(JSON.stringify(d)),h.save({scId:j,token:c},d,function(a){console.log("delete:-----",a),i()},function(a){console.log(a)})}else console.log("Deleting Cancelled")}}]),angular.module("letsService").controller("SalesFeedbackController",["$scope","$window","$filter","$rootScope","ngTableParams","$cookies","TokenService","GetCallerWiseServiceCenterService","TeleCallerStatusService","serviceURL","TeleCallerSalesFeedbackDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","GetFeedbackTitleService","TeleCallerReasonService","FeedBackDataService","TCAppointmentStatusUpdateService","TeleCallingSearchService","PostServiceFeedbackService","TeleCallerPsfDataService","TeleCallerWiseServiceCenterService","TeleCallingCallService","UpdateTelecallerServiceCenterService","TimeSlotSelected",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(){a.loading=!0;var b=g.getToken(F);s.query({callerId:E,scId:F,dataType:K,token:b},function(b){a.psfStats=b[0],a.loading=!1,console.log("psfStats : ",a.psfStats)},function(b){a.loading=!1,a.psfStatsErrorMsg=b.data.message})}function z(){var b=g.getToken(F);u.query({callerId:E,id:F,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function A(){var b=g.getToken(F);h.query({callerId:E,id:F,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function B(b){a.tableParams.page(b),a.tableParams.reload()}function C(b){a.tableParams.count(b)}function D(b){0===b.indexOf(a.tableParams.count())&&(b.push(a.tableParams.count()),b.sort()),a.tableParams.settings({counts:b})}var E=f.get("loggedInUserId"),F=f.get("loggedInUserScId");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var G="fromDate",H="toDate",I="branch",J="freshData",K="Sales Feedback";y(),z(),A(),a.teleCallingStatus=[{apptStatusId:"3",description:"Call Later",slNo:5},{apptStatusId:"2",description:"Walkin",slNo:6}],a.getFeedbackFilter=function(b){a.feedBackFilter=!!b},d.tcAppointmentSearch=function(b){console.log(b),a.loading=!0;var c=g.getToken(F);r.query({key:b,id:F,callerId:E,token:c},function(b){console.log("cre Search Table Data :",b),a.creTableDataErrorMsg="",a.creTableData=b,a.tableParams.reload(),a.loading=!1,a.crePerticularStatsData=!0},function(b){a.crePerticularStatsData=!0,a.creTableData=[],a.tableParams.reload(),a.loading=!1,a.creTableDataErrorMsg=b.data.message})},a.psfDataByDate=function(c){c.selectedFromDate>c.selectedToDate&&b.alert("From Date cannot be greater than To Date"),G=c.selectedFromDate.getFullYear()+"-"+("0"+(c.selectedFromDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedFromDate.getDate()).slice(-2),H=c.selectedToDate.getFullYear()+"-"+("0"+(c.selectedToDate.getMonth()+1)).slice(-2)+"-"+("0"+c.selectedToDate.getDate()).slice(-2),I=c.selectedServiceCenter,"Call Later"===c.selectedStatus&&(J="callLater"),"Walkin"===c.selectedStatus&&(J="walkIn"),a.getPericularStatsData(J,G,H,I)},d.defaultStatusFeedbackSales="freshData",a.getPSFDataStatsWise=function(b){J=b,d.defaultStatusFeedbackSales=b,a.getPericularStatsData(J,G,H,I)},a.creTableData=[],d.apptIdList=[],a.getPericularStatsData=function(b,c,e,f){a.loading=!0,G=c,H=e,I=f,J=b;var h=g.getToken(F);console.log(j+J+"/"+E+"/"+F+"/"+G+"/"+H+"/"+I+"/"+K+"/"+h),t.query({status:J,callerId:E,scId:F,fromDate:G,toDate:H,branchId:I,dataType:K,token:h},function(b){console.log(j+J+"/"+E+"/"+F+"/"+G+"/"+H+"/"+I+"/"+K+"/"+h),console.log("PSF table data :",b),a.creTableDataErrorMsg="",a.creTableData=b,angular.forEach(a.creTableData,function(b,c){d.apptIdList.push(a.creTableData[c].apptId)}),console.log("appt Id List",d.apptIdList),a.tableParams.reload(),a.tableParams.page(1),a.loading=!1},function(b){console.log("Error",b),a.loading=!1,a.creTableData=[],a.tableParams.reload(),a.creTableDataErrorMsg=b.data.message})},a.getPericularStatsData(J,G,H,I),a.tableParams=new e({page:1,count:20},{total:a.creTableData.length,getData:function(b,d){var e=d.sorting()?c("orderBy")(a.creTableData,d.orderBy()):a.creTableData;e=d.filter()?c("filter")(e,d.filter()):e,a.orderedData=e,d.total(e.length),b.resolve(a.users=e.slice((d.page()-1)*d.count(),d.page()*d.count()))}},{counts:[10,20]}),a.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=a.tableParams.settings().counts,a.changePage=B,a.changePageSize=C,a.changePageSizes=D}]),angular.module("letsService").controller("crmDetailedPageController",["$scope","$cookies","$route","$filter","$state","$location","ngTableParams","$rootScope","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCAppointmentStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","FeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","$stateParams","$interval","$timeout","TeleCallerWiseServiceCenterService","SendSMSService","TimeSlotSelected","UpdateCustomerPhoneService","GetPresentHourService","CreAppointmentActiveStatusService","TeleCallerLSHistoryDataService","CreateFutureReminderService","TCInsuranceStatusUpdateService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y){function Z(){U.get(function(a){console.log("present date : ",a),Fa=a.date},function(a){})}function _(){var b=l.getToken(ya);Q.query({id:ya,token:b},function(b){Ha=b,Ha.push({scName:"Others"}),a.serviceCenterListForServiceDone=Ha,console.log("service center for service done",a.serviceCenterListForServiceDone)},function(b){a.serviceCenterErrorMsg=b.data.message})}function aa(){var b=l.getToken(ya);Q.query({callerId:xa,id:ya,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function ba(b,c){a.teleCallingStatusForUpdate=[{id:1,description:"Pickup and Drop"},{id:2,description:"Walkin"},{id:3,description:"Call Later"},{id:4,description:"Not Interested"},{id:6,description:"Service Done"}],ca(!0),a.customerMobileNumbers=[],Ja="";var d=l.getToken(ya);r.query({apptId:b,scId:ya,status:c,callerId:xa,token:d},function(b){console.log("data in detailed page",b[0]),console.log(b),a.tcAppointmentData=b[0],Ka=b[0].callerApptStatus,Oa&&("inactive"===Ka?(La=!0,ha(wa,Ea)):"active"===Ka&&da(Ca,a.tcAppointmentData.apptStatus)),Ma=a.tcAppointmentData.mobile;for(var c=0;c<Ma.length;c++)Ma[c].customer_mobile===a.tcAppointmentData.customer_mobile&&(Ma[c].customer_mobile=Ma[c].customer_mobile+"*",a.currentMobile=Ma[c].customer_mobile),a.customerMobileNumbers.push(Ma[c]);console.log("$scope.currentMobile",a.currentMobile),console.log("tcAppointmentData.mobile",a.customerMobileNumbers),Ia=a.tcAppointmentData.opdId,a.opdIdForPickAndDrop=Ia,Ta=a.tcAppointmentData.opdId,Ua=a.tcAppointmentData.bikeNo,
void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),void 0!==a.tcAppointmentData.insuranceDueDate&&null!==a.tcAppointmentData.insuranceDueDate&&"NA"!==a.tcAppointmentData.insuranceDueDate&&""!==a.tcAppointmentData.insuranceDueDate&&a.teleCallingStatusForUpdate.push({id:7,description:"Insurance Done"},{id:8,description:"Insurance Walkin"}),ea(a.tcAppointmentData.chassisNo),ca(!1),$("#tcAppointmentDetailsPage").show()},function(b){a.tcAppointmentDataErrorMsg=b.data.message,i.alert("Selected data list is completed. Redirecting to Dashboard !!!"),e.go("dashboard"),ca(!1)})}function ca(b){a.loaderIcon=b}function da(a,b){var c=l.getToken(ya),d={status:"inactive",apptId:a,callerId:xa,scId:ya,apptStatus:b};console.log(JSON.stringify(d)),V.save({id:ya,token:c},d,function(a){console.log("Caller Appointment status Inactive..",a)},function(a){console.log(a)})}function ea(b){var c=l.getToken(ya);s.query({chassisNo:b,id:ya,dataTypeId:Na,bikeBrand:Ba,token:c},function(b){console.log("history data :",b),a.tcAppointmentHistoryData=b,a.tcAppointmentHistoryDataErrorMsg="",a.tcAppointmentHistoryData.length?a.noOfTimesCalled=a.tcAppointmentHistoryData.length:a.noOfTimesCalled="0"},function(b){console.log("history error data",b),a.noOfTimesCalled="0",a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function fa(b){console.log("Chassis no",b);var c=l.getToken(ya);t.query({chassisNo:b,id:ya,bikeBrand:Ba,token:c},function(b){console.log("Service history data :",b),a.tcServiceHistoryData=b},function(b){console.log(b),a.tcServiceHistoryDataErrorMsg=b.data.message})}function ga(b){"Insurance Walkin"===b&&(b="Walkin"),a.reasonDescription=[];var c=l.getToken(ya);v.query({status:b,id:ya,token:c},function(b){a.reasonDescription=b,console.log(b),"Walkin"===Pa&&(a.walkinStatus.remarks=a.reasonDescription[0].apptSubStatus,console.log(a.walkinStatus.remarks))},function(a){console.log(a)})}function ha(a,b){e.go("crmDetailed",{apptId:a,dataTypeId:b},{reload:!0}),console.log("nextAppointmentId:",a),console.log("nextAppointmentId:",wa)}function ia(b){a.tcStatusUpdateMsg="",console.log("request1...",b),console.log("request1...",JSON.stringify(b));var c=l.getToken(ya);x.save({id:ya,token:c},b,function(c){console.log("1st resp",c),a.walkinConfirmStaus=!1,Ra=c.opdId,console.log("opdID : ",Ra),Ra>0&&pa(b),a.tcStatusUpdateMsg={msg:c.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),P(function(){ha(wa,Ea)},3e3)},function(a){i.alert(a.data.message),console.log(a)})}function ja(){var b=l.getToken(ya);z.query({id:ya,token:b},function(b){a.feedbackTitleList=b},function(a){})}function ka(){if(Ta&&Ua&&Va){a.calculatedAssistanceAmount="",a.assistanceAmountTax="";var b=H.getToken(Ta);L.get({bikeNo:Ua,dateTime:Va,scId:Ta,token:b},function(b){b.message?(Xa=!0,a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount):(Xa=!1,ma(Sa,_a))},function(a){Xa=!1,ma(Sa,_a)}),a.isAMCUser=Xa}else Xa=!1}function la(b){if(Xa)a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount,console.log("AMC calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount;else{var c=!0;a.calculatedAssistanceAmount="",a.assistanceAmountTax="",b=Math.ceil(b);var d,e,f=ab.length;f-=1,angular.forEach(ab,function(g,h){if(3===Ya){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickAndDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickAndDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickAndDrop)+i*parseInt(g.generalServicePricePerKm)*2}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick and drop both calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}else if(1===Ya||2===Ya){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickDrop)+i*parseInt(g.generalServicePricePerKm)}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick OR drop calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}})}}function ma(a,b){if(Za="",a=a.split(","),b=b.split(","),a[0]&&a[1]&&b[0]&&b[1]){var c={lat:parseFloat(a[0]),lng:parseFloat(a[1])},d={lat:parseFloat(b[0]),lng:parseFloat(b[1])};(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[c],destinations:[d],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(a,b){Za=a.rows[0].elements[0].distance.text,Za=Za.split(" "),Za=Za[0],la(Za)})}}function na(){var b="1",c=H.getToken(b);M.query({date:Va,assistance_type:Ya,scId:Ia,cityId:b,zoneCode:Wa,token:c},function(b){a.timeSlotData=b,console.log("time slot :",b)},function(a){i.alert(a.data.message)})}function oa(){ab=[];var b=H.getToken(Ia);I.query({scId:Ia,token:b},function(b){a.scPricing=b,angular.forEach(b,function(a){ab.push(a)})},function(a){})}function pa(b){var c=H.getToken(ya),d={opdId:Ra,customerId:b.customerId,customerName:b.customerName,customerMobile:b.customerMobile,callerId:xa,bikeBrand:b.bikeBrand,bikeModel:b.bikeModel,bikeNo:b.bikeNo,appointmentDateTime:b.appointmentDateTime,timeSlot:b.timeSlot,address:b.address,area:b.area,assistanceTypeId:b.assistanceTypeId,assistanceAmount:db,lastCalledStatus:b.apptStatus};console.log("2nd req",d),G.save({id:ya,token:c},d,function(b){console.log("2nd resp",b),a.pickupAndDropStatusUpdateMsg=b.message,i.alert(a.pickupAndDropStatusUpdateMsg)},function(a){console.log(a)})}function qa(b){a.tcStatusUpdateMsg="",console.log("request1...",b);var c=l.getToken(ya);Y.save({id:ya,token:c},b,function(b){console.log("1st resp",b),a.walkinConfirmStaus=!1,Ra=b.opdId,console.log("opdID : ",Ra),a.tcStatusUpdateMsg={msg:b.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),"Insurance Done"!==Pa&&"Insurance Walkin"!==Pa&&P(function(){ha(wa,Ea)},3e3),ba(Ca,Da)},function(a){i.alert(a.data.message),console.log(a)})}function ra(b){console.log(JSON.stringify(b));var c=l.getToken(ya);A.save({id:ya,token:c},b,function(b){a.tcStatusUpdateMsg=b.message,lb=[],$("#tcAppointmentDetailsPage").hide()},function(a){console.log(a)})}function sa(b){i.alert(b),a.scSMS={},a.sendSMSForm.$setPristine()}function ta(){U.get(function(b){console.log("present date : ",b),ob=b.hour,mb===b.date?angular.forEach(a.actualTimeSlot,function(b,c){a.actualTimeSlot[c].value>parseInt(ob)&&a.timeSlot.push({timeSelect:a.actualTimeSlot[c].timeSelect,value:a.actualTimeSlot[c].value})}):mb!==b.date&&(a.timeSlot=a.actualTimeSlot)},function(a){})}function ua(){var b=l.getToken(ya);w.query({id:ya,token:b},function(b){a.serviceCenterComplaintSubStatus=b,angular.forEach(b,function(b){a.serviceCenterComplaintData.push({id:b.subStatusDescription,label:b.subStatusDescription,slNo:b.slNo})})},function(b){a.callerListErrorMsg=b.data.message})}function va(b){ca(!0);var c=l.getToken(ya);W.query({chassisNo:b,scId:ya,token:c},function(b){console.log("LS history data :",b),a.lsHistoryData=b,ca(!1)},function(b){ca(!1),console.log("LS history error data",b),a.lsHistoryDataErrorMsg=b.data.message})}var wa,xa=b.get("loggedInUserId"),ya=b.get("loggedInUserScId"),za=b.get("loginMobile"),Aa=b.get("loginCallingType"),Ba=b.get("loggedInUserBikeBrand"),Ca=N.apptId,Da=N.status;angular.forEach(h.apptIdList,function(a,b){Ca===h.apptIdList[b]&&(wa=h.apptIdList[b+1])});var Ea=N.dataTypeId;console.log("apptId",Ca);var Fa;if(Z(),a.openCalendarStatus=function(b){a.minDate=new Date(Fa),a.minDateForPickAndDrop=new Date(Fa),"0"!==a.opdIdForPickAndDrop&&0!==a.opdIdForPickAndDrop&&(a.minDateForPickAndDrop=new Date(Fa),a.minDateForPickAndDrop=a.minDateForPickAndDrop.setDate(a.minDateForPickAndDrop.getDate()+1)),b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0},a.teleCallingStatusForUpdate=[{id:1,description:"Pickup and Drop"},{id:2,description:"Walkin"},{id:3,description:"Call Later"},{id:4,description:"Not Interested"},{id:6,description:"Service Done"}],"1"===ya&&a.teleCallingStatusForUpdate)for(var Ga=0;Ga<a.teleCallingStatusForUpdate.length;Ga++)"Not Interested"===a.teleCallingStatusForUpdate[Ga].description&&(a.teleCallingStatusForUpdate[Ga].description="Others");var Ha={};a.serviceCenterListForServiceDone={},aa(),a.customerMobileNumbers=[];var Ia,Ja,Ka,La,Ma=[],Na=Ea,Oa=!0;a.getCustomerNameByPhone=function(b,c){console.log(c),angular.forEach(b,function(d,e){b[e].customer_mobile===c&&(a.tcAppointmentDataDisplay={customer_name:b[e].customer_name},console.log(a.tcAppointmentDataDisplay.customer_name))})},ba(Ca,Da);var Pa;a.updateTeleCallingStatus=function(b,c){console.log(b),a.tcStatusUpdateMsg="",Pa=b,"1"===ya&&"Others"===b&&(b="Not Interested"),ga(b),a.updateMsg="",a.walkinStatus={},a.updateTeleCallingAppointmentStatus=c,console.log(a.updateTeleCallingAppointmentStatus),a.selectedStatus=b,"Service Done"!==b&&"Insurance Done"!==b||_()};var Qa;a.updateServiceDoneStatus=function(b){Qa=b,"Others"===b&&(a.serviceDoneForm.$invalid=!0)},a.yesNoCheck=function(b){"Yes"===b?a.yesNoStatus="Yes":"No"===b&&(a.yesNoStatus="No")},a.skipAppointment=function(a){ha(wa,Ea)},ua();var Ra;a.clearUpdateMsg=function(){a.tcStatusUpdateMsg="",a.insuranceDoneOption={},a.insuranceDoneStatus={}},ja();var Sa,Ta,Ua,Va,Wa,Xa=!1;a.getSCDetail=function(a){var b=H.getToken(a);Sa="",oa(),K.get({scId:a,token:b},function(a){console.log("sc lat long",a),Sa=a.latlng,Wa=a.zoneCode},function(a){console.log("sc lat long error",a)})};var Ya;a.getAssistanceType=function(b){Ya=b,a.getSCDetail(Ia)};var Za,$a,_a;a.getPickupDropArea=function(b,c){a.getSelectedDate(c),c?(Va=c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2),$a=b.formatted_address,_a="",ka(),a.opdIdForPickAndDrop>0&&na(),Xa||J.getLocationCoordinates($a).then(function(b){_a=b,ka(),ma(Sa,_a),a.opdIdForPickAndDrop>0&&na()},function(a){})):console.log("Date Not Selected Yet...")};var ab=[];a.assistanceTypes=[{id:1,assistanceType:"Pick Only"},{id:2,assistanceType:"Drop Only"},{id:3,assistanceType:"Pickup and Drop"}];var bb,cb;a.checkDatesByReason=function(b,c){console.log(b),"Call Later"===Pa&&("Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1,null!==b&&void 0!==b||(a.walkinCallLaterForm.$invalid=!0)),"Customer will call and Confirm"!==b&&"Out of Station"!==b&&"Customer Busy"!==b||(a.walkinStatus.selectedDate="",a.walkinStatus.timeValue=""));var e=d("date")(new Date,"yyyy-MM-dd");if("Call Later"===Pa&&("Phone out of Reach"===b||"Switched off"===b||"No response to call"===b||"Disconnecting the call"===b)&&d("date")(c,"yyyy-MM-dd")===e){var f=new Date,g=new Date(f);if(g.setDate(f.getDate()+1),bb=g,a.walkinStatus={selectedDate:bb,timeValue:cb,remarks:b},0===g.getDay()){var h=new Date(f);h.setDate(f.getDate()+2),bb=h,a.walkinStatus={selectedDate:bb,timeValue:cb,remarks:b}}i.alert("Appointment will be scheduled for "+bb+" as you have selected "+b)}};var db,eb,fb,gb,hb,ib={},jb=void 0,kb=void 0;a.insuranceDoneOption={};(new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate();a.updateAppointmentStatus=function(b,c,e){if(console.log(a.insuranceDoneOption),void 0!==a.insuranceDoneOption.selectedDate&&null!==a.insuranceDoneOption.selectedDate&&(hb=a.insuranceDoneOption.selectedDate.getFullYear()+"-"+(a.insuranceDoneOption.selectedDate.getMonth()+1)+"-"+a.insuranceDoneOption.selectedDate.getDate()),"Pickup and Drop"===b){if(ib={customerId:c.customerId,customerName:c.customer_name,scId:ya,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.apptId,callerId:xa,status:b,remarksForSubStatus:e.remarks,bikeBrand:c.bikeBrandId,bikeModel:c.bikeModel,bikeNo:e.bikeNo,appointmentDateTime:Va,timeSlot:e.slot,address:e.address,area:e.area,assistanceTypeId:e.assistanceTypeData,branchId:c.branchId,assistanceAmount:e.assistanceAmount,appointTime:e.timeValue,lastCalledStatus:c.apptStatus,chassisNo:c.chassisNo,mapptId:c.appt},db=e.assistanceAmount,console.log("1st req :",JSON.stringify(ib)),a.pickUpRequest={},a.pickupDropForm.$setPristine(),void 0!==c.overDueDate&&"NA"!==c.overDueDate&&null!==c.overDueDate)eb=new Date(c.formattedOverDueDate),eb=eb.setHours(5,30),gb=new Date(Va),console.log(c.formattedOverDueDate),console.log(gb>eb),console.log(eb),gb>eb?jb=i.confirm("The appointment for this service type can be taken till "+c.overDueDate+". Would you like to take appointment for next schedule?"):gb<=eb&&(console.log("Regular Appointment Update..!"),ia(ib));else if((void 0===c.overDueDate||"NA"===c.overDueDate||null===c.overDueDate||"0000-00-00 00:00:00"===c.overDueDate)&&void 0!==c.serviceDueDate&&"NA"!==c.serviceDueDate&&null!==c.serviceDueDate&&void 0!==c.serviceDueType&&"NA"!==c.serviceDueType&&null!==c.serviceDueType){var f=c.serviceDueType,g=f.toLowerCase().includes("paid");if(g){fb=new Date(c.formattedServiceDueDate);var h=45;fb=fb.setDate(fb.getDate()+h);var j=d("date")(fb,"yyyy-MM-dd");console.log("Grace Service Due Date",fb),gb=e.selectedDate,gb>fb?jb=i.confirm("The appointment for this service type can be taken till "+j+". Would you like to take appointment for next schedule?"):gb<=fb&&(console.log("Regular Appointment Update..!"),ia(ib))}else if(console.log("Not a Paid Service"),fb=new Date(c.formattedServiceDueDate),"Yamaha"===Ba){var k=15;fb=fb.setDate(fb.getDate()+k);var j=d("date")(fb,"yyyy-MM-dd");gb=e.selectedDate,gb>fb?jb=i.confirm("The appointment for this service type can be taken till "+j+". Would you like to take appointment for next schedule?"):gb<=fb&&(jb=!1,console.log("Regular Appointment Update..!"),ia(ib))}else if("Yamaha"!==Ba){var j=d("date")(fb,"yyyy-MM-dd");gb=e.selectedDate,gb>fb?jb=i.confirm("The appointment for this service type can be taken till "+j+". Would you like to take appointment for next schedule?"):gb<=fb&&(jb=!1,console.log("Regular Appointment Update..!"),ia(ib))}}if(!0===jb){console.log("Appointment will book for Next Schedule.");var l=e.selectedDate.getFullYear()+"-"+(e.selectedDate.getMonth()+1)+"-"+e.selectedDate.getDate();kb=i.confirm("The appointment is booked on "+l+". for the "+c.nextApptType+". Would you like to confirm?")}else!1===jb&&console.log("Cancelled the Appointment..!");!0===kb?(console.log("Appointment will book for Next Schedule."),"NA"!==c.nextApptId&&null!==c.nextApptId&&void 0!==c.nextApptId?(ib.apptId=c.nextApptId,console.log(JSON.stringify(ib)),ia(ib)):ia(ib)):!1===kb&&console.log("Cancelled the Confirmation..!")}else if("Not Interested"===b)ib={customerId:c.customerId,customerName:c.customer_name,status:b,statusForSubStatus:pb,subStatus:e.remarks,scId:ya,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:xa,remarksForSubStatus:e.scComplaintManualRemarks,branchId:c.branchId,area:e.area,lastCalledStatus:c.apptStatus,chassisNo:c.chassisNo,bikeModel:c.bikeModel,bikeNo:c.bikeNo,mapptId:c.appt},console.log(JSON.stringify(ib)),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),ia(ib);else if("Service Done"===b)ib={customerId:c.customerId,customerName:c.customer_name,status:b,subStatus:Qa,scId:ya,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:xa,remarksForSubStatus:a.serviceDoneStatus.scComplaintManualRemarks,branchId:c.branchId,lastCalledStatus:c.apptStatus,chassisNo:c.chassisNo,bikeModel:c.bikeModel,bikeNo:c.bikeNo,mapptId:c.appt},console.log(JSON.stringify(ib)),a.serviceDoneStatus={},a.serviceDoneForm.$setPristine(),ia(ib);else if("Insurance Done"===b)ib={customerId:c.insuranceId,customerName:c.customerName,status:b,subStatus:Qa,scId:ya,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.insuranceApptId,callerId:xa,remarksForSubStatus:a.insuranceDoneStatus.scComplaintManualRemarks,branchId:c.insuranceBranchId,lastCalledStatus:c.lastCalledStatus,renewalDate:hb},console.log(JSON.stringify(ib)),a.insuranceDoneStatus={},a.insuranceDoneForm.$setPristine(),qa(ib);else if("Insurance Walkin"===b)ib={customerId:c.insuranceId,customerName:c.customerName,status:"Walkin",appointmentDateTime:e.selectedDate,subStatus:e.remarks,scId:ya,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.insuranceApptId,callerId:xa,branchId:c.insuranceBranchId,remarksForSubStatus:e.manualRemarks,appointTime:e.timeValue,lastCalledStatus:c.lastCalledStatus,dataType:"Insurance Data"},console.log(JSON.stringify(ib)),a.insuranceDoneStatus={},a.insuranceWalkinForm.$setPristine(),qa(ib);else{if(ib={customerId:c.customerId,customerName:c.customer_name,status:b,appointmentDateTime:e.selectedDate,subStatus:e.remarks,scId:ya,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.apptId,callerId:xa,branchId:c.branchId,remarksForSubStatus:e.manualRemarks,serviceDueDate:c.serviceDueDate,serviceDueType:c.serviceDueType,appointTime:e.timeValue,lastCalledStatus:c.apptStatus,chassisNo:c.chassisNo,bikeModel:c.bikeModel,bikeNo:c.bikeNo,mapptId:c.appt},console.log("selected time is",ib.appointTime),console.log("request obj :",ib),!0===a.walkinConfirmStaus&&(ib.status="walkincompleted",ib.subStatus="Yes"),console.log(JSON.stringify(ib)),a.walkinStatus={},a.walkinCallLaterForm.$setPristine(),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),"Customer agreed to Walkin"===e.remarks||"Customer tentively agreed to Walkin"===e.remarks||"Customer will call and Confirm"===e.remarks||"Out of Station"===e.remarks||"Customer Busy"===e.remarks||"Required KMs not travelled"===e.remarks||"Phone out of Reach"===e.remarks||"Switched off"===e.remarks||"No response to call"===e.remarks||"Disconnecting the call"===e.remarks)if(void 0!==c.overDueDate&&"NA"!==c.overDueDate&&null!==c.overDueDate)eb=new Date(c.formattedOverDueDate),gb=e.selectedDate,void 0===gb&&(gb=new Date),console.log(c.formattedOverDueDate),console.log(eb),console.log(gb),console.log(gb>eb),gb>eb?jb=i.confirm("The appointment for this service type can be taken till "+c.overDueDate+". Would you like to take appointment for next schedule?"):gb<=eb&&(console.log("Regular Appointment Update..!"),ia(ib));else if((void 0===c.overDueDate||"NA"===c.overDueDate||null===c.overDueDate||"0000-00-00 00:00:00"===c.overDueDate)&&void 0!==c.serviceDueDate&&"NA"!==c.serviceDueDate&&null!==c.serviceDueDate&&void 0!==c.serviceDueType&&"NA"!==c.serviceDueType&&null!==c.serviceDueType){var f=c.serviceDueType,g=f.toLowerCase().includes("paid");if(g){fb=new Date(c.formattedServiceDueDate);var h=45;fb=fb.setDate(fb.getDate()+h);var j=d("date")(fb,"yyyy-MM-dd");console.log("Grace Service Due Date",j),gb=e.selectedDate,void 0===gb&&(gb=new Date),gb>fb?jb=i.confirm("The appointment for this service type can be taken till "+j+". Would you like to take appointment for next schedule?"):gb<=fb&&(jb=!1,console.log("Regular Appointment Update..!"),ia(ib))}else if(console.log("Not a Paid Service"),fb=new Date(c.formattedServiceDueDate),"Yamaha"===Ba){var k=15;fb=fb.setDate(fb.getDate()+k);var j=d("date")(fb,"yyyy-MM-dd");gb=e.selectedDate,void 0===gb&&(gb=new Date),gb>fb?jb=i.confirm("The appointment for this service type can be taken till "+j+". Would you like to take appointment for next schedule?"):gb<=fb&&(jb=!1,console.log("Regular Appointment Update..!"),ia(ib))}else if("Yamaha"!==Ba){var j=d("date")(fb,"yyyy-MM-dd");gb=e.selectedDate,void 0===gb&&(gb=new Date),gb>fb?jb=i.confirm("The appointment for this service type can be taken till "+j+". Would you like to take appointment for next schedule?"):gb<=fb&&(jb=!1,console.log("Regular Appointment Update..!"),ia(ib))}}if(!0===jb){var l;if(console.log("Appointment will book for Next Schedule."),e.selectedDate&&(l=e.selectedDate.getFullYear()+"-"+(e.selectedDate.getMonth()+1)+"-"+e.selectedDate.getDate()),"Phone out of Reach"===e.remarks||"Switched off"===e.remarks||"No response to call"===e.remarks||"Disconnecting the call"===e.remarks){gb=new Date(gb);var m=(gb.setDate(gb.getDate()+1),gb.getFullYear()+"-"+(gb.getMonth()+1)+"-"+gb.getDate());console.log(m),l=m}kb="Customer agreed to Walkin"===e.remarks?i.confirm("The appointment is booked on "+l+". for the "+c.nextApptType+". Would you like to confirm?"):i.confirm("The appointment is rescheduled on "+l+". for the "+c.nextApptType+". Would you like to confirm?")}else!1===jb&&console.log("Cancelled the Appointment..!");!0===kb?(console.log("Appointment will book for Next Schedule."),"NA"!==c.nextApptId&&null!==c.nextApptId&&void 0!==c.nextApptId?(ib.apptId=c.nextApptId,console.log(JSON.stringify(ib)),ia(ib)):ia(ib)):!1===kb&&console.log("Cancelled the Confirmation..!")}},a.feedBackObject={},a.feedBackRemarksObject={};var lb=[];a.updateUserFeedBack=function(b,c,d){b[4]="";var e=Object.keys(b),f=e.length;Object.keys(c);f>=4?(angular.forEach(e,function(a){var e={customerId:d.customerId,apptId:d.apptId,feedBackListId:a,feedBackRemarks:c[a],feedBackStatus:b[a],scId:ya,loginId:xa,rating:b[a]};lb.push(e)}),console.log(JSON.stringify()),a.feedBackObject={},a.feedBackRemarksObject={},a.feedbackForm.$setPristine(),ra(lb)):i.alert("Kindly select all the fields")},a.callTeleCallingCustomer=function(a,b){var c=l.getToken(ya),d={customerName:a.customer_name,customerMobile:b,customerId:a.customerId,apptId:a.apptId,callerId:xa,scId:ya,callerMobile:za,callingType:Aa};console.log(JSON.stringify(d)),B.save({id:ya,token:c},d,function(a){i.alert(a.message)},function(a){i.alert(a.data.error),console.log(a)})},a.updateServiceCenter=function(b,c,d){var e=l.getToken(ya),f={old_scId:c,new_scId:d,apptId:b,callerId:xa,scId:ya};console.log(JSON.stringify(f)),F.save({id:ya,token:e},f,function(b){a.updateServiceCenterSuccessMsg=b.message,Oa=!1,ba(Ca,Da),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.serviceCenterObj={},a.updateServiceCenterForm.$setPristine()},function(b){console.log(b),a.updateServiceCenterErrorMsg=b.data.message})},a.addRefferelCustomer=function(b){var c=l.getToken(ya);console.log(JSON.stringify(b)),F.save({id:ya,token:c},b,function(b){a.addReferelSuccessMsg=b.message,Oa=!1,ba(Ca,Da),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.referelObj={},a.addRefferelForm.$setPristine()},function(b){console.log(b),a.addReferelErrorMsg=b.data.message})},a.sendSCSMS=function(c,d){a.loading=!0;var e={scId:b.get("loggedInUserScId"),logInId:b.get("loggedInUserId"),mobileNumber:d,message:c.message,charCount:c.message.length};console.log(JSON.stringify(e));var f=parseInt(100*Math.random()),g=l.getToken(f);R.save({id:f,token:g},e,function(b){console.log(b),sa(b.message),a.loading=!1},function(b){console.log(b),sa(b.data.message),a.loading=!1})},a.clearPhoneUpdateMsg=function(){a.editPhoneSuccessMsg=""},a.clearServiceCenterUpdateMsg=function(){a.updateServiceCenterSuccessMsg=""},a.clearReferenceSuccessMsg=function(){a.addReferelSuccessMsg=""},a.editPhoneNumber=function(b,c,d,e){console.log("selMobile",b),a.editPhoneSuccessMsg="";var f={mobile:b,customerName:c.customer_name,chassisNo:c.chassisNo,scId:ya,defaultNumber:d,customerId:c.customerId,customerStatus:e};console.log(JSON.stringify(f));var g=l.getToken(ya);T.save({id:ya,token:g},f,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,Oa=!1,P(function(){$("#editPhoneModal").modal("hide"),$("#activeDeactivePhoneModal").modal("hide"),ba(Ca,Da)},2e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})};var mb,nb;a.getSelectedDate=function(b){b&&(nb=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2)),mb=nb,console.log(mb),ta(),a.timeSlot=[]},a.actualTimeSlot=S.getTime(),a.timeSlot=[];var ob;a.getSelectedReason=function(b){"Service Center Complaint"===b?(console.log(a.serviceCenterComplaints),0===a.serviceCenterComplaints.length&&(a.notInterestedForm.$invalid=!0)):"Wrong Number"!==a.notInterestedStatus.remarks&&"Vehicle Sold"!==a.notInterestedStatus.remarks&&"Repetitive reminder"!==a.notInterestedStatus.remarks||(a.notInterestedForm.$invalid=!1)},a.serviceCenterComplaintData=[],a.serviceCenterComplaintSettings={displayProp:"label"};var pb=[];a.updateServiceCenterComplaints={onItemSelect:function(b){console.log(b),pb.push(b.id),pb.length>0?(a.notInterestedForm.$invalid=!1,console.log("item : : :",b),"Others"===b.id&&(a.notInterestedForm.$invalid=!0)):0===pb.length&&(a.notInterestedForm.$invalid=!0)},onItemDeselect:function(b){console.log(b);var c=pb.indexOf(b.label);pb.splice(c,1),pb.length>0?a.notInterestedForm.$invalid=!1:0===pb.length&&(a.notInterestedForm.$invalid=!0)}},a.resetServiceCenterComplaints=function(){a.serviceCenterComplaints=[],pb=[]},a.resetServiceCenterComplaints(),a.getHistory=function(){ea(a.tcAppointmentData.chassisNo),fa(a.tcAppointmentData.chassisNo),va(a.tcAppointmentData.chassisNo)},a.walkinRemarkCheck=function(){void 0!==a.walkinStatus.remarks?"Customer agreed to Walkin"!==a.walkinStatus.remarks&&"Customer tentively agreed to Walkin"!==a.walkinStatus.remarks&&"Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&"Required KMs not travelled"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1):a.walkinCallLaterForm.$invalid=!0},a.notInterestedRemarkCheck=function(){"Others"===pb.toString()&&(""!==a.notInterestedStatus.scComplaintManualRemarks&&void 0!==a.notInterestedStatus.scComplaintManualRemarks||(a.notInterestedForm.$invalid=!0)),void 0!==a.notInterestedStatus.scComplaintManualRemarks?""===a.notInterestedStatus.remarks||null===a.notInterestedStatus.remarks||void 0===a.notInterestedStatus.remarks?a.notInterestedForm.$invalid=!0:"Service Center Complaint"===a.notInterestedStatus.remarks?0===a.serviceCenterComplaints.length&&(a.notInterestedForm.$invalid=!0):"Customer shifted"===a.notInterestedStatus.remarks||"More Distance"===a.notInterestedStatus.remarks?void 0===a.notInterestedStatus.area||""===a.notInterestedStatus.area||null===a.notInterestedStatus.area?a.notInterestedForm.$invalid=!0:a.notInterestedForm.$invalid=!1:"Service Center Complaint"!==a.notInterestedStatus.remarks&&(a.notInterestedForm.$invalid=!1):a.notInterestedForm.$invalid=!1};var qb,rb=!1;a.getUpdateMobileStatus=function(b,c,d,e){qb=e,"primary"===e&&P(function(){console.log(sb),console.log(a.tcAppointmentData.customer_mobile),sb===a.tcAppointmentData.customer_mobile?(alert("This is already a Primary Number"),rb=!1):sb!==a.tcAppointmentData.customer_mobile&&(rb=i.confirm("Are you sure to make this Mobile No. as Primary?")),rb?(console.log("Updating :",qb),a.editPhoneNumber(sb,c,d,qb),a.phoneObj={}):console.log("Cancelled the Making Primary Event")},300)},$("#activeDeactivePhoneModal").modal("hide");var sb;a.updateMobileStatus=function(b){a.mobileDisplay=b,b.substr(0,10)===a.tcAppointmentData.customer_mobile?a.primaryStatus=!0:b.substr(0,10)!==a.tcAppointmentData.customer_mobile&&(a.primaryStatus=!1),a.editPhoneSuccessMsg="",a.editPhoneErrorMsg="",console.log(b),null!==b&&(sb=b.substr(0,10),$("#activeDeactivePhoneModal").modal("show"))},a.clearActiveInactiveModal=function(){$("#activeDeactivePhoneModal").modal("hide")};var tb=!1;a.createFutureReminder=function(b){if(!0===(tb=i.confirm("Are you sure to create the Future Reminder?"))){var c={dateOfSale:b.dateOfSale,apptId:b.apptId,reminder:b.reminder,assignedId:b.assignedId,chassisNo:b.chassisNo,bikeType:b.bikeType,lastServiceDueDate:b.serviceDueDate,scId:ya,branchId:b.branchId};console.log(JSON.stringify(c));var d=l.getToken(ya);X.save({scId:ya,token:d},c,function(b){console.log("FutUre Reminder Resp : :",b),i.alert(b.message),va(a.tcAppointmentData.chassisNo)},function(a){console.log("FutUre Reminder Error Resp : :",a)})}else!1===tb&&console.log("FutUre Reminder Creation Cancelled")}}]),angular.module("letsService").controller("crmLostCustomerPageController",["$scope","$filter","ngTableParams","$cookies","$rootScope","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCAppointmentStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","FeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","TeleCallerStatusWiseDataService","TeleCallerWiseServiceCenterService","CreDashboardDataService","CreDashboardDueTypeDataService","CreDashboardDataTableService","CreDashboardDataTableSearchService","GetCallerMainDashboardOtherDatatypeStats","CreDashboardFilterTypeDataService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R){function S(b){a.loaderIcon=b}function T(b){
var c=0,d=0,e=0,f=0,g=0,h=0,j=0,k=0;da=b,S(!0);var l=i.getToken(Z);Q.query({scId:Z,callerId:Y,branchId:da,token:l},function(b){console.log("cre dashboard data  Others :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,i){void 0!==a.creDashboardData[i]&&null!==a.creDashboardData[i]&&(c+=parseInt(a.creDashboardData[i].allocated),d+=parseInt(a.creDashboardData[i].attemptedCount),e+=parseInt(a.creDashboardData[i].callLaterCount),f+=parseInt(a.creDashboardData[i].notInterested),g+=parseInt(a.creDashboardData[i].nonConverted),h+=parseInt(a.creDashboardData[i].pendingCount),j+=parseInt(a.creDashboardData[i].freshCalls),k+=parseInt(a.creDashboardData[i].totalAttempted))}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardData.push({dataTypename:"Total",allocated:c,attemptedCount:d,callLaterCount:e,nonConverted:g,pendingCount:h,freshCalls:j,notInterested:f,totalAttempted:k}),S(!1)},function(b){console.log("cre dashboard data  Others error"),S(!1),a.creDashboardDataErrorMsg=b.data.message})}function U(b){a.tableParams.page(b),a.tableParams.reload()}function V(b){a.tableParams.count(b)}function W(b){0===b.indexOf(a.tableParams.count())&&(b.push(a.tableParams.count()),b.sort()),a.tableParams.settings({counts:b})}function X(){var b=i.getToken(Z);z.query({callerId:Y,id:Z,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}var Y=d.get("loggedInUserId"),Z=d.get("loggedInUserScId");d.get("loggedInUserRole");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var _,aa,ba,ca="noSubStatus",da="all";a.creFilteredDataTypes=!1,a.getSelectedServiceCenter=function(a){console.log(a),da=a,null===a&&(da="all"),T(da)},T(da),a.creTableData=[],e.apptIdOthersList=[],a.showTableOthers=!1,a.getPericularStatsData=function(b,c,d,f){"pendingcalls"!==c&&(a.showTableOthers=!1),console.log("dataTypeId : ",d),S(!0),e.selDataType=b,console.log("highlight dataTypeName : ",e.selDataType),e.selDataTypeValueOthers=f,console.log("highlight",a.selDataTypeValue),e.defaultDataTypenameOthers=b,_=d,e.defaultDataTypeIdOthers=d,ba="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Both",aa=c,e.defaultStatusOthers=c,a.selectedStatus=aa,a.selectedDueType=ba;var g=i.getToken(Z);R.get({callerId:Y,status:aa,dataTypeId:_,scheduleType:ba,scId:Z,branchId:da,token:g},function(b){console.log("CRE filtered count success :",b),a.creFilteredDataTypes=b,a.statusOption={},a.creFilteredDataTypes||(a.creFilteredDataTypes=!1),S(!1)},function(b){console.log("Error",b),S(!1),a.creFilteredDataTypesErrorMsg=b.data.message},function(a){console.log(a)})},a.getPericularStatsData(e.defaultDataTypenameOthers,e.defaultStatusOthers,e.defaultDataTypeIdOthers,e.selDataTypeValueOthers),a.getPerticularStatsTableData=function(b,c,d,f,g){e.selDataType=b,console.log("highlight dataTypeName : ",e.selDataType),e.selDataTypeValueOthers=g,S(!0),ca=f,e.defaultDataTypenameOthers=b,e.defaultSubStatusOthers=f,_=d,e.defaultDataTypeIdOthers=d,ba="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Both",aa=c,e.defaultStatusOthers=c,a.selectedStatus=aa,a.selectedDueType=ba,console.log("status",aa),console.log("Due type",ba);var h=i.getToken(Z);O.query({scId:Z,callerId:Y,dataTypeId:_,status:aa,scheduleType:ba,subStatus:ca,branchId:da,token:h},function(b){console.log("cre Table Data success :",b),a.creTableDataErrorMsg="",a.creTableData=b,a.showTableOthers=!0,aa=c,a.newToken=h,a.tableParams.reload(),S(!1),a.tableParams.page(1)},function(b){console.log("Error",b),S(!1),a.creTableData=[],a.tableParams.reload(),a.creTableDataErrorMsg=b.data.message,void 0!==f&&null!==f&&""!==f&&(a.showTableOthers=!0,e.tableParams.reload(),a.creTableDataErrorMsg=b.data.message),a.creTableDataErrorMsg=b.data.message},function(a){console.log(a)})},a.getPerticularStatsTableData(e.defaultDataTypenameOthers,e.defaultStatusOthers,e.defaultDataTypeIdOthers,e.defaultSubStatusOthers,e.selDataTypeValueOthers),a.tableParams=new c({page:1,count:20},{total:a.creTableData.length,getData:function(c,d){var f=d.sorting()?b("orderBy")(a.creTableData,d.orderBy()):a.creTableData;f=d.filter()?b("filter")(f,d.filter()):f,a.orderedData=f,d.total(f.length),c.resolve(a.users=f.slice((d.page()-1)*d.count(),d.page()*d.count())),angular.forEach(a.users,function(b,c){e.apptIdOthersList.push(a.users[c].apptId)})}},{counts:[10,20]}),a.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=a.tableParams.settings().counts,a.changePage=U,a.changePageSize=V,a.changePageSizes=W,X(),$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("LostCustomerDetailedPageController",["$scope","$filter","$cookies","$timeout","$state","ngTableParams","$rootScope","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCAppointmentStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","FeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","$stateParams","TeleCallerWiseServiceCenterService","TimeSlotSelected","UpdateCustomerPhoneService","GetPresentHourService","CreAppointmentActiveStatusService","SendSMSService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S){function T(){Q.get(function(a){console.log("present date : ",a),xa=a.date},function(a){})}function U(){var b=k.getToken(qa);N.query({id:qa,token:b},function(b){za=b,za.push({scName:"Others"}),a.serviceCenterListForServiceDone=za,console.log("service center for service done",a.serviceCenterListForServiceDone)},function(b){a.serviceCenterErrorMsg=b.data.message})}function V(){var b=k.getToken(qa);N.query({callerId:pa,id:qa,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function W(b,c){X(!0),a.customerMobileNumbers=[],Ba="";var d=k.getToken(qa);q.query({apptId:b,scId:qa,status:c,callerId:pa,token:d},function(b){console.log("data in detailed page",b[0]),console.log(b),a.tcAppointmentData=b[0],Ca=b[0].callerApptStatus,Ga&&("inactive"===Ca?(Da=!0,ba(oa,wa)):"active"===Ca&&Y(ua,a.tcAppointmentData.apptStatus)),Ea=a.tcAppointmentData.mobile;for(var c=0;c<Ea.length;c++)Ea[c].customer_mobile===a.tcAppointmentData.customer_mobile&&(Ea[c].customer_mobile=Ea[c].customer_mobile+"*",a.currentMobile=Ea[c].customer_mobile),a.customerMobileNumbers.push(Ea[c]);console.log("tcAppointmentData.mobile",a.customerMobileNumbers),Aa=a.tcAppointmentData.opdId,a.opdIdForPickAndDrop=Aa,La=a.tcAppointmentData.opdId,Ma=a.tcAppointmentData.bikeNo,void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),Z(a.tcAppointmentData.chassisNo),X(!1),$("#tcAppointmentDetailsPage").show()},function(b){a.tcAppointmentDataErrorMsg=b.data.message,h.alert("Selected data list is completed. Redirecting to Dashboard !!!"),e.go("lostCustomer"),X(!1)})}function X(b){a.loaderIcon=b}function Y(a,b){var c=k.getToken(qa),d={status:"inactive",apptId:a,callerId:pa,scId:qa,apptStatus:b};console.log(JSON.stringify(d)),R.save({id:qa,token:c},d,function(a){console.log("Caller Appointment status Inactive..",a)},function(a){console.log(a)})}function Z(b){var c=k.getToken(qa);r.query({chassisNo:b,id:qa,dataTypeId:Fa,bikeBrand:ta,token:c},function(b){console.log("history data :",b),a.tcAppointmentHistoryData=b,a.tcAppointmentHistoryData.length?a.noOfTimesCalled=a.tcAppointmentHistoryData.length:a.noOfTimesCalled="0"},function(b){console.log("history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function _(b){console.log("Chassis no",b);var c=k.getToken(qa);s.query({chassisNo:b,id:qa,bikeBrand:ta,token:c},function(b){console.log("Service history data :",b),a.tcServiceHistoryData=b},function(b){console.log(b),a.tcServiceHistoryDataErrorMsg=b.data.message})}function aa(b){var c=k.getToken(qa);u.query({status:b,id:qa,token:c},function(b){a.reasonDescription=b,"Walkin"===Ha&&(a.walkinStatus.remarks=a.reasonDescription[0].apptSubStatus,console.log(a.walkinStatus.remarks))},function(a){console.log(a)})}function ba(a,b){e.go("lostCustomerDetailed",{apptId:a,dataTypeId:b},{reload:!0})}function ca(b){a.tcStatusUpdateMsg="",console.log("request1...",b);var c=k.getToken(qa);w.save({id:qa,token:c},b,function(c){console.log("1st resp",c),a.walkinConfirmStaus=!1,Ja=c.opdId,console.log("opdID : ",Ja),Ja>0&&ja(b),a.tcStatusUpdateMsg={msg:c.message,nextApptMsg:"Updating to Next Appointment Details"},d(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),d(function(){ba(oa,wa)},3e3)},function(a){h.alert(a.data.message),console.log(a)})}function da(){var b=k.getToken(qa);y.query({id:qa,token:b},function(b){a.feedbackTitleList=b},function(a){})}function ea(){if(La&&Ma&&Na){a.calculatedAssistanceAmount="",a.assistanceAmountTax="";var b=G.getToken(La);K.get({bikeNo:Ma,dateTime:Na,scId:La,token:b},function(b){b.message?(Pa=!0,a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount):(Pa=!1,ga(Ka,Ta))},function(a){Pa=!1,ga(Ka,Ta)}),a.isAMCUser=Pa}else Pa=!1}function fa(b){if(console.log("actual - Distance :",b),Pa)a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount,console.log("AMC calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount;else{var c=!0;a.calculatedAssistanceAmount="",a.assistanceAmountTax="",b=Math.ceil(b);var d,e,f=Ua.length;f-=1,angular.forEach(Ua,function(g,h){if(3===Qa){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickAndDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickAndDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickAndDrop)+i*parseInt(g.generalServicePricePerKm)*2}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick and drop both calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}else if(1===Qa||2===Qa){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickDrop)+i*parseInt(g.generalServicePricePerKm)}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick OR drop calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}})}}function ga(a,b){if(Ra="",a=a.split(","),b=b.split(","),a[0]&&a[1]&&b[0]&&b[1]){console.log("inside dist");var c={lat:parseFloat(a[0]),lng:parseFloat(a[1])},d={lat:parseFloat(b[0]),lng:parseFloat(b[1])};(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[c],destinations:[d],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(a,b){Ra=a.rows[0].elements[0].distance.text,Ra=Ra.split(" "),Ra=Ra[0],console.log("distance====",Ra),fa(Ra)})}}function ha(){var b="1",c=G.getToken(b);L.query({date:Na,assistance_type:Qa,scId:Aa,cityId:b,zoneCode:Oa,token:c},function(b){a.timeSlotData=b},function(a){})}function ia(){Ua=[];var b=G.getToken(Aa);H.query({scId:Aa,token:b},function(b){a.scPricing=b,angular.forEach(b,function(a){Ua.push(a)})},function(a){})}function ja(b){var c=G.getToken(qa),d={opdId:Ja,customerId:b.customerId,customerName:b.customerName,customerMobile:b.customerMobile,callerId:pa,bikeBrand:b.bikeBrand,bikeModel:b.bikeModel,bikeNo:b.bikeNo,appointmentDateTime:b.appointmentDateTime,timeSlot:b.timeSlot,address:b.address,area:b.area,assistanceTypeId:b.assistanceTypeId,assistanceAmount:Xa,lastCalledStatus:b.lastCalledStatus};console.log("2nd req",d),F.save({id:qa,token:c},d,function(b){console.log("2nd resp",b),a.pickupAndDropStatusUpdateMsg=b.message,h.alert(a.pickupAndDropStatusUpdateMsg)},function(a){console.log(a)})}function ka(b){console.log(JSON.stringify(b));var c=k.getToken(qa);z.save({id:qa,token:c},b,function(b){a.tcStatusUpdateMsg=b.message,Za=[],$("#tcAppointmentDetailsPage").hide()},function(a){console.log(a)})}function la(b){h.alert(b),a.scSMS={},a.sendSMSForm.$setPristine()}function ma(){Q.get(function(b){console.log("present date : ",b),ab=b.hour,$a===b.date?angular.forEach(a.actualTimeSlot,function(b,c){a.actualTimeSlot[c].value>parseInt(ab)&&a.timeSlot.push({timeSelect:a.actualTimeSlot[c].timeSelect,value:a.actualTimeSlot[c].value})}):$a!==b.date&&(a.timeSlot=a.actualTimeSlot)},function(a){})}function na(){var b=k.getToken(qa);v.query({id:qa,token:b},function(b){a.serviceCenterComplaintSubStatus=b,console.log("callerList",b),angular.forEach(b,function(b){a.serviceCenterComplaintData.push({id:b.subStatusDescription,label:b.subStatusDescription,slNo:b.slNo})})},function(b){a.callerListErrorMsg=b.data.message})}var oa,pa=c.get("loggedInUserId"),qa=c.get("loggedInUserScId"),ra=c.get("loginMobile"),sa=c.get("loginCallingType"),ta=c.get("loggedInUserBikeBrand"),ua=M.apptId,va=M.status;angular.forEach(g.apptIdOthersList,function(a,b){ua===g.apptIdOthersList[b]&&(oa=g.apptIdOthersList[b+1])});var wa=M.dataTypeId;console.log("apptId",ua),console.log("data type id",wa);var xa;M.dueType,M.status;if(T(),a.openCalendarStatus=function(b){a.minDate=new Date(xa),a.minDateForPickAndDrop=new Date(xa),"0"!==a.opdIdForPickAndDrop&&0!==a.opdIdForPickAndDrop&&(a.minDateForPickAndDrop=new Date(xa),a.minDateForPickAndDrop=a.minDateForPickAndDrop.setDate(a.minDateForPickAndDrop.getDate()+1)),b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0},a.teleCallingStatusForUpdate=[{id:1,description:"Pickup and Drop"},{id:2,description:"Walkin"},{id:3,description:"Call Later"},{id:4,description:"Not Interested"},{id:6,description:"Service Done"}],"1"===qa&&a.teleCallingStatusForUpdate)for(var ya=0;ya<a.teleCallingStatusForUpdate.length;ya++)"Not Interested"===a.teleCallingStatusForUpdate[ya].description&&(a.teleCallingStatusForUpdate[ya].description="Others");var za={};a.serviceCenterListForServiceDone={},V(),a.customerMobileNumbers=[];var Aa,Ba,Ca,Da,Ea=[],Fa=wa,Ga=!0;a.getCustomerNameByPhone=function(b,c){console.log(c),angular.forEach(b,function(d,e){b[e].customer_mobile===c&&(a.tcAppointmentDataDisplay={customer_name:b[e].customer_name})})},W(ua,va),a.getHistory=function(){Z(a.tcAppointmentData.chassisNo),_(a.tcAppointmentData.chassisNo)};var Ha;a.updateTeleCallingStatus=function(b,c){a.tcStatusUpdateMsg="",Ha=b,"1"===qa&&"Others"===b&&(b="Not Interested"),aa(b),a.updateMsg="",a.walkinStatus={},a.updateTeleCallingAppointmentStatus=c,a.selectedStatus=b,"Service Done"===b&&U()};var Ia;a.updateServiceDoneStatus=function(b){Ia=b,"Others"===b&&(a.serviceDoneForm.$invalid=!0)},a.skipAppointment=function(){ba(oa,wa)},na();var Ja;a.clearUpdateMsg=function(){a.tcStatusUpdateMsg=""},da();var Ka,La,Ma,Na,Oa,Pa=!1;a.getSCDetail=function(a){var b=G.getToken(a);Ka="",ia(),console.log(a),console.log(b),J.get({scId:a,token:b},function(a){console.log("sc lat long",a),Ka=a.latlng,Oa=a.zoneCode},function(a){console.log("sc lat long error",a)})};var Qa;a.getAssistanceType=function(b){Qa=b,a.getSCDetail(Aa)};var Ra,Sa,Ta;a.getPickupDropArea=function(b,c){a.getSelectedDate(c),c?(Na=c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2),Sa=b.formatted_address,Ta="",Pa||I.getLocationCoordinates(Sa).then(function(b){Ta=b,ea(),ga(Ka,Ta),a.opdIdForPickAndDrop>0&&ha()},function(a){})):console.log("Date Not Selected Yet...")};var Ua=[];a.assistanceTypes=[{id:1,assistanceType:"Pick Only"},{id:2,assistanceType:"Drop Only"},{id:3,assistanceType:"Pickup and Drop"}];var Va,Wa;a.checkDatesByReason=function(c,d){console.log(c),"Call Later"===Ha&&("Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1,null!==c&&void 0!==c||(a.walkinCallLaterForm.$invalid=!0)),"Customer will call and Confirm"!==c&&"Out of Station"!==c&&"Customer Busy"!==c||(a.walkinStatus.selectedDate="",a.walkinStatus.timeValue=""));var e=b("date")(new Date,"yyyy-MM-dd");if("Call Later"===Ha&&("Phone out of Reach"===c||"Switched off"===c||"No response to call"===c||"Disconnecting the call"===c)&&b("date")(d,"yyyy-MM-dd")===e){var f=new Date,g=new Date(f);if(g.setDate(f.getDate()+1),Va=g,a.walkinStatus={selectedDate:Va,timeValue:Wa,remarks:c},0===g.getDay()){var i=new Date(f);i.setDate(f.getDate()+2),Va=i,a.walkinStatus={selectedDate:Va,timeValue:Wa,remarks:c}}h.alert("Appointment will be scheduled for "+Va+" as you have selected "+c)}};var Xa,Ya={};a.updateAppointmentStatus=function(b,c,d){"Pickup and Drop"===b?(Ya={customerId:c.customerId,customerName:c.customer_name,scId:qa,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.apptId,callerId:pa,status:b,remarks:d.remarks,bikeBrand:c.bikeBrandId,bikeModel:c.bikeModel,bikeNo:d.bikeNo,appointmentDateTime:Na,timeSlot:d.slot,address:d.address,area:d.area,assistanceTypeId:d.assistanceTypeData,branchId:c.branchId,appointTime:d.timeValue,assistanceAmount:d.assistanceAmount,lastCalledStatus:c.lastCalledStatus,chassisNo:c.chassisNo},Xa=d.assistanceAmount,console.log("1st req :",JSON.stringify(Ya)),a.pickUpRequest={},a.pickupDropForm.$setPristine(),ca(Ya)):"Not Interested"===b?(Ya={customerId:c.customerId,customerName:c.customer_name,status:b,statusForSubStatus:bb.toString(),subStatus:d.remarks,scId:qa,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:pa,remarksForSubStatus:d.scComplaintManualRemarks,branchId:c.branchId,area:d.area,lastCalledStatus:c.lastCalledStatus,chassisNo:c.chassisNo,bikeModel:c.bikeModel,bikeNo:c.bikeNo},console.log(JSON.stringify(Ya)),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),ca(Ya)):"Service Done"===b?(Ya={customerId:c.customerId,customerName:c.customer_name,status:b,subStatus:Ia,scId:qa,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:pa,remarksForSubStatus:a.serviceDoneStatus.scComplaintManualRemarks,branchId:c.branchId,lastCalledStatus:c.lastCalledStatus,chassisNo:c.chassisNo,bikeModel:c.bikeModel,bikeNo:c.bikeNo},console.log(JSON.stringify(Ya)),a.serviceDoneStatus={},a.serviceDoneForm.$setPristine(),ca(Ya)):(Ya={customerId:c.customerId,customerName:c.customer_name,status:b,appointmentDateTime:d.selectedDate,subStatus:d.remarks,scId:qa,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.apptId,callerId:pa,branchId:c.branchId,remarksForSubStatus:d.manualRemarks,serviceDueDate:c.serviceDueDate,serviceDueType:c.serviceDueType,appointTime:d.timeValue,lastCalledStatus:c.lastCalledStatus,chassisNo:c.chassisNo,bikeModel:c.bikeModel,bikeNo:c.bikeNo},console.log("selected time is",Ya.appointTime),console.log(JSON.stringify(Ya)),!0===a.walkinConfirmStaus&&(Ya.status="walkincompleted",Ya.subStatus="Yes"),console.log(JSON.stringify(Ya)),a.walkinStatus={},a.walkinCallLaterForm.$setPristine(),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),ca(Ya))},a.feedBackObject={},a.feedBackRemarksObject={};var Za=[];a.updateUserFeedBack=function(b,c,d){b[4]="";var e=Object.keys(b),f=e.length;Object.keys(c);f>=4?(angular.forEach(e,function(a){var e={customerId:d.customerId,apptId:d.apptId,feedBackListId:a,feedBackRemarks:c[a],feedBackStatus:b[a],scId:qa,loginId:pa,rating:b[a]};Za.push(e)}),console.log(JSON.stringify()),a.feedBackObject={},a.feedBackRemarksObject={},a.feedbackForm.$setPristine(),ka(Za)):h.alert("Kindly select all the fields")},a.callTeleCallingCustomer=function(a,b){console.log(b);var c=k.getToken(qa),d={customerName:a.customer_name,customerMobile:b,customerId:a.customerId,apptId:a.apptId,callerId:pa,scId:qa,callerMobile:ra,callingType:sa};console.log(JSON.stringify(d)),A.save({id:qa,token:c},d,function(a){h.alert(a.message)},function(a){h.alert(a.data.error),console.log(a)})},a.updateServiceCenter=function(b,c,e){var f=k.getToken(qa),g={old_scId:c,new_scId:e,apptId:b,callerId:pa,scId:qa};console.log(JSON.stringify(g)),E.save({id:qa,token:f},g,function(b){a.updateServiceCenterSuccessMsg=b.message,Ga=!1,W(ua,va),d(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.serviceCenterObj={},a.updateServiceCenterForm.$setPristine()},function(b){console.log(b),a.updateServiceCenterErrorMsg=b.data.message})},a.sendSCSMS=function(b,d){a.loading=!0;var e={scId:c.get("loggedInUserScId"),logInId:c.get("loggedInUserId"),mobileNumber:d,message:b.message,charCount:b.message.length};console.log(JSON.stringify(e));var f=parseInt(100*Math.random()),g=k.getToken(f);S.save({id:f,token:g},e,function(b){console.log(b),la(b.message),a.loading=!1},function(b){console.log(b),la(b.data.message),a.loading=!1})},a.clearPhoneUpdateMsg=function(){a.editPhoneSuccessMsg=""},a.clearServiceCenterUpdateMsg=function(){a.updateServiceCenterSuccessMsg=""},a.editPhoneNumber=function(b,c,e,f){console.log("selMobile",b),a.editPhoneSuccessMsg="";var g={mobile:b,customerName:c.customer_name,chassisNo:c.chassisNo,scId:qa,defaultNumber:e,customerId:c.customerId,customerStatus:f};console.log(JSON.stringify(g));var h=k.getToken(qa);P.save({id:qa,token:h},g,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,Ga=!1,d(function(){$("#editPhoneModal").modal("hide"),$("#activeDeactivePhoneModal").modal("hide"),W(ua,va)},2e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})};var $a,_a;a.getSelectedDate=function(b){b&&(_a=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2)),$a=_a,console.log($a),ma(),a.timeSlot=[]},a.actualTimeSlot=O.getTime(),a.timeSlot=[];var ab;a.getSelectedReason=function(b){"Service Center Complaint"===b?a.notInterestedForm.$invalid=!0:"Wrong Number"!==a.notInterestedStatus.remarks&&"Vehicle Sold"!==a.notInterestedStatus.remarks&&"Repetitive reminder"!==a.notInterestedStatus.remarks||(a.notInterestedForm.$invalid=!1)},a.serviceCenterComplaintData=[],a.serviceCenterComplaintSettings={displayProp:"label"};var bb=[];a.updateServiceCenterComplaints={onItemSelect:function(b){bb.push(b.id),bb.length>0?(a.notInterestedForm.$invalid=!1,console.log("item : : :",b),"Others"===b.id&&(a.notInterestedForm.$invalid=!0)):0===bb.length&&(a.notInterestedForm.$invalid=!0)},onItemDeselect:function(b){var c=bb.indexOf(b.label);bb.splice(c,1),bb.length>0?a.notInterestedForm.$invalid=!1:0===bb.length&&(a.notInterestedForm.$invalid=!0)}},a.resetServiceCenterComplaints=function(){a.serviceCenterComplaints=[],bb=[]},a.resetServiceCenterComplaints(),a.walkinRemarkCheck=function(){void 0!==a.walkinStatus.remarks?"Customer agreed to Walkin"!==a.walkinStatus.remarks&&"Customer tentively agreed to Walkin"!==a.walkinStatus.remarks&&"Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&"Required KMs not travelled"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1):a.walkinCallLaterForm.$invalid=!0},a.notInterestedRemarkCheck=function(){"Others"===bb.toString()&&(""!==a.notInterestedStatus.scComplaintManualRemarks&&void 0!==a.notInterestedStatus.scComplaintManualRemarks||(a.notInterestedForm.$invalid=!0)),void 0!==a.notInterestedStatus.scComplaintManualRemarks?""===a.notInterestedStatus.remarks||null===a.notInterestedStatus.remarks||void 0===a.notInterestedStatus.remarks?a.notInterestedForm.$invalid=!0:"Service Center Complaint"===a.notInterestedStatus.remarks?0===a.serviceCenterComplaints.length&&(a.notInterestedForm.$invalid=!0):"Customer shifted"===a.notInterestedStatus.remarks||"More Distance"===a.notInterestedStatus.remarks?void 0===a.notInterestedStatus.area||""===a.notInterestedStatus.area||null===a.notInterestedStatus.area?a.notInterestedForm.$invalid=!0:a.notInterestedForm.$invalid=!1:"Service Center Complaint"!==a.notInterestedStatus.remarks&&(a.notInterestedForm.$invalid=!1):a.notInterestedForm.$invalid=!1};var cb,db=!1;a.getUpdateMobileStatus=function(b,c,e,f){cb=f,"primary"===f&&d(function(){console.log(eb),console.log(a.tcAppointmentData.customer_mobile),eb===a.tcAppointmentData.customer_mobile?(alert("This is already a Primary Number"),db=!1):eb!==a.tcAppointmentData.customer_mobile&&(db=h.confirm("Are you sure to make this Mobile No. as Primary?")),db?(console.log("Updating :",cb),a.editPhoneNumber(eb,c,e,cb),a.phoneObj={}):console.log("Cancelled the Making Primary Event")},300)},$("#activeDeactivePhoneModal").modal("hide");var eb;a.updateMobileStatus=function(b){a.mobileDisplay=b,b.substr(0,10)===a.tcAppointmentData.customer_mobile?a.primaryStatus=!0:b.substr(0,10)!==a.tcAppointmentData.customer_mobile&&(a.primaryStatus=!1),a.editPhoneSuccessMsg="",a.editPhoneErrorMsg="",console.log(b),null!==b&&(eb=b.substr(0,10),$("#activeDeactivePhoneModal").modal("show"))},a.clearActiveInactiveModal=function(){$("#activeDeactivePhoneModal").modal("hide")}}]),angular.module("letsService").controller("crmStatisticsController",["$scope","$filter","$cookies","ngTableParams","$rootScope","$window","TokenService","TeleCallerHourWiseDataService","CreDashboardStatsDataService","TeleCallerWeeklyWiseDataService",function(a,b,c,d,e,f,g,h,i,j){function k(b){a.loaderIcon=b}function l(){var b=0,c=0,d=0,e=0,f=0,h=0,j=0,l=0,p=0,q=0,r=0;k(!0);var s=g.getToken(n);i.query({scId:n,callerId:m,branchId:o,token:s},function(g){console.log("cre dashboard data :",g),a.creDashboardData=g,angular.forEach(a.creDashboardData,function(g,i){void 0!==a.creDashboardData[i]&&null!==a.creDashboardData[i]&&(b+=parseInt(a.creDashboardData[i].allocated),c+=parseInt(a.creDashboardData[i].attemptedCount),d+=parseInt(a.creDashboardData[i].connectedCount),e+=parseInt(a.creDashboardData[i].callLaterCount),f+=parseInt(a.creDashboardData[i].notInterested),h+=parseInt(a.creDashboardData[i].serviceDone),j+=parseInt(a.creDashboardData[i].appointmentTaken),l+=parseInt(a.creDashboardData[i].MTDConversion),p+=parseInt(a.creDashboardData[i].nonConverted),q+=parseInt(a.creDashboardData[i].pendingCount),r+=parseInt(a.creDashboardData[i].totalAttempted))}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardData.push({dataTypename:"Total",allocated:b,attemptedCount:c,connectedCount:d,callLaterCount:e,notInterested:f,serviceDone:h,appointmentTaken:j,MTDConversion:l,nonConverted:p,pendingCount:q,totalAttempted:r}),k(!1)},function(b){k(!1),a.creDashboardDataErrorMsg=b.data.message})}var m=c.get("loggedInUserId"),n=c.get("loggedInUserScId");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var o="branch",p="caller";l(),a.statusLables=[{key:"serviceReminder",name:"Service Reminder"},{key:"servicefeedback",name:"Service Feedback"},{key:"insurance",name:"Insurance"},{key:"salesfeedback",name:"Sales Feedback"}],a.currentHourStatus=a.statusLables[0].name,a.currentWeeklyStatus=a.statusLables[0].name;var q="serviceReminder";a.getStatusWiseHourStats=function(b,c){q=b,"Service Reminder"===q?q="serviceReminder":"Service Feedback"===q?q="servicefeedback":"Insurance"===q?q="insurance":"Sales Feedback"===q&&(q="salesfeedback"),console.log(q),"daily"===c?a.getHourWiseTeleCallerData(r,m,p,o):"weekly"===c&&a.getWeeklyWiseTeleCallerData(r,m,p,o)};var r="today",s=[];a.attemptedColors=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.connectedColors=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"],a.appointmentsColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.calStatsSeries=["Attempted","Connected","Appointments"],a.calStatsColors=["#FB617F","#ff9900","#2FCF92"],a.callsCountData=[],a.hourLables=[],a.getHourWiseTeleCallerData=function(b,c){a.callsCountData=[],a.hourLables=[];var d,e=[],f=[],i=[];a.totalAppointmentsTakenHourly=0,a.totalcallsAttemptedHourly=0,a.totalcallsConnectedHourly=0,a.loaderIconHourWise=!0;var j=g.getToken(n);h.get({date:r,scId:n,callerId:m,branch:o,status:q,token:j},function(b){if(s=b,a.dataErrorMsgHourWise=!1,console.log("Hour wise data :",b),
void 0!==s.callsAttempted&&null!==s.callsAttempted)for(var c=0;c<s.callsAttempted.length;c++)null!==s.callsAttempted[c]&&(a.totalcallsAttemptedHourly+=parseInt(s.callsAttempted[c].callsAttempted),e.push(parseInt(s.callsAttempted[c].callsAttempted)),parseInt(s.callsAttempted[c].Hour)%12>6?d=parseInt(s.callsAttempted[c].Hour)%12+"AM":parseInt(s.callsAttempted[c].Hour)%12<=6&&(d=parseInt(s.callsAttempted[c].Hour)%12+"PM"),parseInt(s.callsAttempted[c].Hour)%12==0&&(d=s.callsAttempted[c].Hour+"PM"),a.hourLables.push(d));if(void 0!==s.callsConnected&&null!==s.callsConnected)for(var g=0;g<s.callsConnected.length;g++)null!==s.callsConnected[g]&&(a.totalcallsConnectedHourly+=parseInt(s.callsConnected[g].callsConnected),f.push(parseInt(s.callsConnected[g].callsConnected)));if(void 0!==s.appointmentTaken&&null!==s.appointmentTaken)for(var h=0;h<s.appointmentTaken.length;h++)null!==s.appointmentTaken[h]&&(a.totalAppointmentsTakenHourly+=parseInt(s.appointmentTaken[h].appointmentTaken),i.push(parseInt(s.appointmentTaken[h].appointmentTaken)));a.callsCountData.push(e),a.callsCountData.push(f),a.callsCountData.push(i),a.hourWiseChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.hourLables,series:a.calStatsSeries,colors:["#FB617F","#ff9900","#2FCF92"],data:a.callsCountData},a.datasetOverrideHourWiseData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors}],a.tcHourWiseDataErrorMsg="",a.loaderIconHourWise=!1},function(b){a.dataErrorMsgHourWise=!0,a.tcHourWiseDataErrorMsg=b.data.message,console.log(b),a.loaderIconHourWise=!1})},a.getHourWiseTeleCallerData(r,m);var t=[];a.calStatsSeriesWeekly=["Attempted","Connected","Appointments"],a.calStatsColorsWeekly=["#FB617F","#ff9900","#2FCF92"],a.callsCountDataWeekly=[],a.weeklyLables=[],a.getWeeklyWiseTeleCallerData=function(b,c){a.callsCountDataWeekly=[],a.weeklyLables=[];var d=[],f=[],h=[];e.totalAppointmentsTakenWeekly=0,e.totalcallsAttemptedWeekly=0,e.totalcallsConnectedWeekly=0,a.loaderIconWeeklyWise=!0;var i=g.getToken(n);j.get({date:r,scId:n,callerId:m,branch:o,status:q,token:i},function(b){if(t=b,a.dataErrorMsgWeekWise=!1,console.log("Week wise data :",b),void 0!==t.callsAttempted&&null!==t.callsAttempted)for(var c=0;c<t.callsAttempted.length;c++)null!==t.callsAttempted[c]&&(e.totalcallsAttemptedWeekly+=parseInt(t.callsAttempted[c].callsAttempted),d.push(parseInt(t.callsAttempted[c].callsAttempted)),a.weeklyLables.push(t.callsAttempted[c].Hour));if(void 0!==t.callsConnected&&null!==t.callsConnected)for(var g=0;g<t.callsConnected.length;g++)null!==t.callsConnected[g]&&(e.totalcallsConnectedWeekly+=parseInt(t.callsConnected[g].callsConnected),h.push(parseInt(t.callsConnected[g].callsConnected)));if(void 0!==t.appointmentTaken&&null!==t.appointmentTaken)for(var i=0;i<t.appointmentTaken.length;i++)null!==t.appointmentTaken[i]&&(e.totalAppointmentsTakenWeekly+=parseInt(t.appointmentTaken[i].appointmentTaken),f.push(parseInt(t.appointmentTaken[i].appointmentTaken)));a.callsCountDataWeekly.push(d),a.callsCountDataWeekly.push(h),a.callsCountDataWeekly.push(f),a.weeklyChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.weeklyLables,series:a.calStatsSeriesWeekly,colors:["#FB617F","#ff9900","#2FCF92"],data:a.callsCountDataWeekly},a.datasetOverrideWeeklyData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors}],a.tcHourWiseDataErrorMsg="",a.loaderIconWeeklyWise=!1},function(b){a.dataErrorMsgWeekWise=!0,a.tcHourWiseDataErrorMsg=b.data.message,console.log(b),a.loaderIconWeeklyWise=!1})},a.getWeeklyWiseTeleCallerData(r,m),$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("crmPSFDetailedPageController",["$scope","$cookies","$route","$filter","$state","$location","ngTableParams","$rootScope","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCAppointmentStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","FeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","$stateParams","$interval","$timeout","TeleCallerWiseServiceCenterService","SendSMSService","TimeSlotSelected","UpdateCustomerPhoneService","GetPresentHourService","CreAppointmentActiveStatusService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V){function W(){U.get(function(a){console.log("present date : ",a),Fa=a.date},function(a){})}function X(b,c){Y(!0),a.customerMobileNumbers=[],Ha="";var d=l.getToken(ya);r.query({apptId:b,scId:ya,status:c,callerId:xa,token:d},function(b){console.log("data in detailed page",b[0]),console.log(b),a.tcAppointmentData=b[0],Ia=b[0].callerApptStatus,Ma&&("inactive"===Ia?(Ja=!0,ga(wa,Da)):"active"===Ia&&Z(Ca,a.tcAppointmentData.apptStatus)),Ka=a.tcAppointmentData.mobile;for(var c=0;c<Ka.length;c++)Ka[c].customer_mobile===a.tcAppointmentData.customer_mobile&&(Ka[c].customer_mobile=Ka[c].customer_mobile+"*",a.currentMobile=Ka[c].customer_mobile),a.customerMobileNumbers.push(Ka[c]);console.log("$scope.currentMobile",a.currentMobile),console.log("tcAppointmentData.mobile",a.customerMobileNumbers),Ga=a.tcAppointmentData.opdId,a.opdIdForPickAndDrop=Ga,Ya=a.tcAppointmentData.opdId,Za=a.tcAppointmentData.bikeNo,void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),ca(a.tcAppointmentData.chassisNo),Y(!1),$("#tcAppointmentDetailsPage").show()},function(b){a.tcAppointmentDataErrorMsg=b.data.message,i.alert("Selected data list is completed. Redirecting to Dashboard !!!"),e.go("PSF"),Y(!1)})}function Y(b){a.loaderIcon=b}function Z(a,b){var c=l.getToken(ya),d={status:"inactive",apptId:a,callerId:xa,scId:ya,apptStatus:b};console.log(JSON.stringify(d)),V.save({id:ya,token:c},d,function(a){console.log("Caller Appointment status Inactive..",a)},function(a){console.log(a)})}function _(){var b=l.getToken(ya);Q.query({callerId:xa,id:ya,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function aa(){var b=l.getToken(ya);C.query({callerId:xa,id:ya,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function ba(b){a.reasonDescriptionForPSF=[];var c=l.getToken(ya);v.query({status:b,id:ya,token:c},function(c){a.reasonDescription=c,"Walkin"===Na&&(a.walkinStatus.remarks=a.reasonDescription[0].apptSubStatus,console.log(a.walkinStatus.remarks)),angular.forEach(c,function(d,e){"Not Interested"===b&&"Service Center Complaint"===c[e].apptSubStatus&&a.reasonDescriptionForPSF.push({apptSubStatus:c[e].apptSubStatus,slNo:c[e].slNo})}),console.log("$scope.reasonDescription::",a.reasonDescription)},function(a){console.log(a)})}function ca(b){var c=l.getToken(ya);s.query({chassisNo:b,id:ya,dataTypeId:La,bikeBrand:Ba,token:c},function(b){a.tcAppointmentHistoryData=b,a.tcAppointmentHistoryData.length?a.noOfTimesCalled=a.tcAppointmentHistoryData.length:a.noOfTimesCalled="0"},function(b){a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function da(b){console.log("Chassis no",b);var c=l.getToken(ya);t.query({chassisNo:b,id:ya,bikeBrand:Ba,token:c},function(b){console.log("Service history data :",b),a.tcServiceHistoryData=b},function(b){console.log(b),a.tcServiceHistoryDataErrorMsg=b.data.message})}function ea(){var b=l.getToken(ya);z.query({id:ya,token:b},function(b){a.feedbackTitleList=[],console.log("feedback question list :",b),angular.forEach(b,function(b){var c={description:b.description,feedBackListId:b.feedBackListId,feedBackType:b.feedBackType,questionType:b.questionType,feedBackStatus:"",feedBackRemarks:"",rating:"",loginId:xa,scId:ya,customerId:ta,mobile:ra,branchId:sa,apptId:ua,lastCalledStatus:va,scComplaints:""};"service"===b.feedBackType&&a.feedbackTitleList.push(c)})},function(a){})}function fa(b,c){angular.forEach(b,function(a,c){""!==b[c].feedBackStatus&&(Ra="feedback")}),console.log("sc Complaints With Feedback",Ra),b.push({description:"Service Center Complaints",feedBackListId:Ra,feedBackType:"",questionType:"",feedBackStatus:"",feedBackRemarks:"",rating:"",loginId:xa,scId:ya,customerId:ta,mobile:ra,branchId:sa,apptId:ua,lastCalledStatus:va,scComplaints:Wa}),console.log("apptData",c),a.tcStatusUpdateMsg="",console.log(JSON.stringify(b));var d=l.getToken(ya);A.save({id:ya,token:d},b,function(d){console.log("Feedback Post :",d),a.noFeedbackMsg="",Ua={customerId:c.customerId,customerName:c.customer_name,status:"walkin",appointmentDateTime:a.feedbackWalkinData.feedbackWalkinDate,subStatus:a.feedbackWalkinData.walkin,scId:ya,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:xa,branchId:c.branchId,appointTime:a.feedbackWalkinData.feedbackWalkinTime,lastCalledStatus:c.lastCalledStatus},Va={customerId:c.customerId,customerName:c.customer_name,scId:ya,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:xa,status:"Pickup and Drop",remarks:a.feedbackPickAndDropData.feedbackPickDropRemarks,bikeBrand:c.bikeBrandId,bikeModel:c.bikeModel,bikeNo:a.feedbackPickAndDropData.bikeNo,appointmentDateTime:a.feedbackPickAndDropData.feedbackPickDropDate,timeSlot:a.feedbackPickAndDropData.feedbackPickDropSlot,address:a.feedbackPickAndDropData.feedbackPickDropAddress,area:a.feedbackPickAndDropData.feedbackPickDropArea,assistanceTypeId:a.feedbackPickAndDropData.feedbackPickDropAssistanceTypeData,branchId:c.branchId,assistanceAmount:a.feedbackPickAndDropData.feedbackPickDropAssistanceAmount,appointTime:a.feedbackPickAndDropData.feedbackPickDropTime,lastCalledStatus:c.lastCalledStatus},console.log("Pick and Drop Obj",JSON.stringify(Va)),Pa&&ha(Ua),Qa&&ha(Va),a.tcStatusUpdateMsg={msg:d.message,nextApptMsg:"Updating to Next Appointment Details"},a.feedbackTitleList=[],a.title={},b={},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),P(function(){ga(wa,Da)},3e3)},function(a){console.log(a)})}function ga(a,b){e.go("psfDetailed",{apptId:a,dataTypeId:b},{reload:!0})}function ha(b){a.tcStatusUpdateMsg="",console.log("request1...",b);var c=l.getToken(ya);x.save({id:ya,token:c},b,function(c){console.log("1st resp feedback",c),Sa=c.opdId,Sa>0&&ia(b),a.tcStatusUpdateMsg={msg:c.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),P(function(){ga(wa,Da)},4e3)},function(a){i.alert(a.data.message),console.log(a)})}function ia(b){var c=H.getToken(ya),d={opdId:Sa,customerId:b.customerId,customerName:b.customerName,customerMobile:b.customerMobile.substr(0,10),callerId:xa,bikeBrand:b.bikeBrand,bikeModel:b.bikeModel,bikeNo:b.bikeNo,appointmentDateTime:b.appointmentDateTime,timeSlot:b.timeSlot,address:b.address,area:b.area,assistanceTypeId:b.assistanceTypeId,assistanceAmount:Ta,lastCalledStatus:b.lastCalledStatus};console.log("2nd req in feedback pickup and drop",d),G.save({id:ya,token:c},d,function(b){console.log("2nd resp",b),a.pickupAndDropStatusUpdateMsg=b.message,i.alert(a.pickupAndDropStatusUpdateMsg)},function(a){console.log(a)})}function ja(){a.serviceCenterComplaintData=[];var b=l.getToken(ya);w.query({id:ya,token:b},function(b){a.serviceCenterComplaintSubStatus=b,console.log("serviceCenterComplaintSubStatus",b),angular.forEach(b,function(b){a.serviceCenterComplaintData.push({id:b.subStatusDescription,label:b.subStatusDescription,slNo:b.slNo})}),console.log("$scope.serviceCenterComplaintData",a.serviceCenterComplaintData)},function(b){a.callerListErrorMsg=b.data.message})}function ka(b){i.alert(b),a.scSMS={},a.sendSMSForm.$setPristine()}function la(){if(Ya&&Za&&$a){a.calculatedAssistanceAmount="",a.assistanceAmountTax="";var b=H.getToken(Ya);L.get({bikeNo:Za,dateTime:$a,scId:Ya,token:b},function(b){b.message?(ab=!0,a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount):(ab=!1,na(Xa,eb))},function(a){ab=!1,na(Xa,eb)}),a.isAMCUser=ab}else ab=!1}function ma(b){if(ab)a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount,console.log("AMC calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount;else{var c=!0;a.calculatedAssistanceAmount="",a.assistanceAmountTax="",b=Math.ceil(b);var d,e,f=gb.length;f-=1,angular.forEach(gb,function(g,h){if(3===bb){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickAndDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickAndDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickAndDrop)+i*parseInt(g.generalServicePricePerKm)*2}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick and drop both calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}else if(1===bb||2===bb){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickDrop)+i*parseInt(g.generalServicePricePerKm)}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick OR drop calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}})}}function na(a,b){if(cb="",a=a.split(","),b=b.split(","),a[0]&&a[1]&&b[0]&&b[1]){var c={lat:parseFloat(a[0]),lng:parseFloat(a[1])},d={lat:parseFloat(b[0]),lng:parseFloat(b[1])};(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[c],destinations:[d],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(a,b){cb=a.rows[0].elements[0].distance.text,cb=cb.split(" "),cb=cb[0],ma(cb)})}}function oa(){var b="1",c=H.getToken(b);M.query({date:$a,assistance_type:bb,scId:Ga,cityId:b,zoneCode:_a,token:c},function(b){a.timeSlotData=b},function(a){i.alert(a.data.message)})}function pa(){gb=[];var b=H.getToken(Ga);I.query({scId:Ga,token:b},function(b){a.scPricing=b,angular.forEach(b,function(a){gb.push(a)})},function(a){})}function qa(){U.get(function(b){console.log("present date : ",b),hb=b.hour,fb===b.date?angular.forEach(a.actualTimeSlot,function(b,c){a.actualTimeSlot[c].value>parseInt(hb)&&a.timeSlot.push({timeSelect:a.actualTimeSlot[c].timeSelect,value:a.actualTimeSlot[c].value})}):fb!==b.date&&(a.timeSlot=a.actualTimeSlot)},function(a){})}var ra,sa,ta,ua,va,wa,xa=b.get("loggedInUserId"),ya=b.get("loggedInUserScId"),za=b.get("loginMobile"),Aa=b.get("loginCallingType"),Ba=b.get("loggedInUserBikeBrand"),Ca=N.apptId;angular.forEach(h.apptIdList,function(a,b){Ca===h.apptIdList[b]&&(wa=h.apptIdList[b+1])});var Da=N.dataTypeId,Ea=N.status;console.log("apptId",Ca);var Fa;W(),a.openCalendarStatus=function(b){a.minDate=new Date(Fa),a.minDateForPickAndDrop=new Date(Fa),"0"!==a.opdIdForPickAndDrop&&0!==a.opdIdForPickAndDrop&&(a.minDateForPickAndDrop=new Date(Fa),a.minDateForPickAndDrop=a.minDateForPickAndDrop.setDate(a.minDateForPickAndDrop.getDate()+1)),b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0},a.customerMobileNumbers=[];var Ga,Ha,Ia,Ja,Ka=[],La=Da,Ma=!0;a.getCustomerNameByPhone=function(b,c){console.log(c),angular.forEach(b,function(d,e){b[e].customer_mobile===c&&(a.tcAppointmentDataDisplay={customer_name:b[e].customer_name})})},X(Ca,Ea),_(),aa(),a.teleCallingStatus=[{apptStatusId:"3",description:"Call Later",slNo:5},{apptStatusId:"2",description:"Walkin",slNo:6}],a.reasonDescriptionForPSF=[],a.teleCallingStatusForPsfUpdate=[{id:2,description:"Walkin"},{id:3,description:"Call Later"},{id:6,description:"Feedback"},{id:7,description:"Not Interested"}],a.feedbackTitleList=[],a.feedbackWalkinData={walkin:"",feedbackWalkinDate:"",feedbackWalkinTime:""},a.feedbackPickAndDropData={pickAndDrop:"",feedbackPickDropDate:"",feedbackPickDropTime:"",feedbackPickDropSlot:"",feedbackPickDropAddress:"",feedbackPickDropArea:"",feedbackPickDropAssistanceTypeData:"",feedbackPickDropAssistanceAmount:"",feedbackPickDropRemarks:""};var Na,Oa=!1;a.updateTeleCallingStatus=function(b,c){console.log("status",b),console.log("selectedTeleCallingData",c.customerId),ta=c.customerId,ra=c.customer_mobile,sa=c.branchId,ua=c.apptId,va=c.lastCalledStatus,ea(),a.tcStatusUpdateMsg="",Na=b,ba(b),a.updateMsg="",a.walkinStatus={},a.updateTeleCallingAppointmentStatus=c,a.selectedStatus=b,"Feedback"===b&&ja(),"Not Interested"===b&&(b="NotInterested-Feedback",console.log("status",b),Oa=i.confirm("Are you sure to Update?"),!0===Oa&&a.updateAppointmentStatus(b,c,""),!1===Oa&&(console.log("Confirmation Cancelled..!"),P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},10)))},a.noFeedbackMsg="Contact Admin for adding Feedback Questions.",a.dealerFeedback={},a.feedBackObject={},a.feedBackRemarksObject={},a.updateUserFeedBack=function(b,c,d){fa(a.feedbackTitleList,d)};var Pa=!1,Qa=!1;a.getWalkinReason=function(a){Pa=!0,ba(a)},a.checkPickDrop=function(){Qa=!0},a.getWalkinCheckForNo=function(){Pa=!1},a.getPickDropCheckForNo=function(){Qa=!1},a.clearUpdateMsg=function(){a.feedbackTitleList=[],a.title={},a.resetServiceCenterComplaints()};var Ra="";a.skipAppointment=function(){ga(wa,Da)};var Sa,Ta,Ua={},Va={};a.updateAppointmentStatus=function(b,c,d){Ua={customerId:c.customerId,customerName:c.customer_name,status:b,appointmentDateTime:d.selectedDate,subStatus:d.remarks,scId:ya,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:xa,branchId:c.branchId,remarksForSubStatus:d.manualRemarks,appointTime:d.timeValue,lastCalledStatus:c.lastCalledStatus,chassisNo:c.chassisNo,bikeModel:c.bikeModel,bikeNo:c.bikeNo},console.log(JSON.stringify(Ua)),a.walkinStatus={},a.walkinCallLaterForm.$setPristine(),ha(Ua)},a.getSelectedReason=function(b){"Service Center Complaint"===b&&(console.log(a.serviceCenterComplaints),0===a.serviceCenterComplaints.length&&(a.notInterestedForm.$invalid=!0))},a.serviceCenterComplaintData=[],a.serviceCenterComplaintSettings={displayProp:"label"};var Wa=[];a.updateServiceCenterComplaints={onItemSelect:function(b){console.log(b),Wa.push(b.id),Wa.length>0?(console.log("item : : :",b),"Others"===b.id&&(a.otherRemarks=!0)):0===Wa.length&&(a.otherRemarks=!1)},onItemDeselect:function(b){console.log(b);var c=Wa.indexOf(b.label);Wa.splice(c,1),Wa.length>0||0===Wa.length&&(a.otherRemarks=!1)}},a.resetServiceCenterComplaints=function(){a.serviceCenterComplaints=[],Wa=[]},a.resetServiceCenterComplaints(),a.callTeleCallingCustomer=function(a,b){console.log(b);var c=l.getToken(ya),d={customerName:a.customer_name,customerMobile:b,customerId:a.customerId,apptId:a.apptId,callerId:xa,scId:ya,callerMobile:za,callingType:Aa};console.log(JSON.stringify(d)),B.save({id:ya,token:c},d,function(a){i.alert(a.message)},function(a){i.alert(a.data.error),console.log(a)})},a.updateServiceCenter=function(b,c,d){var e=l.getToken(ya),f={old_scId:c,new_scId:d,apptId:b,callerId:xa,scId:ya};console.log(JSON.stringify(f)),F.save({id:ya,token:e},f,function(b){a.updateServiceCenterSuccessMsg=b.message,Ma=!1,X(Ca,Ea),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.serviceCenterObj={},a.updateServiceCenterForm.$setPristine()},function(b){console.log(b),a.updateServiceCenterErrorMsg=b.data.message})},a.sendSCSMS=function(c,d){a.loading=!0;var e={scId:b.get("loggedInUserScId"),logInId:b.get("loggedInUserId"),mobileNumber:d,message:c.message,charCount:c.message.length};console.log(JSON.stringify(e));var f=parseInt(100*Math.random()),g=l.getToken(f);R.save({id:f,token:g},e,function(b){console.log(b),ka(b.message),a.loading=!1},function(b){console.log(b),ka(b.data.message),a.loading=!1})},a.clearPhoneUpdateMsg=function(){a.editPhoneSuccessMsg=""},a.clearServiceCenterUpdateMsg=function(){a.updateServiceCenterSuccessMsg=""},a.editPhoneNumber=function(b,c,d,e){console.log("selMobile",b),a.editPhoneSuccessMsg="";var f={mobile:b,customerName:c.customer_name,chassisNo:c.chassisNo,scId:ya,defaultNumber:d,customerId:c.customerId,customerStatus:e};console.log(JSON.stringify(f));var g=l.getToken(ya);T.save({id:ya,token:g},f,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,Ma=!1,X(Ca,Ea),P(function(){$("#editPhoneModal").modal("hide"),$("#activeDeactivePhoneModal").modal("hide"),X(Ca,Ea)},2e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})},a.assistanceTypes=[{id:1,assistanceType:"Pick Only"},{id:2,assistanceType:"Drop Only"},{id:3,assistanceType:"Pickup and Drop"}];var Xa,Ya,Za,$a,_a,ab=!1;a.getSCDetail=function(a){var b=H.getToken(a);Xa="",pa(),K.get({scId:a,token:b},function(a){console.log("sc lat long",a),Xa=a.latlng,_a=a.zoneCode},function(a){console.log("sc lat long error",a)})};var bb;a.getAssistanceType=function(b){bb=b,a.getSCDetail(Ga)};var cb,db,eb;a.getPickupDropArea=function(b,c){a.getSelectedDate(c),c?($a=c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2),db=b.formatted_address,eb="",ab||J.getLocationCoordinates(db).then(function(b){eb=b,la(),na(Xa,eb),a.opdIdForPickAndDrop>0&&oa()},function(a){})):console.log("Date Not Selected Yet...")};var fb,gb=[];a.getSelectedDate=function(b){var c=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2);fb=c,console.log(fb),qa(),a.timeSlot=[]},a.actualTimeSlot=S.getTime(),a.timeSlot=[];var hb;a.checkDatesByReason=function(b,c){console.log(b),"Call Later"===Na&&("Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1,null!==b&&void 0!==b||(a.walkinCallLaterForm.$invalid=!0)),"Customer will call and Confirm"!==b&&"Out of Station"!==b&&"Customer Busy"!==b||(a.walkinStatus.selectedDate="",a.walkinStatus.timeValue=""))},a.walkinRemarkCheck=function(){void 0!==a.walkinStatus.remarks?"Customer agreed to Walkin"!==a.walkinStatus.remarks&&"Customer tentively agreed to Walkin"!==a.walkinStatus.remarks&&"Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&"Required KMs not travelled"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1):a.walkinCallLaterForm.$invalid=!0},a.getHistory=function(){ca(a.tcAppointmentData.chassisNo),da(a.tcAppointmentData.chassisNo)};var ib,jb=!1;a.getUpdateMobileStatus=function(b,c,d,e){ib=e,"primary"===e&&P(function(){console.log(kb),console.log(a.tcAppointmentData.customer_mobile),kb===a.tcAppointmentData.customer_mobile?(alert("This is already a Primary Number"),jb=!1):kb!==a.tcAppointmentData.customer_mobile&&(jb=i.confirm("Are you sure to make this Mobile No. as Primary?")),jb?(console.log("Updating :",ib),a.editPhoneNumber(kb,c,d,ib),a.phoneObj={}):console.log("Cancelled the Making Primary Event")},300)},$("#activeDeactivePhoneModal").modal("hide");var kb;a.updateMobileStatus=function(b){a.mobileDisplay=b,b.substr(0,10)===a.tcAppointmentData.customer_mobile?a.primaryStatus=!0:b.substr(0,10)!==a.tcAppointmentData.customer_mobile&&(a.primaryStatus=!1),a.editPhoneSuccessMsg="",a.editPhoneErrorMsg="",console.log(b),null!==b&&(kb=b.substr(0,10),$("#activeDeactivePhoneModal").modal("show"))},a.clearActiveInactiveModal=function(){$("#activeDeactivePhoneModal").modal("hide")}}]),angular.module("letsService").controller("profileController",["$scope","$window","$rootScope","$timeout","$filter","ngTableParams","$cookies","TokenService","GetCallerWiseServiceCenterService","PostServiceFeedbackService","serviceURL","TeleCallerPsfDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","GetFeedbackTitleService","FeedBackDataService","TCAppointmentStatusUpdateService","TeleCallerReasonService","TeleCallingSearchService","TeleCallerWiseServiceCenterService","TeleCallingCallService","UpdateTelecallerServiceCenterService","TimeSlotSelected","AdminProfileInformation","GetScWiseTeleCallerService","ManageCallerService","CreateTeleCallerService","GetCallerService","TeleCallingSMSPackageService","TeleCallingSMSPricingService","ResetCallerCredentialsService","NotifyLicenseService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){function G(b){a.loaderIcon=b}function H(){var b=h.getToken(N);t.query({id:N,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function I(){G(!0);var b=h.getToken(N);x.query({scId:N,token:b},function(b){G(!1),a.adminDetails=b[0];var c=a.adminDetails.email;a.email=c.split(","),a.branchDetails=b[1].braches,a.remainingCount=a.adminDetails.callerCount-a.adminDetails.activeCallers,angular.forEach(a.branchDetails,function(b,c){var d=a.branchDetails[c].email;a.branchEmail=d.split(",")})},function(b){G(!1),a.psfStatsErrorMsg=b.data.message,console.log("Error",b)})}function J(){var b=h.getToken(N);y.query({id:N,token:b},function(b){a.saasCaller=b},function(b){a.callerListErrorMsg=b.data.message})}function K(){var b=g.get("loggedInUserScId"),c=h.getToken(b);C.query({scId:b,token:c},function(b){a.smsPackages=b},function(b){a.smsPackagesErrorMsg=b.data.message})}function L(b){var c=g.get("loggedInUserScId"),d=h.getToken(c);D.get({smsCount:b,scId:c,token:d},function(b){a.smsPricing=b},function(b){a.smsPricingErrorMsg=b.data.message})}var M=g.get("loggedInUserIdAdmin"),N=g.get("loggedInUserScIdAdmin"),O=g.get("loggedInUserRoleAdmin"),P=g.get("loggedInUserBikeBrandAdmin");H(),a.email=[],a.branchEmail=[],I(),a.selectedCaller,J(),a.currentStatus;var Q,R=[];a.editingCallerId,a.getCallerCredentialsByName=function(b,c){console.log("selectedCaller",c),Q=c,R=b,angular.forEach(b,function(d,e){b[e].username===c&&(a.currentStatus=b[e].status,a.editingCallerId=b[e].loginId)}),$("editingCallerId").show(),console.log("selectedCallerStatus",a.currentStatus)},a.getCallerCredentialsByName(a.callerList,a.selectedCaller),a.createTeleCaller=function(b){a.callerCreateMsg="",a.callerCreateErrorMsg="";for(var c=h.getToken(N),e=[],f=b.selectedServiceCenter,g=0;g<f.length;g++)e.push(f[g]);var i={username:b.username,password:b.password,mobile:b.mobile,role:O,adminId:M,branchIds:e.toString(),scId:N,bikeBrand:P};console.log(i),a.createTellecaller={},a.createTelecallerForm.$setPristine(),a.callerCreateMsg=!1,A.save({id:N,token:c},i,function(b){a.callerCreateMessageAlert=!1,a.callerCreateErrorMessageAlert=!1,console.log(b),a.callerCreateMsg=" Username : "+b.Username+"   Password : "+b.Password,a.callerCreateErrorMsg="",d(function(){$("#createCaller").modal("hide")},4e3),J()},function(b){console.log(b),a.callerCreateErrorMsg=b.data.message,d(function(){a.callerCreateErrorMessageAlert=!0},3e3)})};var S,T;a.updateCallerStatus=function(c,d){angular.forEach(c,function(a,b){c[b].username===d&&(T=c[b].loginId,S=c[b].status)}),console.log("selectedLoginId",T),console.log("selectedStatus",S),console.log("Login",d);var e,f;if("active"===S?(e="inactive",f="Are you sure you want to deactivate caller "+d):"inactive"===S&&(e="active",f="Are you sure you want to activate caller "+d),b.confirm(f)){var g={status:e,callerId:T,adminId:M,scId:N},i=parseInt(100*Math.random()),j=h.getToken(i);z.save({id:i,token:j},g,function(c){J(),b.alert(c.message),a.currentStatus="",I()},function(a){console.log(a)})}},K();var U;a.getSmsPricing=function(b){">10000"!==b&&L(b),a.smsPricing=[]},a.getSmsPricingMore=function(b){b<10001?a.smsMsg="Enter more than 10000":b>1e4&&(a.smsMsg="",U=b,L(b))},a.paySms=function(a){">10000"===a&&(a=U);var c=g.get("loggedInUserScId");b.open(k+"templates/paytm/paytmTransaction.php?letsservice&smsCount="+a+"&customerId="+c)},a.changeCredentials=function(b){a.editCallerMsg="";var c=g.get("loggedInUserScId"),e=h.getToken(c),f={userName:b.username,password:b.password,scId:c,callerId:a.editingCallerId};console.log("Caller Credentials",JSON.stringify(f)),E.save({scId:c,token:e},f,function(b){console.log(b),a.editCallerMsg=b.message,J(),d(function(){$("#editCaller").modal("hide")},2e3)},function(b){console.log("Error in updating",b),a.editCallerMsg="Caller is Already Exist!"})};var V,W="Are you sure to buy the license?",X="Are you sure to renew the Validity?";a.buyLicenseNow=function(a){
if(!0===(V="buyLicenceNow"===a?b.confirm(W):b.confirm(X))){var c=g.get("loggedInUserScId"),d=h.getToken(c);F.get({scId:c,status:a,token:d},function(a){b.alert(a.message)},function(a){console.log("Error in requesting license",a)})}else console.log("Cancelled")},a.clearEditModel=function(){a.editCallerMsg="",a.editTeleCaller=""},$("#showHideCaller").show()}]),angular.module("letsService").controller("crmSalesFeedbackDetailedController",["$scope","$cookies","$route","$filter","$state","$location","ngTableParams","$rootScope","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","TeleCallerPerticularAppointmentDataService","TeleCallerPerticularAppointmentHistoryDataService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCAppointmentStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","FeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","$stateParams","$interval","$timeout","TeleCallerWiseServiceCenterService","SendSMSService","TimeSlotSelected","UpdateCustomerPhoneService","GetPresentHourService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){function V(){U.get(function(a){console.log("present date : ",a),za=a},function(a){})}function W(b,c){X(!0),a.customerMobileNumbers=[],Ba="";var d=l.getToken(ta);r.query({apptId:b,scId:ta,status:c,callerId:sa,token:d},function(b){console.log("data in detailed page",b[0]),console.log(b),a.tcAppointmentData=b[0],Ca=a.tcAppointmentData.mobile;for(var c=0;c<Ca.length;c++)a.customerMobileNumbers.push(Ca[c].customer_mobile);a.currentMobile=a.customerMobileNumbers[0],Aa=a.tcAppointmentData.opdId,a.opdIdForPickAndDrop=Aa,void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),aa(a.tcAppointmentData.chassisNo),ba(a.tcAppointmentData.chassisNo),X(!1),$("#tcAppointmentDetailsPage").show()},function(b){a.tcAppointmentDataErrorMsg=b.data.message,i.alert("Selected data list is completed. Redirecting to Dashboard !!!"),e.go("salesFeedback"),X(!1)})}function X(b){a.loaderIcon=b}function Y(){var b=l.getToken(ta);Q.query({callerId:sa,id:ta,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function Z(){var b=l.getToken(ta);C.query({callerId:sa,id:ta,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function _(b){var c=l.getToken(ta);v.query({status:b,id:ta,token:c},function(b){a.reasonDescription=b,console.log("$scope.reasonDescription::",a.reasonDescription)},function(a){console.log(a)})}function aa(b){var c=l.getToken(ta);s.query({chassisNo:b,id:ta,dataTypeId:Da,token:c},function(b){a.tcAppointmentHistoryData=b,a.tcAppointmentHistoryData.length?a.noOfTimesCalled=a.tcAppointmentHistoryData.length:a.noOfTimesCalled="0"},function(b){a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function ba(b){console.log("Chassis no",b);var c=l.getToken(ta);t.query({chassisNo:b,id:ta,token:c},function(b){console.log("Service history data :",b),a.tcServiceHistoryData=b},function(b){console.log(b),a.tcServiceHistoryDataErrorMsg=b.data.message})}function ca(){var b=l.getToken(ta);z.query({id:ta,token:b},function(b){a.feedbackTitleList=[],console.log("feedback question list :",b),angular.forEach(b,function(b){var c={description:b.description,feedBackListId:b.feedBackListId,feedBackType:b.feedBackType,questionType:b.questionType,feedBackStatus:"",feedBackRemarks:"",rating:"",loginId:sa,scId:ta,customerId:oa,apptId:pa,lastCalledStatus:qa};a.feedbackTitleList.push(c)})},function(a){})}function da(b,c){console.log(JSON.stringify(b));var d=l.getToken(ta);A.save({id:ta,token:d},b,function(b){console.log("Feedback Post :",b),Ja={customerId:c.customerId,customerName:c.customer_name,status:"walkin",appointmentDateTime:a.feedbackWalkinData.feedbackWalkinDate,subStatus:a.feedbackWalkinData.walkin,scId:ta,scName:c.scName,customerMobile:c.customer_mobile,apptId:c.apptId,callerId:sa,branchId:c.branchId,appointTime:a.feedbackWalkinData.feedbackWalkinTime,lastCalledStatus:c.lastCalledStatus},Ka={customerId:c.customerId,customerName:c.customer_name,scId:ta,scName:c.scName,customerMobile:c.customer_mobile,apptId:c.apptId,callerId:sa,status:"Pickup and Drop",remarks:a.feedbackPickAndDropData.feedbackPickDropRemarks,bikeBrand:c.bikeBrandId,bikeModel:c.bikeModel,bikeNo:c.bikeNo,appointmentDateTime:a.feedbackPickAndDropData.feedbackPickDropDate,timeSlot:a.feedbackPickAndDropData.feedbackPickDropSlot,address:a.feedbackPickAndDropData.feedbackPickDropAddress,area:a.feedbackPickAndDropData.feedbackPickDropArea,assistanceTypeId:a.feedbackPickAndDropData.feedbackPickDropAssistanceTypeData,branchId:c.branchId,assistanceAmount:a.feedbackPickAndDropData.feedbackPickDropAssistanceAmount,appointTime:a.feedbackPickAndDropData.feedbackPickDropTime,lastCalledStatus:c.lastCalledStatus},Fa&&fa(Ja),Ga&&fa(Ka),a.tcStatusUpdateMsg={msg:b.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),P(function(){ea(ra,xa)},4e3)},function(a){console.log(a)})}function ea(a,b){e.go("salesFeedbackDetailed",{apptId:a,dataTypeId:b},{reload:!0}),console.log("nextAppointmentId:",a),console.log("nextAppointmentId:",ra)}function fa(b){a.tcStatusUpdateMsg="",console.log("request1...",b);var c=l.getToken(ta);x.save({id:ta,token:c},b,function(c){console.log("1st resp feedback",c),Ha=c.opdId,Ha>0&&ga(b),a.tcStatusUpdateMsg={msg:c.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),P(function(){ea(ra,xa)},3e3)},function(a){i.alert(a.data.message),console.log(a)})}function ga(b){var c=H.getToken(ta),d={opdId:Ha,customerId:b.customerId,customerName:b.customerName,customerMobile:b.customerMobile,callerId:sa,bikeBrand:b.bikeBrand,bikeModel:b.bikeModel,bikeNo:b.bikeNo,appointmentDateTime:b.appointmentDateTime,timeSlot:b.timeSlot,address:b.address,area:b.area,assistanceTypeId:b.assistanceTypeId,assistanceAmount:Ia,lastCalledStatus:b.lastCalledStatus};console.log("2nd req in feedback pickup and drop",d),G.save({id:ta,token:c},d,function(b){console.log("2nd resp",b),a.pickupAndDropStatusUpdateMsg=b.message,i.alert(a.pickupAndDropStatusUpdateMsg)},function(a){console.log(a)})}function ha(b){i.alert(b),a.scSMS={},a.sendSMSForm.$setPristine()}function ia(){if(Ma&&Na&&Oa){a.calculatedAssistanceAmount="",a.assistanceAmountTax="";var b=H.getToken(Ma);L.get({bikeNo:Na,dateTime:Oa,scId:Ma,token:b},function(b){b.message?(Qa=!0,a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount):(Qa=!1,ka(La,Ua))},function(a){Qa=!1,ka(La,Ua)}),a.isAMCUser=Qa}else Qa=!1}function ja(b){if(Qa)a.calculatedAssistanceAmount=0,a.assistanceAmountTax="Total payable assistance amount will be 0 + Tax",a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount,console.log("AMC calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount;else{var c=!0;a.calculatedAssistanceAmount="",a.assistanceAmountTax="",b=Math.ceil(b);var d,e,f=Wa.length;f-=1,angular.forEach(Wa,function(g,h){if(3===Ra){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickAndDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickAndDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickAndDrop)+i*parseInt(g.generalServicePricePerKm)*2}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick and drop both calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}else if(1===Ra||2===Ra){if(d=g.priceSlotPickAndDrop.split(" - "),b<=parseInt(d[0])&&c)c=!1,e=parseInt(g.priceBySlotPickDrop);else if(parseInt(b)>=parseInt(d[0])&&parseInt(b)<=parseInt(d[1])&&c)e=parseInt(g.priceBySlotPickDrop),c=!1;else if(parseInt(b)>=parseInt(d[1])&&c)if(h>=f){c=!1;var i=b-parseInt(d[1]);e=parseInt(g.priceBySlotPickDrop)+i*parseInt(g.generalServicePricePerKm)}else c=!0;a.calculatedAssistanceAmount=e,a.assistanceAmountTax="Total payable assistance amount will be "+e+" + Tax",console.log("pick OR drop calculatedAssistanceAmount;",a.calculatedAssistanceAmount),a.pickUpRequest.assistanceAmount=a.calculatedAssistanceAmount}})}}function ka(a,b){if(Sa="",a=a.split(","),b=b.split(","),a[0]&&a[1]&&b[0]&&b[1]){var c={lat:parseFloat(a[0]),lng:parseFloat(a[1])},d={lat:parseFloat(b[0]),lng:parseFloat(b[1])};(new google.maps.DistanceMatrixService).getDistanceMatrix({origins:[c],destinations:[d],travelMode:"DRIVING",unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},function(a,b){Sa=a.rows[0].elements[0].distance.text,Sa=Sa.split(" "),Sa=Sa[0],ja(Sa)})}}function la(){var b="1",c=H.getToken(b);M.query({date:Oa,assistance_type:Ra,scId:Aa,cityId:b,zoneCode:Pa,token:c},function(b){a.timeSlotData=b},function(a){i.alert(a.data.message)})}function ma(){Wa=[];var b=H.getToken(Aa);I.query({scId:Aa,token:b},function(b){a.scPricing=b,angular.forEach(b,function(a){Wa.push(a)})},function(a){})}function na(){U.get(function(b){console.log("present date : ",b),Xa=b.hour,Va===b.date?angular.forEach(a.actualTimeSlot,function(b,c){a.actualTimeSlot[c].value>parseInt(Xa)&&a.timeSlot.push({timeSelect:a.actualTimeSlot[c].timeSelect,value:a.actualTimeSlot[c].value})}):Va!==b.date&&(a.timeSlot=a.actualTimeSlot)},function(a){})}var oa,pa,qa,ra,sa=b.get("loggedInUserId"),ta=b.get("loggedInUserScId"),ua=b.get("loginMobile"),va=b.get("loginCallingType"),wa=N.apptId;angular.forEach(h.apptIdList,function(a,b){wa===h.apptIdList[b]&&(ra=h.apptIdList[b+1])});var xa=N.dataTypeId,ya=N.status;console.log("apptId",wa);var za;a.openCalendar=function(b,c){b.preventDefault(),V(),a.minDate=new Date(za.date),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){V(),a.minDate=new Date(za.date),b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0},a.customerMobileNumbers=[];var Aa,Ba,Ca=[],Da=xa;W(wa,ya),Y(),Z(),a.teleCallingStatus=[{apptStatusId:"3",description:"Call Later",slNo:5},{apptStatusId:"2",description:"Walkin",slNo:6}];var Da;$("#tcAppointmentDetailsPage").hide(),a.getTCPSFDetailsData=function(a){a.entity.apptId;Da=a.entity.dataTypeId,W(wa,ya)},a.teleCallingStatusForPsfUpdate=[{id:2,description:"Walkin"},{id:3,description:"Call Later"},{id:6,description:"Feedback"}],a.feedbackWalkinData={walkin:"",feedbackWalkinDate:"",feedbackWalkinTime:""},a.feedbackPickAndDropData={pickAndDrop:"",feedbackPickDropDate:"",feedbackPickDropTime:"",feedbackPickDropSlot:"",feedbackPickDropAddress:"",feedbackPickDropArea:"",feedbackPickDropAssistanceTypeData:"",feedbackPickDropAssistanceAmount:"",feedbackPickDropRemarks:""};var Ea;a.updateTeleCallingStatus=function(b,c){console.log("selectedTeleCallingData",c.customerId),oa=c.customerId,pa=c.apptId,qa=c.lastCalledStatus,ca(),a.tcStatusUpdateMsg="",Ea=b,_(b),a.updateMsg="",a.walkinStatus={},a.updateTeleCallingAppointmentStatus=c,a.selectedStatus=b},a.dealerFeedback={},a.feedBackObject={},a.feedBackRemarksObject={},a.updateUserFeedBack=function(b,c,d){da(a.feedbackTitleList,d)};var Fa=!1,Ga=!1;a.getWalkinReason=function(a){Fa=!0,_(a)},a.checkPickDrop=function(){Ga=!0},a.skipAppointment=function(){ea(ra,xa)};var Ha,Ia,Ja={},Ka={};a.updateAppointmentStatus=function(b,c,d){Ja={customerId:c.customerId,customerName:c.customer_name,status:b,appointmentDateTime:d.selectedDate,subStatus:d.remarks||a.walkinSubStatus,scId:ta,scName:c.scName,customerMobile:c.customer_mobile,apptId:c.apptId,callerId:sa,branchId:c.branchId,remarksForSubStatus:d.manualRemarks,appointTime:d.timeValue,lastCalledStatus:c.lastCalledStatus},a.walkinStatus={},a.walkinCallLaterForm.$setPristine(),fa(Ja)},a.callTeleCallingCustomer=function(a,b){console.log(b);var c=l.getToken(ta),d={customerName:a.customer_name,customerMobile:b,customerId:a.customerId,apptId:a.apptId,callerId:sa,scId:ta,callerMobile:ua,callingType:va};console.log(JSON.stringify(d)),B.save({id:ta,token:c},d,function(a){i.alert(a.message)},function(a){i.alert(a.data.error),console.log(a)})},a.updateServiceCenter=function(b,c,d){var e=l.getToken(ta),f={old_scId:c,new_scId:d,apptId:b,callerId:sa,scId:ta};console.log(JSON.stringify(f)),F.save({id:ta,token:e},f,function(b){a.updateServiceCenterSuccessMsg=b.message,W(wa,ya),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.serviceCenterObj={},a.updateServiceCenterForm.$setPristine()},function(b){console.log(b),a.updateServiceCenterErrorMsg=b.data.message})},a.sendSCSMS=function(c,d){a.loading=!0;var e={scId:b.get("loggedInUserScId"),logInId:b.get("loggedInUserId"),mobileNumber:d,message:c.message,charCount:c.message.length};console.log(JSON.stringify(e));var f=parseInt(100*Math.random()),g=l.getToken(f);R.save({id:f,token:g},e,function(b){console.log(b),ha(b.message),a.loading=!1},function(b){console.log(b),ha(b.data.message),a.loading=!1})},a.clearPhoneUpdateMsg=function(){a.editPhoneSuccessMsg=""},a.clearServiceCenterUpdateMsg=function(){a.updateServiceCenterSuccessMsg=""},a.editPhoneNumber=function(b,c){console.log("newPhoneNumber",b),a.editPhoneSuccessMsg="";var d={mobile:b,customerName:c.customer_name,chassisNo:c.chassisNo,scId:ta};console.log(JSON.stringify(d));var e=l.getToken(ta);T.save({id:ta,token:e},d,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,W(wa,ya),P(function(){$("#editPhoneModal").modal("hide")},3e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})},a.assistanceTypes=[{id:1,assistanceType:"Pick Only"},{id:2,assistanceType:"Drop Only"},{id:3,assistanceType:"Pickup and Drop"}];var La,Ma,Na,Oa,Pa,Qa=!1;a.getSCDetail=function(a){var b=H.getToken(a);La="",ma(),K.get({scId:a,token:b},function(a){console.log("sc lat long",a),La=a.latlng,Pa=a.zoneCode},function(a){console.log("sc lat long error",a)})};var Ra;a.getAssistanceType=function(b){Ra=b,a.getSCDetail(Aa)};var Sa,Ta,Ua;a.getPickupDropArea=function(b,c){c?(Oa=c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2),Ta=b.formatted_address,Ua="",Qa||J.getLocationCoordinates(Ta).then(function(b){Ua=b,ia(),ka(La,Ua),a.opdIdForPickAndDrop>0&&la()},function(a){})):console.log("Date Not Selected Yet...")};var Va,Wa=[];a.getSelectedDate=function(b){var c=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2);Va=c,console.log(Va),na(),a.timeSlot=[]},a.actualTimeSlot=S.getTime(),a.timeSlot=[];var Xa}]),angular.module("letsService").controller("CrmInsuranceController",["$scope","$cookies","$rootScope","$filter","ngTableParams","TokenService","GetInsuranceDashboardStatsService","GetInsuranceDashboardDetailsService","GetCallerWiseServiceCenterService","CreInsuranceFilterTypeDataService",function(a,b,c,d,e,f,g,h,i,j){function k(b){a.loaderIcon=b}function l(b){u=b,k(!0);var c=f.getToken(r);g.query({scId:r,callerId:q,branchId:u,brand:s,token:c},function(b){console.log("cre Insurance dashboard data :",b),a.creDashboardData=b,k(!1)},function(b){k(!1),a.creDashboardDataErrorMsg=b.data.message})}function m(a){c.tableParams.page(a),c.tableParams.reload()}function n(a){c.tableParams.count(a)}function o(a){0===a.indexOf(c.tableParams.count())&&(a.push(c.tableParams.count()),a.sort()),c.tableParams.settings({counts:a})}function p(){var b=f.getToken(r);i.query({callerId:q,id:r,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}var q=b.get("loggedInUserId"),r=b.get("loggedInUserScId"),s=b.get("loggedInUserBikeBrand");a.insuranceAccess=b.get("insuranceAccess"),c.creTableData=[],c.apptIdList=[],c.showTable=!1;var t,u="all",v="noSubStatus";a.getSelectedServiceCenter=function(a){console.log(a),u=a,null===a&&(u="all"),l(u)},l(u),a.getPericularStatsData=function(b){"dueCalls"===b&&(c.showTable=!1),k(!0),t=b,c.defaultStatusInsurance=b;var d=f.getToken(r);j.get({callerId:q,scId:r,branchId:u,brand:s,token:d},function(b){console.log("CRE filtered count success :",b),a.creFilteredDataTypes=b,a.statusOption={},k(!1)},function(b){console.log("Error",b),k(!1),a.creFilteredDataTypesErrorMsg=b.data.message},function(a){console.log(a)})},a.getPerticularStatsTableData=function(a,b){console.log("status",a),k(!0),t=a,c.defaultStatusInsurance=a,v=b,c.defaultSubStatusInsurance=b;var d=f.getToken(r);h.query({scId:r,callerId:q,status:t,branchId:u,subStatus:v,brand:s,token:d},function(a){console.log("cre Table Insurance Data success :",a),c.creTableDataErrorMsg="",c.creTableData=a,angular.forEach(c.creTableData,function(a,b){c.apptIdList.push(c.creTableData[b].apptId)}),c.tableParams.reload(),k(!1),c.showTable=!0,c.tableParams.page(1)},function(a){console.log("Error",a),c.creTableData=[],c.tableParams.reload(),void 0!==b&&null!==b&&""!==b&&(c.showTable=!0),k(!1),c.creTableDataErrorMsg=a.data.message},function(a){console.log(a)})},a.getPerticularStatsTableData(c.defaultStatusInsurance,c.defaultSubStatusInsurance),c.tableParams=new e({page:1,count:20},{total:c.creTableData.length,getData:function(b,e){var f=e.sorting()?d("orderBy")(c.creTableData,e.orderBy()):c.creTableData;f=e.filter()?d("filter")(f,e.filter()):f,a.orderedData=f,e.total(f.length),b.resolve(a.users=f.slice((e.page()-1)*e.count(),e.page()*e.count()))}},{counts:[10,20]}),c.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=c.tableParams.settings().counts,a.changePage=m,a.changePageSize=n,a.changePageSizes=o,p(),$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("CrmInsuranceDetailedController",["$scope","$cookies","$route","$filter","$state","$location","ngTableParams","$rootScope","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","GetPerticularInsuranceDetailsService","GetInsuranceHistoryService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCInsuranceStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","FeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","$stateParams","$interval","$timeout","TeleCallerWiseServiceCenterService","SendSMSService","TimeSlotSelected","UpdateInsuranceCustomerPhoneService","GetPresentHourService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){function V(){U.get(function(a){console.log("present date : ",a),pa=a.date},function(a){})}function W(){var b=l.getToken(ia);Q.query({id:ia,token:b},function(b){ra=b,ra.push({scName:"Others"}),a.serviceCenterListForServiceDone=ra,console.log("service center for service done",a.serviceCenterListForServiceDone)},function(b){a.serviceCenterErrorMsg=b.data.message})}function X(){var b=l.getToken(ia);Q.query({callerId:ha,id:ia,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function Y(b){Z(!0),a.customerMobileNumbers=[],ta="";var c=l.getToken(ia);r.query({apptId:b,scId:ia,brand:ka,token:c},function(b){console.log("data in detailed page",b[0]),a.tcAppointmentData=b[0],ua=a.tcAppointmentData.mobile;for(var c=0;c<ua.length;c++)ua[c].customerMobile===a.tcAppointmentData.customerMobile&&(ua[c].customerMobile=ua[c].customerMobile+"*",a.currentMobile=ua[c].customerMobile),a.customerMobileNumbers.push(ua[c]);console.log("$scope.currentMobile",a.currentMobile),a.getCustomerNameByPhone(a.customerMobileNumbers,a.currentMobile),console.log("tcAppointmentData.mobile",a.customerMobileNumbers),sa=a.tcAppointmentData.opdId,a.opdIdForPickAndDrop=sa,void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),Z(!1)},function(b){a.tcAppointmentDataErrorMsg=b.data.message,i.alert("Selected data list is completed. Redirecting to Dashboard !!!"),e.go("insurance"),Z(!1)})}function Z(b){a.loaderIcon=b}function _(b){var c=l.getToken(ia);s.query({chassisno:b,dealerId:ia,token:c},function(b){console.log("Insurance history data :",b),a.tcAppointmentHistoryData=b},function(b){console.log("Insurance history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function aa(b){var c=l.getToken(ia);v.query({status:b,id:ia,token:c},function(b){a.reasonDescription=b,"Walkin"===va&&(a.walkinStatus.remarks=a.reasonDescription[0].apptSubStatus,console.log(a.walkinStatus.remarks)),angular.forEach(b,function(c,d){"Service Center Complaint"!==b[d].apptSubStatus&&a.reasonDescriptionForInsurance.push({apptSubStatus:b[d].apptSubStatus,slNo:b[d].slNo})})},function(a){console.log(a)})}function ba(a,b){e.go("insuranceDetailed",{apptId:a,dataTypeId:b},{reload:!0})}function ca(b){a.tcStatusUpdateMsg="",console.log("request1...",b);var c=l.getToken(ia);x.save({id:ia,token:c},b,function(b){console.log("1st resp",b),a.walkinConfirmStaus=!1,xa=b.opdId,console.log("opdID : ",xa),a.tcStatusUpdateMsg={msg:b.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),P(function(){ba(la,oa)},3e3)},function(a){i.alert(a.data.message),console.log(a)})}function da(){var b=l.getToken(ia);z.query({id:ia,token:b},function(b){a.feedbackTitleList=b},function(a){})}function ea(b){i.alert(b),a.scSMS={},a.sendSMSForm.$setPristine()}function fa(){U.get(function(b){console.log("present date : ",b),Da=b.hour,Ca===b.date?angular.forEach(a.actualTimeSlot,function(b,c){a.actualTimeSlot[c].value>parseInt(Da)&&a.timeSlot.push({timeSelect:a.actualTimeSlot[c].timeSelect,value:a.actualTimeSlot[c].value})}):Ca!==b.date&&(a.timeSlot=a.actualTimeSlot)},function(a){})}function ga(){var b=l.getToken(ia);w.query({id:ia,token:b},function(b){a.serviceCenterComplaintSubStatus=b,angular.forEach(b,function(b){a.serviceCenterComplaintData.push({id:b.subStatusDescription,label:b.subStatusDescription,slNo:b.slNo})})},function(b){a.callerListErrorMsg=b.data.message})}var ha=b.get("loggedInUserId"),ia=b.get("loggedInUserScId"),ja=b.get("loginMobile"),ka=b.get("loggedInUserBikeBrand");a.loginBrandName=b.get("loggedInUserBikeBrand");var la,ma=b.get("loginCallingType"),na=N.apptId;angular.forEach(h.apptIdList,function(a,b){na===h.apptIdList[b]&&(la=h.apptIdList[b+1])});var oa=N.dataTypeId;console.log("apptId",na);var pa;if(V(),a.openCalendarStatus=function(b){a.maxDate=pa,a.minDate=new Date(pa),b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0},a.teleCallingStatusForUpdate=[{id:2,description:"Walkin"},{id:3,description:"Call Later"},{id:2,description:"Not Interested"},{id:6,description:"Insurance Done"}],"1"===ia&&a.teleCallingStatusForUpdate)for(var qa=0;qa<a.teleCallingStatusForUpdate.length;qa++)"Not Interested"===a.teleCallingStatusForUpdate[qa].description&&(a.teleCallingStatusForUpdate[qa].description="Others");var ra={};a.serviceCenterListForServiceDone={},X(),a.customerMobileNumbers=[];var sa,ta,ua=[];a.getCustomerNameByPhone=function(b,c){console.log(c),angular.forEach(b,function(d,e){b[e].customerMobile===c&&(a.tcAppointmentDataDisplay={customerName:b[e].customerName})})},Y(na);var va;a.updateTeleCallingStatus=function(b,c){a.tcStatusUpdateMsg="",va=b,"1"===ia&&"Others"===b&&(b="Not Interested"),a.reasonDescriptionForInsurance=[],aa(b),a.updateMsg="",a.walkinStatus={},a.updateTeleCallingAppointmentStatus=c,a.selectedStatus=b,"Insurance Done"===b&&W()};var wa;a.updateServiceDoneStatus=function(b){wa=b,"Others"===b&&(a.serviceDoneForm.$invalid=!0)},a.reasonDescriptionForInsurance=[],a.skipAppointment=function(){ba(la,oa)},ga();var xa;a.clearUpdateMsg=function(){a.tcStatusUpdateMsg=""},da();var ya,za;a.checkDatesByReason=function(b,c){console.log(b),"Call Later"===va&&("Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1,null!==b&&void 0!==b||(a.walkinCallLaterForm.$invalid=!0)),"Customer will call and Confirm"!==b&&"Out of Station"!==b&&"Customer Busy"!==b||(a.walkinStatus.selectedDate="",a.walkinStatus.timeValue=""));var e=d("date")(new Date,"yyyy-MM-dd");if("Call Later"===va&&("Phone out of Reach"===b||"Switched off"===b||"No response to call"===b||"Disconnecting the call"===b)&&d("date")(c,"yyyy-MM-dd")===e){var f=new Date,g=new Date(f);if(g.setDate(f.getDate()+1),ya=g,a.walkinStatus={selectedDate:ya,timeValue:za,remarks:b},0===g.getDay()){var h=new Date(f);h.setDate(f.getDate()+2),ya=h,a.walkinStatus={selectedDate:ya,timeValue:za,remarks:b}}i.alert("Appointment will be scheduled for "+ya+" as you have selected "+b)}};var Aa,Ba={};a.serviceDoneOption={},a.updateAppointmentStatus=function(b,c,d){void 0!==a.serviceDoneOption.selectedDate&&null!==a.serviceDoneOption.selectedDate&&(Aa=a.serviceDoneOption.selectedDate.getFullYear()+"-"+(a.serviceDoneOption.selectedDate.getMonth()+1)+"-"+a.serviceDoneOption.selectedDate.getDate()),"Not Interested"===b?(Ba={customerId:c.customerId,customerName:c.customerName,status:b,statusForSubStatus:Ea,subStatus:d.remarks,scId:ia,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.apptId,callerId:ha,remarksForSubStatus:d.scComplaintManualRemarks,branchId:c.branchId,area:d.area,lastCalledStatus:c.lastCalledStatus},console.log(JSON.stringify(Ba)),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),ca(Ba)):"Insurance Done"===b?(Ba={customerId:c.customerId,customerName:c.customerName,status:b,subStatus:wa,scId:ia,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.apptId,callerId:ha,remarksForSubStatus:a.serviceDoneStatus.scComplaintManualRemarks,branchId:c.branchId,lastCalledStatus:c.lastCalledStatus,renewalDate:Aa},console.log(JSON.stringify(Ba)),a.serviceDoneStatus={},a.serviceDoneForm.$setPristine(),ca(Ba)):(Ba={customerId:c.customerId,customerName:c.customerName,status:b,appointmentDateTime:d.selectedDate,subStatus:d.remarks,scId:ia,scName:c.scName,customerMobile:a.currentMobile.substr(0,10),apptId:c.apptId,callerId:ha,branchId:c.branchId,remarksForSubStatus:d.manualRemarks,appointTime:d.timeValue,lastCalledStatus:c.lastCalledStatus,dataType:"Insurance Data"},console.log("selected time is",Ba.appointTime),console.log(JSON.stringify(Ba)),a.walkinStatus={},a.walkinCallLaterForm.$setPristine(),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),ca(Ba))},a.callTeleCallingCustomer=function(a,b){var c=l.getToken(ia),d={customerName:a.customerName,customerMobile:b,
customerId:a.customerId,apptId:a.apptId,callerId:ha,scId:ia,dataType:"Insurance Data",callerMobile:ja,callingType:ma};console.log(JSON.stringify(d)),B.save({id:ia,token:c},d,function(a){i.alert(a.message)},function(a){i.alert(a.data.error),console.log(a)})},a.updateServiceCenter=function(b,c,d){var e=l.getToken(ia),f={old_scId:c,new_scId:d,apptId:b,callerId:ha,scId:ia};console.log(JSON.stringify(f)),F.save({id:ia,token:e},f,function(b){a.updateServiceCenterSuccessMsg=b.message,Y(na),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.serviceCenterObj={},a.updateServiceCenterForm.$setPristine()},function(b){console.log(b),a.updateServiceCenterErrorMsg=b.data.message})},a.addRefferelCustomer=function(b){var c=l.getToken(ia);console.log(JSON.stringify(b)),F.save({id:ia,token:c},b,function(b){a.addReferelSuccessMsg=b.message,Y(na),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.referelObj={},a.addRefferelForm.$setPristine()},function(b){console.log(b),a.addReferelErrorMsg=b.data.message})},a.sendSCSMS=function(c,d){a.loading=!0;var e={scId:b.get("loggedInUserScId"),logInId:b.get("loggedInUserId"),mobileNumber:d,message:c.message,charCount:c.message.length};console.log(JSON.stringify(e));var f=parseInt(100*Math.random()),g=l.getToken(f);R.save({id:f,token:g},e,function(b){console.log(b),ea(b.message),a.loading=!1},function(b){console.log(b),ea(b.data.message),a.loading=!1})},a.clearPhoneUpdateMsg=function(){a.editPhoneSuccessMsg=""},a.clearServiceCenterUpdateMsg=function(){a.updateServiceCenterSuccessMsg=""},a.clearReferenceSuccessMsg=function(){a.addReferelSuccessMsg=""},a.editPhoneNumber=function(b,c){console.log("selMobile",b),a.editPhoneSuccessMsg="";var d={mobile:b,customerName:c.customerName,chassisNo:c.chassisNo,scId:ia,defaultNumber:"",customerId:c.customerId,customerStatus:"new"};console.log(JSON.stringify(d));var e=l.getToken(ia);T.save({id:ia,token:e},d,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,Y(na),P(function(){$("#editPhoneModal").modal("hide")},3e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})};var Ca;a.getSelectedDate=function(b){var c=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2);Ca=c,console.log(Ca),fa(),a.timeSlot=[]},a.actualTimeSlot=S.getTime(),a.timeSlot=[];var Da;a.getSelectedReason=function(a){console.log(a)},a.serviceCenterComplaintData=[],a.serviceCenterComplaintSettings={displayProp:"label"};var Ea=[];a.updateServiceCenterComplaints={onItemSelect:function(b){Ea.push(b.id),Ea.length>0?a.notInterestedForm.$invalid=!1:0===Ea.length&&(a.notInterestedForm.$invalid=!0)},onItemDeselect:function(b){var c=Ea.indexOf(b.label);Ea.splice(c,1),Ea.length>0?a.notInterestedForm.$invalid=!1:0===Ea.length&&(a.notInterestedForm.$invalid=!0)}},a.resetServiceCenterComplaints=function(){a.serviceCenterComplaints=[],Ea=[]},a.resetServiceCenterComplaints(),a.getHistory=function(){_(a.tcAppointmentData.chassisNo)},a.walkinRemarkCheck=function(){void 0!==a.walkinStatus.remarks?"Customer agreed to Walkin"!==a.walkinStatus.remarks&&"Customer tentively agreed to Walkin"!==a.walkinStatus.remarks&&"Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&"Required KMs not travelled"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1):a.walkinCallLaterForm.$invalid=!0}}]),angular.module("letsService").controller("CrmInsuranceStatsController",["$scope","$cookies","$rootScope","$filter","ngTableParams","TokenService","GetInsuranceDashboardStatsService","GetInsuranceDashboardDetailsService","GetCallerWiseServiceCenterService",function(a,b,c,d,e,f,g,h,i){function j(b){a.loaderIcon=b}function k(b){s=b,j(!0);var c=f.getToken(q);g.query({scId:q,callerId:p,branchId:s,token:c},function(b){console.log("cre Insurance dashboard data :",b),a.creDashboardData=b,j(!1)},function(b){j(!1),a.creDashboardDataErrorMsg=b.data.message})}function l(b){a.tableParams.page(b),a.tableParams.reload()}function m(b){a.tableParams.count(b)}function n(b){0===b.indexOf(a.tableParams.count())&&(b.push(a.tableParams.count()),b.sort()),a.tableParams.settings({counts:b})}function o(){var b=f.getToken(q);i.query({callerId:p,id:q,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}var p=b.get("loggedInUserId"),q=b.get("loggedInUserScId");a.creTableData=[],c.apptIdList=[],a.showTable=!1;var r,s="all";a.getSelectedServiceCenter=function(a){console.log(a),s=a,null===a&&(s="all"),k(s)},k(s),a.getPerticularStatsTableData=function(b){console.log("status",b),j(!0),r=b;var d=f.getToken(q);h.query({scId:q,callerId:p,status:r,branchId:s,token:d},function(b){console.log("cre Table Insurance Data success :",b),a.creTableDataErrorMsg="",a.creTableData=b,angular.forEach(a.creTableData,function(b,d){c.apptIdList.push(a.creTableData[d].apptId)}),a.tableParams.reload(),j(!1),a.showTable=!0,a.tableParams.page(1)},function(b){console.log("Error",b),a.creTableData=[],a.tableParams.reload(),j(!1),a.creTableDataErrorMsg=b.data.message},function(a){console.log(a)})},a.tableParams=new e({page:1,count:20},{total:a.creTableData.length,getData:function(b,c){var e=c.sorting()?d("orderBy")(a.creTableData,c.orderBy()):a.creTableData;e=c.filter()?d("filter")(e,c.filter()):e,a.orderedData=e,c.total(e.length),b.resolve(a.users=e.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),a.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=a.tableParams.settings().counts,a.changePage=l,a.changePageSize=m,a.changePageSizes=n,o(),$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("ServiceCenterPerformanceController",["$scope","serviceURL","$cookies","$window","$rootScope","TokenService","GetCallerWiseRevenueStatsService","GetServiceCenterJobcardStatsService","GetYearWiseCustomerStatsService","GetOnTimeDeliveryStatsService","TeleCallerWiseServiceCenterService","GetSuperAdminDealerListService","GetCustomerVisitedCountService","GetOutsideCustomerVisitService","GetServiceAdvisorStatsService","GetMonthWisePotentialCustomerService","AdminCustomerDetailsService","ngTableParams","$filter","GetPotentialCustomerDetailsService","GetSalesJobcardDataService","GetSalesJobcardStatsDetailedService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){var b=f.getToken(R);l.query({logInId:R,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function x(b){console.log("==============",b),S=b;var c=f.getToken(S);k.query({id:S,token:c},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function y(){a.revenueColors=["#FB617F","#ff9900","#2FCF92","#0083ca","#A0B421"],a.revenueDataSeries=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.revenueData=[],a.revenueLables=[],V=[],W=[],X=[],Y=[],Z=[],_=[],a.fsc1Total=0,a.fsc2Total=0,a.fsc3Total=0,a.fsc4Total=0,a.paidTotal=0,a.loaderIconRevenue=!0;var b=f.getToken(S);g.get({id:aa,type:ba,scId:S,brandName:T,reportType:da,branch:ca,dataType:U,token:b},function(b){console.log("Revenue data :",b);var c=b;void 0!==c.FSC1&&null!==c.FSC1&&angular.forEach(c.FSC1,function(b,d){V.push(c.FSC1[d].totalAmount),a.fsc1Total+=c.FSC1[d].totalAmount,a.revenueLables.push(c.FSC1[d].monthName)}),void 0!==c.FSC2&&null!==c.FSC2&&angular.forEach(c.FSC2,function(b,d){W.push(c.FSC2[d].totalAmount),a.fsc2Total+=c.FSC2[d].totalAmount}),void 0!==c.FSC3&&null!==c.FSC3&&angular.forEach(c.FSC3,function(b,d){X.push(c.FSC3[d].totalAmount),a.fsc3Total+=c.FSC3[d].totalAmount}),void 0!==c.FSC4&&null!==c.FSC4&&angular.forEach(c.FSC4,function(b,d){Y.push(c.FSC4[d].totalAmount),a.fsc4Total+=c.FSC4[d].totalAmount}),void 0!==c.Paid&&null!==c.Paid&&angular.forEach(c.Paid,function(b,d){Z.push(c.Paid[d].totalAmount),a.paidTotal+=c.Paid[d].totalAmount}),void 0!==c.Others&&null!==c.Others&&angular.forEach(c.Others,function(a,b){_.push(c.Others[b].totalAmount)}),a.revenueData.push(V),a.revenueData.push(W),a.revenueData.push(X),a.revenueData.push(Y),a.revenueData.push(Z),a.revenueData.push(_),a.revenueChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.revenueLables,series:a.revenueDataSeries,colors:["#FB617F","#ff9900","#2FCF92","#0083ca","#A0B421","#b3d1d1"],data:a.revenueData},a.datasetOverrideRevenue=[{fill:!0,backgroundColor:a.fsc1Colors},{fill:!0,backgroundColor:a.fsc2Colors},{fill:!0,backgroundColor:a.fsc3Colors},{fill:!0,backgroundColor:a.fsc4Colors},{fill:!0,backgroundColor:a.paidColors},{fill:!0,backgroundColor:a.othersJobcardColors}],a.loaderIconRevenue=!1},function(b){a.loaderIconRevenue=!1,a.creDashboardDataErrorMsg=b.data.message})}function z(){a.revenueDataSeriesWeekly=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.revenueDataWeekly=[],a.revenueLablesWeekly=[],ea=[],fa=[],ga=[],ha=[],ia=[],ja=[],a.fsc1WeeklyTotal=0,a.fsc2WeeklyTotal=0,a.fsc3WeeklyTotal=0,a.fsc4WeeklyTotal=0,a.paidWeeklyTotal=0,a.loaderIconRevenueWeekly=!0;var b=f.getToken(S);g.get({id:aa,type:ba,scId:S,brandName:T,reportType:ka,branch:ca,dataType:U,token:b},function(b){console.log("Revenue data weekly :",b);var c=b;void 0!==c.FSC1&&null!==c.FSC1&&angular.forEach(c.FSC1,function(b,d){ea.push(c.FSC1[d].totalAmount),a.fsc1WeeklyTotal+=c.FSC1[d].totalAmount,a.revenueLablesWeekly.push(c.FSC1[d].date)}),void 0!==c.FSC2&&null!==c.FSC2&&angular.forEach(c.FSC2,function(b,d){fa.push(c.FSC2[d].totalAmount),a.fsc2WeeklyTotal+=c.FSC2[d].totalAmount}),void 0!==c.FSC3&&null!==c.FSC3&&angular.forEach(c.FSC3,function(b,d){ga.push(c.FSC3[d].totalAmount),a.fsc3WeeklyTotal+=c.FSC3[d].totalAmount}),void 0!==c.FSC4&&null!==c.FSC4&&angular.forEach(c.FSC4,function(b,d){ha.push(c.FSC4[d].totalAmount),a.fsc4WeeklyTotal+=c.FSC4[d].totalAmount}),void 0!==c.Paid&&null!==c.Paid&&angular.forEach(c.Paid,function(b,d){ia.push(c.Paid[d].totalAmount),a.paidWeeklyTotal+=c.Paid[d].totalAmount}),void 0!==c.Others&&null!==c.Others&&angular.forEach(c.Others,function(a,b){ja.push(c.Others[b].totalAmount)}),a.revenueDataWeekly.push(ea),a.revenueDataWeekly.push(fa),a.revenueDataWeekly.push(ga),a.revenueDataWeekly.push(ha),a.revenueDataWeekly.push(ia),a.revenueDataWeekly.push(ja),a.revenueChartWeekly={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.revenueLablesWeekly,series:a.revenueDataSeriesWeekly,colors:["#FB617F","#ff9900","#2FCF92","#0083ca","#A0B421","#b3d1d1"],data:a.revenueDataWeekly},a.datasetOverrideRevenueWeekly=[{fill:!0,backgroundColor:a.fsc1ColorsWeekly},{fill:!0,backgroundColor:a.fsc2ColorsWeekly},{fill:!0,backgroundColor:a.fsc3ColorsWeekly},{fill:!0,backgroundColor:a.fsc4ColorsWeekly},{fill:!0,backgroundColor:a.paidColorsWeekly},{fill:!0,backgroundColor:a.othersJobcardColors}],a.loaderIconRevenueWeekly=!1},function(b){a.loaderIconRevenueWeekly=!1,a.creDashboardDataErrorMsg=b.data.message})}function A(){a.jobcardDataSeries=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.jobcardData=[],a.jobcardDataLables=[],la=[],ma=[],na=[],oa=[],pa=[],qa=[],a.fsc1JobcardTotal=0,a.fsc2JobcardTotal=0,a.fsc3JobcardTotal=0,a.fsc4JobcardTotal=0,a.paidJobcardTotal=0,a.loaderIconJobcard=!0;var b=f.getToken(S);h.get({branchId:ca,scId:S,brandName:T,reportType:ra,token:b},function(b){console.log("Jobcard Stats :",b);var c=b;void 0!==c.FSC1&&null!==c.FSC1&&angular.forEach(c.FSC1,function(b,d){la.push(parseInt(c.FSC1[d].totalCount)),a.fsc1JobcardTotal+=parseInt(c.FSC1[d].totalCount),a.jobcardDataLables.push(c.FSC1[d].monthName)}),void 0!==c.FSC2&&null!==c.FSC2&&angular.forEach(c.FSC2,function(b,d){ma.push(parseInt(c.FSC2[d].totalCount)),a.fsc2JobcardTotal+=parseInt(c.FSC2[d].totalCount)}),void 0!==c.FSC3&&null!==c.FSC3&&angular.forEach(c.FSC3,function(b,d){na.push(parseInt(c.FSC3[d].totalCount)),a.fsc3JobcardTotal+=parseInt(c.FSC3[d].totalCount)}),void 0!==c.FSC4&&null!==c.FSC4&&angular.forEach(c.FSC4,function(b,d){oa.push(parseInt(c.FSC4[d].totalCount)),a.fsc4JobcardTotal+=parseInt(c.FSC4[d].totalCount)}),void 0!==c.Paid&&null!==c.Paid&&angular.forEach(c.Paid,function(b,d){pa.push(parseInt(c.Paid[d].totalCount)),a.paidJobcardTotal+=parseInt(c.Paid[d].totalCount)}),void 0!==c.Others&&null!==c.Others&&angular.forEach(c.Others,function(a,b){qa.push(parseInt(c.Others[b].totalCount))}),a.jobcardData.push(la),a.jobcardData.push(ma),a.jobcardData.push(na),a.jobcardData.push(oa),a.jobcardData.push(pa),a.jobcardData.push(qa),a.jobcardChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.jobcardDataLables,series:a.jobcardDataSeries,colors:["#FB617F","#ff9900","#2FCF92","#0083ca","#A0B421","#b3d1d1"],data:a.jobcardData},a.datasetOverrideJobcard=[{fill:!0,backgroundColor:a.fsc1Colors},{fill:!0,backgroundColor:a.fsc2Colors},{fill:!0,backgroundColor:a.fsc3Colors},{fill:!0,backgroundColor:a.fsc4Colors},{fill:!0,backgroundColor:a.paidColors},{fill:!0,backgroundColor:a.othersJobcardColors}],a.loaderIconJobcard=!1},function(b){a.loaderIconJobcard=!1,a.creDashboardDataErrorMsg=b.data.message})}function B(){a.jobcardDataSeriesWeekly=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.jobcardDataWeekly=[],a.jobcardDataLablesWeekly=[],sa=[],ta=[],ua=[],va=[],wa=[],xa=[],a.fsc1JobcardTotalWeekly=0,a.fsc2JobcardTotalWeekly=0,a.fsc3JobcardTotalWeekly=0,a.fsc4JobcardTotalWeekly=0,a.paidJobcardTotalWeekly=0,a.loaderIconJobcardWeekly=!0;var b=f.getToken(S);h.get({branchId:ca,scId:S,brandName:T,reportType:ya,token:b},function(b){console.log("Jobcard Stats  Weekly:",b);var c=b;void 0!==c.FSC1&&null!==c.FSC1&&angular.forEach(c.FSC1,function(b,d){sa.push(parseInt(c.FSC1[d].totalCount)),a.fsc1JobcardTotalWeekly+=parseInt(c.FSC1[d].totalCount),a.jobcardDataLablesWeekly.push(c.FSC1[d].date)}),void 0!==c.FSC2&&null!==c.FSC2&&angular.forEach(c.FSC2,function(b,d){ta.push(parseInt(c.FSC2[d].totalCount)),a.fsc2JobcardTotalWeekly+=parseInt(c.FSC2[d].totalCount)}),void 0!==c.FSC3&&null!==c.FSC3&&angular.forEach(c.FSC3,function(b,d){ua.push(parseInt(c.FSC3[d].totalCount)),a.fsc3JobcardTotalWeekly+=parseInt(c.FSC3[d].totalCount)}),void 0!==c.FSC4&&null!==c.FSC4&&angular.forEach(c.FSC4,function(b,d){va.push(parseInt(c.FSC4[d].totalCount)),a.fsc4JobcardTotalWeekly+=parseInt(c.FSC4[d].totalCount)}),void 0!==c.Paid&&null!==c.Paid&&angular.forEach(c.Paid,function(b,d){wa.push(parseInt(c.Paid[d].totalCount)),a.paidJobcardTotalWeekly+=parseInt(c.Paid[d].totalCount)}),void 0!==c.Others&&null!==c.Others&&angular.forEach(c.Others,function(a,b){xa.push(parseInt(c.Others[b].totalCount))}),a.jobcardDataWeekly.push(sa),a.jobcardDataWeekly.push(ta),a.jobcardDataWeekly.push(ua),a.jobcardDataWeekly.push(va),a.jobcardDataWeekly.push(wa),a.jobcardDataWeekly.push(xa),a.jobcardChartWeekly={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.jobcardDataLablesWeekly,series:a.jobcardDataSeriesWeekly,colors:["#FB617F","#ff9900","#2FCF92","#0083ca","#A0B421","#b3d1d1"],data:a.jobcardDataWeekly},a.datasetOverrideJobcardWeekly=[{fill:!0,backgroundColor:a.fsc1ColorsWeekly},{fill:!0,backgroundColor:a.fsc2ColorsWeekly},{fill:!0,backgroundColor:a.fsc3ColorsWeekly},{fill:!0,backgroundColor:a.fsc4ColorsWeekly},{fill:!0,backgroundColor:a.paidColorsWeekly},{fill:!0,backgroundColor:a.othersJobcardColors}],console.log(JSON.stringify(a.jobcardDataWeekly)),console.log(JSON.stringify(a.jobcardDataLablesWeekly)),console.log(JSON.stringify(a.jobcardDataSeriesWeekly)),a.loaderIconJobcardWeekly=!1},function(b){a.loaderIconJobcardWeekly=!1,a.creDashboardDataErrorMsg=b.data.message})}function C(){a.yearWiseDataSeries=["Count"],a.yearWiseData=[],a.yearWiseDataLables=[];var b=[];a.loaderIconUniqueCustomers=!0;var c=f.getToken(S);i.query({branchId:ca,scId:S,brandName:T,token:c},function(c){console.log("Year Wise Customer Stats :",c);var d=c;angular.forEach(d,function(c,e){b.push(parseInt(d[e].totalCount)),a.yearWiseDataLables.push(d[e].year)}),a.yearWiseData.push(b),a.yearWiseDataChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.yearWiseDataLables,series:a.yearWiseDataSeries,colors:["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],data:a.yearWiseData},a.datasetOverrideYearWiseData=[{fill:!0,backgroundColor:a.yearWiseDataColors}],a.loaderIconUniqueCustomers=!1},function(b){a.loaderIconUniqueCustomers=!1,a.creDashboardDataErrorMsg=b.data.message})}function D(){a.onTimeDataColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.onTimeDeliveryDataSeries=["Rate(%)"],a.onTimeDeliveryData=[],a.onTimeDeliveryDataLables=[];var b=[];a.loaderIconSameDayDelivery=!0;var c=f.getToken(S);j.query({branchId:ca,scId:S,brandName:T,token:c},function(c){console.log("on Time Delivery Stats :",c);var d=c;angular.forEach(d,function(c,e){b.push(d[e].onTime),a.onTimeDeliveryDataLables.push(d[e].monthName)}),a.onTimeDeliveryData.push(b),a.onTimeDataChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.onTimeDeliveryDataLables,series:a.onTimeDeliveryDataSeries,colors:["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],data:a.onTimeDeliveryData},a.datasetOverrideOnTimeData=[{fill:!0,backgroundColor:a.onTimeDataColors}],a.loaderIconSameDayDelivery=!1},function(b){a.loaderIconSameDayDelivery=!1,a.creDashboardDataErrorMsg=b.data.message})}function E(){a.dataErrorMsgCustomerServicedCount=!1,a.customerVisitedTotal=0,za=[["No. Of Time Visited","Customer Count"]];var b=f.getToken(S);m.query({scId:S,token:b},function(b){console.log("Customer Serviced Count Data :",b);var c=b;angular.forEach(c,function(b,d){void 0!==c[d]&&null!==c[d]&&(za.push([c[d].visitsCount,parseInt(c[d].apptCount)]),a.customerVisitedTotal+=parseInt(c[d].apptCount))}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(F),console.log("Customer visited data : ",JSON.stringify(za))},function(b){a.dataErrorMsgCustomerServicedCount=!0,za=[["No. Of Time Visited","Customer Count"]],a.creDashboardDataErrorMsg=b.data.message})}function F(){function a(){var a=d.getSelection()[0];if(a){G(b.getValue(a.row,0))}}var b=google.visualization.arrayToDataTable(za),c={pieHole:.4,sliceVisibilityThreshold:0,legend:{display:!0,position:"right"}},d=new google.visualization.PieChart(document.getElementById("customerVisited"));google.visualization.events.addListener(d,"select",a),d.draw(b,c)}function G(a){var c=f.getToken(S);console.log(b+"get_customer_repetitive_visted_details/"+S+"/"+a+"/"+c),d.open(b+"get_customer_repetitive_visted_details/"+S+"/"+a+"/"+c)}function H(){a.outSideCustomerVisitedDataSeries=["Our Customers","Other Dealership Customers"],a.outSideCustomerVisitedData=[],a.outSideCustomerVisitedDataLables=[],Aa=[],Ba=[],a.loaderIconOtherCustomers=!0;var b=f.getToken(S);n.get({scId:S,token:b},function(b){console.log("Out Side Customer Visited Stats :",b);var c=b;void 0!==c.our_customer_count&&null!==c.our_customer_count&&angular.forEach(c.our_customer_count,function(b,d){Aa.push(parseInt(c.our_customer_count[d].our_customer)),a.outSideCustomerVisitedDataLables.push(c.our_customer_count[d].monthName)}),void 0!==c.outside_customer_count&&null!==c.outside_customer_count&&angular.forEach(c.outside_customer_count,function(a,b){Ba.push(parseInt(c.outside_customer_count[b].outside_customer))}),a.outSideCustomerVisitedData.push(Aa),a.outSideCustomerVisitedData.push(Ba),console.log(JSON.stringify(a.outSideCustomerVisitedData)),console.log(JSON.stringify(a.outSideCustomerVisitedDataSeries)),a.outSideCustomerDataChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.outSideCustomerVisitedDataLables,series:a.outSideCustomerVisitedDataSeries,colors:["#FB617F","#ff9900","#2FCF92"],data:a.outSideCustomerVisitedData},a.datasetOverrideOutSideCustomerData=[{fill:!0,backgroundColor:a.fsc1Colors},{fill:!0,backgroundColor:a.fsc2Colors},{fill:!0,backgroundColor:a.fsc3Colors}],a.loaderIconOtherCustomers=!1},function(b){a.loaderIconOtherCustomers=!1,a.creDashboardDataErrorMsg=b.data.message})}function I(){a.serviceAdvisorDataSeries=["Appointments","Revenue"],a.serviceAdvisorData=[],a.serviceAdvisorDataLables=[],Ea=[],Fa=[],a.loaderIconServiceAdvisor=!0;var b=f.getToken(S);o.get({scId:S,branchId:ca,token:b},function(b){console.log("Service Advisor Stats :",b);var c=b;a.dataErrorMsgServiceAdviserStats="",void 0!==c.appointment&&null!==c.appointment&&angular.forEach(c.appointment,function(b,d){Ea.push(parseInt(c.appointment[d].count)),a.serviceAdvisorDataLables.push(c.appointment[d].addvisor_name)}),void 0!==c.revenue&&null!==c.revenue&&angular.forEach(c.revenue,function(a,b){Fa.push(parseInt(c.revenue[b].amount))}),a.serviceAdvisorData.push(Ea),a.serviceAdvisorData.push(Fa),console.log(JSON.stringify(a.serviceAdvisorData)),console.log(JSON.stringify(a.serviceAdvisorDataSeries)),a.serviceAdvisorDataChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.serviceAdvisorDataLables,series:a.serviceAdvisorDataSeries,colors:["#FB617F","#ff9900"],data:a.serviceAdvisorData},a.datasetOverrideServiceAdvisorData=[{fill:!0,backgroundColor:Ca},{fill:!0,backgroundColor:Da}],a.loaderIconServiceAdvisor=!1},function(b){a.loaderIconServiceAdvisor=!1,a.dataErrorMsgServiceAdviserStats=b.data.message})}function J(c){a.potentialCustomerDataDataSeries=["Potential Data","Visited Customers"],a.potentialCustomerData=[],a.potentialCustomerDataLables=[],Ja=[],Ka=[],a.loaderIconPotentialCustomer=!0;var e=f.getToken(S);Ia=c,"export"===Ia?(a.loaderIconPotentialCustomer=!1,console.log(b+"get_month_wise_potential_customer_stats/"+S+"/"+Ga+"/"+Ha+"/"+ca+"/"+Ia+"/"+e),d.open(b+"get_month_wise_potential_customer_stats/"+S+"/"+Ga+"/"+Ha+"/"+ca+"/"+Ia+"/"+e)):"submit"===Ia&&(a.totalPotentialCustomers=0,a.totalVisitedCustomers=0,p.get({scId:S,fromDate:Ga,toDate:Ha,branchId:ca,exportType:Ia,token:e},function(b){console.log("Potential Customer Stats :",b);var c=b;a.dataErrorMsgPotentialCustomerStats="",void 0!==c.potentialData&&null!==c.potentialData&&angular.forEach(c.potentialData,function(b,d){Ja.push(parseInt(c.potentialData[d].apptCount)),a.totalPotentialCustomers+=parseInt(c.potentialData[d].apptCount),a.potentialCustomerDataLables.push(c.potentialData[d].day)}),void 0!==c.vistedCustomers&&null!==c.vistedCustomers&&angular.forEach(c.vistedCustomers,function(b,d){Ka.push(parseInt(c.vistedCustomers[d].apptCount)),a.totalVisitedCustomers+=parseInt(c.vistedCustomers[d].apptCount)}),a.potentialCustomerData.push(Ja),a.potentialCustomerData.push(Ka),console.log("potentialCustomerData",JSON.stringify(a.potentialCustomerData)),console.log("potentialCustomerLables",JSON.stringify(a.potentialCustomerDataLables)),a.monthWisePotentialCustomerDataChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.potentialCustomerDataLables,series:a.potentialCustomerDataDataSeries,colors:["#0083ca","#FB617F"],data:a.potentialCustomerData},a.datasetOverrideMonthWisePotentialCustomerData=[{fill:!0,backgroundColor:a.potentialCustomerDataColors},{fill:!0,backgroundColor:a.visitedCustomerDataColors}],a.loaderIconPotentialCustomer=!1},function(b){a.loaderIconPotentialCustomer=!1,a.dataErrorMsgPotentialCustomerStats=b.data.message}))}function K(b){a.loaderIcon=b}function L(c,g,h,i){e.exportType=!0,ca=c,La=g,Ma=h,a.statusDisplay=Ma,Na=i,K(!0);var j=f.getToken(S);"export"===Na?(a.exportStatus="",d.open(b+"get_month_wise_potential_customer_details/"+S+"/"+La+"/"+Ma+"/"+ca+"/"+Na+"/"+j),K(!1),Na="submit"):"submit"===Na&&t.query({scId:S,date:La,status:Ma,branchId:ca,reportType:Na,token:j},function(a){console.log("ADMIN Potential customer DETAILS :",a),e.creTableData=a,e.creTableDataErrorMsg="",e.tableParams.reload(),e.tableParams.page(1),$("#adminDataTableModal").modal("show"),K(!1)},function(a){console.log(a),e.creTableData=[],e.tableParams.reload(),K(!1),$("#adminDataTableModal").modal("show"),e.creTableDataErrorMsg=a.data.message})}function M(c,g,h,i){e.exportType=!0,ca=c,La=g,Ma=h,a.statusDisplay=Ma,Na=i,K(!0);var j=f.getToken(S);"export"===Na?(a.exportStatus="",console.log(b+"get_detail_of_sales_job_card_data/"+La+"/"+Ma+"/"+S+"/"+ca+"/"+Na+"/"+j),d.open(b+"get_detail_of_sales_job_card_data/"+La+"/"+Ma+"/"+S+"/"+ca+"/"+Na+"/"+j),K(!1),Na="submit"):"submit"===Na&&v.query({date:La,status:Ma,scId:S,branch:ca,reportType:Na,token:j},function(a){console.log("ADMIN SALES AND JOBCARD customer DETAILS :",a),e.creTableData=a,e.creTableDataErrorMsg="",e.tableParams.reload(),e.tableParams.page(1),$("#adminDataTableModal").modal("show"),K(!1)},function(a){console.log(a),e.creTableData=[],e.tableParams.reload(),K(!1),$("#adminDataTableModal").modal("show"),e.creTableDataErrorMsg=a.data.message})}function N(){a.salesJobcardDataSeries=["Jobcard Data","Sales Data"],a.salesJobcardData=[],a.salesJobcardDataLables=[],Oa=[],Pa=[],a.loaderIconSalesJobcardData=!0;var b=f.getToken(S);a.totalSalesJobcard=0,u.get({fromDate:Ga,toDate:Ha,branchId:ca,scId:S,token:b},function(b){console.log("Sales Jobcard Customer Stats :",b);var c=b;a.dataErrorMsgSalesJobcardData="",void 0!==c.salesCount&&null!==c.salesCount&&angular.forEach(c.salesCount,function(b,d){Oa.push(parseInt(c.salesCount[d].Count)),a.totalSales=parseInt(c.totalSalesCount),a.salesJobcardDataLables.push(c.salesCount[d].Day)}),void 0!==c.jobcardCount&&null!==c.jobcardCount&&angular.forEach(c.jobcardCount,function(b,d){Pa.push(parseInt(c.jobcardCount[d].Count)),a.totalJobcard=parseInt(c.totalJobcardCount)}),a.salesJobcardData.push(Pa),a.salesJobcardData.push(Oa),console.log("Sales Jobcard Data",JSON.stringify(a.salesJobcardData)),a.monthWiseSalesJobcardDataChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.salesJobcardDataLables,series:a.salesJobcardDataSeries,colors:["#0083ca","#FB617F"],data:a.salesJobcardData},a.datasetOverrideMonthWiseSalesJobcardData=[{fill:!0,backgroundColor:a.potentialCustomerDataColors},{fill:!0,backgroundColor:a.visitedCustomerDataColors}],a.loaderIconSalesJobcardData=!1},function(b){a.loaderIconSalesJobcardData=!1,a.dataErrorMsgSalesJobcardData=b.data.message})}function O(a){e.tableParams.page(a),e.tableParams.reload()}function P(a){e.tableParams.count(a)}function Q(a){0===a.indexOf(e.tableParams.count())&&(a.push(e.tableParams.count()),a.sort()),e.tableParams.settings({counts:a})}var R=c.get("loggedInUserIdAdmin"),S=c.get("loggedInUserScIdAdmin"),T=c.get("loggedInUserBikeBrandAdmin");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0},w(),a.getSelectedDealer=function(a){console.log("==============",a),ca="branch",console.log(a),S=a,x(a),y(),z(),A(),B(),C(),D(),E(),H(),I(),J("submit"),N()},x(S),a.getSelectedBranch=function(a){console.log("selected branch",a),ca=a,null===a&&(ca="branch"),console.log("==============++++++++++++++++++",ca),y(),z(),A(),B(),C(),D(),I(),J("submit"),N()},a.options={tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}};var U="serviceReminder";a.fsc1Colors=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.fsc2Colors=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"],a.fsc3Colors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.fsc4Colors=["#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca"],a.paidColors=["#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421"],a.othersJobcardColors=["#b3d1d1","#b3d1d1","#b3d1d1","#b3d1d1","#b3d1d1","#b3d1d1","#b3d1d1","#b3d1d1"],a.revenueColors=["#FB617F","#ff9900","#2FCF92","#0083ca","#A0B421"],a.revenueDataSeries=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.revenueData=[],a.revenueLables=[];var V=[],W=[],X=[],Y=[],Z=[],_=[],aa="all",ba="sc",ca="branch",da="month";a.fsc1Total=0,a.fsc2Total=0,a.fsc3Total=0,a.fsc4Total=0,a.paidTotal=0,y(),a.fsc1ColorsWeekly=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.fsc2ColorsWeekly=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"],a.fsc3ColorsWeekly=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.fsc4ColorsWeekly=["#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca"],a.paidColorsWeekly=["#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421"],a.revenueDataSeriesWeekly=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.revenueDataWeekly=[],a.revenueLablesWeekly=[];var ea=[],fa=[],ga=[],ha=[],ia=[],ja=[],ka="day";a.fsc1WeeklyTotal=0,a.fsc2WeeklyTotal=0,a.fsc3WeeklyTotal=0,a.fsc4WeeklyTotal=0,a.paidWeeklyTotal=0,z(),a.jobcardDataSeries=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.jobcardData=[],a.jobcardDataLables=[];var la=[],ma=[],na=[],oa=[],pa=[],qa=[],ra="month";a.fsc1JobcardTotal=0,
a.fsc2JobcardTotal=0,a.fsc3JobcardTotal=0,a.fsc4JobcardTotal=0,a.paidJobcardTotal=0,A(),a.jobcardDataSeriesWeekly=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.jobcardDataWeekly=[],a.jobcardDataLablesWeekly=[];var sa=[],ta=[],ua=[],va=[],wa=[],xa=[],ya="day";a.fsc1JobcardTotalWeekly=0,a.fsc2JobcardTotalWeekly=0,a.fsc3JobcardTotalWeekly=0,a.fsc4JobcardTotalWeekly=0,a.paidJobcardTotalWeekly=0,B(),a.jobcardDataSeriesLast30Days=["FSC1","FSC2","FSC3","FSC4","Paid","Others"],a.jobcardDataLast30Days=[],a.jobcardDataLablesLast30Days=[];a.fsc1JobcardTotalLast30Days=0,a.fsc2JobcardTotalLast30Days=0,a.fsc3JobcardTotalLast30Days=0,a.fsc4JobcardTotalLast30Days=0,a.paidJobcardTotalLast30Days=0,a.yearWiseDataColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.yearWiseDataSeries=["Count"],a.yearWiseData=[],a.yearWiseDataLables=[];C(),a.onTimeDataColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.onTimeDeliveryDataSeries=["Rate(%)"],a.onTimeDeliveryData=[],a.onTimeDeliveryDataLables=[];D();var za=[["No. Of Time Visited","Customer Count"]];a.dataErrorMsgCustomerServicedCount=!1,a.customerVisitedTotal=0,E(),a.outSideCustomerVisitedDataColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.outSideCustomerVisitedDataSeries=["Our Customers","Other Dealership Customers"],a.outSideCustomerVisitedData=[],a.outSideCustomerVisitedDataLables=[];var Aa=[],Ba=[];H();var Ca=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],Da=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"];a.serviceAdvisorDataSeries=["Appointments","Revenue"],a.serviceAdvisorData=[],a.serviceAdvisorDataLables=[];var Ea=[],Fa=[];I();var Ga="month",Ha="month",Ia="submit";a.adminPotentiaStatsByDate=function(b,c){a.potentialCustomerDataDataSeries=["Potential Data"],a.potentialCustomerData=[],a.potentialCustomerDataLables=[],Ja=[],a.totalPotentialCustomers=0,b>c?d.alert("To Date should be greater than From Date"):(Ga=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),Ha=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),J("submit"))},a.salesJobStatsByDate=function(b,c){a.salesJobcardDataSeries=["Jobcard Data","Sales Data"],a.salesJobcardData=[],a.salesJobcardDataLables=[],Oa=[],Pa=[],a.totalSales=0,a.totalJobcard=0,b>c?d.alert("To Date should be greater than From Date"):(Ga=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),Ha=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),N())},a.exportPotentialCustomerStats=function(){J("export")},a.potentialCustomerDataColors=["#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca"],a.visitedCustomerDataColors=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.potentialCustomerDataDataSeries=["Potential Data","Visited Customers"],a.potentialCustomerData=[],a.potentialCustomerDataLables=[];var Ja=[],Ka=[];a.totalPotentialCustomers=0,a.totalVisitedCustomers=0,J("submit");a.getTcAdminStatsStatusDetail=function(b){var c=new Date;console.log(b),console.log("status :  :",Array.isArray(b)),!0===Array.isArray(b)?(console.log("graph lable :  :",b[0]._model.label),console.log("graph lable status :  :",b[0]._model.datasetLabel),La=b[0]._model.label+"-"+c.getFullYear(),Ma=b[0]._model.datasetLabel,console.log("sel month::",La),a.exportStatus="Potential Data"):!1===Array.isArray(b)&&(selStatus=b),"Potential Data"===Ma||"Visited Customers"===Ma?L(ca,La,Ma,Na):"Sales Data"!==Ma&&"Jobcard Data"!==Ma||M(ca,La,Ma,Na)},e.creTableData=[];var La,Ma,Na="submit";a.exportCustomerDetails=function(){console.log("selectedGraphStatus",Ma),"Potential Data"===Ma||"Visited Customers"===Ma?L(ca,La,Ma,"export"):"Sales Data"!==Ma&&"Jobcard Data"!==Ma||M(ca,La,Ma,"export")},a.salesJobcardDataSeries=["Jobcard Data","Sales Data"],a.salesJobcardData=[],a.salesJobcardDataLables=[];var Oa=[],Pa=[];a.totalSales=0,a.totalJobcard=0,N(),e.tableParams=new r({page:1,count:20},{total:e.creTableData.length,getData:function(b,c){var d=c.sorting()?s("orderBy")(e.creTableData,c.orderBy()):e.creTableData;d=c.filter()?s("filter")(d,c.filter()):d,a.orderedData=d,c.total(d.length),b.resolve(a.users=d.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),e.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=e.tableParams.settings().counts,a.changePage=O,a.changePageSize=P,a.changePageSizes=Q,a.downloadPDF=function(a){var b=document.querySelector("#"+a),c=b.toDataURL("image/jpeg",1),d=new jsPDF("landscape");d.setFontSize(20),d.text(15,15,"Super Cool Chart"),d.addImage(c,"JPEG",10,10,280,150),d.save("new-canvas.pdf")},$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("crmAdminCallerDashboardController",["$scope","$sce","serviceURL","$timeout","$filter","$cookies","ngTableParams","$rootScope","$window","TokenService","TeleCallerHourWiseDataService","CreDashboardStatsDataService","TeleCallerWeeklyWiseDataService","GetScWiseTeleCallerService","GetAdminCallerDashboardConversionStatsService","GetAdminCallerConversionService","GetCallerWiseRevenueStatsService","GetServiceCenterComplaintsService","TeleCallerCallStatsDataService","GetCallerWiseConversionStatsService","TeleCallerWiseServiceCenterService","AdminCustomerDetailsService","AdminCustomerDetailsStatusWiseService","AdminCustomerDetailsScComplaintWiseService","TeleCallerPerticularAppointmentHistoryDataService","TeleCallingCallRecordService","AdminCustomerDetailsStatsWiseService","GetSuperAdminDealerListService","GetDueTypeStatsService","TeleCallerPerticularAppointmentDataService","ServiceTypeService","TeleCallerLSHistoryDataService","CallerPerformanceMonthlyTotalPotentialStatsService","CallerPerformanceDueDatewiseStatsService","CallerPerformanceCompletePotentialStatsService","CallerPerformanceTotalDueDateStatsService","AdminCustomerCompletePotentialDetailsService","AdminCustomerPotentialDetailsService","UpdateCustomerPhoneService","CreateFutureReminderService","GetStatusWiseConversionDetailsService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O){function P(b){a.loaderIcon=b}function Q(){var b=j.getToken(ta);B.query({logInId:ta,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function R(b){ua=b;var c=j.getToken(ua);n.query({id:ua,token:c},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}function S(b){ua=b;var c=j.getToken(ua);u.query({id:ua,token:c},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function T(b,c,d,e){var f=0,g=0,h=0,i=0,k=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;za=d,Aa=e,wa=b,xa=c,P(!0);var u=j.getToken(ua);l.query({scId:ua,callerId:wa,branchId:xa,token:u},function(b){console.log("cre dashboard data :",b),a.creDashboardData=b,a.creDashboardDataErrorMsg="",angular.forEach(a.creDashboardData,function(b,c){void 0!==a.creDashboardData[c]&&null!==a.creDashboardData[c]&&(f+=parseInt(a.creDashboardData[c].allocated),g+=parseInt(a.creDashboardData[c].attemptedCount),h+=parseInt(a.creDashboardData[c].connectedCount),i+=parseInt(a.creDashboardData[c].callLaterCount),k+=parseInt(a.creDashboardData[c].notInterestedCount),m+=parseInt(a.creDashboardData[c].serviceDoneCount),n+=parseInt(a.creDashboardData[c].appointmentTaken),o+=parseInt(a.creDashboardData[c].MTDConversion),p+=parseInt(a.creDashboardData[c].nonConverted),q+=parseInt(a.creDashboardData[c].pendingCount),r+=parseInt(a.creDashboardData[c].freshCalls),s+=parseInt(a.creDashboardData[c].totalAttempted),t+=parseInt(a.creDashboardData[c].allocatedConversion))}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardData.push({dataTypename:"Total",allocated:f,attemptedCount:g,connectedCount:h,callLaterCount:i,notInterestedCount:k,serviceDoneCount:m,appointmentTaken:n,MTDConversion:o,nonConverted:p,pendingCount:q,freshCalls:r,totalAttempted:s,allocatedConversion:t}),P(!1)},function(b){P(!1),a.creDashboardData=[],a.creDashboardDataErrorMsg=b.data.message})}function U(b,c,d){console.log("Checking status",d),a.creDashboardDataDisplay=[];var e=0,f=0,g=0,h=0,i=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;a.totalOverDueCount=0,wa=b,xa=c,P(!0);var u=j.getToken(ua);"service due date"===d?(a.allocatedHeader="Total Allocated",H.query({fromDate:za,toDate:Aa,scId:ua,callerId:wa,branch:xa,datatypeId:ya,token:u},function(b){console.log("CALLER PERFORMANCE BY SERVICE DUE DATE: : :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,c){a.creDashboardData[c].uniqueAttempted&&(a.totalUniqueAttempted=a.creDashboardData[c].uniqueAttempted),a.creDashboardData[c].connectedCount&&(a.totalConnected=a.creDashboardData[c].connectedCount),a.creDashboardData[c].notConnectedCount&&(a.totalNonConnected=a.creDashboardData[c].notConnectedCount),void 0!==a.creDashboardData[c]&&null!==a.creDashboardData[c]&&(void 0!==a.creDashboardData[c].allocated&&(e+=parseInt(a.creDashboardData[c].allocated)),f+=parseInt(a.creDashboardData[c].attemptedCount),void 0!==a.creDashboardData[c].notConnectedCallLaterCount&&(h+=parseInt(a.creDashboardData[c].notConnectedCallLaterCount),a.totalCallLaterCountNonConnected=h),void 0!==a.creDashboardData[c].pendingVisitedCount&&(s+=parseInt(a.creDashboardData[c].pendingVisitedCount)),void 0!==a.creDashboardData[c].pendingNonVisitedCount&&(t+=parseInt(a.creDashboardData[c].pendingNonVisitedCount)),void 0!==a.creDashboardData[c].connectedCallLaterCount&&(g+=parseInt(a.creDashboardData[c].connectedCallLaterCount)),void 0!==a.creDashboardData[c].notInterested&&(i+=parseInt(a.creDashboardData[c].notInterested)),void 0!==a.creDashboardData[c].serviceDone&&(k+=parseInt(a.creDashboardData[c].serviceDone)),void 0!==a.creDashboardData[c].appointmentTaken&&(l+=parseInt(a.creDashboardData[c].appointmentTaken)),void 0!==a.creDashboardData[c].pickAndDrop&&(r+=parseInt(a.creDashboardData[c].pickAndDrop)),m+=parseInt(a.creDashboardData[c].MTDConversion),n+=parseInt(a.creDashboardData[c].nonConverted),void 0!==a.creDashboardData[c].pendingCalls&&(o+=parseInt(a.creDashboardData[c].pendingCalls)),p+=parseInt(a.creDashboardData[c].freshCalls),q+=parseInt(a.creDashboardData[c].totalAttempted)),void 0!==a.creDashboardData[c].uniqueAttempted&&null!==a.creDashboardData[c].uniqueAttempted||a.creDashboardDataDisplay.push(a.creDashboardData[c])}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardDataDisplay.push({dataTypename:"Total",allocated:e,pendingVisitedCount:s,pendingNonVisitedCount:t,pickAndDrop:r,attemptedCount:f,notConnectedCallLaterCount:h,connectedCallLaterCount:g,notInterested:i,serviceDone:k,appointmentTaken:l,MTDConversion:m,nonConverted:n,pendingCalls:o,freshCalls:p,totalAttempted:q}),P(!1)},function(b){P(!1),a.creDashboardDataErrorMsg=b.data.message})):"complete"===d&&(a.allocatedHeader="Total Potential",P(!0),I.query({fromDate:za,toDate:Aa,scId:ua,callerId:wa,branch:xa,datatypeId:ya,token:u},function(b){console.log("DEALER PERFORMANCE COMPLETE: : :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,c){a.creDashboardData[c].uniqueAttempted&&(a.totalUniqueAttempted=a.creDashboardData[c].uniqueAttempted),a.creDashboardData[c].connectedCount&&(a.totalConnected=a.creDashboardData[c].connectedCount),a.creDashboardData[c].notConnectedCount&&(a.totalNonConnected=a.creDashboardData[c].notConnectedCount),void 0!==a.creDashboardData[c]&&null!==a.creDashboardData[c]&&(void 0!==a.creDashboardData[c].allocated&&(e+=parseInt(a.creDashboardData[c].allocated)),f+=parseInt(a.creDashboardData[c].attemptedCount),void 0!==a.creDashboardData[c].notConnectedCallLaterCount&&(h+=parseInt(a.creDashboardData[c].notConnectedCallLaterCount)),void 0!==a.creDashboardData[c].overDueCalls&&(a.totalOverDueCount+=parseInt(a.creDashboardData[c].overDueCalls)),void 0!==a.creDashboardData[c].pendingVisitedCount&&(s+=parseInt(a.creDashboardData[c].pendingVisitedCount)),void 0!==a.creDashboardData[c].pendingNonVisitedCount&&(t+=parseInt(a.creDashboardData[c].pendingNonVisitedCount)),void 0!==a.creDashboardData[c].connectedCallLaterCount&&(g+=parseInt(a.creDashboardData[c].connectedCallLaterCount)),void 0!==a.creDashboardData[c].notInterested&&(i+=parseInt(a.creDashboardData[c].notInterested)),void 0!==a.creDashboardData[c].serviceDone&&(k+=parseInt(a.creDashboardData[c].serviceDone)),void 0!==a.creDashboardData[c].appointmentTaken&&(l+=parseInt(a.creDashboardData[c].appointmentTaken)),void 0!==a.creDashboardData[c].pickAndDrop&&(r+=parseInt(a.creDashboardData[c].pickAndDrop)),m+=parseInt(a.creDashboardData[c].MTDConversion),n+=parseInt(a.creDashboardData[c].nonConverted),void 0!==a.creDashboardData[c].pendingCalls&&(o+=parseInt(a.creDashboardData[c].pendingCalls)),p+=parseInt(a.creDashboardData[c].freshCalls),q+=parseInt(a.creDashboardData[c].totalAttempted)),void 0!==a.creDashboardData[c].uniqueAttempted&&null!==a.creDashboardData[c].uniqueAttempted||a.creDashboardDataDisplay.push(a.creDashboardData[c])}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardDataDisplay.push({dataTypename:"Total",allocated:e,pendingVisitedCount:s,pendingNonVisitedCount:t,pickAndDrop:r,attemptedCount:f,notConnectedCallLaterCount:h,connectedCallLaterCount:g,notInterested:i,serviceDone:k,appointmentTaken:l,MTDConversion:m,nonConverted:n,pendingCalls:o,freshCalls:p,totalAttempted:q}),P(!1)},function(b){P(!1),a.creDashboardDataErrorMsg=b.data.message}))}function V(b,c,d){a.dealerMonthlyStats=[],wa=b,xa=c,a.monthlyDataLoader=!0;var e=j.getToken(ua);"service due date"===d?(a.conversionHeader="Caller Conversion",J.query({fromDate:za,toDate:Aa,scId:ua,callerId:wa,branch:xa,datatypeId:ya,token:e},function(b){console.log("TOTAL MONTHLY STATS BY SERVICE DUE DATE: : :",b),a.dealerMonthlyStats=b,a.monthlyDataLoader=!1},function(b){a.monthlyDataLoader=!1,a.dealerMonthlyStatsErrorMsg=b.data.message})):"complete"===d&&(a.conversionHeader="Total Conversion",a.monthlyDataLoader=!0,G.query({fromDate:za,toDate:Aa,scId:ua,callerId:wa,branch:xa,datatypeId:ya,token:e},function(b){console.log("TOTAL MONTHLY STATS COMPLETE : : :",b),a.dealerMonthlyStats=b,a.monthlyDataLoader=!1},function(b){a.monthlyDataLoader=!1,a.dealerMonthlyStatsErrorMsg=b.data.message}))}function W(b,c){a.dataErrorMsgFourMonthConversion=!1,a.callerWiseConversionChart={},a.callerWiseConversionData=[],a.callerWiseConversionLables=[];var d=[],e=[],f=[];wa=b,xa=c,a.loaderIconFourMonthConversion=!0;var g=j.getToken(ua);t.get({scId:ua,callerId:wa,branch:xa,dataType:Ca,token:g},function(b){console.log("caller Wise Conversion Stats :",b);var c=b;void 0!==c.connectedCalls&&null!==c.connectedCalls&&angular.forEach(c.connectedCalls,function(b,e){d.push(c.connectedCalls[e].apptCount),a.callerWiseConnectedTotal+=c.connectedCalls[e].apptCount,a.callerWiseConversionLables.push(c.connectedCalls[e].monthName)}),void 0!==c.appointmentTaken&&null!==c.appointmentTaken&&angular.forEach(c.appointmentTaken,function(b,d){e.push(c.appointmentTaken[d].apptCount),a.callerWiseAppointmentTakenTotal+=c.appointmentTaken[d].apptCount}),void 0!==c.converted&&null!==c.converted&&angular.forEach(c.converted,function(b,d){f.push(c.converted[d].apptCount),a.callerWiseConvertedTotal+=c.converted[d].apptCount}),a.callerWiseConversionData.push(d),a.callerWiseConversionData.push(e),a.callerWiseConversionData.push(f),console.log(JSON.stringify(a.callerWiseConversionData)),console.log(JSON.stringify(a.callerWiseConversionLables)),console.log(JSON.stringify(a.callerWiseConversionSeries)),a.filteredCallerWiseConversionData=[],a.filteredCallerWiseConversionLables=[];for(var g=0;g<3;g++)a.filteredCallerWiseConversionData.push(a.callerWiseConversionData[g]);for(var g=0;g<4;g++)a.filteredCallerWiseConversionLables.push(a.callerWiseConversionLables[g]);a.callerWiseConversionChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.filteredCallerWiseConversionLables,series:a.callerWiseConversionSeries,colors:["#FB617F","#ff9900","#2FCF92"],data:a.filteredCallerWiseConversionData},a.datasetOverrideCallerWiseConversionData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors}],a.loaderIconFourMonthConversion=!1},function(b){a.dataErrorMsgFourMonthConversion=!0,a.loaderIconFourMonthConversion=!1,a.creDashboardDataErrorMsg=b.data.message})}function X(b,c){a.dataErrorMsgRevenue=!1,a.revenueChart={},Ma=b,xa=c,a.revenueData=[],a.revenueLables=[],Ga=[],Ha=[],Ia=[],Ja=[],Ka=[],a.loaderIconRevenue=!0;var d=j.getToken(ua);q.get({id:La,type:Ma,scId:ua,brandName:va,reportType:Na,branch:xa,dataType:Ca,token:d},function(b){console.log("Revenue data :",b),console.log("Revenue data+++++++++++ :",b.FSC1);var c=b;void 0!==c.FSC1&&null!==c.FSC1&&angular.forEach(c.FSC1,function(b,d){Ga.push(c.FSC1[d].totalAmount),a.fsc1Total+=c.FSC1[d].totalAmount,a.revenueLables.push(c.FSC1[d].monthName)}),void 0!==c.FSC2&&null!==c.FSC2&&angular.forEach(c.FSC2,function(b,d){Ha.push(c.FSC2[d].totalAmount),a.fsc2Total+=c.FSC2[d].totalAmount}),void 0!==c.FSC3&&null!==c.FSC3&&angular.forEach(c.FSC3,function(b,d){Ia.push(c.FSC3[d].totalAmount),a.fsc3Total+=c.FSC3[d].totalAmount}),void 0!==c.FSC4&&null!==c.FSC4&&angular.forEach(c.FSC4,function(b,d){Ja.push(c.FSC4[d].totalAmount),a.fsc4Total+=c.FSC4[d].totalAmount}),void 0!==c.Paid&&null!==c.Paid&&angular.forEach(c.Paid,function(b,d){Ka.push(c.Paid[d].totalAmount),a.paidTotal+=c.Paid[d].totalAmount}),a.revenueData.push(Ga),a.revenueData.push(Ha),a.revenueData.push(Ia),a.revenueData.push(Ja),a.revenueData.push(Ka),a.filteredRevenueData=[],a.filteredRevenueLables=[];for(var d=0;d<5;d++)a.filteredRevenueData.push(a.revenueData[d]);for(var d=0;d<6;d++)a.filteredRevenueLables.push(a.revenueLables[d]);a.revenueChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.filteredRevenueLables,series:a.revenueDataSeries,colors:["#FB617F","#ff9900","#2FCF92","#0083ca","#A0B421"],data:a.filteredRevenueData},a.datasetOverrideRevenue=[{fill:!0,backgroundColor:a.fsc1Colors},{fill:!0,backgroundColor:a.fsc2Colors},{fill:!0,backgroundColor:a.fsc3Colors},{fill:!0,backgroundColor:a.fsc4Colors},{fill:!0,backgroundColor:a.paidColors}],console.log(JSON.stringify(a.revenueData)),console.log(JSON.stringify(a.revenueLables)),console.log(JSON.stringify(a.revenueDataSeries)),a.optionsRevenue={tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},a.loaderIconRevenue=!1},function(b){a.dataErrorMsgRevenue=!0,a.loaderIconRevenue=!1,a.creDashboardDataErrorMsg=b.data.message})}function Y(b,c,d,e,f){za=e,Aa=f,a.callLaterTotal=0,a.dataErrorMsgCallLater=!1,Pa=[["Appointment Status","Appointment Count"]],console.log(d),Oa=b,wa=c,xa=d,a.loaderIconCallLater=!0;var g=j.getToken(ua);o.query({fromDate:za,toDate:Aa,status:Oa,callerId:wa,scId:ua,branch:xa,dataType:Ca,token:g},function(b){console.log("Call Later data :",b);var c=b;a.callLaterData=b,console.log("++++++++++++++++++++++",a.callLaterData),angular.forEach(c,function(b,d){void 0!==c[d]&&null!==c[d]&&(Pa.push([c[d].apptSubStatus,parseInt(c[d].apptCount)]),a.callLaterTotal+=parseInt(c[d].apptCount))}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(ba),console.log(JSON.stringify(Pa)),a.loaderIconCallLater=!1},function(b){a.dataErrorMsgCallLater=!0,Pa=[["Appointment Status","Appointment Count"]],a.loaderIconCallLater=!1,a.creDashboardDataErrorMsg=b.data.message})}function Z(b,c,d,e,f){za=e,Aa=f,a.notInterestedTotal=0,a.dataErrorMsgNotInterested=!1,Qa=[["Appointment Status","Appointment Count"]],Oa=b,wa=c,xa=d,a.loaderIconNotInterested=!0;var g=j.getToken(ua);o.query({fromDate:za,toDate:Aa,status:Oa,callerId:wa,scId:ua,branch:xa,dataType:Ca,token:g},function(b){console.log("Not Interested data :",b);var c=b;angular.forEach(c,function(b,d){void 0!==c[d]&&null!==c[d]&&(Qa.push([c[d].apptSubStatus,parseInt(c[d].apptCount)]),a.notInterestedTotal+=parseInt(c[d].apptCount))}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(ca),console.log(JSON.stringify(Qa)),a.loaderIconNotInterested=!1},function(b){a.dataErrorMsgNotInterested=!0,Qa=[["Appointment Status","Appointment Count"]],a.loaderIconNotInterested=!1,a.creDashboardDataErrorMsg=b.data.message})}function _(b,c,d,e){za=d,Aa=e,a.conversionTotal=0,a.dataErrorMsgConversion=!1,Ra=[["Appointment Status","Appointment Count"]],wa=b,xa=c,a.loaderIconConversion=!0;var f=j.getToken(ua);p.query({fromDate:za,toDate:Aa,callerId:wa,scId:ua,branch:xa,dataType:Ca,token:f},function(b){console.log("Conversion data :",b),a.conversionData=b;var c=b;angular.forEach(c,function(b,d){void 0!==c[d]&&null!==c[d]&&(Ra.push([c[d].apptStatus,parseInt(c[d].apptCount)]),a.conversionTotal+=parseInt(c[d].apptCount))}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(da),console.log("conversion",JSON.stringify(Ra)),a.loaderIconConversion=!1},function(b){a.dataErrorMsgConversion=!0,a.loaderIconConversion=!1,a.creDashboardDataErrorMsg=b.data.message})}function aa(b,c,d,e){za=d,Aa=e,a.scComplaintTotal=0,a.dataErrorMsgScComplaint=!1,Sa=[["Appointment Status","Appointment Count"]],wa=b,xa=c,a.loaderIconScComplaints=!0;var f=j.getToken(ua);r.query({fromDate:za,toDate:Aa,callerId:wa,scId:ua,branch:xa,dataType:Ca,token:f},function(b){console.log(" Service Center Complaints data :",b);var c=b;angular.forEach(c,function(b,d){void 0!==c[d]&&null!==c[d]&&(a.uniqueComplaints=c[d].uniqueCount,Sa.push([c[d].scCompliants,parseInt(c[d].scCount)]),void 0!==c[d].scCount&&(a.scComplaintTotal+=parseInt(c[d].scCount)))}),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(ea),console.log(JSON.stringify(Sa)),a.loaderIconScComplaints=!1},function(b){a.dataErrorMsgScComplaint=!0,a.loaderIconScComplaints=!1,a.creDashboardDataErrorMsg=b.data.message})}function ba(){function b(){var b=e.getSelection()[0];if(b){var d=c.getValue(b.row,0);Za=d,a.exportStatus="Call Later",ha(wa,xa,"Call Later",Za,$a)}}var c=google.visualization.arrayToDataTable(Pa),d={legend:{display:!0,position:"right"},is3D:!0},e=new google.visualization.PieChart(document.getElementById("callLaterChart"));google.visualization.events.addListener(e,"select",b),e.draw(c,d)}function ca(){function b(){var b=e.getSelection()[0];if(b){var d=c.getValue(b.row,0);Za=d,a.exportStatus="Not Interested",ha(wa,xa,"Not Interested",Za,$a)}}var c=google.visualization.arrayToDataTable(Qa),d={legend:{display:!0,position:"right"},is3D:!0},e=new google.visualization.PieChart(document.getElementById("notInterestedChart"));google.visualization.events.addListener(e,"select",b),e.draw(c,d)}function da(){function b(){var b=e.getSelection()[0];if(b){var d=c.getValue(b.row,0);Ya=d,a.exportStatus="Conversion",ia(wa,xa,Ya,"conversion",$a)}}var c=google.visualization.arrayToDataTable(Ra),d={legend:{display:!0,position:"right"},is3D:!0},e=new google.visualization.PieChart(document.getElementById("conversionChart"));google.visualization.events.addListener(e,"select",b),e.draw(c,d)}function ea(){function b(){var b=e.getSelection()[0];if(b){var d=c.getValue(b.row,0);Za=d,a.exportStatus="ScComplaint",ja(wa,xa,"ScComplaint",Za,$a)}}var c=google.visualization.arrayToDataTable(Sa),d={legend:{display:!0,position:"right"},is3D:!0},e=new google.visualization.PieChart(document.getElementById("scComplaintsChart"));google.visualization.events.addListener(e,"select",b),e.draw(c,d)}function fa(b){ua=b,a.loaderLiveStats=!0;var c=j.getToken(ua);s.query({scId:ua,dataType:Ca,token:c},function(b){console.log("Caller Live Status :",b),a.creLiveStatusData=b,angular.forEach(a.creLiveStatusData,function(c,d){void 0===b[d].callingRate&&(a.creLiveStatusData[d].callingRate="NA"),"green"===b[d].status?a.creLiveStatusData[d].status="Active":"red"===b[d].status&&(a.creLiveStatusData[d].status="InActive")}),a.loaderLiveStats=!1},function(b){a.loaderLiveStats=!1,a.creDashboardDataErrorMsg=b.data.message})}function ga(b,d,e,f,g){h.exportType=!0,wa=b,xa=d,Xa=e,Ya=f,a.statusDisplay=Ya,$a=g,P(!0);var k=j.getToken(ua);"export"===$a?(a.exportStatus,i.open(c+"get_caller_wise_last_four_month_appt_details/"+ua+"/"+wa+"/"+xa+"/"+Xa+"/"+Ya+"/"+$a+"/"+Ca+"/"+k),P(!1),$a="submit"):"submit"===$a&&v.query({scId:ua,callerId:wa,branchId:xa,month:Xa,status:Ya,reportType:$a,dataType:Ca,token:k},function(a){console.log("ADMIN CUSTOMER DETAILS :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),P(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),P(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function ha(b,d,e,f,g){h.exportType=!0,wa=b,xa=d,Za=f,Ya=e,a.statusDisplay="conversion"===f?Ya:Za,$a=g,P(!0);var k=j.getToken(ua);"export"===$a?(a.exportStatus="",i.open(c+"get_status_substatus_details/"+za+"/"+Aa+"/"+Ya+"/"+Za+"/"+wa+"/"+xa+"/"+ua+"/"+$a+"/"+Ca+"/"+k),P(!1),$a="submit"):"submit"===$a&&w.query({fromDate:za,toDate:Aa,status:Ya,subStatus:Za,callerId:wa,branchId:xa,scId:ua,reportType:$a,dataType:Ca,token:k},function(a){console.log("ADMIN CUSTOMER DETAILS STATUS WISE:",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),P(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),P(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function ia(b,d,e,f,g){h.exportType=!0,wa=b,xa=d,Za=f,Ya=e,a.statusDisplay="conversion"===f?Ya:Za,$a=g,P(!0);var k=j.getToken(ua);"export"===$a?(a.exportStatus="",i.open(c+"get_status_wise_conversion_details/"+za+"/"+Aa+"/"+Ya+"/"+wa+"/"+xa+"/"+ua+"/"+$a+"/"+k),P(!1),$a="submit"):"submit"===$a&&O.query({fromDate:za,toDate:Aa,status:Ya,callerId:wa,branchId:xa,scId:ua,reportType:$a,token:k},function(a){console.log("ADMIN CONVERSION DETAILS STATUS WISE:",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),P(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),P(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function ja(b,d,e,f,g){h.exportType=!0,wa=b,xa=d,Za=f,Ya=e,a.statusDisplay=Za,$a=g,P(!0);var k=j.getToken(ua);"export"===$a?(a.exportStatus="",i.open(c+"get_sc_complaint_details/"+za+"/"+Aa+"/"+Ya+"/"+Za+"/"+wa+"/"+xa+"/"+ua+"/"+$a+"/"+Ca+"/"+k),P(!1),$a="submit"):"submit"===$a&&x.query({fromDate:za,toDate:Aa,status:Ya,subStatus:Za,callerId:wa,branchId:xa,scId:ua,reportType:$a,dataType:Ca,token:k},function(a){console.log("ADMIN CUSTOMER DETAILS STATUS WISE:",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),P(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),P(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function ka(a){h.tableParams.page(a),h.tableParams.reload()}function la(a){h.tableParams.count(a)}function ma(a){0===a.indexOf(h.tableParams.count())&&(a.push(h.tableParams.count()),a.sort()),h.tableParams.settings({counts:a})}function na(b,c){P(!0);var d=j.getToken(ua);y.query({chassisNo:b,id:ua,dataTypeId:c,bikeBrand:va,token:d},function(b){console.log("history data :",b),a.tcAppointmentHistoryData=b,P(!1)},function(b){P(!1),console.log("history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function oa(b){a.lsHistoryData=[],P(!0);var c=j.getToken(ua);F.query({chassisNo:b,scId:ua,token:c},function(b){console.log("LS history data :",b),a.lsHistoryData=b,P(!1)},function(b){P(!1),console.log("LS history error data",b),a.lsHistoryData=[],a.lsHistoryDataErrorMsg=b.data.message})}function pa(b,c){a.callRecording=[];var d=j.getToken(ua);z.query({chassisNo:b,logInId:ta,scId:ua,dataTypeId:c,token:d},function(b){a.callRecording=b,console.log("callRecording",b)},function(b){var c={recordingUrl:b.data.message,create_ts:""};a.callRecording.push(c)})}function qa(b,c,d,e){a.dueTypeStatsSeries=["FSC1","FSC2","FSC3","FSC4","FSC5","FSC6","FSC7"],a.dueTypeChart={},za=d,Aa=e,wa=b,xa=c,a.dueTypeStatsData=[],a.dueTypeStatsLables=[],_a=[],ab=[],bb=[],cb=[],db=[],eb=[],fb=[],a.totalFreeAllocated=0,a.totalFreeAppointmentTaken=0,a.totalFreePending=0,a.totalFreeCallerConversion=0,a.totalFreeTotalConversion=0,a.loaderIconDueType=!0;var f=j.getToken(ua);C.get({fromDate:za,toDate:Aa,scId:ua,callerId:wa,branchId:xa,token:f},function(b){console.log("Due Type Data :",b);var c=b;void 0!==c.FSC1&&null!==c.FSC1&&angular.forEach(c.FSC1,function(b,d){_a.push(parseInt(c.FSC1[d].apptCount)),a.dueTypeStatsLables.push(c.FSC1[d].apptStatus)}),void 0!==c.FSC2&&null!==c.FSC2&&angular.forEach(c.FSC2,function(a,b){ab.push(parseInt(c.FSC2[b].apptCount))}),void 0!==c.FSC3&&null!==c.FSC3&&angular.forEach(c.FSC3,function(a,b){bb.push(parseInt(c.FSC3[b].apptCount))}),void 0!==c.FSC4&&null!==c.FSC4&&angular.forEach(c.FSC4,function(a,b){cb.push(parseInt(c.FSC4[b].apptCount))}),void 0!==c.FSC5&&null!==c.FSC5&&angular.forEach(c.FSC5,function(a,b){db.push(parseInt(c.FSC5[b].apptCount))}),void 0!==c.FSC6&&null!==c.FSC6&&angular.forEach(c.FSC6,function(a,b){eb.push(parseInt(c.FSC6[b].apptCount))}),void 0!==c.FSC7&&null!==c.FSC7&&angular.forEach(c.FSC7,function(a,b){fb.push(parseInt(c.FSC7[b].apptCount))}),void 0===c.FSC2&&void 0===c.FSC4&&void 0===c.FSC6&&(a.dueTypeStatsSeries=["FSC1","FSC3","FSC5","FSC7"]),_a.length>0&&void 0!==_a&&null!==_a&&_a!==[]&&(a.dueTypeStatsData.push(_a),a.totalFreeAllocated+=parseInt(c.FSC1[0].apptCount),a.totalFreeAppointmentTaken+=parseInt(c.FSC1[1].apptCount),a.totalFreePending+=parseInt(c.FSC1[2].apptCount),a.totalFreeCallerConversion+=parseInt(c.FSC1[3].apptCount),a.totalFreeTotalConversion+=parseInt(c.FSC1[4].apptCount)),
ab.length>0&&void 0!==ab&&null!==ab&&ab!==[]&&(a.dueTypeStatsData.push(ab),a.totalFreeAllocated+=parseInt(c.FSC2[0].apptCount),a.totalFreeAppointmentTaken+=parseInt(c.FSC2[1].apptCount),a.totalFreePending+=parseInt(c.FSC2[2].apptCount),a.totalFreeCallerConversion+=parseInt(c.FSC2[3].apptCount),a.totalFreeTotalConversion+=parseInt(c.FSC2[4].apptCount)),bb.length>0&&void 0!==bb&&null!==bb&&bb!==[]&&(a.dueTypeStatsData.push(bb),a.totalFreeAllocated+=parseInt(c.FSC3[0].apptCount),a.totalFreeAppointmentTaken+=parseInt(c.FSC3[1].apptCount),a.totalFreePending+=parseInt(c.FSC3[2].apptCount),a.totalFreeCallerConversion+=parseInt(c.FSC3[3].apptCount),a.totalFreeTotalConversion+=parseInt(c.FSC3[4].apptCount)),cb.length>0&&void 0!==cb&&null!==cb&&cb!==[]&&(a.dueTypeStatsData.push(cb),a.totalFreeAllocated+=parseInt(c.FSC4[0].apptCount),a.totalFreeAppointmentTaken+=parseInt(c.FSC4[1].apptCount),a.totalFreePending+=parseInt(c.FSC4[2].apptCount),a.totalFreeCallerConversion+=parseInt(c.FSC4[3].apptCount),a.totalFreeTotalConversion+=parseInt(c.FSC4[4].apptCount)),db.length>0&&void 0!==db&&null!==db&&db!==[]&&(a.dueTypeStatsData.push(db),a.totalFreeAllocated+=parseInt(c.FSC5[0].apptCount),a.totalFreeAppointmentTaken+=parseInt(c.FSC5[1].apptCount),a.totalFreePending+=parseInt(c.FSC5[2].apptCount),a.totalFreeCallerConversion+=parseInt(c.FSC5[3].apptCount),a.totalFreeTotalConversion+=parseInt(c.FSC5[4].apptCount)),eb.length>0&&void 0!==eb&&null!==eb&&eb!==[]&&(a.dueTypeStatsData.push(eb),a.totalFreeAllocated+=parseInt(c.FSC6[0].apptCount),a.totalFreeAppointmentTaken+=parseInt(c.FSC6[1].apptCount),a.totalFreePending+=parseInt(c.FSC6[2].apptCount),a.totalFreeCallerConversion+=parseInt(c.FSC6[3].apptCount),a.totalFreeTotalConversion+=parseInt(c.FSC6[4].apptCount)),fb.length>0&&void 0!==fb&&null!==fb&&fb!==[]&&(a.dueTypeStatsData.push(fb),a.totalFreeAllocated+=parseInt(c.FSC7[0].apptCount),a.totalFreeAppointmentTaken+=parseInt(c.FSC7[1].apptCount),a.totalFreePending+=parseInt(c.FSC7[2].apptCount),a.totalFreeCallerConversion+=parseInt(c.FSC7[3].apptCount),a.totalFreeTotalConversion+=parseInt(c.FSC7[4].apptCount)),console.log(JSON.stringify("DUE TYPE STATS++++++++++++++++++",a.dueTypeStatsData)),a.filteredDueTypeStatsData=[],a.filteredDueTypeStatsLables=[];for(var d=0;d<7;d++)void 0!==a.dueTypeStatsData[d]&&a.filteredDueTypeStatsData.push(a.dueTypeStatsData[d]);for(var d=0;d<5;d++)a.filteredDueTypeStatsLables.push(a.dueTypeStatsLables[d]);a.dueTypeChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!0}],yAxes:[{stacked:!0,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.filteredDueTypeStatsLables,series:a.dueTypeStatsSeries,colors:["#FB617F","#ff9900","#2FCF92","#0083ca","#9999ff","#666699","#00ffcc"],data:a.filteredDueTypeStatsData},a.datasetOverrideDueType=[{fill:!0,backgroundColor:a.fsc1DueColors},{fill:!0,backgroundColor:a.fsc2DueColors},{fill:!0,backgroundColor:a.fsc3DueColors},{fill:!0,backgroundColor:a.fsc4DueColors},{fill:!0,backgroundColor:a.fsc5DueColors},{fill:!0,backgroundColor:a.fsc6DueColors},{fill:!0,backgroundColor:a.fsc7DueColors}],console.log(JSON.stringify(a.dueTypeStatsLables)),console.log(JSON.stringify(a.dueTypeStatsSeries)),a.loaderIconDueType=!1},function(b){a.loaderIconDueType=!1,a.creDashboardDataErrorMsg=b.data.message})}function ra(b){a.loaderIconService=!0,a.tcServiceHistoryData=[],console.log("Chassis no",b);var c=j.getToken(ua);E.query({chassisNo:b,id:ua,bikeBrand:va,token:c},function(b){console.log("Service history data :",b),a.loaderIconService=!1,a.tcServiceHistoryData=b,a.tcServiceHistoryDataErrorMsg=""},function(b){a.loaderIconService=!1,a.tcServiceHistoryDataErrorMsg="No Data Available"})}function sa(b,c){a.customerMobileNumbers=[],a.currentMobile=null,P(!0);var d=j.getToken(ua);D.query({apptId:b,scId:ua,status:c,callerId:ta,token:d},function(b){console.log("data in detailed page",b[0]),a.tcAppointmentData=b[0],a.tcAppointmentDataErrorMsg="",hb=a.tcAppointmentData.mobile;for(var c=0;c<hb.length;c++)hb[c].customer_mobile===a.tcAppointmentData.customer_mobile&&(hb[c].customer_mobile=hb[c].customer_mobile+"*",a.currentMobile=hb[c].customer_mobile),a.customerMobileNumbers.push(hb[c]);void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),P(!1)},function(b){a.tcAppointmentDataErrorMsg="No Data Available",P(!1)})}var ta=f.get("loggedInUserIdAdmin"),ua=f.get("loggedInUserScIdAdmin"),va=f.get("loggedInUserBikeBrandAdmin");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var wa="caller",xa="branch",ya="all";Q(),a.getFeedbackFilter=function(b){console.log(b),b?a.feedBackFilter=!0:(a.feedBackFilter=!1,a.tcAppointment.selectedFromDate="",a.tcAppointment.selectedToDate="",za="month",Aa="month",a.selectedFromDate="month",a.selectedToDate="month","performance analysis"===Ba?(Y("Call Later",wa,xa,za,Aa),Z("Not Interested",wa,xa,za,Aa),_(wa,xa,za,Aa),aa(wa,xa,za,Aa)):(U(wa,xa,Ba),V(wa,xa,Ba)))},a.getSelectedDealer=function(b){wa="caller",xa="branch",console.log(b),ua=b,h.scIdSuperAdmin=b,S(ua),R(ua),a.getDealerPerformanceData(Ba)},R(ua),S(ua),a.adminCallerStatsByDate=function(b,c){b>c?i.alert("To Date should be greater than From Date"):(za=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),Aa=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),a.selectedFromDate=za,a.selectedToDate=Aa,"performance analysis"===Ba?(Y("Call Later",wa,xa,za,Aa),Z("Not Interested",wa,xa,za,Aa),_(wa,xa,za,Aa),aa(wa,xa,za,Aa)):(U(wa,xa,Ba),V(wa,xa,Ba)))},a.getSelectedCaller=function(b){console.log(b),wa=b,null===b&&(wa="caller"),a.getDealerPerformanceData(Ba)},a.getSelectedBranch=function(b){console.log("selected branch",b),xa=b,null===b&&(xa="branch"),a.getDealerPerformanceData(Ba)};var za="month",Aa="month";a.selectedFromDate="month",a.selectedToDate="month",a.creDashboardDataDisplay=[],a.potentialServiecDue=1;var Ba="service due date";a.getDealerPerformanceData=function(b){a.selectedStatus=b,Ba=b,a.selFilter=b,"service due date"===b||"complete"===b?(a.callerNewStats=!0,a.callerOldStats=!1,a.performanceAnalysis=!1,U(wa,xa,Ba),V(wa,xa,Ba)):"old stats"===b?(a.callerNewStats=!1,a.callerOldStats=!0,a.performanceAnalysis=!1,T(wa,xa,za,Aa)):"performance analysis"===b&&(za="month",Aa="month",a.selectedFromDate="month",a.selectedToDate="month",a.callerNewStats=!1,a.callerOldStats=!1,a.performanceAnalysis=!0,fa(ua),a.getHourWiseTeleCallerData(Da,ta,wa,xa),a.getWeeklyWiseTeleCallerData(Da,ta,wa,xa),Y("Call Later",wa,xa,za,Aa),Z("Not Interested",wa,xa,za,Aa),_(wa,xa,za,Aa),aa(wa,xa,za,Aa),W(wa,xa),X(Ma,xa),qa(wa,xa,za,Aa))},a.getDealerPerformanceData(Ba);var za="month",Aa="month";a.selectedFromDate="month",a.selectedToDate="month",a.getPericularCompleteStatsData=function(b,d,e,f){a.exportStatus="Customer Complete Potential Stats",console.log(a.exportStatus),a.statusDisplay=d,"connectedCallLater"===a.statusDisplay?a.statusDisplay="Connected Call Later":"pickup"===a.statusDisplay?a.statusDisplay="Pickup & Drop":"servicedone"===a.statusDisplay?a.statusDisplay="Service Done":"allocated"===a.statusDisplay?a.statusDisplay="Allocated":"pendingCalls"===a.statusDisplay?a.statusDisplay="Pending Calls":"attempted"===a.statusDisplay?a.statusDisplay="Attempted":"notConnectedCallLater"===a.statusDisplay?a.statusDisplay="Non Connected Call Later":"notinterested"===a.statusDisplay?a.statusDisplay="Not Interested":"appointmenttaken"===a.statusDisplay?a.statusDisplay="Appointment Taken":"nonconverted"===a.statusDisplay?a.statusDisplay="Non Converted":"pending"===a.statusDisplay?a.statusDisplay="Pending":"converted"===a.statusDisplay?a.statusDisplay="Converted":"allocatedConversion"===a.statusDisplay?a.statusDisplay="Allocated Conversion":"freshCalls"===a.statusDisplay?a.statusDisplay="Fresh Calls":"callerConversion"===a.statusDisplay?a.statusDisplay="Caller Conversion":"totalConversion"===a.statusDisplay&&(a.statusDisplay="Toatal Conversion"),Wa=b,h.exportType=!0,"superAdmin"!==h.signedInUserRole&&"allocated"===d&&(h.exportType=!1),a.filteredServiceDueTypes=[],P(!0),Ta=e,Va="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Service Reminder Post Warranty"===b?"Post Warranty":"Service Reminder Extended Warranty"===b?"Extended Warranty":"Service Reminder Chain Lube Service"===b?"Chain Lube Service":"Service Reminder Maintenance Service"===b?"Maintenance Service":"Service Reminder Fitness Certificate"===b?"Fitness Certificate":"both",Ua=d;var g=j.getToken(ua);$a=f,"all"===e&&(a.exportStatus="Over Due Details"),"export"===$a?("all"!==e?(a.exportStatus="Customer Complete Potential Stats",console.log(c+"get_admin_pontential_allocated_details/"+za+"/"+Aa+"/"+ua+"/"+wa+"/"+Ta+"/"+Ua+"/"+Va+"/"+xa+"/"+$a+"/"+g),i.open(c+"get_admin_pontential_allocated_details/"+za+"/"+Aa+"/"+ua+"/"+wa+"/"+Ta+"/"+Ua+"/"+Va+"/"+xa+"/"+$a+"/"+g)):"all"===e&&(a.exportStatus="Over Due Details",console.log(c+"get_admin_pontential_allocated_details/"+za+"/"+Aa+"/"+ua+"/"+wa+"/all/"+Ua+"/both/"+xa+"/"+$a+"/"+g),i.open(c+"get_admin_pontential_allocated_details/"+za+"/"+Aa+"/"+ua+"/"+wa+"/all/"+Ua+"/both/"+xa+"/"+$a+"/"+g)),P(!1),$a="submit"):"submit"===$a&&K.query({fromDate:za,toDate:Aa,scId:ua,callerId:wa,dataTypeId:Ta,status:Ua,scheduleType:Va,branchId:xa,reportType:$a,token:g},function(a){console.log("ADMIN COMPETE POTENTIAL CUSTOMER DETAILS STATS WISE :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),P(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),P(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})},a.getPericularStatsServiceDueDateWiseData=function(b,d,e,f){a.exportStatus="Customer Potential Stats",console.log(a.exportStatus),a.statusDisplay=d,"connectedCallLater"===a.statusDisplay?a.statusDisplay="Connected Call Later":"pickup"===a.statusDisplay?a.statusDisplay="Pickup & Drop":"servicedone"===a.statusDisplay?a.statusDisplay="Service Done":"allocated"===a.statusDisplay?a.statusDisplay="Allocated":"attempted"===a.statusDisplay?a.statusDisplay="Attempted":"pendingCalls"===a.statusDisplay?a.statusDisplay="Pending Calls":"notConnectedCallLater"===a.statusDisplay?a.statusDisplay="Non Connected Call Later":"notinterested"===a.statusDisplay?a.statusDisplay="Not Interested":"appointmenttaken"===a.statusDisplay?a.statusDisplay="Appointment Taken":"nonconverted"===a.statusDisplay?a.statusDisplay="Non Converted":"pending"===a.statusDisplay?a.statusDisplay="Pending":"converted"===a.statusDisplay?a.statusDisplay="Converted":"allocatedConversion"===a.statusDisplay?a.statusDisplay="Allocated Conversion":"freshCalls"===a.statusDisplay?a.statusDisplay="Fresh Calls":"callerConversion"===a.statusDisplay?a.statusDisplay="Caller Conversion":"totalConversion"===a.statusDisplay&&(a.statusDisplay="Toatal Conversion"),Wa=b,h.exportType=!0,"superAdmin"!==h.signedInUserRole&&"allocated"===d&&(h.exportType=!1),a.filteredServiceDueTypes=[],P(!0),Ta=e,Va="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Service Reminder Post Warranty"===b?"Post Warranty":"Service Reminder Extended Warranty"===b?"Extended Warranty":"Service Reminder Chain Lube Service"===b?"Chain Lube Service":"Service Reminder Maintenance Service"===b?"Maintenance Service":"Service Reminder Fitness Certificate"===b?"Fitness Certificate":"both",Ua=d;var g=j.getToken(ua);$a=f,"export"===$a?(a.exportStatus="Customer Potential Stats",console.log(c+"get_admin_pontential_servicedue_details/"+za+"/"+Aa+"/"+ua+"/"+wa+"/"+Ta+"/"+Ua+"/"+Va+"/"+xa+"/"+$a+"/"+g),i.open(c+"get_admin_pontential_servicedue_details/"+za+"/"+Aa+"/"+ua+"/"+wa+"/"+Ta+"/"+Ua+"/"+Va+"/"+xa+"/"+$a+"/"+g),P(!1),$a="submit"):"submit"===$a&&L.query({fromDate:za,toDate:Aa,scId:ua,callerId:wa,dataTypeId:Ta,status:Ua,scheduleType:Va,branchId:xa,reportType:$a,token:g},function(a){console.log("ADMIN POTENTIAL CUSTOMER DETAILS SERVICE DUE DATE WISE STATS WISE :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),P(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),P(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})},a.statusLables=[{key:"serviceReminder",name:"Service Reminder"},{key:"servicefeedback",name:"Service Feedback"},{key:"insurance",name:"Insurance"},{key:"salesfeedback",name:"Sales Feedback"}],a.currentHourStatus=a.statusLables[0].name,a.currentWeeklyStatus=a.statusLables[0].name;var Ca="serviceReminder";a.getStatusWiseHourStats=function(b,c){Ca=b,"Service Reminder"===Ca?Ca="serviceReminder":"Service Feedback"===Ca?Ca="servicefeedback":"Insurance"===Ca?Ca="insurance":"Sales Feedback"===Ca&&(Ca="salesfeedback"),console.log(Ca),a.getHourWiseTeleCallerData(Da,ta,wa,xa),a.getWeeklyWiseTeleCallerData(Da,ta,wa,xa),Y("Call Later",wa,xa,za,Aa),Z("Not Interested",wa,xa,za,Aa),aa(wa,xa,za,Aa),fa(ua),W(wa,xa),X(Ma,xa),_(wa,xa,za,Aa)};var Da="today",Ea=[];a.calStatsSeries=["Attempted","Connected","Appointments"],a.calStatsColors=["#FB617F","#ff9900","#2FCF92"],a.callsCountData=[],a.hourLables=[],a.attemptedColors=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.connectedColors=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"],a.appointmentsColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.hourWiseChart={},a.getHourWiseTeleCallerData=function(b,c,d,e){a.hourWiseChart={},wa=d,xa=e,a.callsCountData=[],a.hourLables=[];var f,g=[],h=[],i=[];a.totalAppointmentsTakenHourly=0,a.totalcallsAttemptedHourly=0,a.totalcallsConnectedHourly=0,a.loaderIconHourWise=!0;var l=j.getToken(ua);k.get({date:Da,scId:ua,callerId:wa,branch:xa,status:Ca,token:l},function(b){if(Ea=b,console.log("Hour wise data :",b),void 0!==Ea.callsAttempted&&null!==Ea.callsAttempted)for(var c=0;c<Ea.callsAttempted.length;c++)null!==Ea.callsAttempted[c]&&(a.totalcallsAttemptedHourly+=parseInt(Ea.callsAttempted[c].callsAttempted),g.push(parseInt(Ea.callsAttempted[c].callsAttempted)),parseInt(Ea.callsAttempted[c].Hour)%12>6?f=parseInt(Ea.callsAttempted[c].Hour)%12+"AM":parseInt(Ea.callsAttempted[c].Hour)%12<=6&&(f=parseInt(Ea.callsAttempted[c].Hour)%12+"PM"),parseInt(Ea.callsAttempted[c].Hour)%12==0&&(f=Ea.callsAttempted[c].Hour+"PM"),a.hourLables.push(f));if(void 0!==Ea.callsConnected&&null!==Ea.callsConnected)for(var d=0;d<Ea.callsConnected.length;d++)null!==Ea.callsConnected[d]&&(a.totalcallsConnectedHourly+=parseInt(Ea.callsConnected[d].callsConnected),h.push(parseInt(Ea.callsConnected[d].callsConnected)));if(void 0!==Ea.appointmentTaken&&null!==Ea.appointmentTaken)for(var e=0;e<Ea.appointmentTaken.length;e++)null!==Ea.appointmentTaken[e]&&void 0!==Ea.appointmentTaken[e].appointmentTaken&&(a.totalAppointmentsTakenHourly+=parseInt(Ea.appointmentTaken[e].appointmentTaken),i.push(parseInt(Ea.appointmentTaken[e].appointmentTaken)));a.callsCountData.push(g),a.callsCountData.push(h),a.callsCountData.push(i),a.filteredCallsCountData=[],a.filteredHourLables=[];for(var j=0;j<3;j++)a.filteredCallsCountData.push(a.callsCountData[j]);for(var j=0;j<11;j++)a.filteredHourLables.push(a.hourLables[j]);a.hourWiseChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.filteredHourLables,series:a.calStatsSeries,colors:["#FB617F","#ff9900","#2FCF92"],data:a.filteredCallsCountData},a.datasetOverrideHourWiseData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors}],a.tcHourWiseDataErrorMsg="",a.loaderIconHourWise=!1},function(b){a.tcHourWiseDataErrorMsg=b.data.message,console.log(b),a.loaderIconHourWise=!1})};var Fa=[];a.calStatsSeriesWeekly=["Attempted","Connected","Appointments"],a.calStatsColorsWeekly=["#FB617F","#ff9900","#2FCF92"],a.callsCountDataWeekly=[],a.weeklyLables=[],a.weeklyChart={},a.getWeeklyWiseTeleCallerData=function(b,c,d,e){a.weeklyChart={},wa=d,xa=e,a.callsCountDataWeekly=[],a.weeklyLables=[];var f=[],g=[],h=[];a.totalAppointmentsTakenWeekly=0,a.totalcallsAttemptedWeekly=0,a.totalcallsConnectedWeekly=0,a.freshAppointments=0,a.loaderIconWeekWise=!0;var i=j.getToken(ua);m.get({date:Da,scId:ua,callerId:wa,branch:xa,status:Ca,token:i},function(b){if(Fa=b,console.log("Week wise data :",b),void 0!==Fa.freshAppts&&null!==Fa.freshAppts&&void 0!==Fa.freshAppts[0]&&null!==Fa.freshAppts[0]&&(a.freshAppointments=parseInt(Fa.freshAppts[0].freshAppts)),void 0!==Fa.callsAttempted&&null!==Fa.callsAttempted)for(var c=0;c<Fa.callsAttempted.length;c++)null!==Fa.callsAttempted[c]&&(a.totalcallsAttemptedWeekly+=parseInt(Fa.callsAttempted[c].callsAttempted),f.push(parseInt(Fa.callsAttempted[c].callsAttempted)),a.weeklyLables.push(Fa.callsAttempted[c].Hour));if(void 0!==Fa.callsConnected&&null!==Fa.callsConnected)for(var d=0;d<Fa.callsConnected.length;d++)null!==Fa.callsConnected[d]&&(a.totalcallsConnectedWeekly+=parseInt(Fa.callsConnected[d].callsConnected),h.push(parseInt(Fa.callsConnected[d].callsConnected)));if(void 0!==Fa.appointmentTaken&&null!==Fa.appointmentTaken)for(var e=0;e<Fa.appointmentTaken.length;e++)null!==Fa.appointmentTaken[e]&&(a.totalAppointmentsTakenWeekly+=parseInt(Fa.appointmentTaken[e].appointmentTaken),g.push(parseInt(Fa.appointmentTaken[e].appointmentTaken)));a.callsCountDataWeekly.push(f),a.callsCountDataWeekly.push(h),a.callsCountDataWeekly.push(g),console.log(" $scope.callsCountDataWeekly pppppppppppppppppppppppppppp",JSON.stringify(a.callsCountDataWeekly)),console.log(" $scope.callsCountDataWeekly length::: pppppppppppppppppppppppppppp",a.callsCountDataWeekly.length),a.filteredCallsCountDataWeekly=[],a.filteredWeeklyLables=[];for(var i=0;i<3;i++)a.filteredCallsCountDataWeekly.push(a.callsCountDataWeekly[i]);for(var i=0;i<8;i++)a.filteredWeeklyLables.push(a.weeklyLables[i]);a.weeklyChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.filteredWeeklyLables,series:a.calStatsSeriesWeekly,colors:["#FB617F","#ff9900","#2FCF92"],data:a.filteredCallsCountDataWeekly},a.datasetOverrideWeeklyData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors}],a.tcHourWiseDataErrorMsg="",a.loaderIconWeekWise=!1},function(b){a.tcHourWiseDataErrorMsg=b.data.message,console.log(b),a.loaderIconWeekWise=!1})},a.callerWiseConversionSeries=["Connected","Appointments Taken","Converted"],a.callerWiseConversionData=[],a.callerWiseConversionLables=[];a.callerWiseConnectedTotal=0,a.callerWiseAppointmentTakenTotal=0,a.callerWiseConvertedTotal=0,a.callerWiseConversionChart={},a.fsc1Colors=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.fsc2Colors=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"],a.fsc3Colors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.fsc4Colors=["#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca"],a.paidColors=["#A0B421","#A0B421","#A0B421","#A0B421","#A0B421","#A0B421"],a.revenueColors=["#FB617F","#ff9900","#2FCF92","#0083ca","#F0AB05","#A0B421"],a.revenueDataSeries=["FSC1","FSC2","FSC3","FSC4","Paid"],a.revenueData=[],a.revenueLables=[];var Ga=[],Ha=[],Ia=[],Ja=[],Ka=[],La="all",Ma="caller",Na="month";a.fsc1Total=0,a.fsc2Total=0,a.fsc3Total=0,a.fsc4Total=0,a.paidTotal=0,a.revenueChart={},a.dataErrorMsgRevenue=!1,$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})});var Oa,Pa=[["Appointment Status","Appointment Count"]];a.dataErrorMsgCallLater=!1,a.callLaterTotal=0;var Qa=[["Appointment Status","Appointment Count"]];a.dataErrorMsgNotInterested=!1,a.notInterestedTotal=0;var Ra=[["Appointment Status","Appointment Count"]];a.dataErrorMsgConversion=!1,a.conversionTotal=0;var Sa=[["Appointment Status","Appointment Count"]];a.dataErrorMsgScComplaint=!1,a.scComplaintTotal=0,a.loaderLiveStats=!1;var Ta,Ua,Va,Wa;a.getPericularStatsData=function(b,d,e,f,g,k){a.exportStatus="Customer Stats",a.statusDisplay=d,"connected"===a.statusDisplay?a.statusDisplay="Connected":"connected"===a.statusDisplay?a.statusDisplay="Connected":"servicedone"===a.statusDisplay?a.statusDisplay="Service Done":"allocated"===a.statusDisplay?a.statusDisplay="Allocated":"attempted"===a.statusDisplay?a.statusDisplay="Attempted":"calllater"===a.statusDisplay?a.statusDisplay="Call Later":"notinterested"===a.statusDisplay?a.statusDisplay="Not Interested":"appointmenttaken"===a.statusDisplay?a.statusDisplay="Appointment Taken":"nonconverted"===a.statusDisplay?a.statusDisplay="Non Converted":"pending"===a.statusDisplay?a.statusDisplay="Pending":"converted"===a.statusDisplay?a.statusDisplay="Converted":"allocatedConversion"===a.statusDisplay?a.statusDisplay="Allocated Conversion":"freshCalls"===a.statusDisplay&&(a.statusDisplay="Fresh Calls"),za=f,Aa=g,Wa=b,h.exportType=!0,a.filteredServiceDueTypes=[],P(!0),Ta=e,Va="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Service Reminder Post Warranty"===b?"Post Warranty":"Service Reminder Extended Warranty"===b?"Extended Warranty":"Service Reminder Chain Lube Service"===b?"Chain Lube Service":"Service Reminder Maintenance Service"===b?"Maintenance Service":"Service Reminder Fitness Certificate"===b?"Fitness Certificate":"both",Ua=d;var l=j.getToken(ua);$a=k,"export"===$a?(a.exportStatus="Customer Stats",console.log(c+"get_caller_dashboard_details/"+ua+"/"+wa+"/"+Ta+"/"+Ua+"/"+Va+"/NA/"+xa+"/"+$a+"/"+l),i.open(c+"get_caller_dashboard_details/"+ua+"/"+wa+"/"+Ta+"/"+Ua+"/"+Va+"/NA/"+xa+"/"+$a+"/"+l),P(!1),$a="submit"):"submit"===$a&&A.query({scId:ua,callerId:wa,dataTypeId:Ta,status:Ua,scheduleType:Va,subStatus:"NA",branchId:xa,reportType:$a,token:l},function(a){console.log("ADMIN CUSTOMER DETAILS STATS WISE :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),P(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),P(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})},h.creTableData=[];var Xa,Ya,Za,$a="submit";a.getTcAdminStatsStatusDetail=function(b){console.log("status :  :",Array.isArray(b)),!0===Array.isArray(b)?(console.log("graph lable :  :",b[0]._model.label),console.log("graph lable status :  :",b[0]._model.datasetLabel),Xa=b[0]._model.label,Ya=b[0]._model.datasetLabel,a.exportStatus="Month Conversion"):!1===Array.isArray(b)&&(selStatus=b),ga(wa,xa,Xa,Ya,$a)},h.tableParams=new g({page:1,count:20},{total:h.creTableData.length,getData:function(b,c){var d=c.sorting()?e("orderBy")(h.creTableData,c.orderBy()):h.creTableData;d=c.filter()?e("filter")(d,c.filter()):d,a.orderedData=d,c.total(d.length),b.resolve(a.users=d.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),h.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=h.tableParams.settings().counts,a.changePage=ka,a.changePageSize=la,a.changePageSizes=ma,a.getHistory=function(a,b,c,d){void 0!==d&&null!==d||(d="status"),na(a,b),pa(a,b),ra(a),sa(c,d),oa(a)},a.getDetails=function(b,c){a.editPhoneSuccessMsg="",console.log(b),console.log(c),void 0!==c&&null!==c||(c="status"),sa(b,c)},a.editPhoneNumber=function(b,c,e,f){console.log("selMobile",b),console.log("apptObj",c),a.editPhoneSuccessMsg="";var g={mobile:b,customerName:c.customer_name,chassisNo:c.chassisNo,scId:ua,defaultNumber:e,customerId:c.customerId,customerStatus:f};console.log(JSON.stringify(g));var h=j.getToken(ua);M.save({id:ua,token:h},g,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,d(function(){$("#editPhoneModal").modal("hide"),$("#activeDeactivePhoneModal").modal("hide"),sa(c.apptId,a.statusDisplay)},2e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})},a.viewCallRecord=function(a){i.open(a.recordingUrl,"_blank")},a.pauseCallRecord=function(){document.getElementById("stopRecording").pause()},a.clearRecording=function(){document.getElementById("stopRecording").pause()},a.exportCustomerDetails=function(){console.log("Inside Export"),"Customer Stats"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularStatsData(Wa,Ua,Ta,za,Aa,"export")),"Customer Complete Potential Stats"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularCompleteStatsData(Wa,Ua,Ta,"export")),"Customer Potential Stats"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularStatsServiceDueDateWiseData(Wa,Ua,Ta,"export")),"Over Due Details"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularCompleteStatsData("dataTypename","overduecalls","all","export")),"Month Conversion"===a.exportStatus?(console.log(a.exportStatus),ga(wa,xa,Xa,Ya,"export")):"Conversion"===a.exportStatus?ia(wa,xa,Ya,"conversion","export"):"Call Later"===a.exportStatus?ha(wa,xa,"Call Later",Za,"export"):"ScComplaint"===a.exportStatus?ja(wa,xa,"ScComplaint",Za,"export"):"Not Interested"===a.exportStatus&&ha(wa,xa,"Not Interested",Za,"export")},a.fsc1DueColors=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.fsc2DueColors=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"],a.fsc3DueColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.fsc4DueColors=["#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca"],a.fsc5DueColors=["#9999ff","#9999ff","#9999ff","#9999ff","#9999ff","#9999ff","#9999ff","#9999ff","#9999ff","#9999ff","#9999ff"],a.fsc6DueColors=["#666699","#666699","#666699","#666699","#666699","#666699","#666699","#666699","#666699","#666699","#666699","#666699","#666699"],a.fsc7DueColors=["#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc","#00ffcc"],a.dueTypeStatsSeries=["FSC1","FSC2","FSC3","FSC4","FSC5","FSC6","FSC7"],a.dueTypeStatsData=[],a.dueTypeStatsLables=[];var _a=[],ab=[],bb=[],cb=[],db=[],eb=[],fb=[];a.totalFreeAllocated=0,a.totalFreeAppointmentTaken=0,a.totalFreePending=0,a.totalFreeCallerConversion=0,a.totalFreeTotalConversion=0,a.dueTypeChart={},a.trustAsResourceUrl1=function(a){return b.trustAsResourceUrl(a)},a.customerMobileNumbers=[];var gb,hb=[],ib=!1,jb=!1,kb=!1;a.getUpdateMobileStatus=function(b,c,e,f){gb=f,"active"===f?d(function(){ib=i.confirm("Are you sure to Activate this Mobile No.?"),ib?(console.log("Updating :",gb),a.editPhoneNumber(lb,c,e,gb),a.phoneObj={}):console.log("Cancelled the Activation Event")},300):"inactive"===f?d(function(){console.log(lb),console.log(a.tcAppointmentData.customer_mobile),lb===a.tcAppointmentData.customer_mobile?(alert("This is the Primary number.You cannot deactivate the number."),jb=!1):lb!==a.tcAppointmentData.customer_mobile&&(jb=i.confirm("Are you sure to Deactivate this Mobile No.?")),jb?(console.log("Updating :",gb),a.editPhoneNumber(lb,c,e,gb),a.phoneObj={}):console.log("Cancelled the Deactivation Event")},300):"primary"===f&&d(function(){console.log(lb),console.log(a.tcAppointmentData.customer_mobile),lb===a.tcAppointmentData.customer_mobile?(alert("This is already a Primary Number"),kb=!1):lb!==a.tcAppointmentData.customer_mobile&&(kb=i.confirm("Are you sure to make this Mobile No. as Primary?")),kb?(console.log("Updating :",gb),a.editPhoneNumber(lb,c,e,gb),a.phoneObj={}):console.log("Cancelled the Making Primary Event")},300)},$("#activeDeactivePhoneModal").modal("hide");var lb;a.updateMobileStatus=function(b){a.mobileDisplay=b,b.substr(0,10)===a.tcAppointmentData.customer_mobile?a.primaryStatus=!0:b.substr(0,10)!==a.tcAppointmentData.customer_mobile&&(a.primaryStatus=!1),a.editPhoneSuccessMsg="",a.editPhoneErrorMsg="",console.log(b),null!==b&&(lb=b.substr(0,10),$("#activeDeactivePhoneModal").modal("show"))},a.clearActiveInactiveModal=function(){$("#activeDeactivePhoneModal").modal("hide")};var mb=!1;a.createFutureReminder=function(b){if(!0===(mb=i.confirm("Are you sure to create the Future Reminder?"))){var c={dateOfSale:b.dateOfSale,apptId:b.apptId,reminder:b.reminder,assignedId:b.assignedId,chassisNo:b.chassisNo,bikeType:b.bikeType,lastServiceDueDate:b.serviceDueDate,scId:ua,branchId:b.branchId};console.log(JSON.stringify(c));var d=j.getToken(ua);N.save({scId:ua,token:d},c,function(b){console.log("FutUre Reminder Resp : :",b),i.alert(b.message),oa(a.tcAppointmentData.chassisNo)},function(a){console.log("FutUre Reminder Error Resp : :",a)})}else!1===mb&&console.log("FutUre Reminder Creation Cancelled")},a.downloadPDF=function(a){var b=document.querySelector("#"+a),c=b.toDataURL("image/jpeg",1),d=new jsPDF("landscape");d.setFontSize(20),d.text(15,15,"Super Cool Chart"),d.addImage(c,"JPEG",10,10,280,150),d.save("new-canvas.pdf")}}]),
angular.module("letsService").controller("CrmUploadController",["$scope","$state","$timeout","$cookies","$rootScope","$window","TokenService","TcAdminDashboardService","TeleCallerWiseServiceCenterService","TeleCallerDataTypeService","GetBranchWiseTeleCallerService","TcAdminDashboardDetailService","serviceURL","TeleCallerExcelUploadService","TeleCallingSearchService","TeleCallingCallRecordService","TeleCallerExcelUploadJobcardDataService","TeleCallerPerticularAppointmentHistoryDataService","TeleCallerExcelUploadServiceReminderDataService","TeleCallerJobCardDataService","TeleCallerCallStatsDataService","TeleCallerFeedbackRatingService","GetFeedbackTitleService","AddFeedbackQuestionService","TeleCallerExcelUploadSalesFeedbackDataService","BrandWiseModelService","TeleCallerExcelUploadAMCDataService","TeleCallerCSVUploadServiceReminderDataService","TeleCallerCSVUploadJobCardDataService","AppointmentDueTypeStats","ConversionDueTypeStatsService","TeleCallerCSVUploadRegularDataService","AssignCallerService","TeleCallerStatusService","UpdateTelecallingTargetService","GetScWiseTeleCallerService","GetInsuranceCallerListService","AssignInsuranceDataService","GetUnAssignedDataService","TeleCallerExcelUploadExtendedWarrantyDataService","TeleCallerExcelUploadAMCDataUtilityService","TeleCallerExcelUploadInsuranceDataService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){function Q(){var b=g.getToken(oa);j.query({id:oa,token:b},function(b){a.dataTypesForUpload=b,console.log(" $scope.dataTypesForUpload :",a.dataTypesForUpload);for(var c=0;c<b.length;c++)"Non Convereted Data"===b[c].description&&(b[c].description="Job Card Data")},function(b){a.datatypeErrorMsg=b.data.message})}function R(){var b=g.getToken(oa);i.query({id:oa,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function S(b){g.getToken(oa);z.query({brandName:b},function(b){console.log("Brand Wise Models",b),a.brandWiseVehicleTypes=b},function(a){console.log(a)})}function T(){var b=g.getToken(oa);H.query({id:oa,token:b},function(b){a.teleCallingStatus=[],console.log(b),angular.forEach(b,function(c,d){"Status Not Changed"!==b[d].description&&a.teleCallingStatus.push(b[d])}),console.log(JSON.stringify(a.teleCallingStatus))},function(b){a.statusErrorMsg=b.data.message})}function U(c){a.loading=!0;var d=g.getToken(oa);I.save({id:oa,token:d},c,function(c){f.alert(c.message),b.reload(),a.updateTelecallerTargetMsg=c.message,a.loading=!1},function(b){console.log(b),a.updateTelecallerTargetErrorMsg=b.data.message})}function V(c){a.loading=!0;var d=g.getToken(oa);L.save({id:oa,token:d},c,function(c){f.alert(c.message),b.reload(),a.updateTelecallerTargetMsgSI=c.message,a.loading=!1},function(b){a.updateTelecallerTargetErrorMsgSI=b.data.message})}function W(){var b=g.getToken(oa);i.query({id:oa,token:b},function(b){angular.forEach(b,function(b){a.teleCallerServiceCenterData.push({id:b.scId,label:b.scName})})},function(b){a.serviceCenterErrorMsg=b.data.message}),console.log("data typed",Fa)}function X(){var b=g.getToken(oa);j.query({id:oa,token:b},function(b){angular.forEach(b,function(b){a.teleCallerDataTypeData.push({id:b.dataTypeId,label:b.description})})},function(b){a.datatypeErrorMsg=b.data.message})}function Y(b){var c=g.getToken(oa);J.query({branchId:b,id:oa,token:c},function(b){a.callerList=b,console.log("callerList",b),angular.forEach(b,function(b){a.teleCallerDataCallerData.push({id:b.loginId,label:b.username,slNo:b.slNo})})},function(b){a.callerListErrorMsg=b.data.message})}function Z(){var b=g.getToken(oa);K.query({scId:oa,token:b},function(b){a.insuranceCallerList=b,console.log("insurance Caller List ::::",b),angular.forEach(b,function(b){a.teleCallerDataCallerDataSI.push({id:b.logInId,label:b.username})}),console.log("$scope.teleCallerDataCallerDataSI",a.teleCallerDataCallerDataSI)},function(b){a.insuranceCallerListErrorMsg=b.data.message})}function _(b,c){if(console.log("selectedServiceCenter",Ba),void 0!==Ba&&0!==Ba.length){console.log("selDataType",b),console.log("selDataTypeName",c);var d=b.toString(),e=g.getToken(oa);M.get({scId:oa,branchId:Ba,dataTypeId:d,dataTypeName:c,token:e},function(b){a.unAssignedData=b,console.log("unAssignedCount",b)},function(b){a.showAssignCaller=!0,a.unAssignedCountErrorMsg=b.data.message,a.unAssignedData=""})}else 0===Ba.length&&f.alert("Kindly Select the Branch..!")}function aa(b){if(void 0!==Ba&&void 0!==Fa||(f.alert("Kindly select the ServiceCenter/DataType to upload the file."),$('input[type="file"]').val(null)),void 0!==Ba&&void 0!==Fa&&(Pa=f.confirm("Are you sure this is the file you want to upload?")),!0===Pa){c(function(){"Service Reminder"!==Ga&&"Service Remainder"!==Ga&&"Sales FeedBack"!==Ga&&"Extended Warranty"!==Ga&&"Insurance Job Card"!==Ga?($("#uploadDataMapping").show(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$("html, body").animate({scrollTop:$("#uploadDataMapping").position().top})):"Service Reminder"===Ga||"Service Remainder"===Ga?($("#uploadDataMappingForServiceRemainder").show(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMapping").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$("html, body").animate({scrollTop:$("#uploadDataMappingForServiceRemainder").position().top})):"Sales FeedBack"===Ga?($("#uploadDataMappingForSalesFeedback").show(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMapping").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$("html, body").animate({scrollTop:$("#uploadDataMappingForSalesFeedback").position().top})):"Extended Warranty"===Ga?($("#uploadDataMappingExtendedWarranty").show(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMapping").hide(),$("#uploadDataMappingInsurance").hide(),$("html, body").animate({scrollTop:$("#uploadDataMappingExtendedWarranty").position().top})):"Insurance Job Card"===Ga&&($("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMapping").hide(),$("#uploadDataMappingInsurance").show(),$("html, body").animate({scrollTop:$("#uploadDataMappingInsurance").position().top}))},1e3);var d=b.target.files[0],e=d.name;console.log(e.substr(-5)),".xls"!==e.substr(-4)&&(f.alert("Only .xls file format is allowed"),$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide());var g=new FileReader;g.onload=function(b){var c=b.target.result,d=XLS.CFB.read(c,{type:"binary"}),e=XLS.parse_xlscfb(d);e.SheetNames.forEach(function(b){var c=XLS.utils.sheet_to_row_object_array(e.Sheets[b]);if(console.log("oJS",c),c.length>0){Ma=c;for(var d=0;d<Ma.length;d++)angular.forEach(Ma[d],function(a,b){Qa.push(b)});var f,g=[],h=function(a,b,c){f=c[b];for(var b in g)if(g[b]===f)return!0;g.push(f)};Qa.forEach(h),a.uploadedFileColumnNames=g,console.log("column names: ",a.uploadedFileColumnNames)}})},g.readAsBinaryString(d)}else a.loading=!1,console.log("File Cancelled!"),$('input[type="file"]').val(null)}function ba(b){console.log(JSON.stringify(b)),a.loading=!0,a.loadingMapping=!0,a.uploadColumn={},a.MapUploadDataForm.$setPristine();var d=g.getToken(oa);n.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$('input[type="file"]').val(null)},3e3)}function ca(b){a.loading=!0,a.loadingMapping=!0;var d=g.getToken(oa);console.log(JSON.stringify(b)),q.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$('input[type="file"]').val(null)},3e3)}function da(b){a.loading=!0,a.loadingMapping=!0;var d=g.getToken(oa);console.log(JSON.stringify(b)),s.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},3e3)}function ea(b){a.loading=!0,a.loadingMapping=!0;var d=g.getToken(oa);console.log(JSON.stringify(b)),y.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},3e3)}function fa(b){a.loading=!0,a.loadingMapping=!0,console.log("AMC Data request :",b);var d=g.getToken(oa);console.log(JSON.stringify(b)),A.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},3e3)}function ga(b){a.loading=!0,a.loadingMapping=!0,console.log("AMC Data Utility request :",b);var d=g.getToken(oa);console.log("Utility",JSON.stringify(b)),O.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},3e3)}function ha(b){a.loading=!0,a.loadingMapping=!0,console.log("Extended Warranty Data request :",b);var d=g.getToken(oa);console.log("Extended Warranty :  :",JSON.stringify(b)),N.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},3e3)}function ia(b){a.loading=!0,a.loadingMapping=!0,console.log("AMC Data request :",b);var d=g.getToken(oa);console.log(JSON.stringify(b)),F.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},3e3)}function ja(b){a.loading=!0,a.loadingMapping=!0,console.log("Insurance Data  request :",b);var d=g.getToken(oa);console.log("Insurance",JSON.stringify(b)),P.save({id:oa,token:d},b,function(b){console.log("upload response Insurance :",b),a.loading=!1,a.loadingMapping=!1,Qa=[],$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1,a.loadingMapping=!1,$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),$('input[type="file"]').val(null)},3e3)}function ka(){angular.forEach(Ma,function(a){angular.forEach(a,function(a,b){})});if(void 0!==Ma||null!==Ma||Ma!==[])for(var a=0;a<Ma.length;a++){Object.keys(Ma[a])}for(var b=0;b<Ma.length;b++){Ma[b]}return!0}function la(b){a.loading=!0,a.loadingMapping=!0;var d=g.getToken(oa);console.log(JSON.stringify(b)),B.save({id:oa,token:d},b,function(b){console.log("csv upload resp",b),a.loading=!1,a.loadingMapping=!1},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1},3e3)}function ma(b){a.loading=!0,a.loadingMapping=!0;var d=g.getToken(oa);console.log(JSON.stringify(b)),C.save({id:oa,token:d},b,function(b){a.loading=!1,a.loadingMapping=!1},function(b){console.log(b),a.loading=!1,a.loadingMapping=!1,f.alert(b.data.error)}),c(function(){f.alert(Sa),a.loading=!1},3e3)}var na=d.get("loggedInUserIdAdmin"),oa=d.get("loggedInUserScId"),pa=d.get("loggedInUserBikeBrand"),qa=d.get("loggedInVersionCode"),ra=d.get("csvFileUploadStatus");a.loginBrandName=d.get("loggedInUserBikeBrand"),a.loggedInModelCode=d.get("loggedInModelCode"),a.csvStatus=!0,"Yes"===ra?ra=!0:"No"===ra&&(ra=!1),a.csvUploadStatus=ra,a.adminUserIdUtility=oa,a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)},a.getSubOption=function(a){alert(a)};var sa="month",ta="month",ua="submit",va="branch",wa="datatype",xa="caller",ya="status",za="noStatus",Aa="feedback";Q(),R(),a.dataForAssign=[{id:"1",name:"Sales"},{id:"2",name:"Insurance"}];var Ba,Ca,Da,Ea;a.getSelectedServiceCenter=function(b){null!==b&&void 0!==b||$("#uploadDataMapping").hide(),console.log(b),0===Fa.length&&(a.assignForm.$invalid=!0),0===Ja.length&&(a.assignForm.$invalid=!0),Ba=b,a.callerList=[],a.teleCallerDataCallerData=[],Y(Ba),void 0!==Ba&&0!==Ba.length&&(void 0!==Fa&&0!==Fa.length&&_(Fa,"caller"),void 0!==a.selectedSIDataType&&_("dataTypeId",a.selectedSIDataType))},S(pa),a.getSelectedBikeType=function(a){Ca=a,console.log(a)},a.getSelectedAMCCount=function(a){Da=a,console.log(a)},a.getSelectedValidMonth=function(a){Ea=a,console.log(a)};var Fa,Ga;a.getSelectedDataType=function(b,c){Fa=b,Ga=c,console.log(Ga),console.log(Fa),a.selectedDataType=Fa,a.selectedDataTypeDesc=Ga,a.selectedDataTypeIdForUpload=b,console.log(Ga)},a.getSelectedDataTypeForCsv=function(b,c){a.csvStatus="Service Reminder"!==c&&"Service Remainder"!==c&&"Job Card Data"!==c,Fa=b,Ga=c,console.log(Ga),console.log(Fa),a.selectedDataType=Fa,a.selectedDataTypeDesc=Ga,a.selectedDataTypeIdForUpload=b,console.log(Ga)},a.assignCallerStatus=function(a){var b={callerId:a.loginId,logInId:na,walkInCount:a.walkInCount,pickAndDropCount:a.pickAndDropCount,scId:oa},c=g.getToken(oa);G.save({id:oa,token:c},b,function(a){f.alert(a.message),getCaller()},function(a){console.log(a)})},a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)},T();var Ha="total";a.teleCallingAssignTarget=function(a){var b={adminId:na,branchId:Ba.toString(),dataTypeId:Fa.toString(),callerId:Ja.toString(),scId:oa,assignedType:Ha};console.log(JSON.stringify(b)),U(b)};var Ia;a.teleCallingAssignSI=function(b){"Sales"===a.selectedSIDataType?Ia=Ja.toString():"Insurance"===a.selectedSIDataType&&(Ia=Ka.toString());var c={adminId:na,branchId:a.selectedSIBranch,dataType:a.selectedSIDataType,callerId:Ia,scId:oa,assignedType:Ha};console.log(JSON.stringify(c)),V(c)},a.teleCallerServiceCenterData=[],a.manageServiceCenterSettings={displayProp:"label"},W();var Ba=[];a.updateTCServiceCenter={onItemSelect:function(a){Ba.push(parseInt(a.id))},onItemDeselect:function(a){var b=Ba.indexOf(parseInt(a.id));Ba.splice(b,1)}},a.resetAssignServiceCenter=function(){a.manageServiceCenter=[],Ba=[]},a.resetAssignServiceCenter(),a.teleCallerDataTypeData=[],a.manageDataTypeSettings={displayProp:"label"},X();var Fa=[];a.updateTCDataType={onItemSelect:function(b){Fa.push(parseInt(b.id)),Fa.length>0?0===Ja.length?a.assignForm.$invalid=!0:a.assignForm.$invalid=!1:0===Fa.length&&(a.assignForm.$invalid=!0),_(Fa,"caller")},onItemDeselect:function(b){var c=Fa.indexOf(parseInt(b.id));Fa.splice(c,1),Fa.length>0?0===Ja.length?a.assignForm.$invalid=!0:a.assignForm.$invalid=!1:0===Fa.length&&(a.assignForm.$invalid=!0),_(Fa,"caller")}},Fa===[]&&(a.assignForm.$invalid=!0),a.resetAssignDataType=function(){a.manageDataType=[],Fa=[]},a.resetAssignDataType(),a.teleCallerDataCallerData=[],a.manageCallerSettings={displayProp:"label"};var Ja=[];a.updateTCCaller={onItemSelect:function(b){Ja.push(parseInt(b.id)),"Sales"!==a.selectedSIDataType&&(Ja.length>0?a.assignForm.$invalid=!1:0===Ja.length&&(a.assignForm.$invalid=!0))},onItemDeselect:function(b){var c=Ja.indexOf(parseInt(b.id));Ja.splice(c,1),"Sales"!==a.selectedSIDataType&&(Ja.length>0?a.assignForm.$invalid=!1:0===Ja.length&&(a.assignForm.$invalid=!0))}},a.resetAssignCaller=function(){a.manageCaller=[],Ja=[]},a.resetAssignCaller(),a.teleCallerDataCallerDataSI=[],a.manageCallerSettingsSI={displayProp:"label"};var Ka=[];Z(),a.updateTCCallerSI={onItemSelect:function(b){Ka.push(parseInt(b.id)),Ka.length>0?a.assignFormSI.$invalid=!1:0===Ka.length&&(a.assignFormSI.$invalid=!0)},onItemDeselect:function(b){var c=Ka.indexOf(parseInt(b.id));Ka.splice(c,1),Ka.length>0?a.assignFormSI.$invalid=!1:0===Ka.length&&(a.assignFormSI.$invalid=!0)}},a.resetAssignCallerSI=function(){a.manageCallerSI=[],Ka=[]},a.resetAssignCallerSI(),a.deAssignCallingData=function(){var a={adminId:na,branchId:Ba.toString(),dataTypeId:Fa.toString(),callerId:Ja.toString(),scId:oa};console.log(JSON.stringify(a))},a.unAssignedLables=[{id:"1",name:"Unassigned Data"},{id:"2",name:"Total Data"}],a.getSIDataType=function(a){_("dataTypeId",a)},a.getAssignType=function(b){Ha=b,"Unassigned Data"===Ha?Ha="unassigned":"Total Data"===Ha&&(Ha="total"),a.showCaller=void 0!==b&&null!==b},a.getSIAssignType=function(b){Ha=b,"Unassigned Data"===Ha?Ha="unassigned":"Total Data"===Ha&&(Ha="total"),a.showSICaller=void 0!==b&&null!==b};var La;$(function(){La=document.getElementById("teleCallingSMSXlFileInput"),La.addEventListener&&La.addEventListener("change",aa,!1)});var Ma,Na,Oa,Pa,Qa=[];$("#uploadDataMapping").hide(),$("#uploadDataMappingForServiceRemainder").hide(),$("#uploadDataMappingForSalesFeedback").hide(),$("#uploadDataMappingExtendedWarranty").hide(),$("#uploadDataMappingInsurance").hide(),a.dateFormat=["yyyy/mm/dd","mm/dd/yyyy","dd/mm/yyyy"];var Ra;a.mapUplodedData=function(b){if(Ra=b.serviceDueDate,b){var c=[];if(!0===ka()){for(var d=0;d<Ma.length;d++){Oa=!1;var e={},g={},h={},i={},j={},k={};e.model=Ma[d][b.model],e.chassisNo=Ma[d][b.chassisNo],e.registrationNo=Ma[d][b.regNo],e.customerName=Ma[d][b.customerName],e.addressDetail=Ma[d][b.address],e.mobile=Ma[d][b.mobile],e.presentServiceDueType=Ma[d][b.serviceDueType],e.serviceAvailedAt=Ma[d][b.serviceAvailedAt],e.lastServiceType=Ma[d][b.lastServiceType],e.lastServiceKM=Ma[d][b.lastServiceKm],e.dateOfSale=Ma[d][b.dateOfSale],e.lastServiceDate=Ma[d][b.lastServiceDate],"5"===Fa&&"58"!==oa&&(e.validFrom=Ma[d][b.validFrom],e.validTo=Ma[d][b.validTo]),"4"===Fa?e.presentServiceDueDate=Ma[d][b.serviceDate]:"4"!==Fa&&(e.presentServiceDueDate=Ma[d][b.serviceDueDate]),e.serviceAvailedDate=Ma[d][b.serviceAvailedDate],e.dateFormat=b.dateFormat,e.version=qa,e.amcCount=Da,e.validMonth=Ea,e.dealerId=oa,e.logInId=na,e.branchId=Ba,e.dataTypeId=Fa,g.registrationNo=Ma[d][b.regNo],g.customerName=Ma[d][b.customerName],g.mobile=Ma[d][b.mobile],g.serviceAmount=Ma[d][b.serviceAmount],g.serviceKm=Ma[d][b.serviceKm],g.advisorName=Ma[d][b.advisorName],g.jobCardNo=Ma[d][b.jobCardNo],g.dateOfSale=Ma[d][b.dateOfSale],g.dealerId=oa,g.branchId=Ba,g.chassisNo=Ma[d][b.chassisNo],g.jobCardDate=Ma[d][b.serviceDate],g.bikeModel=Ma[d][b.bikeModel],g.serviceType=Ma[d][b.serviceType],g.bikeBrand=pa,g.dateFormat=b.dateFormat,g.version=qa,g.mechanic=Ma[d][b.mechanic],h.model=Ma[d][b.model],h.dateOfSale=Ma[d][b.dateOfSale],h.registrationNo=Ma[d][b.regNo],h.customerName=Ma[d][b.customerName],h.mobile=Ma[d][b.mobile],h.addressDetail=Ma[d][b.address],h.dealerId=oa,h.branchId=Ba,h.logInId=na,h.chassisNo=Ma[d][b.chassisNo],h.bikeType=Ca,h.dataTypeId=Fa,h.dateFormat=b.dateFormat,h.version=qa,h.modelCode=Ma[d][b.modelCode],h.modelCodeAccess=a.loggedInModelCode,i.model=Ma[d][b.model],i.dateOfSale=Ma[d][b.dateOfSale],i.customerName=Ma[d][b.customerName],i.mobile=Ma[d][b.mobile],i.addressDetail=Ma[d][b.address],i.dealerId=oa,i.branchId=Ba,i.logInId=na,i.chassisNo=Ma[d][b.chassisNo],i.dataTypeId=Fa,i.dateFormat=b.dateFormat,i.version=qa,j.model=Ma[d][b.model],j.dateOfSale=Ma[d][b.dateOfSale],j.customerName=Ma[d][b.customerName],j.mobile=Ma[d][b.mobile],j.addressDetail=Ma[d][b.address],j.dealerId=oa,j.branchId=Ba,j.logInId=na,j.chassisNo=Ma[d][b.chassisNo],j.dataTypeId=Fa,j.dateFormat=b.dateFormat,j.version=qa,j.phoneNumber=Ma[d][b.mobileRes],j.startDate=Ma[d][b.warrantyCommenceDate],j.expireDate=Ma[d][b.warrantyExpiryDate],j.bikeNo=Ma[d][b.regNo],j.dealerName=Ma[d][b.dealerName],j.modelCode=Ma[d][b.modelCode],k.customerName=Ma[d][b.customerName],k.dealerId=oa,k.branchId=Ba,k.logInId=na,k.chassisNo=Ma[d][b.chassisNo],k.dataTypeId=Fa,k.dateFormat=b.dateFormat,k.policyNo=Ma[d][b.policyNo],k.policyStartDate=Ma[d][b.policyStartDate],k.policyEndDate=Ma[d][b.policyEndDate],k.bikeNo=Ma[d][b.bikeNo],k.totalPremium=Ma[d][b.totalPremium],"3"!==Fa&&"5"!==Fa&&"Service Reminder"!==Ga&&"Service Remainder"!==Ga&&"Sales FeedBack"!==Ga&&"Extended Warranty"!==Ga&&"Insurance Job Card"!==Ga?c.push(e):"3"===Fa?c.push(g):"Service Reminder"===Ga||"Service Remainder"===Ga?c.push(h):"Sales FeedBack"===Ga?c.push(i):"5"===Fa?c.push(e):"Extended Warranty"===Ga?c.push(j):"Insurance Job Card"===Ga&&c.push(k)}a.csvUploadStatus||("3"!==Fa&&"5"!==Fa&&"Service Reminder"!==Ga&&"Service Remainder"!==Ga&&"Sales FeedBack"!==Ga&&"Extended Warranty"!==Ga&&"Insurance Job Card"!==Ga?ba(c):"3"===Fa?ca(c):"Service Reminder"===Ga||"Service Remainder"===Ga?da(c):"Sales FeedBack"===Ga?ea(c):"5"===Fa&&"58"===oa?fa(c):"5"===Fa&&"58"!==oa?ga(c):"Extended Warranty"===Ga?ha(c):"Insurance Job Card"===Ga&&ja(c)),a.csvUploadStatus&&("3"!==Fa&&"5"!==Fa&&"Service Reminder"!==Ga&&"Service Remainder"!==Ga&&"Sales FeedBack"!==Ga&&"Insurance Job Card"!==Ga?ia(c):"5"===Fa&&"58"===oa?fa(c):"5"===Fa&&"58"!==oa?ga(c):"Insurance Job Card"===Ga&&ja(c))}else a.loading=!1,f.alert(Na),f.location.reload()}};var Sa="Data is uploading...Kindly wait for 15 minutes to reflect in dashboard..!";Array.prototype.containsArray=function(a){var b,c;return arguments[1]?(b=arguments[1],c=arguments[2]):(b=0,c=0,this.sort(),a.sort()),b===a.length||(c=this.indexOf(a[b],c))>-1&&this.containsArray(a,++b,++c)},a.dismissFeedbackPage=function(){a.feedbackDetailStatus=!1},a.getFeedbackList=function(a,b){ya=a,Aa=b,getTcAdminStatsDetail(sa,ta,ya,za,va,wa,xa,ua,Aa)},a.amcCounts=[{count:"1"},{count:"2"},{count:"3"}],a.validMonths=[{id:"1",month:"Jan"},{id:"2",month:"Feb"},{id:"3",month:"March"},{id:"4",month:"April"},{id:"5",month:"May"},{id:"6",month:"June"},{id:"7",month:"July"},{id:"8",month:"August"},{id:"9",month:"Sept"},{id:"10",month:"Oct"},{id:"11",month:"Nov"},{id:"12",month:"Dec"}],a.csvFileRequest={};var Ta={};a.uploadCsvFile=function(b){console.log("File Path : ",b),Ta={dealerId:oa,logInId:na,branchId:Ba,dataTypeId:Fa,version:qa,bikeType:Ca,brandName:pa,filePath:b},console.log("csv File Object",JSON.stringify(Ta)),"Service Reminder"===Ga||"Service Remainder"===Ga?(a.csvFileRequest={},a.selectedServiceCenterForUpload=null,a.selectedDataTypeDesc=void 0,la(Ta)):"3"===Fa&&(a.csvFileRequest={},a.selectedServiceCenterForUpload=null,a.selectedDataTypeDesc=void 0,ma(Ta))},a.xlsFileRequest={},$("#xlsButtonDiv").hide();var Ua;a.uploadXLSFile=function(a){console.log("XLS File Path :::",a),Ua=a,$("#xlsUploadDiv").hide(),$("#xlsButtonDiv").show()}}]),angular.module("letsService").controller("BuySMSController",["$scope","$timeout","serviceURL","$cookies","GetScSMSStatsService","$window","TokenService","SendSMSService","TeleCallingSMSPackageService","TeleCallingSMSPricingService","GetSMSHistoryService",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=d.get("loggedInUserScId"),c=g.getToken(b);i.query({scId:b,token:c},function(b){a.smsPackages=b},function(b){a.smsPackagesErrorMsg=b.data.message})}function m(b){var c=d.get("loggedInUserScId"),e=g.getToken(c);j.get({smsCount:b,scId:c,token:e},function(b){a.smsPricing=b},function(b){a.smsPricingErrorMsg=b.data.message})}l();var n;a.getSmsPricing=function(b){">10000"!==b&&m(b),a.smsPricing=[]},a.getSmsPricingMore=function(b){b<10001?a.smsMsg="Enter more than 10000":b>1e4&&(a.smsMsg="",n=b,m(b))},a.paySms=function(a){">10000"===a&&(a=n);var b=d.get("loggedInUserScId");f.open(c+"templates/paytm/paytmTransaction.php?letsservice&smsCount="+a+"&customerId="+b)}}]),angular.module("letsService").controller("CrmUpdateDateOfSaleController",["$scope","$cookies","$rootScope","$filter","serviceURL","$window","TokenService","CrmDateOfSaleListService","GetPresentHourService","UpdateDateOfSaleService","$timeout","BrandWiseModelService","InactiveDateOfSaleDataService",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){i.get(function(a){console.log("present date : ",a),w=a.date},function(a){})}function o(b){a.loaderIcon=b}function p(b){x=b,o(!0);var c=g.getToken(t);h.query({scId:t,branchId:x,exportType:y,bikeBrand:u,token:c},function(b){console.log(" Date Of Sale List :",b),a.dateOfSaleData=b,angular.forEach(a.dateOfSaleData,function(b,c){a.dateOfSaleData[c].create_ts=new Date(a.dateOfSaleData[c].create_ts)}),o(!1)},function(b){o(!1),a.dateOfSaleDataErrorMsg=b.data.message})}function q(b){g.getToken(t);l.query({brandName:b},function(b){console.log("Brand Wise Models",b),a.brandWiseVehicleTypes=b,a.brandWiseVehicle.values=a.brandWiseVehicleTypes},function(a){console.log(a)})}function r(a){var b=g.getToken(t),c={scId:t,chassisNo:a};console.log(JSON.stringify(c)),m.save({id:t,token:b},c,function(a){console.log("InactiveDateOfSaleData",a),f.alert(a.message),p(x)},function(a){console.log(a)})}var s=b.get("loggedInUserId"),t=b.get("loggedInUserScId"),u=b.get("loggedInUserBikeBrand"),v=b.get("loggedInZone");a.loggedInFileUploadStatus=b.get("csvFileUploadStatus"),a.openCalendarStatus=function(b){a.maxDate=w,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var w;n();var x="branch",y="submit";p(x);a.updateDateOfSaleMsg="";var z;a.updateDateOfSale=function(b){console.log(A);var c=b.selectedDate.getFullYear()+"-"+(b.selectedDate.getMonth()+1)+"-"+b.selectedDate.getDate();a.updateDateOfSaleMsgErrorMsg="",console.log(b);var b={scId:t,chassisNo:A.chassisNo,dateOfSale:c,customer_name:A.customer_name,customer_mobile:A.customer_mobile,bikeBrand:u,bikeNo:A.bikeNo,branchId:A.scBranchId,loginId:s,zone:v,customer_address:"NA",bikeType:z,bikeModel:C};console.log(JSON.stringify(b));var d=g.getToken(t);j.save({scId:t,token:d},b,function(b){console.log("Update Date Of Sale data :",b),a.updateDateOfSaleMsg=b.message,a.updateDateOfSaleMsgErrorMsg="",a.dateOfSale={},a.updateDateOfSaleForm.$setPristine(),p(x),k(function(){$("#updateDateOfSaleModal").modal("hide")},3e3)},function(b){console.log(b),a.dateOfSale={},a.updateDateOfSaleForm.$setPristine(),a.updateDateOfSaleMsgErrorMsg=b.data.message})};var A={};a.getDateOfSaleObj=function(b){a.updateDateOfSaleMsg="",A=b,a.bikeModel=A.bikeModel,C=A.bikeModel,console.log(A),"No"===a.loggedInFileUploadStatus&&q(u)},a.clearUpdateMsg=function(){a.updateDateOfSaleMsgErrorMsg=""},a.exportUpdateDateOfSaleCustomers=function(){console.log("Export button");var a=g.getToken(t);f.open(e+"get_new_customer_details/"+t+"/"+x+"/export/"+u+"/"+a)},a.brandWiseVehicle={};var B,C;a.modelArr=[],a.getSelectedBikeType=function(b){if(a.modelArr=[],z=b.key,console.log("selectedVehicleType",z),B=b.value,console.log(b),null===A.bikeModel||""===A.bikeModel){a.multipleModel=B.toLowerCase().includes("/");var c=B;a.modelArr=c.split("/")}a.getSelectedBikeTypeModel=function(a){console.log(a),C=a}};var D=!1;a.inactiveDateOfSale=function(a){D=f.confirm("Are you sure to Inactive?"),D?r(a.chassisNo):D||console.log("Cancelled DOS")}}]),angular.module("letsService").controller("SupportPageController",["$scope","$window","$rootScope","$timeout","$filter","ngTableParams","$cookies",function(a,b,c,d,e,f,g){g.get("loggedInUserId"),g.get("loggedInUserScId"),g.get("loggedInUserRole")}]),angular.module("letsService").controller("EmailSupportPageController",["$scope","$http","$window","$rootScope","$timeout","$filter","ngTableParams","$cookies","TokenService","SupportQuestionEmailService","TimeSlotSelected","PostTicketDetailsService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){console.log(JSON.stringify(b));var c=i.getToken(o);l.save({scId:o,token:c},b,function(b){console.log("Post Ticket Details to backend::",b),a.postTicketRessponce=b},function(a){console.log(a)})}var n=h.get("loggedInUserId"),o=h.get("loggedInUserScId"),p=(h.get("loggedInUserRole"),h.get("loggedInEmail")),q=h.get("loggedInDealerName"),r=h.get("loggedInUserName");a.ticktFieldsObj={requesterEmail:p,loginName:r,dealerName:q},a.category=[{categoryName:"Admin Portal",value:"Admin Portal"},{categoryName:"Caller Portal",value:"Caller Portal"}],a.categoryName=function(b){a.subCategory="Admin Portal"===b?[{fieldName:"Caller Performance",value:"Caller Performance"},{fieldName:"SC Performance Stats",value:"SC Performance Stats"},{fieldName:"PSF Performance",value:"PSF Performance"},{fieldName:"Insurance Performance",
value:"Insurance Performance"},{fieldName:"SMS",value:"SMS"},{fieldName:"Manage Profile",value:"Manage Profile"},{fieldName:"Calling Report",value:"Calling Report"},{fieldName:"Overall Report",value:"Overall Report"},{fieldName:"Update PSF",value:"Update PSF"},{fieldName:"Update Date of Sale",value:"Update Date of Sale"},{fieldName:"Upload and Assign",value:"Upload and Assign"},{fieldName:"Upload History",value:"Upload History"},{fieldName:"Assign History",value:"Assign History"}]:"Caller Portal"===b?[{fieldName:"Dashboard",value:"Dashboard"},{fieldName:"SMS",value:"SMS"},{fieldName:"PSF Service",value:"PSF Service"},{fieldName:"Others",value:"Others"},{fieldName:"Stats",value:"Stats"},{fieldName:"Insurance Calling Data",value:"Insurance Calling Data"},{fieldName:"Sales",value:"Sales"},{fieldName:"Upload and Assign",value:"Upload and Assign"},{fieldName:"Upload History",value:"Upload History"},{fieldName:"Assign History",value:"Assign History"}]:[]};var s="chinmayee.d@letsservice.in",t="Ticket@4492",u=window.btoa(s+":"+t);a.raiseTicket=function(d){a.loaderIcon=!0,console.log(d);var e=d.attachmentFile;console.log(e),b({method:"POST",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets",data:{subject:d.subject,description:d.description+"<br/><br/>Please find the attachment here<br/>"+e,email:p,priority:1,custom_fields:{cf_admin:d.selectedCategory,cf_caller:d.selectedSubCategory,cf_service:"Service",cf_dealer_name:d.dealerName,cf_requester_name:d.loginName,cf_mobile:d.mobile},status:2},headers:{"Content-Type":"application/json",Authorization:"Basic "+u}}).success(function(b,c,d,f){console.log(b),a.loaderIcon=!1,alert("Your ticket is created successfully."),m({scId:o,callerId:n,email:p,ticketId:b.id,attachment:e})}).error(function(b){console.log(b),c.alert(b.errors[0].message),a.loaderIcon=!1}),a.raiseTicketForm.$setPristine(),a.ticktFieldsObj={requesterEmail:p,loginName:r,dealerName:q}},a.create=!1,a.view=!1,a.createViewTicket=function(d){a.loaderIcon=!0,a.ticketDetailsErrorMsg="","createTicket"===d?(a.create=!0,a.view=!1,a.loaderIcon=!1):"viewTicket"===d&&(a.create=!1,a.view=!0,b({method:"GET",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets?email="+p,headers:{"Content-Type":"application/json",Authorization:"Basic "+u}}).success(function(b){a.ticketDetails=b,a.ticketDetails.length<1?a.ticketDetailsErrorMsg="No Data Available..!":a.ticketDetails.length>0&&(a.ticketDetailsErrorMsg=""),a.loaderIcon=!1,console.log("Ticket details",a.ticketDetails);for(var c=0;c<a.ticketDetails.length;c++)2===a.ticketDetails[c].status?a.ticketDetails[c].status="Open":3===a.ticketDetails[c].status?a.ticketDetails[c].status="Pending":4===a.ticketDetails[c].status?a.ticketDetails[c].status="Resolved":5===a.ticketDetails[c].status?a.ticketDetails[c].status="Closed":6===a.ticketDetails[c].status?a.ticketDetails[c].status="Assigned to Tech team":7===a.ticketDetails[c].status?a.ticketDetails[c].status="Waiting on Third Party":a.ticketDetails[c].status="New Request"}).error(function(b){a.loaderIcon=!1,c.alert(b.errors[0].message),console.log(b)}))},a.getParticularTicket=function(b){a.successMsg="",a.errorMsg="",console.log(b),a.updateObj={updatedId:b.id,updatedSubject:b.subject,updatedDescription:b.description_text+"\n\n---- New update here ----"}},a.updateTicket=function(c){console.log(c),a.successMsg="",b({method:"PUT",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets/"+c.updatedId,data:{subject:c.updatedSubject,description:c.updatedDescription+"<br/><br/>Please find the attachment here<br/>"+c.updateAttachmentFile},headers:{"Content-Type":"application/json",Authorization:"Basic "+u}}).success(function(b,c,d,f){console.log(b),a.errorMsg="",a.loaderIcon=!1,a.successMsg="Your ticket is updated successfully.",a.updateTicketForm.$setPristine(),a.updateObj="",e(function(){$("#updateTicketModal").modal("hide")},3e3),a.createViewTicket("viewTicket")}).error(function(b){console.log(b),a.successMsg="",a.errorMsg=b.errors[0].message,a.loaderIcon=!1})},a.getParticularTicketFullDetails=function(d){a.loaderIcon=!0,console.log(d),a.updateObj={updatedId:d.id,updatedSubject:d.subject,updatedDescription:d.description_text},b({method:"GET",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets/"+d.id+"/conversations",headers:{"Content-Type":"application/json",Authorization:"Basic "+u}}).success(function(b){a.ticketFullDetails=b,a.loaderIcon=!1,console.log("Ticket details",a.ticketFullDetails),0===a.ticketFullDetails.length?a.noConversationMsg="There are no conversations for this ticket yet.":a.noConversationMsg=""}).error(function(b){a.loaderIcon=!1,c.alert(b.errors[0].message),console.log(b)})}}]),angular.module("letsService").controller("CrmSalesDashboardController",["$scope","$cookies","$rootScope","$filter","ngTableParams","TokenService","GetInsuranceDashboardStatsService","GetInsuranceDashboardDetailsService","GetCallerWiseServiceCenterService","CreSalesAnnivarsaryDataService","CreSalesAnnivarsaryDetailsService",function(a,b,c,d,e,f,g,h,i,j,k){function l(b){a.loaderIcon=b}function m(b,c){var d=0,e=0,g=0,h=0,i=0;u=b,v=c,l(!0);var k=f.getToken(s);j.query({scId:s,callerId:r,branchId:u,aniverseryType:v,token:k},function(b){console.log("cre SALES dashboard data :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,c){void 0!==a.creDashboardData[c]&&null!==a.creDashboardData[c]&&(d+=parseInt(a.creDashboardData[c].allocated),e+=parseInt(a.creDashboardData[c].attemptedCount),g+=parseInt(a.creDashboardData[c].callLaterCount),h+=parseInt(a.creDashboardData[c].pendingCount),i+=parseInt(a.creDashboardData[c].freshCalls))}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardData.push({allocated:d,freshCalls:i,attemptedCount:e,callLaterCount:g,pendingCount:h,dataType:"Total"}),a.creDashboardDataErrorMsg="",l(!1)},function(b){l(!1),a.creDashboardData=null,a.creDashboardDataErrorMsg=b.data.message})}function n(a){c.tableParams.page(a),c.tableParams.reload()}function o(a){c.tableParams.count(a)}function p(a){0===a.indexOf(c.tableParams.count())&&(a.push(c.tableParams.count()),a.sort()),c.tableParams.settings({counts:a})}function q(){var b=f.getToken(s);i.query({callerId:r,id:s,token:b},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}var r=b.get("loggedInUserId"),s=b.get("loggedInUserScId");a.insuranceAccess=b.get("insuranceAccess"),c.creTableData=[],c.apptIdListSales=[],c.showTable=!1;var t,u="branch",v="1 year";a.getSelectedServiceCenter=function(a){console.log(a),u=a,null===a&&(u="branch"),m(u,v)},a.getSelectedAnivarsaryType=function(a){v=a,null===a&&(v="1 year"),m(u,v)},m(u,v),a.getPerticularStatsTableData=function(a,b){v="1 Year",console.log("status",a),"Welcome Calls"===b?v="3 day":"Warranty Calls"===b&&(v="2  Year"),l(!0),t=a,c.defaultStatusSales=a,c.defaultDataTypeSales=b,console.log("$rootScope.defaultDataTypeSales++++++++++++++++++",c.defaultDataTypeSales);var d=f.getToken(s);k.query({scId:s,callerId:r,branchId:u,status:t,aniverseryType:v,dataType:b,token:d},function(a){console.log("cre Table Sales  Data success :",a),c.creTableDataErrorMsg="",c.creTableData=a,angular.forEach(c.creTableData,function(a,b){c.apptIdListSales.push(c.creTableData[b].apptId)}),c.tableParams.reload(),l(!1),c.showTable=!0,c.tableParams.page(1)},function(a){console.log("Error",a),c.creTableData=[],c.tableParams.reload(),l(!1),c.creTableDataErrorMsg=a.data.message},function(a){console.log(a)})},a.getPerticularStatsTableData(c.defaultStatusSales,c.defaultDataTypeSales),c.tableParams=new e({page:1,count:20},{total:c.creTableData.length,getData:function(b,e){var f=e.sorting()?d("orderBy")(c.creTableData,e.orderBy()):c.creTableData;f=e.filter()?d("filter")(f,e.filter()):f,a.orderedData=f,e.total(f.length),b.resolve(a.users=f.slice((e.page()-1)*e.count(),e.page()*e.count()))}},{counts:[10,20]}),c.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=c.tableParams.settings().counts,a.changePage=n,a.changePageSize=o,a.changePageSizes=p,q(),a.salesTypes=[{desc:"1 Year",name:"1st Anniversary"},{desc:"2 Year",name:"2nd Anniversary"},{desc:"3 Year",name:"3rd Anniversary"},{desc:"4 Year",name:"4th Anniversary"}],$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("CrmSalesDetailedController",["$scope","$cookies","$route","$filter","$state","$location","ngTableParams","$rootScope","$window","$http","serviceURL","TokenService","AdminLoginService","TeleCallerStatusService","TeleCallerDataTypeService","TeleCallerDateWiseDataService","TeleCallerStatsDataService","GetPerticularInsuranceDetailsService","GetInsuranceHistoryService","ServiceTypeService","AssistanceTypeService","TeleCallerReasonService","ScComplaintSubStatusService","TCInsuranceStatusUpdateService","TeleCallingSearchService","GetFeedbackTitleService","SalesFeedBackDataService","TeleCallingCallService","GetCallerWiseServiceCenterService","CallingPendingStatsService","CallingPendingStatsDetailsService","UpdateTelecallerServiceCenterService","UpdatePickupAndDropService","PickupAndDropTokenService","PickupAndDropAssistanceAmountService","GetLatLngService","GetSCLocationBrandService","CheckAMCUserService","PickupAndDropSlotService","$stateParams","$interval","$timeout","TeleCallerWiseServiceCenterService","SendSMSService","TimeSlotSelected","UpdateCustomerPhoneService","GetPresentHourService","GetPerticularSalesDataService","UpdateSalesDataService","GetSalesHistoryService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X){function Y(){U.get(function(a){console.log("present date : ",a),ya=a.date},function(a){})}function Z(){var b=l.getToken(ta);Q.query({id:ta,token:b},function(b){Aa=b,Aa.push({scName:"Others"}),a.serviceCenterListForServiceDone=Aa,console.log("service center for service done",a.serviceCenterListForServiceDone)},function(b){a.serviceCenterErrorMsg=b.data.message})}function _(){var b=l.getToken(ta);Q.query({id:ta,token:b},function(b){console.log("serviceCenter :",b),a.serviceCenterToUpdate=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function aa(b){ba(!0),a.customerMobileNumbers=[],Ca="";var c=l.getToken(ta);V.query({apptId:b,scId:ta,token:c},function(b){console.log("Sales data in detailed page",b[0]),a.callType=xa,a.tcAppointmentData=b[0],Da=a.tcAppointmentData.mobile;for(var c=0;c<Da.length;c++)Da[c].customer_mobile===a.tcAppointmentData.customer_mobile&&(Da[c].customer_mobile=Da[c].customer_mobile+"*",a.currentMobile=Da[c].customer_mobile),a.customerMobileNumbers.push(Da[c]);console.log("$scope.currentMobile",a.currentMobile),Ba=a.tcAppointmentData.opdId,a.opdIdForPickAndDrop=Ba,void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.branchName&&null!==a.tcAppointmentData.branchName&&""!==a.tcAppointmentData.branchName||(a.tcAppointmentData.branchName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),ba(!1)},function(b){a.tcAppointmentDataErrorMsg=b.data.message,i.alert("Selected data list is completed. Redirecting to Dashboard !!!"),e.go("sales"),ba(!1)})}function ba(b){a.loaderIcon=b}function ca(b){var c=l.getToken(ta);X.query({chassisNo:b,scId:ta,token:c},function(b){console.log("Sales history data :",b),a.tcAppointmentHistoryData=b},function(b){console.log("Sales history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function da(b){var c=l.getToken(ta);v.query({status:b,id:ta,token:c},function(b){a.reasonDescription=b,angular.forEach(b,function(c,d){"Service Center Complaint"!==b[d].apptSubStatus&&a.reasonDescriptionForSales.push({apptSubStatus:b[d].apptSubStatus,slNo:b[d].slNo})})},function(a){console.log(a)})}function ea(a){console.log(a);var b={customerId:a.customerId,customerName:a.customer_name,status:"connected",appointmentDateTime:"",subStatus:"Yes",scId:ta,scName:a.scName,customerMobile:a.customer_mobile.substr(0,10),apptId:a.apptId,callerId:sa,branchId:a.branchId,remarksForSubStatus:"",appointTime:"",lastCalledStatus:a.lastCalledStatus,chassisNo:a.chassisNo,dataType:xa,confirmStatus:""};console.log(JSON.stringify(b)),ga(b)}function fa(a,b){e.go("salesDetailed",{apptId:a,dataTypeId:b},{reload:!0})}function ga(b){a.tcStatusUpdateMsg="",console.log("request1...",b);var c=l.getToken(ta);W.save({id:ta,token:c},b,function(c){console.log("1st resp",c),a.walkinConfirmStaus=!1,Ga=c.opdId,console.log("opdID : ",Ga),"connected"===b.status&&(a.tcStatusUpdateMsg={msg:c.message,nextApptMsg:"Updating to Next Appointment Details"},$("#teleCallingStatusUpdateModal").modal("show"),P(function(){fa(ra,xa)},3e3)),a.tcStatusUpdateMsg={msg:c.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){$("#teleCallingStatusUpdateModal").modal("hide")},2e3),P(function(){fa(ra,xa)},3e3)},function(a){i.alert(a.data.message),console.log(a)})}function ha(){var b=l.getToken(ta);z.query({id:ta,token:b},function(b){a.feedbackTitleList=[],console.log("feedback question list :",b),angular.forEach(b,function(b){var c={description:b.description,feedBackListId:b.feedBackListId,feedBackType:b.feedBackType,questionType:b.questionType,feedBackStatus:"",feedBackRemarks:"",rating:"",loginId:sa,scId:ta,customerId:oa,mobile:ma,branchId:na,apptId:pa,lastCalledStatus:qa};"sales"===b.feedBackType&&a.feedbackTitleList.push(c)})},function(a){})}function ia(b,c){a.tcStatusUpdateMsg="",console.log(JSON.stringify(b));var d=l.getToken(ta);A.save({id:ta,token:d},b,function(b){console.log("Feedback Post :",b),a.noFeedbackMsg="",a.tcStatusUpdateMsg={msg:b.message,nextApptMsg:"Updating to Next Appointment Details"},P(function(){fa(ra,xa)},2e3)},function(a){console.log(a)})}function ja(b){i.alert(b),a.scSMS={},a.sendSMSForm.$setPristine()}function ka(){U.get(function(b){console.log("present date : ",b),La=b.hour,Ka===b.date?angular.forEach(a.actualTimeSlot,function(b,c){a.actualTimeSlot[c].value>parseInt(La)&&a.timeSlot.push({timeSelect:a.actualTimeSlot[c].timeSelect,value:a.actualTimeSlot[c].value})}):Ka!==b.date&&(a.timeSlot=a.actualTimeSlot)},function(a){})}function la(){var b=l.getToken(ta);w.query({id:ta,token:b},function(b){a.serviceCenterComplaintSubStatus=b,angular.forEach(b,function(b){a.serviceCenterComplaintData.push({id:b.subStatusDescription,label:b.subStatusDescription,slNo:b.slNo})})},function(b){a.callerListErrorMsg=b.data.message})}var ma,na,oa,pa,qa,ra,sa=b.get("loggedInUserId"),ta=b.get("loggedInUserScId"),ua=b.get("loginMobile"),va=b.get("loginCallingType"),wa=N.apptId;angular.forEach(h.apptIdListSales,function(a,b){wa===h.apptIdListSales[b]&&(ra=h.apptIdListSales[b+1])});var xa=N.dataTypeId;console.log("selectedataTypeId",xa),console.log("apptId",wa);var ya;if(Y(),a.openCalendarStatus=function(b){a.minDate=new Date(ya),b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0},a.teleCallingStatusForUpdate=[{id:2,description:"Call Later"},{id:1,description:"Walkin"},{id:3,description:"Not Interested"},{id:4,description:"Service Done"},{id:5,description:"Feedback"}],"1"===ta&&a.teleCallingStatusForUpdate)for(var za=0;za<a.teleCallingStatusForUpdate.length;za++)"Not Interested"===a.teleCallingStatusForUpdate[za].description&&(a.teleCallingStatusForUpdate[za].description="Others");var Aa={};a.serviceCenterListForServiceDone={},_(),a.customerMobileNumbers=[];var Ba,Ca,Da=[];a.getCustomerNameByPhone=function(b,c){console.log(c),angular.forEach(b,function(d,e){b[e].customer_mobile===c&&(a.tcAppointmentDataDisplay={customer_name:b[e].customer_name})})},aa(wa);var Ea;a.updateTeleCallingStatus=function(b,c){console.log(b),console.log(c),a.tcStatusUpdateMsg="",Ea=b,"1"===ta&&"Others"===b&&(b="Not Interested"),"Aniversary Yes"===b&&ea(c),a.reasonDescriptionForSales=[],oa=c.customerId,ma=c.customer_mobile.substr(0,10),na=c.branchId,pa=c.apptId,qa=c.lastCalledStatus,da(b),a.updateMsg="",a.walkinStatus={},a.updateTeleCallingAppointmentStatus=c,a.selectedStatus=b,"Feedback"===b&&ha(),"Service Done"===b&&Z()};var Fa;a.updateServiceDoneStatus=function(b){Fa=b,"Others"===b&&(a.serviceDoneForm.$invalid=!0)},a.reasonDescriptionForSales=[],a.yesNoCheck=function(b){"Yes"===b?a.yesNoStatus="Yes":"No"===b&&(a.yesNoStatus="No")},a.skipAppointment=function(){fa(ra,xa)},la();var Ga;a.clearUpdateMsg=function(){a.tcStatusUpdateMsg=""},a.feedbackTitleList=[],a.noFeedbackMsg="Contact Admin for adding Feedback Questions.",a.feedBackObject={},a.feedBackRemarksObject={},a.updateUserFeedBack=function(b,c,d){ia(a.feedbackTitleList,d)};var Ha,Ia;a.checkDatesByReason=function(b,c){console.log(b),"Call Later"===Ea&&("Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1,null!==b&&void 0!==b||(a.walkinCallLaterForm.$invalid=!0)),"Customer will call and Confirm"!==b&&"Out of Station"!==b&&"Customer Busy"!==b||(a.walkinStatus.selectedDate="",a.walkinStatus.timeValue=""));var e=d("date")(new Date,"yyyy-MM-dd");if("Call Later"===Ea&&("Phone out of Reach"===b||"Switched off"===b||"No response to call"===b||"Disconnecting the call"===b)&&d("date")(c,"yyyy-MM-dd")===e){var f=new Date,g=new Date(f);if(g.setDate(f.getDate()+1),Ha=g,a.walkinStatus={selectedDate:Ha,timeValue:Ia,remarks:b},0===g.getDay()){var h=new Date(f);h.setDate(f.getDate()+2),Ha=h,a.walkinStatus={selectedDate:Ha,timeValue:Ia,remarks:b}}i.alert("Appointment will be scheduled for "+Ha+" as you have selected "+b)}};var Ja={};a.updateAppointmentStatus=function(b,c,d){console.log("obj::::",c),console.log("BRANCH ID::::",c.branchId),"Not Interested"===b?(Ja={customerId:c.customerId,customerName:c.customer_name,status:b,statusForSubStatus:Ma,subStatus:d.remarks,scId:ta,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:sa,remarksForSubStatus:d.scComplaintManualRemarks,branchId:c.branchId,area:d.area,lastCalledStatus:c.lastCalledStatus,chassisNo:c.chassisNo,dataType:xa},console.log(JSON.stringify(Ja)),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),ga(Ja)):"Service Done"===b?(Ja={customerId:c.customerId,customerName:c.customer_name,status:b,subStatus:Fa,scId:ta,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:sa,remarksForSubStatus:a.serviceDoneStatus.scComplaintManualRemarks,branchId:c.branchId,lastCalledStatus:c.apptStatus,dataType:xa},console.log(JSON.stringify(Ja)),a.serviceDoneStatus={},a.serviceDoneForm.$setPristine(),ga(Ja)):(Ja={customerId:c.customerId,customerName:c.customer_name,status:b,appointmentDateTime:d.selectedDate,subStatus:d.remarks,scId:ta,scName:c.scName,customerMobile:c.customer_mobile.substr(0,10),apptId:c.apptId,callerId:sa,branchId:c.branchId,remarksForSubStatus:d.manualRemarks,appointTime:d.timeValue,lastCalledStatus:c.lastCalledStatus,chassisNo:c.chassisNo,dataType:xa},console.log("selected time is",Ja.appointTime),console.log(JSON.stringify(Ja)),a.walkinStatus={},a.walkinCallLaterForm.$setPristine(),a.notInterestedStatus={},a.notInterestedForm.$setPristine(),ga(Ja))},a.callTeleCallingCustomer=function(a,b){console.log(b);var c=l.getToken(ta),d={customerName:a.customer_name,customerMobile:b,customerId:a.customerId,apptId:a.apptId,callerId:sa,scId:ta,dataType:"Sales Anniversary",callerMobile:ua,callingType:va};console.log(JSON.stringify(d)),B.save({id:ta,token:c},d,function(a){console.log("calling resp:",a),i.alert(a.message)},function(a){i.alert(a.data.error),console.log(a)})},a.updateServiceCenter=function(b,c,d){var e=l.getToken(ta),f={old_scId:c,new_scId:d,apptId:b,callerId:sa,scId:ta};console.log(JSON.stringify(f)),F.save({id:ta,token:e},f,function(b){a.updateServiceCenterSuccessMsg=b.message,aa(wa),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.serviceCenterObj={},a.updateServiceCenterForm.$setPristine()},function(b){console.log(b),a.updateServiceCenterErrorMsg=b.data.message})},a.addRefferelCustomer=function(b){var c=l.getToken(ta);console.log(JSON.stringify(b)),F.save({id:ta,token:c},b,function(b){a.addReferelSuccessMsg=b.message,aa(wa),P(function(){$("#updateServiceCenterModal").modal("hide")},3e3),a.referelObj={},a.addRefferelForm.$setPristine()},function(b){console.log(b),a.addReferelErrorMsg=b.data.message})},a.sendSCSMS=function(c,d){a.loading=!0;var e={scId:b.get("loggedInUserScId"),logInId:b.get("loggedInUserId"),mobileNumber:d,message:c.message,charCount:c.message.length};console.log(JSON.stringify(e));var f=parseInt(100*Math.random()),g=l.getToken(f);R.save({id:f,token:g},e,function(b){console.log(b),ja(b.message),a.loading=!1},function(b){console.log(b),ja(b.data.message),a.loading=!1})},a.clearPhoneUpdateMsg=function(){a.editPhoneSuccessMsg=""},a.clearServiceCenterUpdateMsg=function(){a.updateServiceCenterSuccessMsg=""},a.clearReferenceSuccessMsg=function(){a.addReferelSuccessMsg=""},a.editPhoneNumber=function(b,c,d,e){console.log("selMobile",b),a.editPhoneSuccessMsg="";var f={mobile:b,customerName:c.customer_name,chassisNo:c.chassisNo,scId:ta,defaultNumber:d,customerId:c.customerId,customerStatus:e,dataType:"Sales"};console.log(JSON.stringify(f));var g=l.getToken(ta);T.save({id:ta,token:g},f,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,P(function(){$("#editPhoneModal").modal("hide"),$("#activeDeactivePhoneModal").modal("hide"),aa(wa)},2e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})};var Ka;a.getSelectedDate=function(b){var c=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2);Ka=c,console.log(Ka),ka(),a.timeSlot=[]},a.actualTimeSlot=S.getTime(),a.timeSlot=[];var La;a.getSelectedReason=function(a){console.log(a)},a.serviceCenterComplaintData=[],a.serviceCenterComplaintSettings={displayProp:"label"};var Ma=[];a.updateServiceCenterComplaints={onItemSelect:function(b){Ma.push(b.id),Ma.length>0?a.notInterestedForm.$invalid=!1:0===Ma.length&&(a.notInterestedForm.$invalid=!0)},onItemDeselect:function(b){var c=Ma.indexOf(b.label);Ma.splice(c,1),Ma.length>0?a.notInterestedForm.$invalid=!1:0===Ma.length&&(a.notInterestedForm.$invalid=!0)}},a.resetServiceCenterComplaints=function(){a.serviceCenterComplaints=[],Ma=[]},a.resetServiceCenterComplaints(),a.getHistory=function(){ca(a.tcAppointmentData.chassisNo)},a.walkinRemarkCheck=function(){void 0!==a.walkinStatus.remarks?"Customer agreed to Walkin"!==a.walkinStatus.remarks&&"Customer tentively agreed to Walkin"!==a.walkinStatus.remarks&&"Customer will call and Confirm"!==a.walkinStatus.remarks&&"Out of Station"!==a.walkinStatus.remarks&&"Customer Busy"!==a.walkinStatus.remarks&&"Required KMs not travelled"!==a.walkinStatus.remarks&&(a.walkinCallLaterForm.$invalid=!1):a.walkinCallLaterForm.$invalid=!0};var Na,Oa=!1;a.getUpdateMobileStatus=function(b,c,d,e){Na=e,"primary"===e&&P(function(){console.log(Pa),console.log(a.tcAppointmentData.customer_mobile),Pa===a.tcAppointmentData.customer_mobile?(alert("This is already a Primary Number"),Oa=!1):Pa!==a.tcAppointmentData.customer_mobile&&(Oa=i.confirm("Are you sure to make this Mobile No. as Primary?")),Oa?(console.log("Updating :",Na),a.editPhoneNumber(Pa,c,d,Na),a.phoneObj={}):console.log("Cancelled the Making Primary Event")},300)},$("#activeDeactivePhoneModal").modal("hide");var Pa;a.updateMobileStatus=function(b){a.mobileDisplay=b,b.substr(0,10)===a.tcAppointmentData.customer_mobile?a.primaryStatus=!0:b.substr(0,10)!==a.tcAppointmentData.customer_mobile&&(a.primaryStatus=!1),a.editPhoneSuccessMsg="",a.editPhoneErrorMsg="",console.log(b),null!==b&&(Pa=b.substr(0,10),$("#activeDeactivePhoneModal").modal("show"))},a.clearActiveInactiveModal=function(){$("#activeDeactivePhoneModal").modal("hide")}}]),angular.module("letsService").controller("PSFPerformanceController",["$scope","$sce","$timeout","$cookies","$filter","serviceURL","ngTableParams","$rootScope","TokenService","GetScWiseTeleCallerService","TeleCallerWiseServiceCenterService","CreDashboardStatsDataService","AdminCustomerDetailsStatsWiseService","TeleCallingCallRecordService","TeleCallerPerticularAppointmentHistoryDataService","GetAdminCallerDashboardConversionStatsService","$window","GetYearWiseCustomerStatsService","GetSuperAdminDealerListService","GetFeedbackYesNoStatsService","GetFeedbackRatingStatsService","GetFeedbackDetailsService","TeleCallerPerticularAppointmentDataService","ServiceTypeService","PSFPerformanceDashboardStatsDataService","PSFPerformancesStatsDetailedService","UpdateCustomerPhoneService","GetServiceFeedbackYesNoDefaultStatsService","GetFeedbckHistoryService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(b){a.loaderIcon=b}function E(){var b=i.getToken(W);s.query({logInId:W,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function F(b){console.log("==============",b),X=b;var c=i.getToken(X);k.query({id:X,token:c},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function G(b){X=b;var c=i.getToken(X);j.query({id:X,token:c},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}function H(b,c,d){Z=b,_=c,X=d,D(!0);var e=i.getToken(X);y.query({fromDate:ca,toDate:da,scId:X,callerId:Z,branchId:_,token:e},function(b){console.log("cre dashboard data :",b),a.creDashboardData=b,a.creDashboardDataErrorMsg="",D(!1)},function(b){D(!1),a.creDashboardData=[],a.creDashboardDataErrorMsg=b.data.message})}function I(a){h.tableParams.page(a),h.tableParams.reload()}function J(a){h.tableParams.count(a)}function K(a){0===a.indexOf(h.tableParams.count())&&(a.push(h.tableParams.count()),a.sort()),h.tableParams.settings({counts:a})}function L(){a.feedBackDataChart=[],a.feedBackDataSeries=[],a.feedBackData=[],a.feedBackDataLables=["Yes","No"];var b=[],c=[],d=[],e=[],f=[],g=[],h=[],j=[],k=[],l=[],m=[],n=[],o=[],p=[],q=[];a.loaderIconFeedBack=!0,a.feedBackYesNoDataErrorMsg="";var r=i.getToken(X);t.query({fromDate:aa,toDate:ba,scId:X,caller:Z,branch:_,token:r},function(i){console.log("FeedBack Yes No Stats :",i),ga=i,a.feedBackStats=i,a.feedBackYesNoDataErrorMsg="",void 0!==ga[0]&&null!==ga[0]&&(b.push(parseInt(ga[0].yes)),b.push(parseInt(ga[0].no)),a.feedBackDataChart1={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[0].feedBackListId],colors:["#2FCF92","#FB617F"],data:[b]}),void 0!==ga[1]&&null!==ga[1]&&(c.push(parseInt(ga[1].yes)),c.push(parseInt(ga[1].no)),a.feedBackDataChart2={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[1].feedBackListId],colors:["#2FCF92","#FB617F"],data:[c]}),void 0!==ga[2]&&null!==ga[2]&&(d.push(parseInt(ga[2].yes)),d.push(parseInt(ga[2].no)),a.feedBackDataChart3={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[2].feedBackListId],colors:["#2FCF92","#FB617F"],data:[d]}),void 0!==ga[3]&&null!==ga[3]&&(e.push(parseInt(ga[3].yes)),e.push(parseInt(ga[3].no)),a.feedBackDataChart4={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[3].feedBackListId],colors:["#2FCF92","#FB617F"],data:[e]}),void 0!==ga[4]&&null!==ga[4]&&(f.push(parseInt(ga[4].yes)),f.push(parseInt(ga[4].no)),a.feedBackDataChart5={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[4].feedBackListId],colors:["#2FCF92","#FB617F"],data:[f]}),void 0!==ga[5]&&null!==ga[5]&&(g.push(parseInt(ga[5].yes)),g.push(parseInt(ga[5].no)),a.feedBackDataChart6={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[5].feedBackListId],colors:["#2FCF92","#FB617F"],data:[g]}),void 0!==ga[6]&&null!==ga[6]&&(h.push(parseInt(ga[6].yes)),h.push(parseInt(ga[6].no)),a.feedBackDataChart7={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[6].feedBackListId],colors:["#2FCF92","#FB617F"],data:[h]}),void 0!==ga[7]&&null!==ga[7]&&(j.push(parseInt(ga[7].yes)),j.push(parseInt(ga[7].no)),a.feedBackDataChart8={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[7].feedBackListId],colors:["#2FCF92","#FB617F"],data:[j]}),void 0!==ga[8]&&null!==ga[8]&&(k.push(parseInt(ga[8].yes)),k.push(parseInt(ga[8].no)),a.feedBackDataChart9={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[8].feedBackListId],colors:["#2FCF92","#FB617F"],data:[j]}),void 0!==ga[9]&&null!==ga[9]&&(l.push(parseInt(ga[9].yes)),
l.push(parseInt(ga[9].no)),a.feedBackDataChart10={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[9].feedBackListId],colors:["#2FCF92","#FB617F"],data:[l]}),void 0!==ga[10]&&null!==ga[10]&&(m.push(parseInt(ga[10].yes)),m.push(parseInt(ga[10].no)),a.feedBackDataChart11={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[10].feedBackListId],colors:["#2FCF92","#FB617F"],data:[m]}),void 0!==ga[11]&&null!==ga[11]&&(n.push(parseInt(ga[11].yes)),n.push(parseInt(ga[11].no)),a.feedBackDataChart12={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[11].feedBackListId],colors:["#2FCF92","#FB617F"],data:[n]}),void 0!==ga[12]&&null!==ga[12]&&(o.push(parseInt(ga[12].yes)),o.push(parseInt(ga[12].no)),a.feedBackDataChart13={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[12].feedBackListId],colors:["#2FCF92","#FB617F"],data:[o]}),void 0!==ga[13]&&null!==ga[13]&&(p.push(parseInt(ga[13].yes)),p.push(parseInt(ga[13].no)),a.feedBackDataChart14={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[13].feedBackListId],colors:["#2FCF92","#FB617F"],data:[p]}),void 0!==ga[14]&&null!==ga[14]&&(q.push(parseInt(ga[14].yes)),q.push(parseInt(ga[14].no)),a.feedBackDataChart15={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ga[14].feedBackListId],colors:["#2FCF92","#FB617F"],data:[q]}),a.feedBackDataChart1&&a.feedBackDataChart.push(a.feedBackDataChart1),a.feedBackDataChart2&&a.feedBackDataChart.push(a.feedBackDataChart2),a.feedBackDataChart3&&a.feedBackDataChart.push(a.feedBackDataChart3),a.feedBackDataChart4&&a.feedBackDataChart.push(a.feedBackDataChart4),a.feedBackDataChart5&&a.feedBackDataChart.push(a.feedBackDataChart5),a.feedBackDataChart6&&a.feedBackDataChart.push(a.feedBackDataChart6),a.feedBackDataChart7&&a.feedBackDataChart.push(a.feedBackDataChart7),a.feedBackDataChart8&&a.feedBackDataChart.push(a.feedBackDataChart8),a.feedBackDataChart9&&a.feedBackDataChart.push(a.feedBackDataChart9),a.feedBackDataChart10&&a.feedBackDataChart.push(a.feedBackDataChart10),a.feedBackDataChart11&&a.feedBackDataChart.push(a.feedBackDataChart11),a.feedBackDataChart12&&a.feedBackDataChart.push(a.feedBackDataChart12),a.feedBackDataChart13&&a.feedBackDataChart.push(a.feedBackDataChart13),a.feedBackDataChart14&&a.feedBackDataChart.push(a.feedBackDataChart14),a.feedBackDataChart15&&a.feedBackDataChart.push(a.feedBackDataChart15),a.datasetOverrideFeedBackChartData=[{fill:!0,backgroundColor:a.feedBackDataColors1},{fill:!0,backgroundColor:a.feedBackDataColors2}],a.loaderIconFeedBack=!1},function(b){a.loaderIconFeedBack=!1,a.feedBackYesNoDataErrorMsg=b.data.message})}function M(b,c,d,e){console.log("selFeedbackId : ",b),a.statusDisplay=c,h.exportType=!0,ma=e,console.log(aa),console.log(aa),D(!0),ea=c;var g=i.getToken(X);"export"===ma?(q.open(f+"get_service_feedback_details/"+aa+"/"+ba+"/"+X+"/"+Z+"/"+_+"/"+b+"/"+ea+"/"+d+"/"+ma+"/"+g),console.log(f+"get_service_feedback_details/"+aa+"/"+ba+"/"+X+"/"+Z+"/"+_+"/"+b+"/"+ea+"/"+d+"/"+ma+"/"+g),D(!1),ma="submit"):"submit"===ma&&v.query({fromDate:aa,toDate:ba,scId:X,callerId:Z,branchId:_,feedBackListId:b,feedBackStatus:ea,status:d,exportType:ma,token:g},function(a){console.log("FEEDBACK YES/NO CUSTOMER DETAILS STATS :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableFeedbackModal").modal("show"),D(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),D(!1),$("#adminDataTableFeedbackModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function N(){a.feedBackRatingDataChart=[],a.feedBackRatingDataSeries=[],a.feedBackRatingData=[],a.feedBackRatingDataLables=["Rating-1","Rating-2","Rating-3","Rating-4","Rating-5"];var b=[],c=[],d=[],e=[],f=[],g=[],h=[],j=[],k=[],l=[];a.loaderIconFeedBackRating=!0,a.feedBackRatingDataErrorMsg="";var m=i.getToken(X);u.query({fromDate:aa,toDate:ba,scId:X,caller:Z,branch:_,token:m},function(i){console.log("FeedBack Rating Stats :",i),na=i,a.feedBackRatingStats=i,a.feedBackRatingDataErrorMsg="",void 0!==na[0]&&null!==na[0]&&(b.push(parseInt(na[0].rating1)),b.push(parseInt(na[0].rating2)),b.push(parseInt(na[0].rating3)),b.push(parseInt(na[0].rating4)),b.push(parseInt(na[0].rating5)),a.feedBackRatingDataChart1={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[0].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[b]}),void 0!==na[1]&&null!==na[1]&&(c.push(parseInt(na[1].rating1)),c.push(parseInt(na[1].rating2)),c.push(parseInt(na[1].rating3)),c.push(parseInt(na[1].rating4)),c.push(parseInt(na[1].rating5)),a.feedBackRatingDataChart2={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[1].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[c]}),void 0!==na[2]&&null!==na[2]&&(d.push(parseInt(na[2].rating1)),d.push(parseInt(na[2].rating2)),d.push(parseInt(na[2].rating3)),d.push(parseInt(na[2].rating4)),d.push(parseInt(na[2].rating5)),a.feedBackRatingDataChart3={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[2].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[d]}),void 0!==na[3]&&null!==na[3]&&(e.push(parseInt(na[3].rating1)),e.push(parseInt(na[3].rating2)),e.push(parseInt(na[3].rating3)),e.push(parseInt(na[3].rating4)),e.push(parseInt(na[3].rating5)),a.feedBackRatingDataChart4={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[3].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[e]}),void 0!==na[4]&&null!==na[4]&&(f.push(parseInt(na[4].rating1)),f.push(parseInt(na[4].rating2)),f.push(parseInt(na[4].rating3)),f.push(parseInt(na[4].rating4)),f.push(parseInt(na[4].rating5)),a.feedBackRatingDataChart5={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[4].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[f]}),void 0!==na[5]&&null!==na[5]&&(g.push(parseInt(na[5].rating1)),g.push(parseInt(na[5].rating2)),g.push(parseInt(na[5].rating3)),g.push(parseInt(na[5].rating4)),g.push(parseInt(na[5].rating5)),a.feedBackRatingDataChart6={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[5].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[g]}),void 0!==na[6]&&null!==na[6]&&(h.push(parseInt(na[6].rating1)),h.push(parseInt(na[6].rating2)),h.push(parseInt(na[6].rating3)),h.push(parseInt(na[6].rating4)),h.push(parseInt(na[6].rating5)),a.feedBackRatingDataChart7={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[6].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[h]}),void 0!==na[7]&&null!==na[7]&&(j.push(parseInt(na[7].rating1)),j.push(parseInt(na[7].rating2)),j.push(parseInt(na[7].rating3)),j.push(parseInt(na[7].rating4)),j.push(parseInt(na[7].rating5)),a.feedBackRatingDataChart8={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[7].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[j]}),void 0!==na[8]&&null!==na[8]&&(k.push(parseInt(na[8].rating1)),k.push(parseInt(na[8].rating2)),k.push(parseInt(na[8].rating3)),k.push(parseInt(na[8].rating4)),k.push(parseInt(na[8].rating5)),a.feedBackRatingDataChart9={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[8].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[k]}),void 0!==na[9]&&null!==na[9]&&(l.push(parseInt(na[9].rating1)),l.push(parseInt(na[9].rating2)),l.push(parseInt(na[9].rating3)),l.push(parseInt(na[9].rating4)),l.push(parseInt(na[9].rating5)),a.feedBackRatingDataChart10={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[na[9].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[l]}),a.feedBackRatingDataChart1&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart1),a.feedBackRatingDataChart2&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart2),a.feedBackRatingDataChart3&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart3),a.feedBackRatingDataChart4&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart4),a.feedBackRatingDataChart5&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart5),a.feedBackRatingDataChart6&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart6),a.feedBackRatingDataChart7&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart7),a.feedBackRatingDataChart8&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart8),a.feedBackRatingDataChart9&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart9),a.feedBackRatingDataChart10&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart10),a.datasetOverrideFeedBackRatingChartData=[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],a.loaderIconFeedBackRating=!1},function(b){a.loaderIconFeedBackRating=!1,a.feedBackRatingDataErrorMsg=b.data.message})}function O(b,c,d,e){console.log("selFeedbackId : ",b),console.log("selStatus : ",c),console.log("selFeedbackStatus : ",d),a.statusDisplay="Rating-"+c,h.exportType=!0,ma=e,D(!0),ea=c;var g=i.getToken(X);"export"===ma?(q.open(f+"get_service_feedback_details/"+aa+"/"+ba+"/"+X+"/"+Z+"/"+_+"/"+b+"/"+ea+"/"+d+"/"+ma+"/"+g),D(!1),ma="submit"):"submit"===ma&&v.query({fromDate:aa,toDate:ba,scId:X,callerId:Z,branchId:_,feedBackListId:b,feedBackStatus:ea,status:d,exportType:ma,token:g},function(a){console.log("FEEDBACK RATING CUSTOMER DETAILS STATS :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableFeedbackModal").modal("show"),D(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),D(!1),$("#adminDataTableFeedbackModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function P(b,c){D(!0);var d=i.getToken(X);o.query({chassisNo:b,id:X,dataTypeId:c,bikeBrand:Y,token:d},function(b){console.log("history data :",b),a.tcAppointmentHistoryData=b,D(!1)},function(b){D(!1),console.log("history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function Q(b,c){a.callRecording=[];var d=i.getToken(X);n.query({chassisNo:b,logInId:W,scId:X,dataTypeId:c,token:d},function(b){a.callRecording=b,console.log("callRecording",b)},function(b){var c={recordingUrl:b.data.message,create_ts:""};a.callRecording.push(c)})}function R(b){a.loaderIconService=!0,a.tcServiceHistoryData=[],console.log("Chassis no",b);var c=i.getToken(X);x.query({chassisNo:b,id:X,bikeBrand:Y,token:c},function(b){console.log("Service history data :",b),a.loaderIconService=!1,a.tcServiceHistoryData=b,a.tcServiceHistoryDataErrorMsg=""},function(b){a.loaderIconService=!1,a.tcServiceHistoryDataErrorMsg="No Data Available"})}function S(b){a.loaderIconService=!0,a.tcFeedbackHistoryData=[],console.log("Customer Id",b);var c=i.getToken(X);C.query({customerId:b,status:sa,scId:X,token:c},function(b){console.log("Feedback history data :",b),a.loaderIconService=!1,a.tcFeedbackHistoryData=b,a.tcFeedbackHistoryDataErrorMsg=""},function(b){a.loaderIconService=!1,a.tcFeedbackHistoryDataErrorMsg=b.data.message})}function T(b,c){a.customerMobileNumbers=[],D(!0),console.log("appt id - "+b+"status- "+c);var d=i.getToken(X);w.query({apptId:b,scId:X,status:c,callerId:W,token:d},function(b){console.log("data in detailed page",b[0]),a.tcAppointmentData=b[0],a.tcAppointmentDataErrorMsg="",ta=a.tcAppointmentData.mobile;for(var c=0;c<ta.length;c++)ta[c].customer_mobile===a.tcAppointmentData.customer_mobile&&(ta[c].customer_mobile=ta[c].customer_mobile+"*",a.currentMobile=ta[c].customer_mobile),a.customerMobileNumbers.push(ta[c]);void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),D(!1)},function(b){a.tcAppointmentDataErrorMsg="No Data Available",D(!1)})}function U(){a.feedBackDataDefaultChart=[],a.feedBackDataDefaultSeries=[],Aa=[["Yes","No"]];a.loaderIconFeedBack=!0,a.feedBackDefaultYesNoDataErrorMsg="";var b=i.getToken(X);B.query({fromDate:aa,toDate:ba,scId:X,caller:Z,branch:_,token:b},function(b){console.log("FeedBack Default Yes No Stats :",b),a.feedBackStatsDefault=b,za=b,a.feedBackStatsDefault=b,a.feedBackDefaultYesNoDataErrorMsg="",void 0!==za[0]&&null!==za[0]&&(Aa.push(["Yes",parseInt(za[0].yes)]),Aa.push(["No",parseInt(za[0].no)])),a.feedBackDataDefaultData=Aa,console.log("feedBackDataDefaultData+++++++++++++",Aa),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(V),a.loaderIconFeedBack=!1},function(b){Aa=[["Yes","No"]],a.loaderIconFeedBack=!1,a.feedBackDefaultYesNoDataErrorMsg=b.data.message})}function V(){function b(){Ba=!0;var b=e.getSelection()[0];if(b){var d=c.getValue(b.row,0);console.log(d),a.getFeedbackYesNoDetail(d)}}var c=google.visualization.arrayToDataTable(Aa),d={pieHole:.4,sliceVisibilityThreshold:0,legend:{display:!0,position:"right"}},e=new google.visualization.PieChart(document.getElementById("psfDefaultStats"));google.visualization.events.addListener(e,"select",b),e.draw(c,d)}var W=d.get("loggedInUserIdAdmin"),X=d.get("loggedInUserScIdAdmin"),Y=d.get("loggedInUserBikeBrandAdmin");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var Z="caller",_="branch",aa="month",ba="month";a.selectedFromDate="month",a.selectedToDate="month";var ca="month",da="month";a.getFeedbackFilter=function(b){console.log(b),b?a.feedBackFilter=!0:(a.feedBackFilter=!1,a.tcAppointment.selectedFromDate="",a.tcAppointment.selectedToDate="",ca="month",da="month",a.selectedFromDate="month",a.selectedToDate="month",aa="month",ba="month",H(Z,_,X),L(),N())},a.adminCallerStatsByDate=function(b,c){b>c?q.alert("To Date should be greater than From Date"):(ca=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),da=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),a.selectedFromDate=ca,a.selectedToDate=da,aa=ca,ba=da,H(Z,_,X),L(),N())},E(),a.getSelectedDealer=function(a){console.log("==============",a),_="branch",console.log(a),X=a,F(X),G(X),H(Z,_,X),L(),N()},F(X),a.getSelectedBranch=function(a){console.log("selected branch",a),_=a,null===a&&(_="branch"),console.log("==============++++++++++++++++++",_),H(Z,_,X),L(),N()},G(X),a.getSelectedCaller=function(a){console.log(a),Z=a,null===a&&(Z="caller"),H(Z,_,X),L(),N()},H(Z,_,X);var ea;h.creTableData=[];var fa;a.getPericularStatsData=function(b,c){a.statusDisplay=c,fa=b,h.exportType=!0,a.filteredServiceDueTypes=[],D(!0),ea=c;var d=i.getToken(X);"export"===ma?(a.exportStatus="",q.open(f+"get_admin_dashboard_psf_details/"+ca+"/"+da+"/"+X+"/"+Z+"/"+_+"/"+ea+"/"+ma+"/"+d),D(!1),ma="submit"):"submit"===ma&&z.query({fromDate:ca,toDate:da,scId:X,callerId:Z,branchId:_,status:ea,reportType:ma,token:d},function(a){console.log("ADMIN CUSTOMER DETAILS STATS WISE :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),D(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),D(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})},a.exportCustomerDetails=function(){ma="export",console.log(ma),a.getPericularStatsData(fa,ea)},h.tableParams=new g({page:1,count:20},{total:h.creTableData.length,getData:function(b,c){var d=c.sorting()?e("orderBy")(h.creTableData,c.orderBy()):h.creTableData;d=c.filter()?e("filter")(d,c.filter()):d,a.orderedData=d,c.total(d.length),b.resolve(a.users=d.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),h.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=h.tableParams.settings().counts,a.changePage=I,a.changePageSize=J,a.changePageSizes=K,a.feedBackDataColors1=["#2FCF92","#FB617F"],a.feedBackDataColors2=["#2FCF92","#FB617F"],a.feedBackDataSeries=[],a.feedBackData=[],a.feedBackDataLables=[];var ga=[];L();var ha,ia,ja,ka,la="yesNo";a.getFeedbackYesNoDetail=function(b){a.exportStatus=la,!0===Array.isArray(b)?(console.log("graph details :  :",b),console.log("graph lable status :  :",b[0]._model.datasetLabel),ha=b[0]._model.datasetLabel,ia=b[0]._model.label):Array.isArray(b),angular.forEach(ga,function(a,b){void 0!==ga[b]&&ga[b].feedBackListId===ha&&(ja=ga[b].feedBackListId,console.log("Feedback List Id ::",ja))}),Ba&&(ka=b,M("1",b,la,"submit")),Ba||M(ja,ia,la,"submit")};var ma="submit";a.feedBackRatingDataColors1=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.feedBackRatingDataColors2=["#2FCF92","#2FCF92"],a.feedBackRatingDataSeries=[],a.feedBackRatingData=[],a.feedBackRatingDataLables=[];var na=[];N();var oa,pa,qa,ra="rating";a.getFeedbackRatingDetail=function(b){a.exportStatus=ra,!0===Array.isArray(b)?(console.log("graph lable :  :",b[0]._model.datasetLabel),console.log("graph lable status :  :",b[0]._model.datasetLabel),oa=b[0]._model.datasetLabel,pa=b[0]._model.label,"Rating-1"===pa?pa="1":"Rating-2"===pa?pa="2":"Rating-3"===pa?pa="3":"Rating-4"===pa?pa="4":"Rating-5"===pa&&(pa="5")):Array.isArray(b),angular.forEach(ga,function(a,b){void 0!==na[b]&&(console.log(oa),na[b].feedBackListId===oa&&(qa=na[b].feedBackListId,console.log("selectedRatingFeedbackListId",qa),console.log("Feedback List Id ::",qa)))}),O(qa,pa,ra,"submit")},a.exportFeedbackCustomerDetails=function(a){console.log("Hi",a),Ba||("yesNo"===a?M(ja,ia,la,"export"):"rating"===a&&O(qa,pa,ra,"export")),Ba&&M("1",ka,la,"export")},a.getHistory=function(a,b,c,d,e){console.log(c),void 0===d&&(d="status"),P(a,b),Q(a,b),R(a),T(c,d),S(e)},a.viewCallRecord=function(a){q.open(a.recordingUrl,"_blank")},a.trustAsResourceUrl1=function(a){return console.log(a),b.trustAsResourceUrl(a)};var sa="service";a.customerMobileNumbers=[];var ta=[];a.getDetails=function(b,c){a.editPhoneSuccessMsg="",console.log(b),console.log(c),void 0!==c&&null!==c||(c="status"),T(b,c)},a.editPhoneNumber=function(b,d,e,f){console.log("selMobile",b),console.log("apptObj",d),a.editPhoneSuccessMsg="";var g={mobile:b,customerName:d.customer_name,chassisNo:d.chassisNo,scId:X,defaultNumber:e,customerId:d.customerId,customerStatus:f};console.log(JSON.stringify(g));var h=i.getToken(X);A.save({id:X,token:h},g,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,c(function(){$("#editPhoneModal").modal("hide"),$("#activeDeactivePhoneModal").modal("hide"),T(d.apptId,a.statusDisplay)},2e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})};var ua,va=!1,wa=!1,xa=!1;a.getUpdateMobileStatus=function(b,d,e,f){ua=f,"active"===f?c(function(){va=q.confirm("Are you sure to Activate this Mobile No.?"),va?(console.log("Updating :",ua),a.editPhoneNumber(ya,d,e,ua),a.phoneObj={}):console.log("Cancelled the Activation Event")},300):"inactive"===f?c(function(){console.log(ya),console.log(a.tcAppointmentData.customer_mobile),ya===a.tcAppointmentData.customer_mobile?(alert("This is the Primary number.You cannot deactivate the number."),wa=!1):ya!==a.tcAppointmentData.customer_mobile&&(wa=q.confirm("Are you sure to Deactivate this Mobile No.?")),wa?(console.log("Updating :",ua),a.editPhoneNumber(ya,d,e,ua),a.phoneObj={}):console.log("Cancelled the Deactivation Event")},300):"primary"===f&&c(function(){console.log(ya),console.log(a.tcAppointmentData.customer_mobile),ya===a.tcAppointmentData.customer_mobile?(alert("This is already a Primary Number"),xa=!1):ya!==a.tcAppointmentData.customer_mobile&&(xa=q.confirm("Are you sure to make this Mobile No. as Primary?")),xa?(console.log("Updating :",ua),a.editPhoneNumber(ya,d,e,ua),a.phoneObj={}):console.log("Cancelled the Making Primary Event")},300)},$("#activeDeactivePhoneModal").modal("hide");var ya;a.updateMobileStatus=function(b){a.mobileDisplay=b,b.substr(0,10)===a.tcAppointmentData.customer_mobile?a.primaryStatus=!0:b.substr(0,10)!==a.tcAppointmentData.customer_mobile&&(a.primaryStatus=!1),a.editPhoneSuccessMsg="",a.editPhoneErrorMsg="",console.log(b),null!==b&&(ya=b.substr(0,10),$("#activeDeactivePhoneModal").modal("show"))},a.clearActiveInactiveModal=function(){$("#activeDeactivePhoneModal").modal("hide")},a.feedBackDataDefaultSeries=[],a.feedBackDataDefaultLables=[];var za=[],Aa=[["Yes","No"]];U();var Ba=!1;$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("crmInsurancePerformanceController",["$scope","$sce","serviceURL","$timeout","$filter","$cookies","ngTableParams","$rootScope","$window","TokenService","CreDashboardInsuranceStatsDataService","AdminInsuranceCustomerDetailsStatsWiseService","TeleCallerPerticularAppointmentHistoryDataService","ServiceTypeService","TeleCallingCallRecordService","GetPerticularInsuranceDetailsService","GetSuperAdminDealerListService","GetScWiseTeleCallerService","TeleCallerWiseServiceCenterService","GetInsuranceHistoryService","InsuranceCallRecordingService","UpdateInsuranceCustomerPhoneService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(b){a.loaderIcon=b}function x(b,c,d,e){N=d,O=e,L=b,M=c,w(!0);var f=j.getToken(J);k.query({fromDate:N,toDate:O,scId:J,callerId:L,branchId:M,brand:K,token:f},function(b){console.log("cre dashboard data :",b),a.creDashboardData=b,w(!1)},function(b){w(!1),a.creDashboardDataErrorMsg=b.data.message})}function y(a){h.tableParams.page(a),h.tableParams.reload()}function z(a){h.tableParams.count(a)}function A(a){0===a.indexOf(h.tableParams.count())&&(a.push(h.tableParams.count()),a.sort()),h.tableParams.settings({counts:a})}function B(b,c){w(!0);var d=j.getToken(J);t.query({chassisno:b,dealerId:J,token:d},function(b){console.log("history data :",b),a.tcAppointmentHistoryData=b,w(!1)},function(b){w(!1),console.log("history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function C(b,c){a.callRecording=[];var d=j.getToken(J);u.query({chassisNo:b,logInId:I,scId:J,dataTypeId:c,token:d},function(b){a.callRecording=b,console.log("callRecording",b)},function(b){var c={recordingUrl:b.data.message,create_ts:""};a.callRecording.push(c)})}function D(b){a.loaderIconService=!0,a.tcServiceHistoryData=[],console.log("Chassis no",b);var c=j.getToken(J);n.query({chassisNo:b,id:J,token:c},function(b){console.log("Service history data :",b),a.loaderIconService=!1,a.tcServiceHistoryData=b,a.tcServiceHistoryDataErrorMsg=""},function(b){a.loaderIconService=!1,a.tcServiceHistoryDataErrorMsg="No Data Available"})}function E(b,c){a.customerMobileNumbers=[],a.currentMobile=null,w(!0);var d=j.getToken(J);p.query({apptId:b,scId:J,brand:K,token:d},function(b){console.log("data in detailed page",b[0]),a.tcAppointmentData=b[0],a.tcAppointmentDataErrorMsg="",T=a.tcAppointmentData.mobile;for(var c=0;c<T.length;c++)T[c].customerMobile===a.tcAppointmentData.customerMobile&&(T[c].customerMobile=T[c].customerMobile+"*",a.currentMobile=T[c].customerMobile),a.customerMobileNumbers.push(T[c]);void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),w(!1)},function(b){a.tcAppointmentDataErrorMsg="No Data Available",w(!1)})}function F(){var b=j.getToken(I);q.query({logInId:I,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function G(b){console.log("==============",b),J=b;var c=j.getToken(J);s.query({id:J,token:c},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function H(b){J=b;var c=j.getToken(J);r.query({id:J,token:c},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}var I=f.get("loggedInUserIdAdmin"),J=f.get("loggedInUserScIdAdmin"),K=f.get("loggedInUserBikeBrandAdmin");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var L="caller",M="branch",N="month",O="month";a.selectedFromDate="month",a.selectedToDate="month",x(L,M,N,O),h.creTableData=[];var P,Q,R,S="submit";a.getPericularStatsData=function(b,d,e,f,g){a.exportStatus="Insurance Stats",a.statusDisplay=d,N=f,O=g,R=b,h.exportType=!0,a.filteredServiceDueTypes=[],w(!0),Q=d;var k=j.getToken(J);"export"===S?(i.open(c+"get_admin_insurance_dashboard_deatils/"+N+"/"+O+"/"+J+"/"+L+"/"+Q+"/"+M+"/"+K+"/"+S+"/"+k),w(!1),S="submit"):"submit"===S&&l.query({
fromDate:N,toDate:O,scId:J,callerId:L,status:Q,branchId:M,bikeBrand:K,reportType:S,token:k},function(a){console.log("ADMIN CUSTOMER DETAILS STATS WISE :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),w(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),w(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})},a.exportCustomerDetails=function(){console.log("Inside Export"),S="export","Insurance Stats"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularStatsData(R,Q,P,N,O,"export"))},h.tableParams=new g({page:1,count:20},{total:h.creTableData.length,getData:function(b,c){var d=c.sorting()?e("orderBy")(h.creTableData,c.orderBy()):h.creTableData;d=c.filter()?e("filter")(d,c.filter()):d,a.orderedData=d,c.total(d.length),b.resolve(a.users=d.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),h.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=h.tableParams.settings().counts,a.changePage=y,a.changePageSize=z,a.changePageSizes=A,a.getHistory=function(a,b,c,d){console.log(d),void 0===d&&(d="status"),B(a,b),C(a,b),D(a),E(c,d)},a.viewCallRecord=function(a){i.open(a.recordingUrl,"_blank")},a.trustAsResourceUrl1=function(a){return console.log(a),b.trustAsResourceUrl(a)},a.pauseCallRecord=function(){var a=document.getElementById("stopRecording");console.log(a),a.pause()},a.clearRecording=function(){var a=document.getElementById("stopRecording");console.log(a),a.pause()},a.getDetails=function(b,c){a.editPhoneSuccessMsg="",console.log(b),console.log(c),void 0!==c&&null!==c||(c="status"),E(b,c)},a.editPhoneNumber=function(b,c){console.log("selMobile",b),a.editPhoneSuccessMsg="";var e={mobile:b,customerName:c.customerName,chassisNo:c.chassisNo,scId:J,defaultNumber:"",customerId:c.customerId,customerStatus:"new"};console.log(JSON.stringify(e));var f=j.getToken(J);v.save({id:J,token:f},e,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,E(c.apptId,a.statusDisplay),d(function(){$("#editPhoneModal").modal("hide")},3e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})},a.customerMobileNumbers=[];var T=[];F(),a.getSelectedDealer=function(a){L="caller",M="branch",console.log(a),J=a,G(J),H(J),x(L,M,N,O)},G(J),a.getSelectedBranch=function(a){console.log("selected branch",a),M=a,null===a&&(M="branch"),console.log("==============++++++++++++++++++",M),x(L,M,N,O)},H(J),a.getSelectedCaller=function(a){console.log(a),L=a,null===a&&(L="caller"),x(L,M,N,O)}}]),angular.module("letsService").controller("CrmDealerPerformanceController",["$scope","$sce","serviceURL","$filter","$cookies","ngTableParams","$rootScope","$window","TokenService","CreDashboardStatsDataService","DealerPerformanceStatsService","DealerPerformanceCompleteStatsService","GetScWiseTeleCallerService","TeleCallerWiseServiceCenterService","GetSuperAdminDealerListService","DealerPerformanceTotalMonthlyStatsService","DealerPerformanceMonthlyOverallStatsService","AdminCustomerDetailsStatsWiseService","TeleCallerPerticularAppointmentHistoryDataService","TeleCallerLSHistoryDataService","TeleCallingCallRecordService","ServiceTypeService","TeleCallerPerticularAppointmentDataService","AdminCustomerCompletePotentialDetailsService","AdminCustomerPotentialDetailsService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(b){a.loaderIcon=b}function A(){var b=i.getToken(O);o.query({logInId:O,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function B(b){P=b;var c=i.getToken(P);m.query({id:P,token:c},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}function C(b){P=b;var c=i.getToken(P);n.query({id:P,token:c},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function D(b,c,d){a.creDashboardDataDisplay=[];var e=0,f=0,g=0,h=0,j=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0;a.totalOverDueCount=0,Q=b,R=c,z(!0);var w=i.getToken(P);"service due date"===d?(a.allocatedHeader="Total Allocated",k.query({scId:P,callerId:Q,branch:R,datatypeId:S,token:w},function(b){console.log("DEALER PERFORMANCE BY SERVICE DUE DATE: : :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,c){a.creDashboardData[c].uniqueAttempted&&(a.totalUniqueAttempted=a.creDashboardData[c].uniqueAttempted),a.creDashboardData[c].connectedCount&&(a.totalConnected=a.creDashboardData[c].connectedCount),a.creDashboardData[c].notConnectedCount&&(a.totalNonConnected=a.creDashboardData[c].notConnectedCount),void 0!==a.creDashboardData[c]&&null!==a.creDashboardData[c]&&(void 0!==a.creDashboardData[c].allocated&&(e+=parseInt(a.creDashboardData[c].allocated)),f+=parseInt(a.creDashboardData[c].attemptedCount),void 0!==a.creDashboardData[c].notConnectedCallLaterCount&&(h+=parseInt(a.creDashboardData[c].notConnectedCallLaterCount),a.totalCallLaterCountNonConnected=h),void 0!==a.creDashboardData[c].pendingVisitedCount&&(u+=parseInt(a.creDashboardData[c].pendingVisitedCount)),void 0!==a.creDashboardData[c].pendingNonVisitedCount&&(v+=parseInt(a.creDashboardData[c].pendingNonVisitedCount)),void 0!==a.creDashboardData[c].connectedCallLaterCount&&(g+=parseInt(a.creDashboardData[c].connectedCallLaterCount)),void 0!==a.creDashboardData[c].notInterested&&(j+=parseInt(a.creDashboardData[c].notInterested)),void 0!==a.creDashboardData[c].serviceDone&&(m+=parseInt(a.creDashboardData[c].serviceDone)),void 0!==a.creDashboardData[c].appointmentTaken&&(n+=parseInt(a.creDashboardData[c].appointmentTaken)),void 0!==a.creDashboardData[c].pickAndDrop&&(t+=parseInt(a.creDashboardData[c].pickAndDrop)),o+=parseInt(a.creDashboardData[c].MTDConversion),p+=parseInt(a.creDashboardData[c].nonConverted),void 0!==a.creDashboardData[c].pendingCalls&&(q+=parseInt(a.creDashboardData[c].pendingCalls)),r+=parseInt(a.creDashboardData[c].freshCalls),s+=parseInt(a.creDashboardData[c].totalAttempted)),void 0!==a.creDashboardData[c].uniqueAttempted&&null!==a.creDashboardData[c].uniqueAttempted||a.creDashboardDataDisplay.push(a.creDashboardData[c])}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardDataDisplay.push({dataTypename:"Total",allocated:e,pendingVisitedCount:u,pendingNonVisitedCount:v,pickAndDrop:t,attemptedCount:f,notConnectedCallLaterCount:h,connectedCallLaterCount:g,notInterested:j,serviceDone:m,appointmentTaken:n,MTDConversion:o,nonConverted:p,pendingCalls:q,freshCalls:r,totalAttempted:s}),z(!1)},function(b){z(!1),a.creDashboardDataErrorMsg=b.data.message})):"complete"===d&&(a.allocatedHeader="Total Potential",z(!0),l.query({scId:P,callerId:Q,branch:R,datatypeId:S,token:w},function(b){console.log("DEALER PERFORMANCE COMPLETE: : :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,c){a.creDashboardData[c].uniqueAttempted&&(a.totalUniqueAttempted=a.creDashboardData[c].uniqueAttempted),a.creDashboardData[c].connectedCount&&(a.totalConnected=a.creDashboardData[c].connectedCount),a.creDashboardData[c].notConnectedCount&&(a.totalNonConnected=a.creDashboardData[c].notConnectedCount),void 0!==a.creDashboardData[c]&&null!==a.creDashboardData[c]&&(void 0!==a.creDashboardData[c].allocated&&(e+=parseInt(a.creDashboardData[c].allocated)),f+=parseInt(a.creDashboardData[c].attemptedCount),void 0!==a.creDashboardData[c].notConnectedCallLaterCount&&(h+=parseInt(a.creDashboardData[c].notConnectedCallLaterCount)),void 0!==a.creDashboardData[c].overDueCalls&&(a.totalOverDueCount+=parseInt(a.creDashboardData[c].overDueCalls)),void 0!==a.creDashboardData[c].pendingVisitedCount&&(u+=parseInt(a.creDashboardData[c].pendingVisitedCount)),void 0!==a.creDashboardData[c].pendingNonVisitedCount&&(v+=parseInt(a.creDashboardData[c].pendingNonVisitedCount)),void 0!==a.creDashboardData[c].connectedCallLaterCount&&(g+=parseInt(a.creDashboardData[c].connectedCallLaterCount)),void 0!==a.creDashboardData[c].notInterested&&(j+=parseInt(a.creDashboardData[c].notInterested)),void 0!==a.creDashboardData[c].serviceDone&&(m+=parseInt(a.creDashboardData[c].serviceDone)),void 0!==a.creDashboardData[c].appointmentTaken&&(n+=parseInt(a.creDashboardData[c].appointmentTaken)),void 0!==a.creDashboardData[c].pickAndDrop&&(t+=parseInt(a.creDashboardData[c].pickAndDrop)),o+=parseInt(a.creDashboardData[c].MTDConversion),p+=parseInt(a.creDashboardData[c].nonConverted),void 0!==a.creDashboardData[c].pendingCalls&&(q+=parseInt(a.creDashboardData[c].pendingCalls)),r+=parseInt(a.creDashboardData[c].freshCalls),s+=parseInt(a.creDashboardData[c].totalAttempted)),void 0!==a.creDashboardData[c].uniqueAttempted&&null!==a.creDashboardData[c].uniqueAttempted||a.creDashboardDataDisplay.push(a.creDashboardData[c])}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardDataDisplay.push({dataTypename:"Total",allocated:e,pendingVisitedCount:u,pendingNonVisitedCount:v,pickAndDrop:t,attemptedCount:f,notConnectedCallLaterCount:h,connectedCallLaterCount:g,notInterested:j,serviceDone:m,appointmentTaken:n,MTDConversion:o,nonConverted:p,pendingCalls:q,freshCalls:r,totalAttempted:s}),z(!1)},function(b){z(!1),a.creDashboardDataErrorMsg=b.data.message}))}function E(b,c,d){a.dealerMonthlyStats=[],Q=b,R=c,a.monthlyDataLoader=!0;var e=i.getToken(P);"service due date"===d?(a.conversionHeader="Current Month Caller Conversion",p.query({scId:P,callerId:Q,branch:R,datatypeId:S,token:e},function(b){console.log("TOTAL MONTHLY STATS BY SERVICE DUE DATE: : :",b),a.dealerMonthlyStats=b,a.monthlyDataLoader=!1},function(b){a.monthlyDataLoader=!1,a.dealerMonthlyStatsErrorMsg=b.data.message})):"complete"===d&&(a.conversionHeader="Total Conversion",a.monthlyDataLoader=!0,q.query({scId:P,callerId:Q,branch:R,datatypeId:S,token:e},function(b){console.log("TOTAL MONTHLY STATS COMPLETE : : :",b),a.dealerMonthlyStats=b,a.monthlyDataLoader=!1},function(b){a.monthlyDataLoader=!1,a.dealerMonthlyStatsErrorMsg=b.data.message}))}function F(b,c,d,e){var f=0,g=0,h=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0;T=d,U=e,Q=b,R=c,z(!0);var u=i.getToken(P);j.query({fromDate:T,toDate:U,scId:P,callerId:Q,branchId:R,dataType:S,token:u},function(b){console.log("cre dashboard data :",b),a.creDashboardData=b,angular.forEach(a.creDashboardData,function(b,c){void 0!==a.creDashboardData[c]&&null!==a.creDashboardData[c]&&(f+=parseInt(a.creDashboardData[c].allocated),g+=parseInt(a.creDashboardData[c].attemptedCount),h+=parseInt(a.creDashboardData[c].connectedCount),k+=parseInt(a.creDashboardData[c].callLaterCount),l+=parseInt(a.creDashboardData[c].notInterestedCount),m+=parseInt(a.creDashboardData[c].serviceDoneCount),n+=parseInt(a.creDashboardData[c].appointmentTaken),o+=parseInt(a.creDashboardData[c].MTDConversion),p+=parseInt(a.creDashboardData[c].nonConverted),q+=parseInt(a.creDashboardData[c].pendingCount),r+=parseInt(a.creDashboardData[c].freshCalls),s+=parseInt(a.creDashboardData[c].totalAttempted),t+=parseInt(a.creDashboardData[c].allocatedConversion))}),void 0!==a.creDashboardData[0]&&null!==a.creDashboardData[0]&&a.creDashboardData.push({dataTypename:"Total",allocated:f,attemptedCount:g,connectedCount:h,callLaterCount:k,notInterestedCount:l,serviceDoneCount:m,appointmentTaken:n,MTDConversion:o,nonConverted:p,pendingCount:q,freshCalls:r,totalAttempted:s,allocatedConversion:t}),z(!1)},function(b){z(!1),a.creDashboardDataErrorMsg=b.data.message})}function G(a){g.tableParams.page(a),g.tableParams.reload()}function H(a){g.tableParams.count(a)}function I(a){0===a.indexOf(g.tableParams.count())&&(a.push(g.tableParams.count()),a.sort()),g.tableParams.settings({counts:a})}function J(b,c){z(!0);var d=i.getToken(P);s.query({chassisNo:b,id:P,dataTypeId:c,token:d},function(b){console.log("history data :",b),a.tcAppointmentHistoryData=b,z(!1)},function(b){z(!1),console.log("history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function K(b){z(!0);var c=i.getToken(P);t.query({chassisNo:b,scId:P,token:c},function(b){console.log("LS history data :",b),a.lsHistoryData=b,z(!1)},function(b){z(!1),console.log("LS history error data",b),a.lsHistoryDataErrorMsg=b.data.message})}function L(b,c){a.callRecording=[];var d=i.getToken(P);u.query({chassisNo:b,logInId:O,scId:P,dataTypeId:c,token:d},function(b){a.callRecording=b,console.log("callRecording",b)},function(b){var c={recordingUrl:b.data.message,create_ts:""};a.callRecording.push(c)})}function M(b){a.loaderIconService=!0,a.tcServiceHistoryData=[],console.log("Chassis no",b);var c=i.getToken(P);v.query({chassisNo:b,id:P,token:c},function(b){console.log("Service history data :",b),a.loaderIconService=!1,a.tcServiceHistoryData=b,a.tcServiceHistoryDataErrorMsg=""},function(b){a.loaderIconService=!1,a.tcServiceHistoryDataErrorMsg="No Data Available"})}function N(b,c){z(!0);var d=i.getToken(P);w.query({apptId:b,scId:P,status:c,callerId:O,token:d},function(b){console.log("data in detailed page",b[0]),a.tcAppointmentData=b[0],a.tcAppointmentDataErrorMsg="",void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),z(!1)},function(b){a.tcAppointmentDataErrorMsg="No Data Available",z(!1)})}var O=e.get("loggedInUserIdAdmin"),P=e.get("loggedInUserScIdAdmin");e.get("loggedInUserBikeBrandAdmin");a.openCalendar=function(b,c){b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:a.isOpenTo=!0},a.openCalendarStatus=function(b){a.minDate=new Date,b.preventDefault(),b.stopPropagation(),a.isOpenFromStatus=!0};var Q="caller",R="branch",S="all";A(),a.getSelectedDealer=function(a){Q="caller",R="branch",console.log(a),P=a,g.scIdSuperAdmin=a,C(P),B(P),D(Q,R,V),E(Q,R,V),F(Q,R,T,U)},B(P),C(P),a.getSelectedCaller=function(a){console.log(a),Q=a,null===a&&(Q="caller"),D(Q,R,V),E(Q,R,V),F(Q,R,T,U)},a.getSelectedBranch=function(a){console.log("selected branch",a),R=a,null===a&&(R="branch"),D(Q,R,V),E(Q,R,V),F(Q,R,T,U)};var T="month",U="month";a.selectedFromDate="month",a.selectedToDate="month",a.creDashboardDataDisplay=[],a.potentialServiecDue=1;var V="service due date";a.getDealerPerformanceData=function(b){a.selectedStatus=b,V=b,a.selFilter=b,"service due date"===b||"complete"===b?(a.callerNewStats=!0,a.callerOldStats=!1,D(Q,R,V),E(Q,R,V)):"old stats"===b&&(a.callerNewStats=!1,a.callerOldStats=!0,F(Q,R,T,U))},a.getDealerPerformanceData(V);var T="month",U="month";a.selectedFromDate="month",a.selectedToDate="month";var W,X,Y,Z;a.getPericularStatsData=function(b,d,e,f,j,k){a.exportStatus="Customer Stats",a.statusDisplay=d,"connected"===a.statusDisplay?a.statusDisplay="Connected":"connected"===a.statusDisplay?a.statusDisplay="Connected":"servicedone"===a.statusDisplay?a.statusDisplay="Service Done":"allocated"===a.statusDisplay?a.statusDisplay="Allocated":"attempted"===a.statusDisplay?a.statusDisplay="Attempted":"calllater"===a.statusDisplay?a.statusDisplay="Call Later":"notinterested"===a.statusDisplay?a.statusDisplay="Not Interested":"appointmenttaken"===a.statusDisplay?a.statusDisplay="Appointment Taken":"nonconverted"===a.statusDisplay?a.statusDisplay="Non Converted":"pending"===a.statusDisplay?a.statusDisplay="Pending":"converted"===a.statusDisplay?a.statusDisplay="Converted":"allocatedConversion"===a.statusDisplay?a.statusDisplay="Allocated Conversion":"freshCalls"===a.statusDisplay&&(a.statusDisplay="Fresh Calls"),T=f,U=j,Z=b,g.exportType=!0,a.filteredServiceDueTypes=[],z(!0),W=e,Y="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Service Reminder Post Warranty"===b?"Warranty":"both",X=d;var l=i.getToken(P);_=k,"export"===_?(a.exportStatus="Customer Stats",console.log(c+"get_caller_dashboard_deatils/"+T+"/"+U+"/"+P+"/"+Q+"/"+W+"/"+X+"/"+Y+"/"+R+"/"+_+"/"+l),h.open(c+"get_caller_dashboard_deatils/"+T+"/"+U+"/"+P+"/"+Q+"/"+W+"/"+X+"/"+Y+"/"+R+"/"+_+"/"+l),z(!1),_="submit"):"submit"===_&&r.query({fromDate:T,toDate:U,scId:P,callerId:Q,dataTypeId:W,status:X,scheduleType:Y,branchId:R,reportType:_,token:l},function(a){console.log("ADMIN CUSTOMER DETAILS STATS WISE :",a),g.creTableData=a,g.creTableDataErrorMsg="",g.tableParams.reload(),g.tableParams.page(1),$("#adminDataTableModal").modal("show"),z(!1)},function(a){console.log(a),g.creTableData=[],g.tableParams.reload(),z(!1),$("#adminDataTableModal").modal("show"),g.creTableDataErrorMsg=a.data.message})},a.getPericularCompleteStatsData=function(b,d,e,f){a.exportStatus="Customer Complete Potential Stats",console.log(a.exportStatus),a.statusDisplay=d,"connectedCallLater"===a.statusDisplay?a.statusDisplay="Connected Call Later":"pickup"===a.statusDisplay?a.statusDisplay="Pickup & Drop":"servicedone"===a.statusDisplay?a.statusDisplay="Service Done":"allocated"===a.statusDisplay?a.statusDisplay="Allocated":"pendingCalls"===a.statusDisplay?a.statusDisplay="Pending Calls":"attempted"===a.statusDisplay?a.statusDisplay="Attempted":"notConnectedCallLater"===a.statusDisplay?a.statusDisplay="Non Connected Call Later":"notinterested"===a.statusDisplay?a.statusDisplay="Not Interested":"appointmenttaken"===a.statusDisplay?a.statusDisplay="Appointment Taken":"nonconverted"===a.statusDisplay?a.statusDisplay="Non Converted":"pending"===a.statusDisplay?a.statusDisplay="Pending":"converted"===a.statusDisplay?a.statusDisplay="Converted":"allocatedConversion"===a.statusDisplay?a.statusDisplay="Allocated Conversion":"freshCalls"===a.statusDisplay?a.statusDisplay="Fresh Calls":"callerConversion"===a.statusDisplay?a.statusDisplay="Caller Conversion":"totalConversion"===a.statusDisplay&&(a.statusDisplay="Toatal Conversion"),Z=b,g.exportType=!0,a.filteredServiceDueTypes=[],z(!0),W=e,Y="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Service Reminder Post Warranty"===b?"Warranty":"both",X=d;var j=i.getToken(P);_=f,"export"===_?(a.exportStatus="Customer Complete Potential Stats",console.log(c+"get_caller_dashboard_details_v2/"+P+"/"+Q+"/"+W+"/"+X+"/"+Y+"/"+R+"/"+_+"/"+j),h.open(c+"get_caller_dashboard_details_v2/"+P+"/"+Q+"/"+W+"/"+X+"/"+Y+"/"+R+"/"+_+"/"+j),z(!1),_="submit"):"submit"===_&&x.query({scId:P,callerId:Q,dataTypeId:W,status:X,scheduleType:Y,branchId:R,reportType:_,token:j},function(a){console.log("ADMIN COMPETE POTENTIAL CUSTOMER DETAILS STATS WISE :",a),g.creTableData=a,g.creTableDataErrorMsg="",g.tableParams.reload(),g.tableParams.page(1),$("#adminDataTableModal").modal("show"),z(!1)},function(a){console.log(a),g.creTableData=[],g.tableParams.reload(),z(!1),$("#adminDataTableModal").modal("show"),g.creTableDataErrorMsg=a.data.message})},a.getPericularStatsServiceDueDateWiseData=function(b,d,e,f){a.exportStatus="Customer Potential Stats",console.log(a.exportStatus),a.statusDisplay=d,"connectedCallLater"===a.statusDisplay?a.statusDisplay="Connected Call Later":"pickup"===a.statusDisplay?a.statusDisplay="Pickup & Drop":"servicedone"===a.statusDisplay?a.statusDisplay="Service Done":"allocated"===a.statusDisplay?a.statusDisplay="Allocated":"attempted"===a.statusDisplay?a.statusDisplay="Attempted":"pendingCalls"===a.statusDisplay?a.statusDisplay="Pending Calls":"notConnectedCallLater"===a.statusDisplay?a.statusDisplay="Non Connected Call Later":"notinterested"===a.statusDisplay?a.statusDisplay="Not Interested":"appointmenttaken"===a.statusDisplay?a.statusDisplay="Appointment Taken":"nonconverted"===a.statusDisplay?a.statusDisplay="Non Converted":"pending"===a.statusDisplay?a.statusDisplay="Pending":"converted"===a.statusDisplay?a.statusDisplay="Converted":"allocatedConversion"===a.statusDisplay?a.statusDisplay="Allocated Conversion":"freshCalls"===a.statusDisplay?a.statusDisplay="Fresh Calls":"callerConversion"===a.statusDisplay?a.statusDisplay="Caller Conversion":"totalConversion"===a.statusDisplay&&(a.statusDisplay="Toatal Conversion"),Z=b,g.exportType=!0,a.filteredServiceDueTypes=[],z(!0),W=e,Y="Regular Data Free"===b||"Service Reminder Free"===b?"Free":"Regular Data Paid"===b||"Service Reminder Paid"===b?"Paid":"Service Reminder Post Warranty"===b?"Warranty":"both",X=d;var j=i.getToken(P);_=f,"export"===_?(a.exportStatus="Customer Potential Stats",console.log(c+"get_caller_dashboard_details_v2/"+P+"/"+Q+"/"+W+"/"+X+"/"+Y+"/"+R+"/"+_+"/"+j),h.open(c+"get_caller_dashboard_details_v2/"+P+"/"+Q+"/"+W+"/"+X+"/"+Y+"/"+R+"/"+_+"/"+j),z(!1),_="submit"):"submit"===_&&y.query({scId:P,callerId:Q,dataTypeId:W,status:X,scheduleType:Y,branchId:R,reportType:_,token:j},function(a){console.log("ADMIN POTENTIAL CUSTOMER DETAILS SERVICE DUE DATE WISE STATS WISE :",a),g.creTableData=a,g.creTableDataErrorMsg="",g.tableParams.reload(),g.tableParams.page(1),$("#adminDataTableModal").modal("show"),z(!1)},function(a){console.log(a),g.creTableData=[],g.tableParams.reload(),z(!1),$("#adminDataTableModal").modal("show"),g.creTableDataErrorMsg=a.data.message})},g.creTableData=[];var _="submit";g.tableParams=new f({page:1,count:20},{total:g.creTableData.length,getData:function(b,c){var e=c.sorting()?d("orderBy")(g.creTableData,c.orderBy()):g.creTableData;e=c.filter()?d("filter")(e,c.filter()):e,a.orderedData=e,c.total(e.length),b.resolve(a.users=e.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),g.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=g.tableParams.settings().counts,a.changePage=G,a.changePageSize=H,a.changePageSizes=I,a.clearUpdateMsg=function(){},a.getHistory=function(a,b,c,d){void 0!==d&&null!==d||(d="status"),J(a,b),L(a,b),M(a),N(c,d),K(a)},a.viewCallRecord=function(a){h.open(a.recordingUrl,"_blank")},a.pauseCallRecord=function(){var a=document.getElementById("stopRecording");console.log(a),a.pause()},a.clearRecording=function(){var a=document.getElementById("stopRecording");console.log(a),a.pause()},a.trustAsResourceUrl1=function(a){return console.log(a),b.trustAsResourceUrl(a)},a.exportCustomerDetails=function(){console.log("Inside Export"),"Customer Stats"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularStatsData(Z,X,W,T,U,"export")),"Customer Complete Potential Stats"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularCompleteStatsData(Z,X,W,"export")),"Customer Potential Stats"===a.exportStatus&&(console.log(a.exportStatus),a.getPericularStatsServiceDueDateWiseData(Z,X,W,"export"))},$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})}),a.getFeedbackFilter=function(b){console.log(b),b?a.feedBackFilter=!0:(a.feedBackFilter=!1,a.tcAppointment.selectedFromDate="",a.tcAppointment.selectedToDate="",T="month",U="month",a.selectedFromDate="month",a.selectedToDate="month",F(Q,R,T,U))},a.adminCallerStatsByDate=function(b,c){b>c?h.alert("To Date should be greater than From Date"):(T=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),U=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),a.selectedFromDate=T,a.selectedToDate=U,F(Q,R,T,U))}}]),angular.module("letsService").controller("ManageSMSController",["$scope","$timeout","serviceURL","$cookies","GetScSMSStatsService","$window","TokenService","SendSMSService","TeleCallingSMSPackageService","TeleCallingSMSPricingService","GetSMSHistoryService",function(a,b,c,d,e,f,g,h,i,j,k){a.teleCallingStatusForUpdate=[{id:1,description:"Pickup and Drop"},{id:2,description:"Walkin"},{id:3,description:"Call Later"},{id:4,description:"Not Interested"},{id:6,description:"Service Done"}]}]),angular.module("letsService").controller("CrmAdminCreationController",["$scope","$http","$window","TokenService",function(a,b,c,d){function e(){if(h){var c=d.getToken(h);b.get("https://letsservicecrm.co.in/get_sc_branch_list/"+h+"/"+c).then(function(b){a.serviceCenter=b.data})}}function f(a){c.alert(a)}function g(){b.get("https://letsservicecrm.co.in/get_bike_brands").then(function(b){a.bikeBrands=b.data})}a.openCalendar=function(b,c){a.minDate=new Date,a.minValidToDate=new Date,a.minValidToDate.setDate(a.minValidToDate.getDate()+30),b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)};var h;a.sendCrmData=function(f){var g=1,i=d.getToken(g),j=f.validFromDate.getFullYear()+"-"+(f.validFromDate.getMonth()+1)+"-"+f.validFromDate.getDate(),k=f.validToDate.getFullYear()+"-"+(f.validToDate.getMonth()+1)+"-"+f.validToDate.getDate();if(f.validFromDate>f.validToDate)c.alert("To Date should be greater than From Date");else{a.loading=!0,f.validFromDate=j,f.validToDate=k;var l=f;console.log(JSON.stringify(l)),console.log(l);var m={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}};b.post("https://letsservicecrm.co.in/crm_saas_super_admin/create_crm_crentails/"+g+"/"+i,l,m).success(function(b,d,f,g){console.log(b),a.crmCredentialsSuccessMsg=" Username : "+b.Username+"   Password : "+b.Password,c.alert(a.crmCredentialsSuccessMsg),h=b.scId,a.crmCredentialsErrorMsg="",e(),a.loading=!1}).error(function(b,d,e,f){a.loading=!1,console.log("data",b),c.alert(b.message),a.ResponseDetails="Data: "+b+"<hr />status: "+d+"<hr />headers: "+e+"<hr />config: "+f})}},e(),a.validateMobileNumber=function(a){var b=a.split(","),c=!0;angular.forEach(b,function(a){if(c){if(/^\d+$/.test(a)){10===a.length||(c=!1,f("Kindly enter 10 digit mobile number"))}else c=!1,f("Kindly enter multiple 10 digit mobile number comma separated.")}})},a.getCityWiseServiceCenter=function(){b.get("https://letsservicetech.in/cityWiseServiceCenterList/1/295822529277341").then(function(b){a.cityWiseserviceCenterList=b.data})},g(),a.zones=[{key:"zone1",name:"R3 Zone"},{key:"zone2",name:"Others"}],a.logics=[{key:"logic1",name:"Logic-1 (KM wise)"},{key:"logic2",name:"Logic-2 (Scheduled date wise)"}],a.sendCrmDetailsData=function(e){var f=d.getToken(h);a.loading=!0;var g={email:e.email,opdId:e.selectedServiceCenter||0,scId:h,branchId:e.branchId,mobile:e.mobile},i={headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}};b.post("https://letsservicecrm.co.in/crm_saas_super_admin/update_branch_details/"+h+"/"+f,g,i).success(function(b,d,e,f){console.log(b),c.alert(b.message),a.loading=!1}).error(function(b,c,d,e){a.loading=!1,a.ResponseDetails="Data: "+b+"<hr />status: "+c+"<hr />headers: "+d+"<hr />config: "+e})}}]),angular.module("letsService").controller("CrmOverallReportController",["$scope","$timeout","serviceURL","$cookies","GetScSMSStatsService","$window","TokenService","TeleCallerWiseServiceCenterService","DealerRevenueReportService","GetSuperAdminDealerListService","DealerWiseDataReportService",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=g.getToken(p);j.query({logInId:p,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function m(){var b=g.getToken(q);h.query({id:q,token:b},function(b){a.serviceCenter=b,console.log("hi+++++++++++++",b)},function(b){a.serviceCenterErrorMsg=b.data.message})}function n(b){a.loaderIconRevenue=!0,r=b;var c=g.getToken(q);i.query({scId:q,branchId:r,token:c},function(b){console.log(" Dealer Revenue Report :",b),a.revenueReport=b,void 0!==a.revenueReport&&null!==a.revenueReport&&(a.revenueHeaders.push(a.revenueReport[0].monthName4),a.revenueHeaders.push(a.revenueReport[0].monthName3),a.revenueHeaders.push(a.revenueReport[0].monthName2),a.revenueHeaders.push(a.revenueReport[0].monthName1),a.revenueHeaders.push(a.revenueReport[0].monthName0),angular.forEach(a.revenueReport,function(b,c){null===a.revenueReport[c].month4&&(a.revenueReport[c].month4="0"),null===a.revenueReport[c].month3&&(a.revenueReport[c].month3="0"),null===a.revenueReport[c].month2&&(a.revenueReport[c].month2="0"),null===a.revenueReport[c].month1&&(a.revenueReport[c].month1="0"),null===a.revenueReport[c].month0&&(a.revenueReport[c].month0="0")})),a.loaderIconRevenue=!1},function(b){a.loaderIconRevenue=!1,a.revenueReportErrorMsg=b.data.message})}function o(b){a.loaderIconDataReport=!0,r=b;var c=g.getToken(q);k.query({scId:q,branchId:r,token:c},function(b){console.log(" Dealer Wise Data Report :",b),a.dealerWiseDataReport=b,void 0!==a.dealerWiseDataReport&&null!==a.dealerWiseDataReport&&(a.dealerWiseDataHeaders.push(a.dealerWiseDataReport[0].monthName4),a.dealerWiseDataHeaders.push(a.dealerWiseDataReport[0].monthName3),a.dealerWiseDataHeaders.push(a.dealerWiseDataReport[0].monthName2),a.dealerWiseDataHeaders.push(a.dealerWiseDataReport[0].monthName1),a.dealerWiseDataHeaders.push(a.dealerWiseDataReport[0].monthName0),angular.forEach(a.dealerWiseDataReport,function(b,c){null===a.dealerWiseDataReport[c].month4&&(a.dealerWiseDataReport[c].month4="0"),null===a.dealerWiseDataReport[c].month3&&(a.dealerWiseDataReport[c].month3="0"),null===a.dealerWiseDataReport[c].month2&&(a.dealerWiseDataReport[c].month2="0"),null===a.dealerWiseDataReport[c].month1&&(a.dealerWiseDataReport[c].month1="0"),null===a.dealerWiseDataReport[c].month0&&(a.dealerWiseDataReport[c].month0="0")})),a.loaderIconDataReport=!1},function(b){a.loaderIconDataReport=!1,a.dealerWiseDataReportErrorMsg=b.data.message})}var p=d.get("loggedInUserId"),q=d.get("loggedInUserScId");l();var r="branch";a.getSelectedDealer=function(a){r="branch",console.log(a),q=a,n(r),o(r),m()},m(),a.getSelectedBranch=function(a){console.log("selected branch",a),r=a,null===a&&(r="branch"),n(r),o(r)},a.loaderIconRevenue=!1,a.revenueHeaders=[],a.loaderIconDataReport=!1,a.dealerWiseDataHeaders=[],n(r),o(r)}]),
angular.module("letsService").controller("CrmSupportToolController",["$scope","$http","$filter","$timeout","serviceURL","$state","$window","TokenService","GetSuperAdminDealerListService","SupportToolService","TeleCallerWiseServiceCenterService","GetScWiseTeleCallerService","UpdateDealerRenevalAndExpiryService","AdminProfileInformation","GetSuperAdminListService","GetSMSTemplateLableListService","GetSmsTemplateAccessBranchListService","GetSupportBranchDetailsService","GetSupportUserListService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){var b=h.getToken(L);i.query({logInId:L,token:b},function(b){a.dealerList=b,angular.forEach(b,function(b){a.dealerDataList.push({id:b.scId,label:b.scName,slNo:b.slNo})}),console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function u(b){a.successMsg="";var c=h.getToken(K);j.save({id:K,token:c},b,function(b){console.log("data::",b),"adddays"!==J&&g.alert(b.message),a.successMsg=b.message},function(a){console.log(a)})}function v(b){N=b;var c=h.getToken(N);k.query({id:N,token:c},function(b){a.serviceCenter=b,a.serviceCenter.values=a.serviceCenter},function(b){a.serviceCenterErrorMsg=b.data.message})}function w(b){N=b;var c=h.getToken(N);l.query({id:N,token:c},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}function x(a){g.alert(a)}function y(b){N=b;var c=h.getToken(N);m.query({scId:N,token:c},function(b){a.expiryDealerList=b,console.log("Expiry Dealer List::",a.expiryDealerList)},function(b){a.expiryDealerList=b.data.message})}function z(b){N=b;var c=h.getToken(N);n.query({scId:N,token:c},function(b){a.adminDetails=b[0],console.log("Profile :  :",b)},function(a){console.log("Error",a)})}function A(){var b=h.getToken(K);o.query({scId:K,token:b},function(b){a.superAdminList=b,console.log("Super Admin User List +++",b)},function(b){a.superAdminListErrorMsg=b.data.message})}function B(){var b=h.getToken(K);p.query({scId:K,token:b},function(b){a.labelList=b,console.log("Lable List +++",b)},function(b){a.labelListErrorMsg=b.data.message})}function C(){a.branchList=[];var b=h.getToken(K);q.query({scId:N,status:O,loginId:K,token:b},function(b){a.branchList=b,console.log("Branch List +++",b)},function(b){a.branchListErrorMsg=b.data.message})}function D(b){var c=h.getToken(N);r.query({scId:N,branchId:b,token:c},function(b){console.log("Branch details data::",b),a.adminBranchDetailObj.email=b[0].email,a.adminBranchDetailObj.mobile=b[0].mobileNo,a.adminBranchDetailObj.dealerCode=b[0].dealerCode,a.adminBranchDetailObj.opdId=b[0].opdId},function(a){console.log(a)})}function E(){var b=h.getToken(K);s.query({loginId:K,token:b},function(b){console.log("Support Users data::",b),a.supportUsers=b},function(a){console.log(a)})}function F(b){Y=[],!0===(W=g.confirm("Are you sure this is the file you want to upload?"))||(a.loading=!1,console.log("File Cancelled!"),$('input[type="file"]').val(null));var d=b.target.files[0];".xls"!==d.name.substr(-4)&&g.alert("Only .xls file format is allowed");var e=new FileReader;e.onload=function(a){var b=a.target.result,d=XLS.CFB.read(b,{type:"binary"}),e=XLS.parse_xlscfb(d);e.SheetNames.forEach(function(a){var b=XLS.utils.sheet_to_row_object_array(e.Sheets[a]);if(b.length>0){S=b;if(!0===G()){S=c("unique")(S,"chassisno");for(var d=0;d<S.length;d++){V=!1;var f={};f=S[d].chassisno,void 0!==S[d].chassisno&&Y.push(f)}X=Y.toString(),console.log("Selected Chassis Numbers ::",X)}else g.alert(U),g.location.reload()}})},e.readAsBinaryString(d)}function G(){if(angular.forEach(S,function(a){angular.forEach(a,function(b,c){delete a[c],a[c.replace(/\s/g,"").toLowerCase()]=b.trim()})}),void 0!==S||null!==S||S!==[])for(var a=0;a<S.length;a++){Object.keys(S[a])}console.log("Chassis numbers : ",JSON.stringify(S));for(var b=0;b<S.length;b++){var c=S[b];if(console.log("row object::",c),H(c.chassisno))return T=b+1,U=" Some mandatory fields are empty in your sheet at row "+(T+1)+" .",!1}return!0}function H(a){if(console.log(a),void 0!==a)return a&&void 0!==a||g.alert("Empty row/column in the sheet."),null===a||!a.trim()}var I=g.sessionStorage.getItem("loggedInSupportId");g.sessionStorage.getItem("loggedInSupportRole"),g.sessionStorage.getItem("loginMobile");a.openCalendar=function(b,c){a.minDate=new Date,a.minValidToDate=new Date,a.minValidToDate.setDate(a.minValidToDate.getDate()+30),b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)};var J,K=I,L="369";a.getSupportStatus=function(b){a.supportAccess=b,J=b,"createDealer"!==b&&"clickToCall"!==b&&"updateExpiryDate"!==b&&t(),"createDealer"===b&&g.open("https://letsserviceconnect.com/#/onboard","_blank"),"updateExpiryDate"===b&&y(K),"superadminupdate"===J&&A(),"addsmstemplate"===J&&B(),"assigndealer"===J&&E(),"dealerStats"===b&&g.open("https://letsserviceconnect.com/#/supportStats","_blank")},a.dealerCheck=function(){console.log(M),0===M.length&&(a.createSuperAdminForm.$invalid=!0,a.assignDealersForm.$invalid=!0)},a.dealerDataList=[],a.manageDealerSettings={displayProp:"label"};var M=[];a.updateDealer={onItemSelect:function(b){M.push(parseInt(b.id)),M.length>0?(a.createSuperAdminForm.$invalid=!1,a.assignDealersForm.$invalid=!1):0===M.length&&(a.createSuperAdminForm.$invalid=!0,a.assignDealersForm.$invalid=!0)},onItemDeselect:function(b){var c=M.indexOf(parseInt(b.id));M.splice(c,1),M.length>0?(a.createSuperAdminForm.$invalid=!1,a.assignDealersForm.$invalid=!1):0===M.length&&(a.createSuperAdminForm.$invalid=!0,a.assignDealersForm.$invalid=!0)}},a.resetDealer=function(){a.manageDealer=[],M=[]},a.resetDealer(),a.createSuperAdmin=function(a){var b={username:a.username,password:a.password,scIds:M.toString(),logInId:K,status:J};console.log(JSON.stringify(b)),u(b)},a.getCsvAccess=function(b){var c={yesno:b.yesNo,scId:b.selectedDealer,logInId:K,status:J};console.log(JSON.stringify(c)),a.csvObj={},a.csvAccessForm.$setPristine(),u(c)},a.getOtpAccess=function(b){var c={yesno:b.yesNo,scId:b.selectedDealer,logInId:K,status:J};console.log(JSON.stringify(c)),a.otpObj={},a.otpAccessForm.$setPristine(),u(c)},a.getInsuranceAccess=function(b){var c={yesno:b.yesNo,scId:b.selectedDealer,logInId:K,status:J,callerId:b.selectedCaller};console.log(JSON.stringify(c)),a.insuranceObj={},a.insuranceAccessForm.$setPristine(),u(c)},a.updateFreshCallDays=function(b){var c={scId:b.selectedDealer,days:b.day,logInId:K,status:J};console.log(JSON.stringify(c)),a.freshCallObj={},a.freshCallForm.$setPristine(),u(c)},a.updateCallerCount=function(b){var c={scId:b.selectedDealer,callerCount:b.callerCount,logInId:K,status:J};console.log(JSON.stringify(c)),a.callerCountObj={},a.callerCountForm.$setPristine(),u(c)},a.updateAdminDetails=function(b){var c={scId:b.selectedDealer,email:b.email,mobile:b.mobile,logInId:K,status:J};console.log(JSON.stringify(c)),a.adminDetailObj={},a.adminDetailForm.$setPristine(),u(c)},a.updateAdminBranchDetails=function(b){var c={branchName:a.selectedBranch,branchId:Q,dealerCode:b.dealerCode,scId:b.selectedDealer,email:b.email,mobile:b.mobile,logInId:K,status:J,opdId:b.opdId};console.log(JSON.stringify(c)),a.adminBranchDetailObj={},a.adminBranchDetailForm.$setPristine(),u(c),a.selectedBranch=""},a.nDays=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"];var N;a.getSelectedDealer=function(a){console.log(a),N=a,v(N),"insuranceaccess"===J&&w(N),"updateRenevalDate"!==J&&"updateExpiryDate"!==J||z(N),"deactivatecaller"===J&&w(a),"smsaccess"!==J&&"addnewbranch"!==J||v(a),"addsmstemplate"===J&&void 0!==O&&null!==O&&C()},a.validateMobileNumber=function(a){var b=a.split(","),c=!0;angular.forEach(b,function(a){if(c){if(/^\d+$/.test(a)){10===a.length||(c=!1,x("Kindly enter 10 digit mobile number"))}else c=!1,x("Kindly enter multiple 10 digit mobile number comma separated.")}})},a.updateDealerExpiry=function(b){console.log(b);var c=b.validFromDate.getFullYear()+"-"+(b.validFromDate.getMonth()+1)+"-"+b.validFromDate.getDate(),d=b.validToDate.getFullYear()+"-"+(b.validToDate.getMonth()+1)+"-"+b.validToDate.getDate();if(b.validFromDate>b.validToDate)g.alert("To Date should be greater than From Date");else{var e={scId:b.selectedDealer,logInId:K,validFrom:c,validTo:d,status:J};console.log(JSON.stringify(e)),a.dealerObj={},a.renevalExpiryForm.$setPristine(),u(e),y(K)}},a.updateDealerReneval=function(b){console.log(b);var c=b.validFromDate.getFullYear()+"-"+(b.validFromDate.getMonth()+1)+"-"+b.validFromDate.getDate(),d=b.validToDate.getFullYear()+"-"+(b.validToDate.getMonth()+1)+"-"+b.validToDate.getDate();if(b.validFromDate>b.validToDate)g.alert("To Date should be greater than From Date");else{var e={scId:b.selectedDealer,logInId:K,validFrom:c,validTo:d,status:J};console.log(JSON.stringify(e)),a.dealerRenevalObj={},a.renevalForm.$setPristine(),u(e)}},a.updateTicketDetails=function(b){var c={scId:b.selectedDealer,logInId:K,email:b.email,status:J};a.ticketObj={},a.ticketDetailForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.deactivateCaller=function(b){var c={scId:b.selectedDealer,logInId:K,callerId:b.selectedCaller,status:J};a.callerObj={},a.deactivateCallerForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.deactivateDealer=function(b){var c={scId:b.selectedDealer,logInId:K,callerId:b.selectedCaller,status:J};a.dealerObj={},a.deactivateDealerForm.$setPristine(),console.log(JSON.stringify(c)),u(c),t()},a.updateSuperAdmin=function(b){var c={logInId:K,superAdminId:b.selectedSuperAdmin,newdealers:M.toString(),status:J};a.superAdminObj={},a.createSuperAdminForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.updateModelCode=function(b){var c={logInId:K,scId:b.selectedDealer,yesno:b.yesNo,status:J};a.modelObj={},a.updateModelCodeForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.teleCallingStatusForUpdate=[{id:2,description:"Walkin"},{id:3,description:"Call Later"}];var O;a.getSelectedStatus=function(a){console.log(a),O=a,C()},a.trackMsg=function(){console.log(a.scSMS.message)};var P;a.getSelectedLable=function(b){void 0===b&&(b=""),console.log("lable",b),P=b,void 0!==a.scSMS?(a.scSMS.message=a.scSMS.message+P,console.log(a.scSMS.message)):void 0===a.scSMS&&(a.scSMS={message:""},a.scSMS.message=a.scSMS.message+P)},a.createSmsTemplate=function(b){var c={logInId:K,scId:b.selectedDealer,smsstatus:b.smsstatus,template:a.scSMS.message,smssubstatus:"",status:J,action:"create"};a.dealerObj={},a.createSmsTemplateForm.$setPristine(),a.scSMS={message:""},a.currentStatus="",console.log(JSON.stringify(c)),u(c)},a.updateSmsTemplate=function(b){var c={logInId:K,scId:b.selectedDealer,appointmentstatus:b.smsstatus,smsstatus:b.yesNo,status:J,branchId:b.selectedBranch.toString()};a.smsObj={},a.updateSmsTemplateForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.clearUpdateMsg=function(){a.successMsg="",a.crmRequest={},a.addBranchObj={},a.dateCalcObj={},a.smsObj={},a.dealerObj={},a.modelObj={},a.superAdminObj={},a.callerObj={},a.ticketObj={},a.dealerRenevalObj={},a.adminBranchDetailObj={},a.adminDetailObj={},a.callerCountObj={},a.freshCallObj={},a.insuranceObj={},a.otpObj={},a.csvObj={}},a.addNewBranch=function(b){var c={logInId:K,scId:b.selectedDealer,status:J,email:b.email,mobileNo:b.mobile,branchName:b.selectedBranch,dealerCode:b.dealerCode,opdId:b.opdId||"0"};a.addBranchObj={},a.addNewBranchForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.getDateCalculator=function(b){var c=b.date.getFullYear()+"-"+(b.date.getMonth()+1)+"-"+b.date.getDate(),d={logInId:K,status:J,dateofsale:c,adddays:b.days};a.dateCalcObj={},a.dateCalculatorForm.$setPristine(),console.log(JSON.stringify(d)),u(d)},a.getCityWiseServiceCenter=function(){b.get("https://letsservicetech.in/cityWiseServiceCenterList/1/295822529277341").then(function(b){a.cityWiseserviceCenterList=b.data})};var Q;a.getBranchDetailData=function(b){console.log(b),a.selectedBranch=b.scName,Q=b.scId,a.getCityWiseServiceCenter(),D(b.scId)},a.assignDealers=function(b){var c={logInId:K,status:J,scIds:M.toString(),supportId:b.selectedSupportUser};a.assignDealersObj={},a.assignDealersForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.updateDealerIpAddress=function(b){var c={logInId:K,status:J,scId:b.selectedDealer,ipAddress:b.ipAddress};a.ipObj={},a.ipAddressForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.getEWAccess=function(b){var c={logInId:K,status:J,scId:b.selectedDealer};a.EWObj={},a.EWAccessForm.$setPristine(),console.log(JSON.stringify(c)),u(c)},a.deleteServiceReminderData=function(b){if(X){var c={logInId:K,status:J,scId:b.selectedDealer,chassisNo:X};a.deleteDataObj={},a.deleteDataForm.$setPristine(),console.log(JSON.stringify(c)),u(c),X="",$('input[type="file"]').val(null)}else g.alert("Kindly upload the File!")};var R;$(function(){R=document.getElementById("teleCallingSMSXlFileInput"),R.addEventListener&&R.addEventListener("change",F,!1)});var S,T,U,V,W,X,Y=[];Array.prototype.containsArray=function(a){var b,c;return arguments[1]?(b=arguments[1],c=arguments[2]):(b=0,c=0,this.sort(),a.sort()),b===a.length||(c=this.indexOf(a[b],c))>-1&&this.containsArray(a,++b,++c)}}]),angular.module("letsService").controller("SalesFeedbackPerformanceController",["$scope","$sce","$cookies","$filter","$timeout","serviceURL","ngTableParams","$rootScope","TokenService","GetScWiseTeleCallerService","TeleCallerWiseServiceCenterService","CreDashboardStatsDataService","AdminCustomerDetailsStatsWiseService","SalesFeedbackCallRecordingService","GetSalesHistoryService","GetAdminCallerDashboardConversionStatsService","$window","GetYearWiseCustomerStatsService","GetSuperAdminDealerListService","SalesFeedbackYesNoDataService","SalesFeedbackRatingDataService","SalesFeedbackDetailsService","GetPerticularSalesDataService","ServiceTypeService","SalesFeedbackPerformanceStatsService","SalesFeedbackPerformanceDetailsService","UpdateCustomerPhoneService","GetSalesFeedbackYesNoDefaultStatsService","GetFeedbckHistoryService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(b){a.loaderIcon=b}function E(){var b=i.getToken(W);s.query({logInId:W,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function F(b){console.log("==============",b),X=b;var c=i.getToken(X);k.query({id:X,token:c},function(b){a.serviceCenter=b},function(b){a.serviceCenterErrorMsg=b.data.message})}function G(b){X=b;var c=i.getToken(X);j.query({id:X,token:c},function(b){a.callerList=b},function(b){a.callerListErrorMsg=b.data.message})}function H(b,c,d){Y=b,Z=c,X=d,D(!0);var e=i.getToken(X);y.query({scId:X,callerId:Y,dataType:ba,branchId:Z,token:e},function(b){console.log("Sales Feedback Performance dashboard data :",b),a.creDashboardData=b,a.creDashboardDataErrorMsg="",D(!1)},function(b){D(!1),a.creDashboardData=[],a.creDashboardDataErrorMsg=b.data.message})}function I(a){h.tableParams.page(a),h.tableParams.reload()}function J(a){h.tableParams.count(a)}function K(a){0===a.indexOf(h.tableParams.count())&&(a.push(h.tableParams.count()),a.sort()),h.tableParams.settings({counts:a})}function L(){a.feedBackDataChart=[],a.feedBackDataSeries=[],a.feedBackData=[],a.feedBackDataLables=["Yes","No"];var b=[],c=[],d=[],e=[],f=[],g=[],h=[],j=[],k=[],l=[],m=[],n=[],o=[],p=[],q=[];a.loaderIconFeedBack=!0,a.feedBackYesNoDataErrorMsg="";var r=i.getToken(X);t.query({fromDate:_,toDate:aa,scId:X,callerId:Y,branchId:Z,token:r},function(i){console.log("Sales FeedBack Yes No Stats :",i),ea=i,a.feedBackStats=i,a.feedBackYesNoDataErrorMsg="",void 0!==ea[0]&&null!==ea[0]&&(b.push(parseInt(ea[0].yes)),b.push(parseInt(ea[0].no)),a.feedBackDataChart1={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[0].feedBackListId],colors:["#2FCF92","#FB617F"],data:[b]}),void 0!==ea[1]&&null!==ea[1]&&(c.push(parseInt(ea[1].yes)),c.push(parseInt(ea[1].no)),a.feedBackDataChart2={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[1].feedBackListId],colors:["#2FCF92","#FB617F"],data:[c]}),void 0!==ea[2]&&null!==ea[2]&&(d.push(parseInt(ea[2].yes)),d.push(parseInt(ea[2].no)),a.feedBackDataChart3={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[2].feedBackListId],colors:["#2FCF92","#FB617F"],data:[d]}),void 0!==ea[3]&&null!==ea[3]&&(e.push(parseInt(ea[3].yes)),e.push(parseInt(ea[3].no)),a.feedBackDataChart4={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[3].feedBackListId],colors:["#2FCF92","#FB617F"],data:[e]}),void 0!==ea[4]&&null!==ea[4]&&(f.push(parseInt(ea[4].yes)),f.push(parseInt(ea[4].no)),a.feedBackDataChart5={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[4].feedBackListId],colors:["#2FCF92","#FB617F"],data:[f]}),void 0!==ea[5]&&null!==ea[5]&&(g.push(parseInt(ea[5].yes)),g.push(parseInt(ea[5].no)),a.feedBackDataChart6={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[5].feedBackListId],colors:["#2FCF92","#FB617F"],data:[g]}),void 0!==ea[6]&&null!==ea[6]&&(h.push(parseInt(ea[6].yes)),h.push(parseInt(ea[6].no)),a.feedBackDataChart7={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[6].feedBackListId],colors:["#2FCF92","#FB617F"],data:[h]}),void 0!==ea[7]&&null!==ea[7]&&(j.push(parseInt(ea[7].yes)),j.push(parseInt(ea[7].no)),a.feedBackDataChart8={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[7].feedBackListId],colors:["#2FCF92","#FB617F"],data:[j]}),void 0!==ea[8]&&null!==ea[8]&&(k.push(parseInt(ea[8].yes)),k.push(parseInt(ea[8].no)),a.feedBackDataChart9={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[8].feedBackListId],colors:["#2FCF92","#FB617F"],data:[j]}),void 0!==ea[9]&&null!==ea[9]&&(l.push(parseInt(ea[9].yes)),l.push(parseInt(ea[9].no)),a.feedBackDataChart10={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[9].feedBackListId],colors:["#2FCF92","#FB617F"],data:[l]}),void 0!==ea[10]&&null!==ea[10]&&(m.push(parseInt(ea[10].yes)),m.push(parseInt(ea[10].no)),a.feedBackDataChart11={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[10].feedBackListId],colors:["#2FCF92","#FB617F"],data:[m]}),void 0!==ea[11]&&null!==ea[11]&&(n.push(parseInt(ea[11].yes)),n.push(parseInt(ea[11].no)),a.feedBackDataChart12={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[11].feedBackListId],colors:["#2FCF92","#FB617F"],data:[n]}),void 0!==ea[12]&&null!==ea[12]&&(o.push(parseInt(ea[12].yes)),o.push(parseInt(ea[12].no)),a.feedBackDataChart13={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[12].feedBackListId],colors:["#2FCF92","#FB617F"],data:[o]}),void 0!==ea[13]&&null!==ea[13]&&(p.push(parseInt(ea[13].yes)),p.push(parseInt(ea[13].no)),a.feedBackDataChart14={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[13].feedBackListId],colors:["#2FCF92","#FB617F"],data:[p]}),void 0!==ea[14]&&null!==ea[14]&&(q.push(parseInt(ea[14].yes)),q.push(parseInt(ea[14].no)),a.feedBackDataChart15={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackDataLables,series:[ea[14].feedBackListId],colors:["#2FCF92","#FB617F"],data:[q]}),a.feedBackDataChart1&&a.feedBackDataChart.push(a.feedBackDataChart1),a.feedBackDataChart2&&a.feedBackDataChart.push(a.feedBackDataChart2),a.feedBackDataChart3&&a.feedBackDataChart.push(a.feedBackDataChart3),a.feedBackDataChart4&&a.feedBackDataChart.push(a.feedBackDataChart4),a.feedBackDataChart5&&a.feedBackDataChart.push(a.feedBackDataChart5),a.feedBackDataChart6&&a.feedBackDataChart.push(a.feedBackDataChart6),a.feedBackDataChart7&&a.feedBackDataChart.push(a.feedBackDataChart7),a.feedBackDataChart8&&a.feedBackDataChart.push(a.feedBackDataChart8),a.feedBackDataChart9&&a.feedBackDataChart.push(a.feedBackDataChart9),a.feedBackDataChart10&&a.feedBackDataChart.push(a.feedBackDataChart10),a.feedBackDataChart11&&a.feedBackDataChart.push(a.feedBackDataChart11),a.feedBackDataChart12&&a.feedBackDataChart.push(a.feedBackDataChart12),a.feedBackDataChart13&&a.feedBackDataChart.push(a.feedBackDataChart13),a.feedBackDataChart14&&a.feedBackDataChart.push(a.feedBackDataChart14),a.feedBackDataChart15&&a.feedBackDataChart.push(a.feedBackDataChart15),a.datasetOverrideFeedBackChartData=[{fill:!0,backgroundColor:a.feedBackDataColors1},{fill:!0,backgroundColor:a.feedBackDataColors2}],a.loaderIconFeedBack=!1},function(b){a.loaderIconFeedBack=!1,a.feedBackYesNoDataErrorMsg=b.data.message})}function M(b,c,d,e){console.log("selFeedbackId : ",b),a.statusDisplay=c,h.exportType=!0,ka=e,console.log(_),console.log(_),D(!0),ca=c;var g=i.getToken(X);"export"===ka?(q.open(f+"get_sales_feedback_details/"+_+"/"+aa+"/"+X+"/"+Y+"/"+Z+"/"+b+"/"+ca+"/"+d+"/"+ka+"/"+g),console.log(f+"get_sales_feedback_details/"+_+"/"+aa+"/"+X+"/"+Y+"/"+Z+"/"+b+"/"+ca+"/"+d+"/"+ka+"/"+g),D(!1),ka="submit"):"submit"===ka&&v.query({fromDate:_,toDate:aa,scId:X,callerId:Y,branchId:Z,feedBackListId:b,feedBackStatus:ca,status:d,exportType:ka,token:g},function(a){console.log("FEEDBACK YES/NO CUSTOMER DETAILS STATS :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableFeedbackModal").modal("show"),D(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),D(!1),$("#adminDataTableFeedbackModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function N(){a.feedBackRatingDataChart=[],a.feedBackRatingDataSeries=[],a.feedBackRatingData=[],a.feedBackRatingDataLables=["Rating-1","Rating-2","Rating-3","Rating-4","Rating-5"];var b=[],c=[],d=[],e=[],f=[],g=[],h=[],j=[],k=[],l=[];a.loaderIconFeedBackRating=!0,a.feedBackRatingDataErrorMsg="";var m=i.getToken(X);u.query({fromDate:_,toDate:aa,scId:X,callerId:Y,branchId:Z,token:m},function(i){console.log("Sales FeedBack Rating Stats :",i),la=i,a.feedBackRatingStats=i,a.feedBackRatingDataErrorMsg="",void 0!==la[0]&&null!==la[0]&&(b.push(parseInt(la[0].rating1)),b.push(parseInt(la[0].rating2)),b.push(parseInt(la[0].rating3)),b.push(parseInt(la[0].rating4)),b.push(parseInt(la[0].rating5)),a.feedBackRatingDataChart1={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[0].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[b]}),void 0!==la[1]&&null!==la[1]&&(c.push(parseInt(la[1].rating1)),c.push(parseInt(la[1].rating2)),c.push(parseInt(la[1].rating3)),c.push(parseInt(la[1].rating4)),c.push(parseInt(la[1].rating5)),a.feedBackRatingDataChart2={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[1].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[c]}),void 0!==la[2]&&null!==la[2]&&(d.push(parseInt(la[2].rating1)),d.push(parseInt(la[2].rating2)),d.push(parseInt(la[2].rating3)),d.push(parseInt(la[2].rating4)),d.push(parseInt(la[2].rating5)),a.feedBackRatingDataChart3={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[2].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[d]}),void 0!==la[3]&&null!==la[3]&&(e.push(parseInt(la[3].rating1)),e.push(parseInt(la[3].rating2)),e.push(parseInt(la[3].rating3)),e.push(parseInt(la[3].rating4)),e.push(parseInt(la[3].rating5)),a.feedBackRatingDataChart4={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[3].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[e]}),void 0!==la[4]&&null!==la[4]&&(f.push(parseInt(la[4].rating1)),f.push(parseInt(la[4].rating2)),f.push(parseInt(la[4].rating3)),f.push(parseInt(la[4].rating4)),f.push(parseInt(la[4].rating5)),a.feedBackRatingDataChart5={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[4].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[f]}),void 0!==la[5]&&null!==la[5]&&(g.push(parseInt(la[5].rating1)),g.push(parseInt(la[5].rating2)),g.push(parseInt(la[5].rating3)),g.push(parseInt(la[5].rating4)),g.push(parseInt(la[5].rating5)),a.feedBackRatingDataChart6={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[5].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[g]}),void 0!==la[6]&&null!==la[6]&&(h.push(parseInt(la[6].rating1)),h.push(parseInt(la[6].rating2)),h.push(parseInt(la[6].rating3)),h.push(parseInt(la[6].rating4)),h.push(parseInt(la[6].rating5)),a.feedBackRatingDataChart7={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[6].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[h]}),void 0!==la[7]&&null!==la[7]&&(j.push(parseInt(la[7].rating1)),j.push(parseInt(la[7].rating2)),j.push(parseInt(la[7].rating3)),j.push(parseInt(la[7].rating4)),j.push(parseInt(la[7].rating5)),a.feedBackRatingDataChart8={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[7].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[j]}),void 0!==la[8]&&null!==la[8]&&(k.push(parseInt(la[8].rating1)),k.push(parseInt(la[8].rating2)),k.push(parseInt(la[8].rating3)),k.push(parseInt(la[8].rating4)),k.push(parseInt(la[8].rating5)),a.feedBackRatingDataChart9={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[8].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[k]}),void 0!==la[9]&&null!==la[9]&&(l.push(parseInt(la[9].rating1)),l.push(parseInt(la[9].rating2)),l.push(parseInt(la[9].rating3)),l.push(parseInt(la[9].rating4)),l.push(parseInt(la[9].rating5)),a.feedBackRatingDataChart10={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]}},labels:a.feedBackRatingDataLables,series:[la[9].feedBackListId],colors:[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],data:[l]}),a.feedBackRatingDataChart1&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart1),a.feedBackRatingDataChart2&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart2),a.feedBackRatingDataChart3&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart3),a.feedBackRatingDataChart4&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart4),a.feedBackRatingDataChart5&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart5),a.feedBackRatingDataChart6&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart6),a.feedBackRatingDataChart7&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart7),a.feedBackRatingDataChart8&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart8),a.feedBackRatingDataChart9&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart9),a.feedBackRatingDataChart10&&a.feedBackRatingDataChart.push(a.feedBackRatingDataChart10),a.datasetOverrideFeedBackRatingChartData=[{fill:!0,backgroundColor:["#FB617F","#FB617F","#FB617F","#2FCF92","#2FCF92"]}],a.loaderIconFeedBackRating=!1},function(b){a.loaderIconFeedBackRating=!1,a.feedBackRatingDataErrorMsg=b.data.message})}function O(b,c,d,e){console.log("selFeedbackId : ",b),console.log("selStatus : ",c),console.log("selFeedbackStatus : ",d),a.statusDisplay="Rating-"+c,h.exportType=!0,ka=e,D(!0),ca=c;var g=i.getToken(X);"export"===ka?(q.open(f+"get_sales_feedback_details/"+_+"/"+aa+"/"+X+"/"+Y+"/"+Z+"/"+b+"/"+ca+"/"+d+"/"+ka+"/"+g),D(!1),ka="submit"):"submit"===ka&&v.query({fromDate:_,toDate:aa,scId:X,callerId:Y,branchId:Z,feedBackListId:b,feedBackStatus:ca,status:d,
exportType:ka,token:g},function(a){console.log("FEEDBACK RATING CUSTOMER DETAILS STATS :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableFeedbackModal").modal("show"),D(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),D(!1),$("#adminDataTableFeedbackModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function P(b,c){D(!0);var d=i.getToken(X);o.query({chassisNo:b,scId:X,token:d},function(b){console.log("history data :",b),a.tcAppointmentHistoryData=b,D(!1)},function(b){D(!1),console.log("history error data",b),a.tcAppointmentHistoryDataErrorMsg=b.data.message})}function Q(b){a.loaderIconService=!0,a.tcFeedbackHistoryData=[],console.log("Customer Id",b);var c=i.getToken(X);C.query({customerId:b,status:qa,scId:X,token:c},function(b){console.log("Sales Feedback history data :",b),a.loaderIconService=!1,a.tcFeedbackHistoryData=b,a.tcFeedbackHistoryDataErrorMsg=""},function(b){a.loaderIconService=!1,a.tcFeedbackHistoryDataErrorMsg=b.data.message})}function R(b,c){a.callRecording=[];var d=i.getToken(X);n.query({chassisNo:b,logInId:W,scId:X,token:d},function(b){a.callRecording=b,console.log("callRecording",b)},function(b){var c={recordingUrl:b.data.message,create_ts:""};a.callRecording.push(c)})}function S(b){a.loaderIconService=!0,a.tcServiceHistoryData=[],console.log("Chassis no",b);var c=i.getToken(X);x.query({chassisNo:b,id:X,token:c},function(b){console.log("Service history data :",b),a.loaderIconService=!1,a.tcServiceHistoryData=b,a.tcServiceHistoryDataErrorMsg=""},function(b){a.loaderIconService=!1,a.tcServiceHistoryDataErrorMsg="No Data Available"})}function T(b,c){a.customerMobileNumbers=[],D(!0),console.log("appt id - "+b+"status- "+c);var d=i.getToken(X);w.query({apptId:b,scId:X,token:d},function(b){console.log("data in detailed page",b[0]),a.tcAppointmentData=b[0],a.tcAppointmentDataErrorMsg="",ra=a.tcAppointmentData.mobile;for(var c=0;c<ra.length;c++)ra[c].customer_mobile===a.tcAppointmentData.customer_mobile&&(ra[c].customer_mobile=ra[c].customer_mobile+"*",a.currentMobile=ra[c].customer_mobile),a.customerMobileNumbers.push(ra[c]);void 0!==a.tcAppointmentData.customer_address&&null!==a.tcAppointmentData.customer_address&&""!==a.tcAppointmentData.customer_address||(a.tcAppointmentData.customer_address="- -"),void 0!==a.tcAppointmentData.chassisNo&&null!==a.tcAppointmentData.chassisNo&&""!==a.tcAppointmentData.chassisNo||(a.tcAppointmentData.chassisNo="- -"),void 0!==a.tcAppointmentData.bikeBrand&&null!==a.tcAppointmentData.bikeBrand&&""!==a.tcAppointmentData.bikeBrand||(a.tcAppointmentData.bikeBrand="- -"),void 0!==a.tcAppointmentData.lastServiceType&&null!==a.tcAppointmentData.lastServiceType&&""!==a.tcAppointmentData.lastServiceType||(a.tcAppointmentData.lastServiceType="- -"),void 0!==a.tcAppointmentData.scName&&null!==a.tcAppointmentData.scName&&""!==a.tcAppointmentData.scName||(a.tcAppointmentData.scName="- -"),void 0!==a.tcAppointmentData.bikeNo&&null!==a.tcAppointmentData.bikeNo&&""!==a.tcAppointmentData.bikeNo||(a.tcAppointmentData.bikeNo="- -"),void 0!==a.tcAppointmentData.bikeModel&&null!==a.tcAppointmentData.bikeModel&&""!==a.tcAppointmentData.bikeModel||(a.tcAppointmentData.bikeModel="- -"),void 0!==a.tcAppointmentData.bikeType&&null!==a.tcAppointmentData.bikeType&&""!==a.tcAppointmentData.bikeType||(a.tcAppointmentData.bikeType="- -"),void 0!==a.tcAppointmentData.dateOfSale&&null!==a.tcAppointmentData.dateOfSale&&""!==a.tcAppointmentData.dateOfSale&&"0000-00-00 00:00:00"!==a.tcAppointmentData.dateOfSale||(a.tcAppointmentData.dateOfSale="- -"),void 0!==a.tcAppointmentData.serviceDueDate&&null!==a.tcAppointmentData.serviceDueDate&&""!==a.tcAppointmentData.serviceDueDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.serviceDueDate||(a.tcAppointmentData.serviceDueDate="- -"),void 0!==a.tcAppointmentData.serviceDueType&&null!==a.tcAppointmentData.serviceDueType&&""!==a.tcAppointmentData.serviceDueType||(a.tcAppointmentData.serviceDueType="- -"),void 0!==a.tcAppointmentData.lastServiceDate&&null!==a.tcAppointmentData.lastServiceDate&&""!==a.tcAppointmentData.lastServiceDate&&"0000-00-00 00:00:00"!==a.tcAppointmentData.lastServiceDate||(a.tcAppointmentData.lastServiceDate="- -"),void 0!==a.tcAppointmentData.serviceAvailedAt&&null!==a.tcAppointmentData.serviceAvailedAt&&""!==a.tcAppointmentData.serviceAvailedAt||(a.tcAppointmentData.serviceAvailedAt="- -"),D(!1)},function(b){a.tcAppointmentDataErrorMsg="No Data Available",D(!1)})}function U(){a.feedBackDataDefaultChart=[],a.feedBackDataDefaultSeries=[],ya=[["Yes","No"]];a.loaderIconFeedBack=!0,a.feedBackDefaultYesNoDataErrorMsg="";var b=i.getToken(X);B.query({fromDate:_,toDate:aa,scId:X,callerId:Y,branchId:Z,token:b},function(b){console.log("FeedBack Default Yes No Stats :",b),a.feedBackStatsDefault=b,xa=b,a.feedBackStatsDefault=b,a.feedBackDefaultYesNoDataErrorMsg="",void 0!==xa[0]&&null!==xa[0]&&(ya.push(["Yes",parseInt(xa[0].yes)]),ya.push(["No",parseInt(xa[0].no)])),a.feedBackDataDefaultData=ya,console.log("feedBackDataDefaultData+++++++++++++",ya),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(V),a.loaderIconFeedBack=!1},function(b){ya=[["Yes","No"]],a.loaderIconFeedBack=!1,a.feedBackDefaultYesNoDataErrorMsg=b.data.message})}function V(){function b(){za=!0;var b=e.getSelection()[0];if(b){var d=c.getValue(b.row,0);console.log(d),a.getFeedbackYesNoDetail(d)}}var c=google.visualization.arrayToDataTable(ya),d={pieHole:.4,sliceVisibilityThreshold:0,legend:{display:!0,position:"right"}},e=new google.visualization.PieChart(document.getElementById("psfDefaultStats"));google.visualization.events.addListener(e,"select",b),e.draw(c,d)}var W=c.get("loggedInUserIdAdmin"),X=c.get("loggedInUserScIdAdmin"),Y=(c.get("loggedInUserBikeBrandAdmin"),"caller"),Z="branch",_="month",aa="month";a.selectedFromDate="month",a.selectedToDate="month";var ba="1 Year";E(),a.getSelectedDealer=function(a){console.log("==============",a),Z="branch",console.log(a),X=a,F(X),G(X),H(Y,Z,X),L(),N()},F(X),a.getSelectedBranch=function(a){console.log("selected branch",a),Z=a,null===a&&(Z="branch"),console.log("==============++++++++++++++++++",Z),H(Y,Z,X),L(),N()},G(X),a.getSelectedCaller=function(a){console.log(a),Y=a,null===a&&(Y="caller"),H(Y,Z,X),L(),N()},H(Y,Z,X);var ca;h.creTableData=[];var da;a.getPericularStatsData=function(b,c){a.statusDisplay=c,da=b,h.exportType=!0,a.filteredServiceDueTypes=[],D(!0),ca=c;var d=i.getToken(X);"export"===ka?(a.exportStatus="",q.open(f+"get_sales_feedback_stats_details/"+X+"/"+Y+"/"+Z+"/"+ca+"/"+ba+"/"+da+"/"+ka+"/"+d),D(!1),ka="submit"):"submit"===ka&&z.query({scId:X,callerId:Y,branchId:Z,status:ca,aniverseryType:ba,dataType:da,reportType:ka,token:d},function(a){console.log("ADMIN SALES PSF CUSTOMER DETAILS STATS WISE :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#adminDataTableModal").modal("show"),D(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),D(!1),$("#adminDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})},a.exportCustomerDetails=function(){ka="export",console.log(ka),a.getPericularStatsData(da,ca)},h.tableParams=new g({page:1,count:20},{total:h.creTableData.length,getData:function(b,c){var e=c.sorting()?d("orderBy")(h.creTableData,c.orderBy()):h.creTableData;e=c.filter()?d("filter")(e,c.filter()):e,a.orderedData=e,c.total(e.length),b.resolve(a.users=e.slice((c.page()-1)*c.count(),c.page()*c.count()))}},{counts:[10,20]}),h.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=h.tableParams.settings().counts,a.changePage=I,a.changePageSize=J,a.changePageSizes=K,a.feedBackDataColors1=["#2FCF92","#FB617F"],a.feedBackDataColors2=["#2FCF92","#FB617F"],a.feedBackDataSeries=[],a.feedBackData=[],a.feedBackDataLables=[];var ea=[];L();var fa,ga,ha,ia,ja="yesNo";a.getFeedbackYesNoDetail=function(b){a.exportStatus=ja,!0===Array.isArray(b)?(console.log("graph details :  :",b),console.log("graph lable status :  :",b[0]._model.datasetLabel),fa=b[0]._model.datasetLabel,ga=b[0]._model.label):Array.isArray(b),console.log("chartLabel",fa),angular.forEach(ea,function(a,b){void 0!==ea[b]&&ea[b].feedBackListId===fa&&(ha=ea[b].feedBackListId,console.log("Feedback List Id ::",ha))}),za&&(ia=b,M("1",b,ja,"submit")),za||M(ha,ga,ja,"submit")};var ka="submit";a.feedBackRatingDataColors1=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.feedBackRatingDataColors2=["#2FCF92","#2FCF92"],a.feedBackRatingDataSeries=[],a.feedBackRatingData=[],a.feedBackRatingDataLables=[];var la=[];N();var ma,na,oa,pa="rating";a.getFeedbackRatingDetail=function(b){a.exportStatus=pa,!0===Array.isArray(b)?(console.log("graph lable :  :",b[0]._model.datasetLabel),console.log("graph lable status :  :",b[0]._model.datasetLabel),ma=b[0]._model.datasetLabel,na=b[0]._model.label,"Rating-1"===na?na="1":"Rating-2"===na?na="2":"Rating-3"===na?na="3":"Rating-4"===na?na="4":"Rating-5"===na&&(na="5")):Array.isArray(b),angular.forEach(ea,function(a,b){void 0!==la[b]&&(console.log(ma),la[b].feedBackListId===ma&&(oa=la[b].feedBackListId,console.log("selectedRatingFeedbackListId",oa),console.log("Feedback List Id ::",oa)))}),O(oa,na,pa,"submit")},a.exportFeedbackCustomerDetails=function(a){console.log(a),za||("yesNo"===a?M(ha,ga,ja,"export"):"rating"===a&&O(oa,na,pa,"export")),za&&M("1",ia,ja,"export")},a.getHistory=function(a,b,c,d,e){console.log(c),void 0===d&&(d="status"),P(a,b),R(a,b),S(a),T(c,d),Q(e)};var qa="sales";a.viewCallRecord=function(a){q.open(a.recordingUrl,"_blank")},a.trustAsResourceUrl1=function(a){return console.log(a),b.trustAsResourceUrl(a)},a.customerMobileNumbers=[];var ra=[];a.getDetails=function(b,c){a.editPhoneSuccessMsg="",console.log(b),console.log(c),void 0!==c&&null!==c||(c="status"),T(b,c)},a.editPhoneNumber=function(b,c,d,f){console.log("selMobile",b),console.log("apptObj",c),a.editPhoneSuccessMsg="";var g={mobile:b,customerName:c.customer_name,chassisNo:c.chassisNo,scId:X,defaultNumber:d,customerId:c.customerId,customerStatus:f,dataType:"Sales"};console.log(JSON.stringify(g));var h=i.getToken(X);A.save({id:X,token:h},g,function(b){console.log(b),a.editPhoneSuccessMsg=b.message,e(function(){$("#editPhoneModal").modal("hide"),$("#activeDeactivePhoneModal").modal("hide"),T(c.apptId,a.statusDisplay)},2e3),a.phoneObj={},a.editPhoneForm.$setPristine()},function(b){console.log(b),a.editPhoneErrorMsg=b.data.message})};var sa,ta=!1,ua=!1,va=!1;a.getUpdateMobileStatus=function(b,c,d,f){sa=f,"active"===f?e(function(){ta=q.confirm("Are you sure to Activate this Mobile No.?"),ta?(console.log("Updating :",sa),a.editPhoneNumber(wa,c,d,sa),a.phoneObj={}):console.log("Cancelled the Activation Event")},300):"inactive"===f?e(function(){console.log(wa),console.log(a.tcAppointmentData.customer_mobile),wa===a.tcAppointmentData.customer_mobile?(alert("This is the Primary number.You cannot deactivate the number."),ua=!1):wa!==a.tcAppointmentData.customer_mobile&&(ua=q.confirm("Are you sure to Deactivate this Mobile No.?")),ua?(console.log("Updating :",sa),a.editPhoneNumber(wa,c,d,sa),a.phoneObj={}):console.log("Cancelled the Deactivation Event")},300):"primary"===f&&e(function(){console.log(wa),console.log(a.tcAppointmentData.customer_mobile),wa===a.tcAppointmentData.customer_mobile?(alert("This is already a Primary Number"),va=!1):wa!==a.tcAppointmentData.customer_mobile&&(va=q.confirm("Are you sure to make this Mobile No. as Primary?")),va?(console.log("Updating :",sa),a.editPhoneNumber(wa,c,d,sa),a.phoneObj={}):console.log("Cancelled the Making Primary Event")},300)},$("#activeDeactivePhoneModal").modal("hide");var wa;a.updateMobileStatus=function(b){a.mobileDisplay=b,b.substr(0,10)===a.tcAppointmentData.customer_mobile?a.primaryStatus=!0:b.substr(0,10)!==a.tcAppointmentData.customer_mobile&&(a.primaryStatus=!1),a.editPhoneSuccessMsg="",a.editPhoneErrorMsg="",console.log(b),null!==b&&(wa=b.substr(0,10),$("#activeDeactivePhoneModal").modal("show"))},a.clearActiveInactiveModal=function(){$("#activeDeactivePhoneModal").modal("hide")},a.feedBackDataDefaultSeries=[],a.feedBackDataDefaultLables=[];var xa=[],ya=[["Yes","No"]];U();var za=!1;$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("AdminTicketViewController",["$scope","$sce","serviceURL","$filter","$cookies","$rootScope","$http","$window","TokenService","GetSuperAdminDealerListService",function(a,b,c,d,e,f,g,h,i,j){function k(){var b=i.getToken(l);j.query({logInId:l,token:b},function(b){a.dealerList=b,angular.forEach(a.dealerList,function(b,c){console.log(a.dealerList[c].email);var d={email:a.dealerList[c].email};"No email"!=d.email&&(a.calculateTicketsStats(d,a.dealerList[c].scName),a.loaderIcon=!0)})},function(b){a.dealerListErrorMsg=b.data.message})}var l="369";k();var m="chinmayee.d@letsservice.in",n="Ticket@4492",o=window.btoa(m+":"+n);a.dealerTicketStats=[],a.statsCount=0,a.openTicketData=[],$("#openTicketModal").modal("hide"),a.calculateTicketsStats=function(b,c){a.openTicketData=[],a.loaderIcon=!0,console.log(b,c),a.statsCount=0,console.log("Count to zero",a.statsCount),g({method:"GET",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets?email="+b.email,headers:{"Content-Type":"application/json",Authorization:"Basic "+o}}).success(function(d){if(a.statsTicketDetails=d,a.statsTicketDetails.length>0&&angular.forEach(a.statsTicketDetails,function(b,d){2!==a.statsTicketDetails[d].status&&6!==a.statsTicketDetails[d].status&&7!==a.statsTicketDetails[d].status||(a.statsCount=a.statsCount+1,"open"===c&&a.openTicketData.push(a.statsTicketDetails[d]))}),console.log("Open Tickets Count",a.statsCount),"open"!==c&&a.dealerTicketStats.push({dealerName:c,openTicketCount:a.statsCount,email:b.email}),"open"===c&&a.openTicketData.length>0){$("#openTicketModal").modal("show");for(var e=0;e<a.openTicketData.length;e++)2===a.openTicketData[e].status?a.openTicketData[e].status="Open":3===a.openTicketData[e].status?a.openTicketData[e].status="Pending":4===a.openTicketData[e].status?a.openTicketData[e].status="Resolved":5===a.openTicketData[e].status?a.openTicketData[e].status="Closed":6===a.openTicketData[e].status?a.openTicketData[e].status="Assigned to Tech team":7===a.openTicketData[e].status?a.openTicketData[e].status="Waiting on Third Party":a.openTicketData[e].status="New Request"}console.log(a.dealerTicketStats),a.statsCount=0,a.loaderIcon=!1,console.log("Ticket details for count",a.statsTicketDetails),console.log("OPEN TICKETS DATA ::",a.openTicketData)}).error(function(b){a.loaderIcon=!1,console.log(b)})},a.retrieveTickets=function(b){console.log(b),a.loaderIcon=!0,g({method:"GET",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets?email="+b.selectedEmail,headers:{"Content-Type":"application/json",Authorization:"Basic "+o}}).success(function(b){a.successMsg=!0,a.ticketDetails=b,a.noTicketMsg=!1,a.loaderIcon=!1,console.log("Ticket details",a.ticketDetails);for(var c=0;c<a.ticketDetails.length;c++)2===a.ticketDetails[c].status?a.ticketDetails[c].status="Open":3===a.ticketDetails[c].status?a.ticketDetails[c].status="Pending":4===a.ticketDetails[c].status?a.ticketDetails[c].status="Resolved":5===a.ticketDetails[c].status?a.ticketDetails[c].status="Closed":6===a.ticketDetails[c].status?a.ticketDetails[c].status="Assigned to Tech team":a.ticketDetails[c].status="Waiting on Third Party";a.ticketObj={},a.retrieveTicketsForm.$setPristine()}).error(function(b){a.loaderIcon=!1,a.successMsg=!1,a.noTicketMsg="There are no tickets raised from this dealer",console.log(b)})},a.retrieveTicketsManually=function(b){a.loaderIcon=!0,g({method:"GET",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets?email="+b.ticketEmail,headers:{"Content-Type":"application/json",Authorization:"Basic "+o}}).success(function(b){a.successMsg=!0,a.noTicketMsg=!1,a.ticketDetails=b,a.loaderIcon=!1,console.log("Ticket details",a.ticketDetails);for(var c=0;c<a.ticketDetails.length;c++)2===a.ticketDetails[c].status?a.ticketDetails[c].status="Open":3===a.ticketDetails[c].status?a.ticketDetails[c].status="Pending":4===a.ticketDetails[c].status?a.ticketDetails[c].status="Resolved":5===a.ticketDetails[c].status?a.ticketDetails[c].status="Closed":a.ticketDetails[c].status="Assigned to Tech team";a.ticketData={},a.retrieveTicketsManuallyForm.$setPristine()}).error(function(b){a.loaderIcon=!1,a.successMsg=!1,a.noTicketMsg="There are no tickets raised from this user",console.log(b)})},a.getParticularTicketFullDetails=function(b){a.loaderIcon=!0,console.log(b),a.updateObj={updatedId:b.id,updatedSubject:b.subject,updatedDescription:b.description_text},g({method:"GET",url:"https://letsservicetechnolgy.freshdesk.com/api/v2/tickets/"+b.id+"/conversations",headers:{"Content-Type":"application/json",Authorization:"Basic "+o}}).success(function(b){a.ticketFullDetails=b,a.loaderIcon=!1,console.log("Ticket details",a.ticketFullDetails),0===a.ticketFullDetails.length?a.noConversationMsg="There are no conversations for this ticket yet.":a.noConversationMsg=""}).error(function(b){a.loaderIcon=!1,h.alert(b.errors[0].message),console.log(b)})}}]),angular.module("letsService").controller("CrmSupportStatsController",["$scope","$timeout","$filter","serviceURL","$state","$window","TokenService","$rootScope","ngTableParams","GetSupportDealerListService","GetDealerOverallStatsService","GetBrandListService","GetDealerStatsByBrandNameService","GetSupportDealerStatsService","GetFiveDaysDealerStatsService","GetDealerLiveSupportStatsService","GetDealerDetailedStatsService","GetDealerDetailsService","GetOverallBrandStatsService","GetDealerTopPerformanceStatsService","SendRenewalEmailService","BrandWiseModelService","GetBrandServiceSchedulesService","GetSuperAdminDealerListService","ClickToCallService","UpdateSupportCallStatusService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){function A(b){a.loaderIcon=b}function B(){var b=g.getToken(S);j.query({logInId:S,role:Q,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function C(){A(!0);var b=g.getToken(S);n.get({brand:T,logInId:S,token:b},function(b){a.dealerStats=b,A(!1),console.log("Support Dealeer Stats +++",b)},function(b){A(!1),a.dealerStatsErrorMsg=b.data.message})}function D(){var b=g.getToken(S);l.query({logInId:S,token:b},function(b){console.log("brandList +++",b),a.brandList=b},function(b){a.brandListErrorMsg=b.data.message})}function E(){a.dataErrorMsgFourMonthConversion=!1,a.callerWiseConversionChart={},a.callerWiseConversionData=[],a.callerWiseConversionLables=[],ca=[],da=[],ea=[],fa=[],a.selectedDealerOverall?(X="scId",Y=U):a.selectedBrand&&(X="brandName",Y=T),a.loaderIconFourMonthConversion=!0;var b=g.getToken(S);k.get({logInId:S,type:X,value:Y,status:W,token:b},function(b){console.log("Dealer  Stats :::",b),a.creDashboardDataErrorMsg="",a.callerWiseConversionStats=b;var c=b;void 0!==c.connectedCalls&&null!==c.connectedCalls&&angular.forEach(c.connectedCalls,function(b,d){ca.push(parseInt(c.connectedCalls[d].count)),a.callerWiseConversionLables.push(c.connectedCalls[d].label)}),void 0!==c.appointmentTaken&&null!==c.appointmentTaken&&angular.forEach(c.appointmentTaken,function(a,b){da.push(parseInt(c.appointmentTaken[b].count))}),void 0!==c.totalCallsMade&&null!==c.totalCallsMade&&angular.forEach(c.totalCallsMade,function(a,b){ea.push(parseInt(c.totalCallsMade[b].count))}),void 0!==c.serviceCenterComplaint&&null!==c.serviceCenterComplaint&&angular.forEach(c.serviceCenterComplaint,function(a,b){fa.push(parseInt(c.serviceCenterComplaint[b].count))}),a.callerWiseConversionData.push(ea),a.callerWiseConversionData.push(ca),a.callerWiseConversionData.push(da),a.callerWiseConversionData.push(fa),console.log(JSON.stringify(a.callerWiseConversionData)),console.log(JSON.stringify(a.callerWiseConversionLables)),console.log(JSON.stringify(a.callerWiseConversionSeries)),a.filteredCallerWiseConversionData=[],a.filteredCallerWiseConversionLables=[];for(var d=0;d<4;d++)a.filteredCallerWiseConversionData.push(a.callerWiseConversionData[d]);a.callerWiseConversionChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.callerWiseConversionLables,series:a.callerWiseConversionSeries,colors:["#FB617F","#ff9900","#2FCF92","#0083ca"],data:a.filteredCallerWiseConversionData},a.datasetOverrideCallerWiseConversionData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors},{fill:!0,backgroundColor:a.scComplaintColors}],a.loaderIconFourMonthConversion=!1},function(b){a.dataErrorMsgFourMonthConversion=!0,a.loaderIconFourMonthConversion=!1,a.creDashboardDataErrorMsg=b.data.message})}function F(a){console.log("reportType",ja),A(!0),ga=a;var b=g.getToken(S);"export"===ja?(f.open(d+"ls_connect_sub_dealers_details/"+S+"/"+T+"/"+ha+"/"+ga+"/"+ja+"/"+b),console.log(d+"ls_connect_sub_dealers_details/"+S+"/"+T+"/"+ha+"/"+ga+"/"+ja+"/"+b),ja="submit"):"submit"===ja&&r.query({logInId:S,brand:T,status:ha,date:ga,exportType:ja,token:b},function(a){console.log("Dealer DETAILS :",a),h.creTableData=a,h.creTableDataErrorMsg="",h.tableParams.reload(),h.tableParams.page(1),$("#dealerDetailedDataTableModal").modal("show"),A(!1)},function(a){console.log(a),h.creTableData=[],h.tableParams.reload(),A(!1),$("#dealerDetailedDataTableModal").modal("show"),h.creTableDataErrorMsg=a.data.message})}function G(b){a.totalPayment=0,console.log(T),ha=b,a.dataErrorMsgDealerStatsByMonth=!1,a.dealerCountByMonthChart={},a.dealerStatsByMonthData=[],a.dealerStatsByMonthLables=[],ka=[],a.loaderIconDealerStatsByMonth=!0;var c=g.getToken(S);q.query({logInId:S,brand:T,status:ha,token:c},function(b){console.log("Dealer DEtailed Stats:::",b),a.creDashboardDataErrorMsg="";var c=b;angular.forEach(c,function(b,d){c[d].amountPaid?c[d].amountPaid&&(a.totalPayment=parseInt(c[d].amountPaid)):(ka.push(parseInt(c[d].count)),a.dealerStatsByMonthLables.push(c[d].label))}),console.log(" $scope.totalPayment",a.totalPayment),a.dealerStatsByMonthData.push(ka),console.log(JSON.stringify(a.dealerStatsByMonthData)),console.log(JSON.stringify(a.dealerStatsByMonthLables)),a.filteredDealerStatsByMonthData=[];for(var d=0;d<1;d++)a.filteredDealerStatsByMonthData.push(a.dealerStatsByMonthData[d]);a.dealerCountByMonthChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.dealerStatsByMonthLables,series:a.dealerStatsByMonthSeries,colors:["#0083ca"],data:a.filteredDealerStatsByMonthData},a.datasetOverrideDealerStatsByMonthData=[{fill:!0,backgroundColor:a.scComplaintColors}],a.loaderIconDealerStatsByMonth=!1},function(b){a.dataErrorMsgDealerStatsByMonth=!0,a.loaderIconDealerStatsByMonth=!1,a.creDashboardDataErrorMsg=b.data.message})}function H(){a.dataErrorMsgDealerStatsFiveDays=!1,a.dealerStatsFiveDaysChart={},a.dealerStatsFiveDaysData=[],a.dealerStatsFiveDaysLables=[],la=[],ma=[],na=[],oa=[],a.selectedDealerFiveDays?(Z="scId",_=U):a.selectedBrand&&(Z="brandName",_=T),a.loaderIconDealerStatsFiveDays=!0;var b=g.getToken(S);o.get({logInId:S,type:Z,value:_,token:b},function(b){console.log("Dealer  Stats  S DAYS ::::",b),a.creDashboardDataErrorMsg="",a.dealerStatsFiveDays=b;var c=b;void 0!==c.connectedCalls&&null!==c.connectedCalls&&angular.forEach(c.connectedCalls,function(b,d){la.push(parseInt(c.connectedCalls[d].count)),a.dealerStatsFiveDaysLables.push(c.connectedCalls[d].date)}),void 0!==c.appointmentTaken&&null!==c.appointmentTaken&&angular.forEach(c.appointmentTaken,function(a,b){ma.push(parseInt(c.appointmentTaken[b].count))}),void 0!==c.totalCallsMade&&null!==c.totalCallsMade&&angular.forEach(c.totalCallsMade,function(a,b){na.push(parseInt(c.totalCallsMade[b].count))}),void 0!==c.serviceCenterComplaint&&null!==c.serviceCenterComplaint&&angular.forEach(c.serviceCenterComplaint,function(a,b){oa.push(parseInt(c.serviceCenterComplaint[b].count))}),a.dealerStatsFiveDaysData.push(na),a.dealerStatsFiveDaysData.push(la),a.dealerStatsFiveDaysData.push(ma),a.dealerStatsFiveDaysData.push(oa),console.log(JSON.stringify(a.dealerStatsFiveDaysData)),console.log(JSON.stringify(a.dealerStatsFiveDaysLables)),console.log(JSON.stringify(a.dealerStatsFiveDaysSeries)),a.filteredDealerStatsFiveDaysData=[];for(var d=0;d<4;d++)a.filteredDealerStatsFiveDaysData.push(a.dealerStatsFiveDaysData[d]);a.dealerStatsFiveDaysChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.dealerStatsFiveDaysLables,series:a.dealerStatsFiveDaysSeries,colors:["#FB617F","#ff9900","#2FCF92","#0083ca"],data:a.filteredDealerStatsFiveDaysData},a.datasetOverrideDealerStatsFiveDaysData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors},{fill:!0,backgroundColor:a.scComplaintColors}],a.loaderIconDealerStatsFiveDays=!1},function(b){a.dataErrorMsgDealerStatsFiveDays=!0,a.loaderIconDealerStatsFiveDays=!1,a.creDashboardDataErrorMsg=b.data.message})}function I(){a.dataErrorMsgDealerStatsLive=!1,a.dealerStatsLivesData=[],a.dealerStatsLiveLables=[],pa=[],qa=[],ra=[],sa=[],a.selectedDealerLive?(aa="scId",ba=U):a.selectedBrand&&(aa="brandName",ba=T);var b=g.getToken(S);p.get({logInId:S,type:aa,value:ba,token:b},function(b){console.log("Dealer  LIve Stats ::::",b),a.creDashboardDataErrorMsg="",a.dealerStatsLive=b;var c=b;void 0!==c.totalCallsMade&&null!==c.totalCallsMade&&angular.forEach(c.totalCallsMade,function(b,d){ra.push(parseInt(c.totalCallsMade[d].count)),a.dealerStatsLiveLables.push(c.totalCallsMade[d].minute)}),a.dealerStatsLivesData.push(ra),console.log("LIve",JSON.stringify(a.dealerStatsLivesData)),console.log("LIve",JSON.stringify(a.dealerStatsLiveLables)),console.log("LIve",JSON.stringify(a.dealerStatsLiveSeries)),a.filteredDealerStatsLiveData=[];for(var d=0;d<1;d++)a.filteredDealerStatsLiveData.push(a.dealerStatsLivesData[d]);setTimeout(I,5e3),a.dealerStatsLiveChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.dealerStatsLiveLables,series:a.dealerStatsLiveSeries,colors:["#FB617F","#ff9900","#2FCF92","#0083ca"],data:a.filteredDealerStatsLiveData}},function(b){a.dataErrorMsgDealerStatsLive=!0,a.creDashboardDataErrorMsg=b.data.message,setTimeout(I,5e3)})}function J(a){h.tableParams.page(a),h.tableParams.reload()}function K(a){h.tableParams.count(a)}function L(a){0===a.indexOf(h.tableParams.count())&&(a.push(h.tableParams.count()),a.sort()),h.tableParams.settings({counts:a})}function M(b){a.dataErrorMsgOverallBrandStats=!1,a.overallBrandChart={},a.overallBrandData=[],a.overallBrandLables=[],ta=[],ua=[],a.loaderIconOverallBrand=!0;var c=g.getToken(S);s.get({logInId:S,status:b,token:c},function(b){console.log("Overall Brand Stats ::::",b),a.creDashboardDataErrorMsg="",a.overallBrandStats=b;var c=b;void 0!==c.totalCallsMade&&null!==c.totalCallsMade&&angular.forEach(c.totalCallsMade,function(b,d){ta.push(parseInt(c.totalCallsMade[d].count)),a.overallBrandLables.push(c.totalCallsMade[d].bikeBrand)}),void 0!==c.appointmentTaken&&null!==c.appointmentTaken&&angular.forEach(c.appointmentTaken,function(a,b){ua.push(parseInt(c.appointmentTaken[b].count))}),a.overallBrandData.push(ta),a.overallBrandData.push(ua),a.filteredOverallBrandStatsData=[],a.filteredOverallBrandStatsLables=[];for(var d=0;d<2;d++)a.filteredOverallBrandStatsData.push(a.overallBrandData[d]);for(var d=0;d<9;d++)a.filteredOverallBrandStatsLables.push(a.overallBrandLables[d]);a.overallBrandChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.overallBrandLables,series:a.overallBrandStatsSeries,colors:["#FB617F","#2FCF92"],data:a.filteredOverallBrandStatsData},a.datasetOverrideOverallBrandData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.appointmentsColors}],a.loaderIconOverallBrand=!1},function(b){a.dataErrorMsgOverallBrandStats=!0,a.loaderIconOverallBrand=!1,a.creDashboardDataErrorMsg=b.data.message})}function N(){a.dataErrorMsgDealerStatsPerformace=!1,a.dealerStatsPerformaceChart={},a.dealerStatsPerformaceData=[],a.dealerStatsPerformaceLables=[],va=[],wa=[],xa=[],a.loaderIconDealerStatsPerformace=!0;var b=g.getToken(S);t.get({logInId:S,brand:T,token:b},function(b){console.log("Dealer Top Performance Stats  ::::",b),a.creDashboardDataErrorMsg="",a.dealerPerformanceStats=b;var c=b;void 0!==c.connectedCalls&&null!==c.connectedCalls&&angular.forEach(c.connectedCalls,function(b,d){va.push(parseInt(c.connectedCalls[d].count)),console.log("Performance Performance",c.connectedCalls[d].count),a.dealerStatsPerformaceLables.push(c.connectedCalls[d].dealerName)}),void 0!==c.appointmentTaken&&null!==c.appointmentTaken&&angular.forEach(c.appointmentTaken,function(a,b){wa.push(parseInt(c.appointmentTaken[b].count))}),void 0!==c.totalCallsMade&&null!==c.totalCallsMade&&angular.forEach(c.totalCallsMade,function(a,b){xa.push(parseInt(c.totalCallsMade[b].count))}),a.dealerStatsPerformaceData.push(xa),a.dealerStatsPerformaceData.push(va),a.dealerStatsPerformaceData.push(wa),console.log("Performance",JSON.stringify(a.dealerStatsPerformaceData)),a.filteredDealerStatsPerformanceData=[];for(var d=0;d<3;d++)a.filteredDealerStatsPerformanceData.push(a.dealerStatsPerformaceData[d]);a.dealerStatsPerformaceChart={options:{tooltipEvents:[],showTooltips:!0,tooltipCaretSize:0,onAnimationComplete:function(){this.showTooltip(this.segments,!0)},scales:{xAxes:[{stacked:!1}],yAxes:[{stacked:!1,ticks:{beginAtZero:!0,min:0}}]},legend:{display:!0,position:"bottom"}},labels:a.dealerStatsPerformaceLables,series:a.dealerStatsPerformaceSeries,colors:["#FB617F","#ff9900","#2FCF92"],data:a.dealerStatsPerformaceData},a.datasetOverrideDealerStatsPerformanceData=[{fill:!0,backgroundColor:a.attemptedColors},{fill:!0,backgroundColor:a.connectedColors},{fill:!0,backgroundColor:a.appointmentsColors}],a.loaderIconDealerStatsPerformace=!1},function(b){a.dataErrorMsgDealerStatsPerformace=!0,a.loaderIconDealerStatsPerformace=!1,a.creDashboardDataErrorMsg=b.data.message})}function O(a,b,c){var d=g.getToken(S),e={logInId:S,email:a,mobile:b,validTo:c};console.log(JSON.stringify(e)),u.save({id:S,token:d},e,function(a){console.log("sendRenewalEmail",a),f.alert(a.message)},function(a){console.log(a)})}var P=f.sessionStorage.getItem("loggedInSupportId"),Q=f.sessionStorage.getItem("loggedInSupportRole"),R=f.sessionStorage.getItem("loginMobile");a.supportRole=f.sessionStorage.getItem("loggedInSupportRole"),a.openCalendar=function(b,c){a.minDate=new Date,a.minValidToDate=new Date,a.minValidToDate.setDate(a.minValidToDate.getDate()+30),b.preventDefault(),b.stopPropagation(),"FromDate"===c?a.isOpenFrom=!0:"ToDate"===c&&(a.isOpenTo=!0)};var S=P;B();var T="all";C();var U;a.getSelectedDealer=function(a,b){console.log(a),U=a,"liveStats"===b?null!==a&&void 0!==a||(aa="all",ba="all"):"overAll"===b?(null!==a&&void 0!==a||(X="all",Y="all"),E()):"fiveDays"===b&&(null!==a&&void 0!==a||(Z="all",_="all"),H())},D(),a.getSelectedBrand=function(a,b){
console.log(a),console.log(b),T=a,null!==a&&void 0!==a||(T="all",X="all",Y="all"),"Performance"!==b&&(C(),E(),H()),"Performance"===b&&N()};var V="Daily",W="Daily",X="all",Y="all",Z="all",_="all",aa="all",ba="all";a.attemptedColors=["#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F","#FB617F"],a.connectedColors=["#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900","#ff9900"],a.appointmentsColors=["#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92","#2FCF92"],a.scComplaintColors=["#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca","#0083ca"],a.callerWiseConversionSeries=["Total Calls Made","Connected","Appointments Taken","SC Complaints"],a.callerWiseConversionData=[],a.callerWiseConversionLables=[];var ca=[],da=[],ea=[],fa=[];a.callerWiseConversionChart={},E();var ga,ha;a.exportType=!1,a.getDealerDetailedStats=function(b){a.statusForDetails=b,"dealerCount"===b?a.detailedHeader="Total Active Dealers":"callerCount"===b?a.detailedHeader="Total Active Callers":"onboardCount"===b?a.detailedHeader="Onboarded Dealers for current Month":"renewalCount"===b?(a.exportType=!1,a.detailedHeader="No. of Dealers to be Renewal for current Month"):"paymentCount"===b?(a.exportType=!1,a.detailedHeader="No of Dealers who purchased the SMS for current Month"):"smsReacharge"===b?(a.exportType=!0,ha=b,a.detailedHeader="No of Dealers who needs to be Recharge SMS",F("date")):"salesUpload"===b?(a.exportType=!0,ha=b,F("date"),a.detailedHeader="Dealers who delayed in Uploading Sales Data"):"jobcardUpload"===b?(a.exportType=!0,ha=b,a.detailedHeader="Dealers who delayed in Uploading Jobcard Data",F("date")):"nonPerformer"===b?(a.exportType=!0,ha=b,a.detailedHeader="Last 3 Days Non Performing Dealers",F("date")):"serviceSchedule"===b&&(ha=b,a.detailedHeader="Dealers Service Schedule"),"smsReacharge"!==b&&"nonPerformer"!==b&&"jobcardUpload"!==b&&"salesUpload"!==b&&"serviceSchedule"!==b&&G(b)};var ia;a.getDealerDetails=function(a){if(console.log("status :  :",Array.isArray(a)),!0===Array.isArray(a)){console.log("graph model :  :",a[0]),console.log("graph lable :  :",a[0]._model.label),console.log("graph lable status :  :",a[0]._model.datasetLabel),console.log("selected status::",ha),ia=a[0]._model.label;var b=ia.indexOf(" ");console.log("index ::",b),ia=ia.substring(0,b)}else Array.isArray(a);console.log("Filered Date :: ",ia),"dealerCount"!==ha&&"callerCount"!==ha&&F(ia)};var ja="submit";h.creTableData=[],a.exportDealerDetails=function(){ja="export",F("date")},a.dealerStatsByMonthSeries=["Dealer Count"],a.dealerStatsByMonthData=[],a.dealerStatsByMonthLables=[];var ka=[];a.totalPayment=0,a.dealerCountByMonthChart={},a.dealerStatsFiveDaysSeries=["Total Calls Made","Connected","Appointments Taken","SC Complaints"],a.dealerStatsFiveDaysData=[],a.dealerStatsFiveDaysLables=[];var la=[],ma=[],na=[],oa=[];a.dealerStatsFiveDaysChart={},H(),a.dealerStatsLiveSeries=["Total Calls Made"],a.dealerStatsLivesData=[],a.dealerStatsLiveLables=[];var pa=[],qa=[],ra=[],sa=[];a.dealerStatsLiveChart={},I(),h.tableParams=new i({page:1,count:20},{total:h.creTableData.length,getData:function(b,d){var e=d.sorting()?c("orderBy")(h.creTableData,d.orderBy()):h.creTableData;e=d.filter()?c("filter")(e,d.filter()):e,a.orderedData=e,d.total(e.length),b.resolve(a.users=e.slice((d.page()-1)*d.count(),d.page()*d.count()))}},{counts:[10,20]}),h.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=h.tableParams.settings().counts,a.changePage=J,a.changePageSize=K,a.changePageSizes=L,a.calenderList=[{id:"1",name:"Daily"},{id:"2",name:"Weekly"},{id:"3",name:"Monthly"},{id:"4",name:"Yearly"}],a.selectedCalender=a.calenderList[0].name,a.selectedCalenderDealer=a.calenderList[0].name,a.getSelectedCalender=function(a,b){null!==a&&void 0!==a||(a="Daily"),V=a,"brand"===b?M(V):"dealer"===b&&(W=a,E())},a.overallBrandStatsSeries=["Total Calls Made","Appointments Taken"],a.overallBrandData=[],a.overallBrandLables=[];var ta=[],ua=[];a.overallBrandChart={},M(V),a.selectedBrandPerformance="all",a.dealerStatsPerformaceSeries=["Total Calls Made","Connected","Appointments Taken"],a.dealerStatsPerformaceData=[],a.dealerStatsPerformaceLables=[];var va=[],wa=[],xa=[];a.dealerStatsPerformaceChart={},N();var ya=!1;a.sendMailForRenewal=function(a){console.log(a.email),ya=f.confirm("Are you sure to Send Email?"),ya?O(a.email,a.mobile,a.validTo):ya||console.log("Cancelled Email")},a.getVehicleModels=function(b){g.getToken(S);v.query({brandName:b},function(b){console.log("Brand Wise Models",b),a.brandWiseVehicleTypes=b},function(a){console.log(a)})},a.getServiceSchedules=function(b){a.loaderIconServiceSchedule=!0,a.serviceSchedulesDataErrorMsg="";var c=g.getToken(S);w.query({logInId:S,brand:b,token:c},function(b){console.log("service schedules",b),a.serviceSchedulesData=b,a.loaderIconServiceSchedule=!1,a.serviceSchedulesDataErrorMsg=""},function(b){console.log(b),a.loaderIconServiceSchedule=!1,a.serviceSchedulesDataErrorMsg=b.data.message})},a.showUpdateStatus=!1;var za;a.clickToCall=function(b){a.showUpdateStatus=!1,console.log(b);var c={dealerId:b.dealerId,logInId:S,customerName:b.scName,mobile:b.mobile,callerMobile:R};console.log("Post data",c);var d=g.getToken(S);y.save({loginId:S,token:d},c,function(c){console.log("Post Call Details to backend::",c),f.alert(c.message),za=c.recordId,a.dealerRowId=b.slNo,a.showUpdateStatus=!0},function(b){a.showUpdateStatus=!1,console.log(b)})},a.updateSupportCall=function(b){a.updateSuccessMsg="",a.updateErrorMessage="";var c={recordId:za,status:b};console.log("update status",JSON.stringify(c));var d=g.getToken(S);z.save({loginId:S,token:d},c,function(b){console.log("Update status resp::",b),a.updateSuccessMsg=b.message,a.updateErrorMessage="",a.updateObj={},a.reasonForm.$setPristine(),a.showUpdateStatus=!1},function(b){console.log(b),a.updateSuccessMsg="",a.updateErrorMessage=b.data.message})},a.clearUpdateMsg=function(){a.updateSuccessMsg="",a.updateErrorMessage=""},$(document).ready(function(){$('[data-toggle="popover"]').popover({placement:"top",trigger:"hover"})})}]),angular.module("letsService").controller("CrmSupportLoginCtrl",["$scope","$window","$cookies","$http","$state","$filter","$rootScope","TokenService","AdminGoogleLoginService","toastr",function(a,b,c,d,e,f,g,h,i,j){function k(){navigator.geolocation?navigator.geolocation.getCurrentPosition(l):b.alert("Geolocation is not supported by this browser")}function l(a){d.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+a.coords.latitude+","+a.coords.longitude).then(function(a){a.data.results&&(console.log(a.data),void 0!==a.data.results[0]&&(n=a.data.results[0].formatted_address),console.log("user Login Location ::",n))},function(a){console.log(a)})}function m(a){console.log(JSON.stringify(a));var c={emailId:a.email};console.log(JSON.stringify(c));var d=parseInt(100*Math.random()),f=h.getToken(d);i.save({id:d,token:f},c,function(c){console.log("data:::",c),j.success("You are Successfully logged in LetsService Support Console as "+a.username,"LetsService"),b.sessionStorage.setItem("loggedInUser",a.username),b.sessionStorage.setItem("loggedInSupportRole",c.role),b.sessionStorage.setItem("loggedInSupportId",c.logInId),b.sessionStorage.setItem("loginMobile",c.callermobile),g.letsServiceSupportInitialization(),"support"===c.role?e.go("supportView"):"admin"===c.role?e.go("supportStats"):"superadmin"===c.role&&e.go("supportView")},function(a){console.log(a),console.log(a.data.message),j.info(a.data.message,"LetsService")})}var n,o=parseInt(100*Math.random());h.getToken(o);k(),a.$on("event:google-plus-signin-success",function(c,e){console.log("authResult",e),b.sessionStorage.clear(),b.localStorage.clear(),a.msg="",d.get("https://www.googleapis.com/plus/v1/people/me",{params:{access_token:e.Zi.access_token}}).then(function(a){console.log("res ++++",a),m({email:a.data.emails[0].value,username:a.data.displayName,location:n})},function(a){console.log(a)})}),a.$on("event:google-plus-signin-failure",function(a,b){console.log(a),console.log(b)})}]),angular.module("letsService").controller("CrmDeveloperConsoleCtrl",["$scope","$window","$rootScope","$timeout","$filter","ngTableParams","$cookies","TokenService","GetDetailsByChassisNoService","GetSuperAdminDealerListService","GetDevConsoleCallerDetailsService",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=h.getToken(r);j.query({logInId:r,token:b},function(b){a.dealerList=b,console.log("dealerList +++",b)},function(b){a.dealerListErrorMsg=b.data.message})}function m(a){c.tableParams.page(a),c.tableParams.reload()}function n(a){c.tableParams.count(a)}function o(a){0===a.indexOf(c.tableParams.count())&&(a.push(c.tableParams.count()),a.sort()),c.tableParams.settings({counts:a})}var p,q,r="369";l(),a.getSelectedDealer=function(a){console.log(a),p=a},a.getDetailsByChassisNo=function(b){a.salesDetailsErrorMsg=!1,a.insuranceDetailsErrorMsg=!1,a.psfDetailsErrorMsg=!1,a.detailsErrorMsg="",a.loader=!0,console.log(b),q=b;var c=h.getToken(p);i.get({chassisNo:q,scId:p,token:c},function(b){a.details=b.appointment_details,a.detailsErrorMsg="",a.serviceDetails=b.serviceDetails,a.jobcardDetails=b.jobcardDetails,a.salesDetails=b.salesDetails,a.insuranceDetails=b.insuranceDetails,a.psfDetails=b.psfDetails,Array.isArray(a.salesDetails)||(a.salesDetailsErrorMsg=!0),Array.isArray(a.insuranceDetails)||(a.insuranceDetailsErrorMsg=!0),Array.isArray(a.psfDetails)||(a.psfDetailsErrorMsg=!0),console.log("details by chassis no.::",b),a.loader=!1},function(b){a.details=[],a.serviceDetails=[],a.jobcardDetails=[],a.loader=!1,a.detailsErrorMsg=b.data.message})},c.creTableData=[];var s;a.getCallerDetailsDetails=function(b,d){a.loader=!0,s=d;var e=h.getToken(p);k.query({sapptId:b,status:s,scId:p,token:e},function(b){console.log("DEV CONSOLE CALL DETAILS :",b),c.creTableData=b,c.creTableDataErrorMsg="",c.tableParams.reload(),c.tableParams.page(1),$("#adminDataTableModal").modal("show"),a.loader=!1},function(b){console.log(b),c.creTableData=[],c.tableParams.reload(),a.loader=!1,$("#adminDataTableModal").modal("show"),c.creTableDataErrorMsg=b.data.message})},c.tableParams=new f({page:1,count:20},{total:c.creTableData.length,getData:function(b,d){var f=d.sorting()?e("orderBy")(c.creTableData,d.orderBy()):c.creTableData;f=d.filter()?e("filter")(f,d.filter()):f,a.orderedData=f,d.total(f.length),b.resolve(a.users=f.slice((d.page()-1)*d.count(),d.page()*d.count()))}},{counts:[10,20]}),c.tableParams.settings().counts=[10,20,50,100],a.selectedPageSizes=c.tableParams.settings().counts,a.changePage=m,a.changePageSize=n,a.changePageSizes=o}]),angular.module("letsService").factory("AdminLoginService",["serviceURL","$resource",function(a,b){return b(a+"lscrmsaas/crm_login/:id/:token")}]),angular.module("letsService").factory("TeleCallerStatusService",["serviceURL","$resource",function(a,b){return b(a+"get_appt_status_list/:id/:token")}]),angular.module("letsService").factory("TeleCallerDataTypeService",["serviceURL","$resource",function(a,b){return b(a+"get_dataType_list/:id/:token")}]),angular.module("letsService").factory("TeleCallerDateWiseDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_appointment_details/:fromDate/:toDate/:dealerId/:role/:subStatus/:dataTypeId/:loginId/:id/:token")}]),angular.module("letsService").factory("TeleCallerStatusWiseDataService",["serviceURL","$resource",function(a,b){return b(a+"get_callerwise_and_status_wise_month_details/:status/:dateRange/:scId/:callerId/:token")}]),angular.module("letsService").factory("TeleCallerStatsDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_appt_target_count/:loginId/:id/:token")}]),angular.module("letsService").factory("TeleCallerPerticularAppointmentDataService",["serviceURL","$resource",function(a,b){return b(a+"get_particular_appt_details/:apptId/:scId/:status/:callerId/:token")}]),angular.module("letsService").factory("TeleCallerPerticularAppointmentHistoryDataService",["serviceURL","$resource",function(a,b){return b(a+"get_particular_appt_history_details/:chassisNo/:id/:dataTypeId/:bikeBrand/:token")}]),angular.module("letsService").factory("ServiceTypeService",["serviceURL","$resource",function(a,b){return b(a+"get_service_history_details/:chassisNo/:id/:bikeBrand/:token")}]),angular.module("letsService").factory("AssistanceTypeService",["serviceURL","$resource",function(a,b){return b(a+"getAssistanceTypeDetail")}]),angular.module("letsService").factory("TeleCallerReasonService",["serviceURL","$resource",function(a,b){return b(a+"get_status_wise_substatus_list/:status/:id/:token")}]),angular.module("letsService").factory("ScComplaintSubStatusService",["serviceURL","$resource",function(a,b){return b(a+"get_sccomplaint_status_list/:id/:token")}]),angular.module("letsService").factory("TCAppointmentStatusUpdateService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_crm_appointment_status/:id/:token")}]),angular.module("letsService").factory("TeleCallingSearchService",["serviceURL","$resource",function(a,b){return b(a+"search_appt_details_by_keyword/:key/:scId/:callerId/:dataTypeId/:token")}]),angular.module("letsService").factory("TcAdminDashboardService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_status_stats/:fromDate/:toDate/:tcId/:id/:branchId/:callerId/:datatypeId/:token")}]),angular.module("letsService").factory("GetFeedbackTitleService",["serviceURL","$resource",function(a,b){return b(a+"get_customer_feedback_list/:id/:token")}]),angular.module("letsService").factory("TeleCallerWiseServiceCenterService",["serviceURL","$resource",function(a,b){return b(a+"get_sc_branch_list/:id/:token")}]),angular.module("letsService").factory("GetCallerWiseServiceCenterService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_wise_sc_brach_list/:callerId/:id/:token")}]),angular.module("letsService").factory("GetScWiseTeleCallerService",["serviceURL","$resource",function(a,b){return b(a+"get_sc_wise_caller_list/:id/:token")}]),angular.module("letsService").factory("TcAdminDashboardDetailService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_status_details/:fromDate/:toDate/:status/:subStatus/:tcId/:id/:branchId/:callerId/:datatypeId/:export/:feedBackListId/:token")}]),angular.module("letsService").factory("FeedBackDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_customer_feed_back_details/:id/:token")}]),angular.module("letsService").factory("TeleCallingCallService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_caller_temp_call_logs/:id/:token")}]),angular.module("letsService").factory("CreateTeleCallerService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/create_new_caller/:id/:token")}]),angular.module("letsService").factory("GetScSMSStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_sms_stats/:scId/:token")}]),angular.module("letsService").factory("SendSMSService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/send_bulk_sms/:id/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/upload_sc_data/:id/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadJobcardDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/update_sc_jobcard_data/:id/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadServiceReminderDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/upload_service_remainder_data/:id/:token")}]),angular.module("letsService").factory("TeleCallerCSVUploadServiceReminderDataService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"file_upload/"+c.get("loggedInUserBikeBrand")+"/upload_service_reminder_data_v1/:id/:token")}]),angular.module("letsService").factory("TeleCallerCSVUploadJobCardDataService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"file_upload/"+c.get("loggedInUserBikeBrand")+"/upload_job_card_data_v1/:id/:token")}]),angular.module("letsService").factory("TeleCallerCSVUploadRegularDataService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"file_upload/"+c.get("loggedInUserBikeBrand")+"/upload_sc_data_v1/:id/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadSalesFeedbackDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/upload_sales_feedback_data/:id/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadAMCDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/upload_amc_sc_data/:id/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadAMCDataUtilityService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/upload_amc_data/:id/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadExtendedWarrantyDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/upload_extended_warranty_data_suzuki/:id/:token")}]),angular.module("letsService").factory("TeleCallerPickAndDropUpdateService",["serviceURL","$resource",function(a,b){return b(a+"utility/create_crm_saas_pick_and_drop_appointment/:id/:token")}]),angular.module("letsService").factory("PickupAndDropAssistanceAmountService",["pickupAndDropServiceURL","$resource",function(a,b){return b(a+"get_service_center_wise_pricing_list/:scId/:token")}]),angular.module("letsService").factory("GetSCLocationBrandService",["pickupAndDropServiceURL","$resource",function(a,b){return b(a+"get_service_center_latlng/:scId/:token")}]),angular.module("letsService").factory("CheckAMCUserService",["pickupAndDropServiceURL","$resource",function(a,b){return b(a+"check_amc_user/:bikeNo/:dateTime/:scId/:token")}]),angular.module("letsService").factory("PickupAndDropSlotService",["pickupAndDropServiceURL","$resource",function(a,b){return b(a+"get_appt_time_slots/:date/:assistance_type/:scId/:cityId/:zoneCode/:token")}]),angular.module("letsService").factory("TeleCallerFeedbackRatingService",["serviceURL","$resource",function(a,b){return b(a+"get_customer_psf_rating_sub_status_stats/:fromDate/:toDate/:tcId/:id/:branchId/:callerId/:datatypeId/:token")}]),angular.module("letsService").factory("AddFeedbackQuestionService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_feedback_list/:scId/:token")}]),angular.module("letsService").factory("UpdateFeedbackQuestionService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/update_customer_feed_back_list/:scId/:token")}]),angular.module("letsService").factory("TeleCallerSalesFeedbackDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_wise_sales_feedback_details/:fromDate/:status/:branchId/:scId/:token")}]),angular.module("letsService").factory("UpdateCustomerPhoneService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_customer_mobile_number/:id/:token")}]),angular.module("letsService").factory("AdminProfileInformation",["serviceURL","$resource",function(a,b){return b(a+"get_admin_profile_details/:scId/:token")}]),angular.module("letsService").factory("AppointmentDueTypeStats",["serviceURL","$resource",function(a,b){return b(a+"get_admin_free_and_paid_appointment_stats/:fromDate/:toDate/:status/:adminId/:scId/:branchId/:callerId/:dataTypeId/:token")}]),angular.module("letsService").factory("ConversionDueTypeStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_free_and_paid_conversion_stats/:fromDate/:toDate/:status/:adminId/:scId/:branchId/:callerId/:dataTypeId/:token")}]),angular.module("letsService").factory("TCInsuranceStatusUpdateService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_crm_insurance_appointment_status/:id/:token")}]),angular.module("letsService").factory("NotificationCountService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_future_overdue_count/:scId/:callerId/:token")}]),angular.module("letsService").factory("GetInsuranceHistoryService",["serviceURL","$resource",function(a,b){return b(a+"get_insurance_appt_history_details/:chassisno/:dealerId/:token")}]),angular.module("letsService").factory("GetAdminCallerDashboardConversionStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_status_substatus_stats/:fromDate/:toDate/:status/:callerId/:scId/:branch/:dataType/:token")}]),angular.module("letsService").factory("GetAdminCallerConversionService",["serviceURL","$resource",function(a,b){return b(a+"get_status_wise_conversion_stats/:fromDate/:toDate/:callerId/:scId/:branch/:dataType/:token")}]),angular.module("letsService").factory("GetCallerWiseRevenueStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_revenue_stats/:id/:type/:scId/:brandName/:reportType/:branch/:dataType/:token")}]),angular.module("letsService").factory("GetServiceCenterComplaintsService",["serviceURL","$resource",function(a,b){return b(a+"get_sc_complaint_stats/:fromDate/:toDate/:callerId/:scId/:branch/:dataType/:token")}]),angular.module("letsService").factory("GetServiceCenterJobcardStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_customer_visted_stats/:branchId/:scId/:brandName/:reportType/:token")}]),angular.module("letsService").factory("GetCallerWiseConversionStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_wise_last_four_month_appt_stats/:callerId/:scId/:branch/:dataType/:token")}]),angular.module("letsService").factory("GetYearWiseCustomerStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_year_wise_unique_customer_stats/:branchId/:scId/:brandName/:token")}]),angular.module("letsService").factory("GetOnTimeDeliveryStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_ontime_delivery_stats/:branchId/:scId/:brandName/:token")}]),angular.module("letsService").factory("ResetCallerCredentialsService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/reset_caller_credentials/:scId/:token")}]),angular.module("letsService").factory("NotifyLicenseService",["serviceURL","$resource",function(a,b){return b(a+"notify_licence_renewal/:scId/:status/:token")}]),angular.module("letsService").factory("CrmDateOfSaleListService",["serviceURL","$resource",function(a,b){return b(a+"get_new_customer_details/:scId/:branchId/:exportType/:bikeBrand/:token")}]),angular.module("letsService").factory("UpdateDateOfSaleService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/update_bike_dateofsale/:scId/:token")}]),angular.module("letsService").factory("AdminCustomerDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_wise_last_four_month_appt_details/:scId/:callerId/:branchId/:month/:status/:reportType/:dataType/:token")}]),angular.module("letsService").factory("AdminCustomerDetailsStatusWiseService",["serviceURL","$resource",function(a,b){return b(a+"get_status_substatus_details/:fromDate/:toDate/:status/:subStatus/:callerId/:branchId/:scId/:reportType/:dataType/:token")}]),angular.module("letsService").factory("AdminCustomerDetailsScComplaintWiseService",["serviceURL","$resource",function(a,b){return b(a+"get_sc_complaint_details/:fromDate/:toDate/:status/:subStatus/:callerId/:branchId/:scId/:reportType/:dataType/:token")}]),angular.module("letsService").factory("AdminCustomerDetailsStatsWiseService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_dashboard_details/:scId/:callerId/:dataTypeId/:status/:scheduleType/:subStatus/:branchId/:reportType/:token")}]),angular.module("letsService").factory("AdminCustomerCompletePotentialDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_pontential_allocated_details/:fromDate/:toDate/:scId/:callerId/:dataTypeId/:status/:scheduleType/:branchId/:reportType/:token")}]),angular.module("letsService").factory("AdminCustomerPotentialDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_pontential_servicedue_details/:fromDate/:toDate/:scId/:callerId/:dataTypeId/:status/:scheduleType/:branchId/:reportType/:token")}]),angular.module("letsService").factory("GetSuperAdminDealerListService",["serviceURL","$resource",function(a,b){return b(a+"get_superadmin_wise_dealer_list/:logInId/:token")}]),angular.module("letsService").factory("SupportQuestionEmailService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/send_support_query/:id/:token")}]),angular.module("letsService").factory("GetDueTypeStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_status_and_service_type_wise_stats/:fromDate/:toDate/:scId/:callerId/:branchId/:token")}]),angular.module("letsService").factory("GetCustomerVisitedCountService",["serviceURL","$resource",function(a,b){return b(a+"get_customer_repetitive_visted_stats/:scId/:token")}]),angular.module("letsService").factory("GetOutsideCustomerVisitService",["serviceURL","$resource",function(a,b){return b(a+"get_outside_customer_stats/:scId/:token")}]),angular.module("letsService").factory("GetServiceAdvisorStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_service_advisor_stats/:scId/:branchId/:token")}]),angular.module("letsService").factory("SalesFeedBackDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_customer_sales_feed_back_details/:id/:token")}]),angular.module("letsService").factory("GetBranchWiseTeleCallerService",["serviceURL","$resource",function(a,b){return b(a+"get_branch_wise_caller_list/:branchId/:id/:token")}]),angular.module("letsService").factory("GetFeedbackYesNoStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_service_feedback_yesno_stats/:fromDate/:toDate/:scId/:caller/:branch/:token")}]),angular.module("letsService").factory("GetFeedbackRatingStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_service_feedback_rating_stats/:fromDate/:toDate/:scId/:caller/:branch/:token")}]),angular.module("letsService").factory("GetFeedbackDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_service_feedback_details/:fromDate/:toDate/:scId/:callerId/:branchId/:feedBackListId/:feedBackStatus/:status/:exportType/:token")}]),angular.module("letsService").factory("GetMonthWisePotentialCustomerService",["serviceURL","$resource",function(a,b){return b(a+"get_month_wise_potential_customer_stats/:scId/:fromDate/:toDate/:branchId/:exportType/:token")}]),angular.module("letsService").factory("TeleCallerLSHistoryDataService",["serviceURL","$resource",function(a,b){return b(a+"get_appt_scheduled_history/:chassisNo/:scId/:token")}]),angular.module("letsService").factory("InsuranceCallRecordingService",["serviceURL","$resource",function(a,b){return b(a+"get_appt_wise_insurance_recording_list/:chassisNo/:logInId/:scId/:dataTypeId/:token")}]),angular.module("letsService").factory("PostTicketDetailsService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/create_ticket/:scId/:token")}]),angular.module("letsService").factory("SalesFeedbackPerformanceStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_feedback_stats/:callerId/:scId/:dataType/:branchId/:token")}]),angular.module("letsService").factory("SalesFeedbackPerformanceDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_feedback_stats_details/:scId/:callerId/:branchId/:status/:aniverseryType/:dataType/:reportType/:token")}]),angular.module("letsService").factory("GetSMSTemplateLableListService",["serviceURL","$resource",function(a,b){return b(a+"get_smstemplate_list/:scId/:token")}]),angular.module("letsService").factory("GetPotentialCustomerDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_month_wise_potential_customer_details/:scId/:date/:status/:branchId/:reportType/:token")}]),angular.module("letsService").factory("GetDealerOverallStatsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_calenderWise_dealer_stats/:logInId/:type/:value/:status/:token")}]),angular.module("letsService").factory("GetBrandListService",["serviceURL","$resource",function(a,b){return b(a+"get_brandName_list/:logInId/:token")}]),angular.module("letsService").factory("GetDealerStatsByBrandNameService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_brand_wise_stats/:logInId/:brandName/:token")}]),angular.module("letsService").factory("GetSupportDealerListService",["serviceURL","$resource",function(a,b){return b(a+"get_support_dealer_wise_list/:logInId/:role/:token")}]),angular.module("letsService").factory("GetSupportDealerStatsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_dealers_info/:brand/:logInId/:token")}]),angular.module("letsService").factory("GetFiveDaysDealerStatsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_dealer_dateWise_stats/:logInId/:type/:value/:token")}]),angular.module("letsService").factory("GetDealerLiveSupportStatsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_dealer_live_stats/:logInId/:type/:value/:token")}]),angular.module("letsService").factory("GetDealerDetailedStatsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_sub_dealers_info/:logInId/:brand/:status/:token")}]),angular.module("letsService").factory("GetDealerDetailsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_sub_dealers_details/:logInId/:brand/:status/:date/:exportType/:token")}]),angular.module("letsService").factory("GetOverallBrandStatsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_calenderWise_brand_stats/:logInId/:status/:token")}]),angular.module("letsService").factory("GetDealerTopPerformanceStatsService",["serviceURL","$resource",function(a,b){return b(a+"ls_connect_top_performer_stats/:logInId/:brand/:token")}]),angular.module("letsService").factory("ClickToCallService",["serviceURL","$resource",function(a,b){
return b(a+"crm_saas_admin/lsConnect_support_click_to_call/:loginId/:token")}]),angular.module("letsService").factory("UpdateSupportCallStatusService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/lsConnect_support_call_status/:loginId/:token")}]),angular.module("letsService").factory("InactiveDateOfSaleDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/update_invalid_chassis_status/:id/:token")}]),angular.module("letsService").factory("SendRenewalEmailService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/send_renewal_mail/:id/:token")}]),angular.module("letsService").factory("AdminGoogleLoginService",["serviceURL","$resource",function(a,b){return b(a+"lscrmsaas/ls_connect_support_login/:id/:token")}]),angular.module("letsService").factory("GetBrandServiceSchedulesService",["serviceURL","$resource",function(a,b){return b(a+"get_lsConnect_service_schedule_logic/:logInId/:brand/:token")}]),angular.module("letsService").factory("GetDetailsByChassisNoService",["serviceURL","$resource",function(a,b){return b(a+"get_chassisNoData/:chassisNo/:scId/:token")}]),angular.module("letsService").factory("GetDevConsoleCallerDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_chassisNo_calldetails/:sapptId/:status/:scId/:token")}]),angular.module("letsService").service("GetLatLngService",["$window","$http","$q",function(a,b,c){return{getLocationCoordinates:function(a){var d=c.defer();return b.get("https://maps.googleapis.com/maps/api/geocode/json?address="+a+"&key=AIzaSyB4xBoRvGCJOG_Kv-p8pwy8QraS4ZYqE1o").then(function(a){a.data.results[0]?d.resolve(a.data.results[0].geometry.location.lat+","+a.data.results[0].geometry.location.lng):d.resolve(!1)},function(a){console.log(a),d.reject(a)}),d.promise}}}]),angular.module("letsService").factory("GetSMSHistoryService",["serviceURL","$resource",function(a,b){return b(a+"get_sent_sms_list/:scId/:export/:fromDate/:toDate/:token")}]),angular.module("letsService").factory("GetUploadHistoryService",["serviceURL","$resource",function(a,b){return b(a+"get_file_upload_history/:scId/:token")}]),angular.module("letsService").factory("GetAssignHistoryService",["serviceURL","$resource",function(a,b){return b(a+"get_assigned_data_history/:scId/:token")}]),angular.module("letsService").factory("GetCallerService",["serviceURL","$resource",function(a,b){return b(a+"get_active_and_inactive_caller_list/:scId/:token")}]),angular.module("letsService").factory("ManageCallerService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/update_caller_status/:id/:token")}]),angular.module("letsService").factory("AssignCallerService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/set_caller_wise_target/:id/:token")}]),angular.module("letsService").factory("CallingPendingStatsService",["serviceURL","$resource",function(a,b){return b(a+"caller_pending_appt_stats/:loginId/:id/:token")}]),angular.module("letsService").factory("CallingPendingStatsDetailsService",["serviceURL","$resource",function(a,b){return b(a+"caller_pending_appt_stats_details/:callerId/:scId/:status/:token")}]),angular.module("letsService").factory("TeleCallerHourWiseDataService",["serviceURL","$resource",function(a,b){return b(a+"get_hour_wise_caller_stats/:date/:scId/:callerId/:branch/:status/:token")}]),angular.module("letsService").factory("TeleCallerWeeklyWiseDataService",["serviceURL","$resource",function(a,b){return b(a+"get_last_seven_days_caller_stats/:date/:scId/:callerId/:branch/:status/:token")}]),angular.module("letsService").factory("TeleCallerJobCardDataService",["serviceURL","$resource",function(a,b){return b(a+"get_jobcard_stats/:scId/:branchId/:token")}]),angular.module("letsService").factory("TeleCallerCallStatsDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_wise_live_stats/:scId/:dataType/:token")}]),angular.module("letsService").factory("TeleCallerDataTypeStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_datatype_stats/:fromDate/:toDate/:scId/:callerId/:token")}]),angular.module("letsService").factory("TeleCallerStatusDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_status_stats/:fromDate/:toDate/:id/:token")}]),angular.module("letsService").factory("TeleCallingCallRecordService",["serviceURL","$resource",function(a,b){return b(a+"get_appt_wise_recording_list/:chassisNo/:logInId/:scId/:dataTypeId/:token")}]),angular.module("letsService").factory("TeleCallingSMSPackageService",["serviceURL","$resource",function(a,b){return b(a+"get_sms_package_list/:scId/:token")}]),angular.module("letsService").factory("TeleCallingSMSPricingService",["serviceURL","$resource",function(a,b){return b(a+"get_sms_pricing/:smsCount/:scId/:token")}]),angular.module("letsService").factory("UpdateTelecallerServiceCenterService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_service_ceneter/:id/:token")}]),angular.module("letsService").factory("UpdatePickupAndDropService",["pickupAndDropServiceURL","$resource",function(a,b){return b(a+"utility/create_crm_saas_pick_and_drop_appointment/:id/:token")}]),angular.module("letsService").factory("UpdateTelecallingTargetService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/assign_calling_data/:id/:token")}]),angular.module("letsService").factory("CrmValidationService",["serviceURL","$resource",function(a,b){return b(a+"validate_crm_caller/:callerId/:token/:role/:sessionToken/:loginIp")}]),angular.module("letsService").factory("ForgotPasswordService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/send_admin_password_confirmation_otp/:id/:token")}]),angular.module("letsService").factory("ChangePasswordService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/update_admin_password/:id/:token")}]),angular.module("letsService").factory("PostServiceFeedbackService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_wise_psf_stats/:callerId/:scId/:dataType/:branchId/:token")}]),angular.module("letsService").factory("TeleCallerPsfDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_wise_psf_stats_details/:status/:callerId/:scId/:fromDate/:toDate/:branchId/:dataType/:token")}]),angular.module("letsService").factory("BrandWiseModelService",["serviceURL","$resource",function(a,b){return b(a+"get_brand_wise_model/:brandName")}]),angular.module("letsService").factory("CurrentTimeService",["serviceURL","$resource",function(a,b){return b(a+"getPresentHour")}]),angular.module("letsService").factory("CreDashboardDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_main_dashboard_stats/:scId/:callerId/:branchId/:token")}]),angular.module("letsService").factory("CreDashboardDueTypeDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_main_dashboard_duetype_stats/:scId/:callerId/:dataTypeId/:status/:token")}]),angular.module("letsService").factory("CreDashboardDataTableSearchService",["serviceURL","$resource",function(a,b){return b(a+"search_appt_details_by_datatype_keyword/:key/:scId/:callerId/:dataatypeId/:token")}]),angular.module("letsService").factory("CreDashboardDataTableService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_main_dashboard_details/:scId/:callerId/:dataTypeId/:status/:scheduleType/:subStatus/:branchId/:token")}]),angular.module("letsService").factory("CreDashboardFilterTypeDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_main_dashboard_substatus_stats/:callerId/:status/:dataTypeId/:scheduleType/:scId/:branchId/:token")}]),angular.module("letsService").factory("GetCallerMainDashboardOtherDatatypeStats",["serviceURL","$resource",function(a,b){return b(a+"get_caller_main_dashboard_other_datatype_stats/:scId/:callerId/:branchId/:token")}]),angular.module("letsService").factory("GetCallerDashboardOtherDatatypeStats",["serviceURL","$resource",function(a,b){return b(a+"get_caller_main_dashboard_details/:scId/:callerId/:dataTypeId/:status/:scheduleType/:token")}]),angular.module("letsService").factory("GetInsuranceDashboardStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_insurance_dashboard_stats/:scId/:callerId/:branchId/:brand/:token")}]),angular.module("letsService").factory("GetInsuranceDashboardDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_insurance_main_dashboard_details/:scId/:callerId/:status/:branchId/:subStatus/:brand/:token")}]),angular.module("letsService").factory("GetPerticularInsuranceDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_particular_insurance_appointment_details/:apptId/:scId/:brand/:token")}]),angular.module("letsService").factory("CreDashboardStatsDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_dashboard_stats/:scId/:callerId/:branchId/:token")}]);angular.module("letsService").factory("CreDashboardInsuranceStatsDataService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_insurance_dashboard_stats/:fromDate/:toDate/:scId/:callerId/:branchId/:brand/:token")}]),angular.module("letsService").factory("AdminInsuranceCustomerDetailsStatsWiseService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_insurance_dashboard_deatils/:fromDate/:toDate/:scId/:callerId/:status/:branchId/:bikeBrand/:reportType/:token")}]),angular.module("letsService").factory("GetPresentHourService",["$resource","pickupAndDropServiceURL",function(a,b){return a(b+"getPresentHour")}]),angular.module("letsService").factory("UpdateInsuranceCustomerPhoneService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_insurance_customer_mobile_number/:id/:token")}]),angular.module("letsService").factory("CreInsuranceFilterTypeDataService",["serviceURL","$resource",function(a,b){return b(a+"get_caller_insurance_main_dashboard_substatus_stats/:callerId/:scId/:branchId/:brand/:token")}]),angular.module("letsService").factory("CreAppointmentActiveStatusService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/update_caller_appt_active_status/:id/:token")}]),angular.module("letsService").factory("CreSalesAnnivarsaryDataService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_anniversary_stats/:scId/:callerId/:branchId/:aniverseryType/:token")}]),angular.module("letsService").factory("CreSalesAnnivarsaryDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_anniversary_stats_details/:scId/:callerId/:branchId/:status/:aniverseryType/:dataType/:token")}]),angular.module("letsService").factory("GetPerticularSalesDataService",["serviceURL","$resource",function(a,b){return b(a+"get_particular_sales_appointment_details/:apptId/:scId/:token")}]),angular.module("letsService").factory("UpdateSalesDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_sales_caller/update_crm_sales_appointment_status/:id/:token")}]),angular.module("letsService").factory("GetSalesHistoryService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_appt_history_details/:chassisNo/:scId/:token")}]),angular.module("letsService").factory("GetInsuranceCallerListService",["serviceURL","$resource",function(a,b){return b(a+"get_insurance_caller_list/:scId/:token")}]),angular.module("letsService").factory("AssignInsuranceDataService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/assign_insurance_calling_data/:id/:token")}]),angular.module("letsService").factory("DealerRevenueReportService",["serviceURL","$resource",function(a,b){return b(a+"get_dealer_wise_revenue_stats/:scId/:branchId/:token")}]),angular.module("letsService").factory("CallerPerformanceDueDatewiseStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_pontential_servicedue_stats/:fromDate/:toDate/:scId/:callerId/:branch/:datatypeId/:token")}]),angular.module("letsService").factory("CallerPerformanceCompletePotentialStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_pontential_allocated_stats/:fromDate/:toDate/:scId/:callerId/:branch/:datatypeId/:token")}]),angular.module("letsService").factory("CallerPerformanceTotalDueDateStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_pontential_servicedue_stats_total/:fromDate/:toDate/:scId/:callerId/:branch/:datatypeId/:token")}]),angular.module("letsService").factory("CallerPerformanceMonthlyTotalPotentialStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_pontential_allocated_stats_total/:fromDate/:toDate/:scId/:callerId/:branch/:datatypeId/:token")}]),angular.module("letsService").factory("DealerWiseDataReportService",["serviceURL","$resource",function(a,b){return b(a+"get_dealer_wise_data_report_stats/:scId/:branchId/:token")}]),angular.module("letsService").factory("SupportToolService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_admin/lsConnect_support_tools/:id/:token")}]),angular.module("letsService").factory("GetUnAssignedDataService",["serviceURL","$resource",function(a,b){return b(a+"get_branch_and_dataType_wise_unassigned_data_count/:scId/:branchId/:dataTypeId/:dataTypeName/:token")}]),angular.module("letsService").factory("PSFPerformanceDashboardStatsDataService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_dashboard_psf_stats/:fromDate/:toDate/:scId/:callerId/:branchId/:token")}]),angular.module("letsService").factory("PSFPerformancesStatsDetailedService",["serviceURL","$resource",function(a,b){return b(a+"get_admin_dashboard_psf_details/:fromDate/:toDate/:scId/:callerId/:branchId/:status/:reportType/:token")}]),angular.module("letsService").factory("SalesFeedbackCallRecordingService",["serviceURL","$resource",function(a,b){return b(a+"get_appt_wise_sales_feedback_recording_list/:chassisNo/:logInId/:scId/:token")}]),angular.module("letsService").factory("SalesFeedbackYesNoDataService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_feedback_yesno_stats/:fromDate/:toDate/:scId/:callerId/:branchId/:token")}]),angular.module("letsService").factory("SalesFeedbackRatingDataService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_feedback_rating_stats/:fromDate/:toDate/:scId/:callerId/:branchId/:token")}]),angular.module("letsService").factory("SalesFeedbackDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_feedback_details/:fromDate/:toDate/:scId/:callerId/:branchId/:feedBackListId/:feedBackStatus/:status/:exportType/:token")}]),angular.module("letsService").factory("CreateFutureReminderService",["serviceURL","$resource",function(a,b){return b(a+"crm_saas_caller/create_future_appointment/:scId/:token")}]),angular.module("letsService").factory("GetStatusWiseConversionDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_status_wise_conversion_details/:fromDate/:toDate/:status/:callerId/:branchId/:scId/:reportType/:token")}]),angular.module("letsService").factory("UpdateDealerRenevalAndExpiryService",["serviceURL","$resource",function(a,b){return b(a+"get_dealer_list_to_update_expiry_date/:scId/:token")}]),angular.module("letsService").factory("GetSuperAdminListService",["serviceURL","$resource",function(a,b){return b(a+"get_super_admin_list/:scId/:token")}]),angular.module("letsService").factory("GetSmsTemplateAccessBranchListService",["serviceURL","$resource",function(a,b){return b(a+"get_sms_access_status_branch_wise/:scId/:status/:loginId/:token")}]),angular.module("letsService").factory("GetServiceFeedbackYesNoDefaultStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_service_feedback_yesno_default/:fromDate/:toDate/:scId/:caller/:branch/:token")}]),angular.module("letsService").factory("GetSalesFeedbackYesNoDefaultStatsService",["serviceURL","$resource",function(a,b){return b(a+"get_sales_feedback_yesno_default/:fromDate/:toDate/:scId/:callerId/:branchId/:token")}]),angular.module("letsService").factory("GetSupportBranchDetailsService",["serviceURL","$resource",function(a,b){return b(a+"get_branch_details/:scId/:branchId/:token")}]),angular.module("letsService").factory("TeleCallerExcelUploadInsuranceDataService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"file_upload/"+c.get("loggedInUserBikeBrand")+"/upload_insurance_job_card_data_v1/:id/:token")}]),angular.module("letsService").factory("GetSupportUserListService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"get_support_members/:loginId/:token")}]),angular.module("letsService").factory("GetSalesRevenueStatsService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"get_sales_revenue_stats/:status/:scId/:token")}]),angular.module("letsService").factory("UpdateFcmTokenService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"lscrmsaas/updateFcmToken/:id/:token")}]),angular.module("letsService").factory("GetFeedbckHistoryService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"get_feedback_customer_history/:customerId/:status/:scId/:token")}]),angular.module("letsService").factory("GetSalesJobcardDataService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"get_day_wise_sales_job_card_stats/:fromDate/:toDate/:branchId/:scId/:token")}]),angular.module("letsService").factory("GetSalesJobcardStatsDetailedService",["serviceURL","$resource","$cookies",function(a,b,c){return b(a+"get_day_wise_sales_job_card_details/:date/:status/:scId/:branch/:reportType/:token")}]),angular.module("letsService").factory("TokenService",[function(){return{getToken:function(a){a+="lsCrmSaasApis";var b=0;if(0===a.length)return b;for(var c=0;c<a.length;c++){b=8*b-b+a.charCodeAt(c)}return b}}}]),angular.module("letsService").factory("PickupAndDropTokenService",[function(){return{getToken:function(a){a+="LetsServiceAPIs";var b=0;if(0===a.length)return b;for(var c=0;c<a.length;c++){b=8*b-b+a.charCodeAt(c)}return b}}}]),angular.module("letsService").factory("TimeSlotSelected",[function(){return{getTime:function(){return[{timeSelect:"8-9 AM",value:"8"},{timeSelect:"9-10 AM",value:"9"},{timeSelect:"10-11 AM",value:"10"},{timeSelect:"11-12 AM",value:"11"},{timeSelect:"12-1 PM",value:"12"},{timeSelect:"1-2 PM",value:"13"},{timeSelect:"2-3 PM",value:"14"},{timeSelect:"3-4 PM",value:"15"},{timeSelect:"4-5 PM",value:"16"},{timeSelect:"5-6 PM",value:"17"},{timeSelect:"6-7 PM",value:"18"}]}}}]),function(){function a(a,b,c,d,e,f,g){function h(){return v.length}function i(a){if(1!==arguments.length||a)if(a)o(a.toastId);else for(var b=0;b<v.length;b++)o(v[b].toastId)}function j(a,b,c){return p(q().iconClasses.error,a,b,c)}function k(a,b,c){return p(q().iconClasses.info,a,b,c)}function l(a,b,c){return p(q().iconClasses.success,a,b,c)}function m(a,b,c){return p(q().iconClasses.warning,a,b,c)}function n(a,b){a&&a.isOpened&&v.indexOf(a)>=0&&a.scope.refreshTimer(b)}function o(b,c){function d(a){for(var b=0;b<v.length;b++)if(v[b].toastId===a)return v[b]}function e(){return!v.length}var h=d(b);h&&!h.deleting&&(h.deleting=!0,h.isOpened=!1,a.leave(h.el).then(function(){h.scope.options.onHidden&&h.scope.options.onHidden(!!c,h),h.scope.$destroy();var a=v.indexOf(h);delete x[h.scope.message],v.splice(a,1);var b=f.maxOpened;b&&v.length>=b&&v[b-1].open.resolve(),e()&&(t.remove(),t=null,y=g.defer())}))}function p(a,b,c,d){return angular.isObject(c)&&(d=c,c=null),s({iconClass:a,message:b,optionsOverride:d,title:c})}function q(){return angular.extend({},f)}function r(b){if(t)return y.promise;t=angular.element("<div></div>"),t.attr("id",b.containerId),t.addClass(b.positionClass),t.css({"pointer-events":"auto"});var c=angular.element(document.querySelector(b.target));if(!c||!c.length)throw"Target for toasts doesn't exist";return a.enter(t,c).then(function(){y.resolve()}),y.promise}function s(c){function f(){return m.autoDismiss&&m.maxOpened&&v.length>m.maxOpened}function h(a,b,c){function d(b){if(c[b])return function(){c[b](a)}}c.allowHtml?(a.scope.allowHtml=!0,a.scope.title=e.trustAsHtml(b.title),a.scope.message=e.trustAsHtml(b.message)):(a.scope.title=b.title,a.scope.message=b.message),a.scope.toastType=a.iconClass,a.scope.toastId=a.toastId,a.scope.extraData=c.extraData,a.scope.options={extendedTimeOut:c.extendedTimeOut,messageClass:c.messageClass,onHidden:c.onHidden,onShown:d("onShown"),onTap:d("onTap"),progressBar:c.progressBar,tapToDismiss:c.tapToDismiss,timeOut:c.timeOut,titleClass:c.titleClass,toastClass:c.toastClass},c.closeButton&&(a.scope.options.closeHtml=c.closeHtml)}function i(){function a(a){for(var b=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],c=0,d=b.length;c<d;c++)delete a[b[c]];return a}var b={toastId:u++,isOpened:!1,scope:d.$new(),open:g.defer()};return b.iconClass=c.iconClass,c.optionsOverride&&(angular.extend(m,a(c.optionsOverride)),b.iconClass=c.optionsOverride.iconClass||b.iconClass),h(b,c,m),b.el=j(b.scope),b}function j(a){var c=angular.element("<div toast></div>");return b.get("$compile")(c)(a)}function k(){return m.maxOpened&&v.length<=m.maxOpened||!m.maxOpened}function l(){var a=m.preventDuplicates&&c.message===w,b=m.preventOpenDuplicates&&x[c.message];return!(!a&&!b)||(w=c.message,x[c.message]=!0,!1)}var m=q();if(!l()){var n=i();if(v.push(n),f())for(var p=v.slice(0,v.length-m.maxOpened),s=0,y=p.length;s<y;s++)o(p[s].toastId);return k()&&n.open.resolve(),n.open.promise.then(function(){r(m).then(function(){if(n.isOpened=!0,m.newestOnTop)a.enter(n.el,t).then(function(){n.scope.init()});else{var b=t[0].lastChild?angular.element(t[0].lastChild):null;a.enter(n.el,t,b).then(function(){n.scope.init()})}})}),n}}var t,u=0,v=[],w="",x={},y=g.defer();return{active:h,clear:i,error:j,info:k,remove:o,success:l,warning:m,refreshTimer:n}}angular.module("toastr",[]).factory("toastr",a),a.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){function a(a){function b(a,b,c,d){function e(){var a=(h-(new Date).getTime())/g*100;b.css("width",a+"%")}var f,g,h;d.progressBar=a,a.start=function(a){f&&clearInterval(f),g=parseFloat(a),h=(new Date).getTime()+g,f=setInterval(e,10)},a.stop=function(){f&&clearInterval(f)},a.$on("$destroy",function(){clearInterval(f)})}return{require:"^toast",templateUrl:function(){return a.templates.progressbar},link:b}}angular.module("toastr").directive("progressBar",a),a.$inject=["toastrConfig"]}(),function(){function a(){this.progressBar=null,this.startProgressBar=function(a){this.progressBar&&this.progressBar.start(a)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("toastr").controller("ToastController",a)}(),function(){function a(a,b,c,d){function e(c,e,f,g){function h(a){return g.startProgressBar(a),b(function(){g.stopProgressBar(),d.remove(c.toastId)},a,1)}function i(){c.progressBar=!1,g.stopProgressBar()}function j(){return c.options.closeHtml}var k;if(c.toastClass=c.options.toastClass,c.titleClass=c.options.titleClass,c.messageClass=c.options.messageClass,c.progressBar=c.options.progressBar,j()){var l=angular.element(c.options.closeHtml),m=a.get("$compile");l.addClass("toast-close-button"),l.attr("ng-click","close(true, $event)"),m(l)(c),e.children().prepend(l)}c.init=function(){c.options.timeOut&&(k=h(c.options.timeOut)),c.options.onShown&&c.options.onShown()},e.on("mouseenter",function(){i(),k&&b.cancel(k)}),c.tapToast=function(){angular.isFunction(c.options.onTap)&&c.options.onTap(),c.options.tapToDismiss&&c.close(!0)},c.close=function(a,b){b&&angular.isFunction(b.stopPropagation)&&b.stopPropagation(),d.remove(c.toastId,a)},c.refreshTimer=function(a){k&&(b.cancel(k),k=h(a||c.options.timeOut))},e.on("mouseleave",function(){0===c.options.timeOut&&0===c.options.extendedTimeOut||(c.$apply(function(){c.progressBar=c.options.progressBar}),k=h(c.options.extendedTimeOut))})}return{templateUrl:function(){return c.templates.toast},controller:"ToastController",link:e}}angular.module("toastr").directive("toast",a),a.$inject=["$injector","$interval","toastrConfig","toastr"]}(),angular.module("toastr").run(["$templateCache",function(a){a.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n'),a.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}]),angular.module("google.places",[]).factory("googlePlacesApi",["$window",function(a){if(!a.google)throw"Global `google` var missing. Did you forget to include the places API script?";return a.google}]).directive("gPlacesAutocomplete",["$parse","$compile","$timeout","$document","googlePlacesApi",function(a,b,c,d,e){return{restrict:"A",require:"^ngModel",scope:{model:"=ngModel",options:"=?",forceSelection:"=?",customPlaces:"=?"},controller:["$scope",function(a){}],link:function(a,f,g,h){function i(){f.bind("keydown",l),f.bind("blur",m),f.bind("submit",m),a.$watch("selected",n)}function j(){var c,e=angular.element("<div g-places-autocomplete-drawer></div>"),f=angular.element(d[0].body);e.attr({input:"input",query:"query",predictions:"predictions",active:"active",selected:"selected"}),c=b(e)(a),f.append(c)}function k(){h.$parsers.push(o),h.$formatters.push(p),h.$render=q}function l(b){0!==a.predictions.length&&-1!==w(A,b.which)&&(b.preventDefault(),b.which===z.down?(a.active=(a.active+1)%a.predictions.length,a.$digest()):b.which===z.up?(a.active=(a.active?a.active:a.predictions.length)-1,a.$digest()):13===b.which||9===b.which?(a.forceSelection&&(a.active=-1===a.active?0:a.active),a.$apply(function(){a.selected=a.active,-1===a.selected&&r()})):27===b.which&&a.$apply(function(){b.stopPropagation(),r()}))}function m(b){0!==a.predictions.length&&(a.forceSelection&&(a.selected=-1===a.selected?0:a.selected),a.$digest(),a.$apply(function(){-1===a.selected&&r()}))}function n(){var b;(b=a.predictions[a.selected])&&(b.is_custom?a.$apply(function(){a.model=b.place,a.$emit("g-places-autocomplete:select",b.place),c(function(){h.$viewChangeListeners.forEach(function(a){a()})})}):C.getDetails({placeId:b.place_id},function(b,d){d==e.maps.places.PlacesServiceStatus.OK&&a.$apply(function(){a.model=b,a.$emit("g-places-autocomplete:select",b),c(function(){h.$viewChangeListeners.forEach(function(a){a()})})})}),r())}function o(b){var c;return b&&u(b)?(a.query=b,c=angular.extend({input:b},a.options),B.getPlacePredictions(c,function(b,c){a.$apply(function(){var d;r(),a.customPlaces&&(d=s(a.query),a.predictions.push.apply(a.predictions,d)),c==e.maps.places.PlacesServiceStatus.OK&&a.predictions.push.apply(a.predictions,b),a.predictions.length>5&&(a.predictions.length=5)})}),a.forceSelection?h.$modelValue:b):b}function p(a){var b="";return u(a)?b=a:v(a)&&(b=a.formatted_address),b}function q(){return f.val(h.$viewValue)}function r(){a.active=-1,a.selected=-1,a.predictions=[]}function s(b){var c,d,e,f=[];for(e=0;e<a.customPlaces.length;e++)c=a.customPlaces[e],d=t(b,c),d.matched_substrings.length>0&&f.push({is_custom:!0,custom_prediction_label:c.custom_prediction_label||"(Custom Non-Google Result)",description:c.formatted_address,place:c,matched_substrings:d.matched_substrings,terms:d.terms});return f}function t(a,b){var c,d,e,f=a+"",g=[],h=[];for(d=b.formatted_address.split(","),e=0;e<d.length;e++)c=d[e].trim(),f.length>0&&(c.length>=f.length?(x(c,f)&&h.push({length:f.length,offset:e}),f=""):x(f,c)?(h.push({length:c.length,offset:e}),f=f.replace(c,"").trim()):f=""),g.push({value:c,offset:b.formatted_address.indexOf(c)});return{matched_substrings:h,terms:g}}function u(a){return"[object String]"==Object.prototype.toString.call(a)}function v(a){return"[object Object]"==Object.prototype.toString.call(a)}function w(a,b){var c,d;if(null==a)return-1;for(d=a.length,c=0;c<d;c++)if(a[c]===b)return c;return-1}function x(a,b){return 0===y(a).lastIndexOf(y(b),0)}function y(a){return null==a?"":a.toLowerCase()}var z={tab:9,enter:13,esc:27,up:38,down:40},A=[z.tab,z.enter,z.esc,z.up,z.down],B=new e.maps.places.AutocompleteService,C=new e.maps.places.PlacesService(f[0]);!function(){a.query="",a.predictions=[],a.input=f,a.options=a.options||{},j(),i(),k()}()}}}]).directive("gPlacesAutocompleteDrawer",["$window","$document",function(a,b){return{restrict:"A",scope:{input:"=",query:"=",predictions:"=",active:"=",selected:"="},template:['<div class="pac-container" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\', width: position.width+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">','  <div class="pac-item" g-places-autocomplete-prediction index="$index" prediction="prediction" query="query"','       ng-repeat="prediction in predictions track by $index" ng-class="{\'pac-item-selected\': isActive($index) }"','       ng-mouseenter="selectActive($index)" ng-click="selectPrediction($index)" role="option" id="{{prediction.id}}">',"  </div>","</div>"].join(""),link:function(c,d){function e(c){var d=c[0],e=d.getBoundingClientRect(),f=b[0].documentElement,g=b[0].body,h=a.pageYOffset||f.scrollTop||g.scrollTop,i=a.pageXOffset||f.scrollLeft||g.scrollLeft;return{width:e.width,height:e.height,top:e.top+e.height+h,left:e.left+i}}d.bind("mousedown",function(a){a.preventDefault()}),a.onresize=function(){c.$apply(function(){c.position=e(c.input)})},c.isOpen=function(){return c.predictions.length>0},c.isActive=function(a){return c.active===a},c.selectActive=function(a){c.active=a},c.selectPrediction=function(a){c.selected=a},c.$watch("predictions",function(){c.position=e(c.input)},!0)}}}]).directive("gPlacesAutocompletePrediction",[function(){return{restrict:"A",scope:{index:"=",prediction:"=",query:"="},template:['<span class="pac-icon pac-icon-marker"></span>','<span class="pac-item-query" ng-bind-html="prediction | highlightMatched"></span>','<span ng-repeat="term in prediction.terms | unmatchedTermsOnly:prediction">{{term.value | trailingComma:!$last}}&nbsp;</span>','<span class="custom-prediction-label" ng-if="prediction.is_custom">&nbsp;{{prediction.custom_prediction_label}}</span>'].join("")}}]).filter("highlightMatched",["$sce",function(a){return function(b){var c,d="",e="";return b.matched_substrings.length>0&&b.terms.length>0&&(c=b.matched_substrings[0],d=b.terms[0].value.substr(c.offset,c.length),e=b.terms[0].value.substr(c.offset+c.length)),a.trustAsHtml('<span class="pac-matched">'+d+"</span>"+e)}}]).filter("unmatchedTermsOnly",[function(){return function(a,b){var c,d,e=[];for(c=0;c<a.length;c++)d=a[c],b.matched_substrings.length>0&&d.offset>b.matched_substrings[0].length&&e.push(d);return e}}]).filter("trailingComma",[function(){return function(a,b){return b?a+",":a}}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){
function d(a,b){return R(new(R(function(){},{prototype:a})),b)}function e(a){return Q(arguments,function(b){b!==a&&Q(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var b=[];return Q(a,function(a,c){b.push(c)}),b}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(0>(d=0>d?Math.ceil(d):Math.floor(d))&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l]&&i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return R({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return Q(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));return Q(c,function(c){c in a&&(b[c]=a[c])}),b}function m(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function n(a,b){var c=P(a),d=c?[]:{};return Q(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function o(a,b){var c=P(a)?[]:{};return Q(a,function(a,d){c[d]=b(a,d)}),c}function p(a,b){var d=1,f=2,i={},j=[],k=i,l=R(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,N(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);Q(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return O(a)&&a.then&&a.$$promises}if(!O(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return Q(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!L(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;Q(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!O(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=l;var n=a.defer(),r=n.promise,s=r.$$promises={},t=R({},d),u=1+q.length/3,v=!1;if(L(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,m(f.$$inheritedValues,p)),R(s,f.$$promises),f.$$values?(v=e(t,m(f.$$values,p)),r.$$inheritedValues=m(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=m(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function q(a,b,c){this.fromConfig=function(a,b,c){return L(a.template)?this.fromString(a.template,b):L(a.templateUrl)?this.fromUrl(a.templateUrl,b):L(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return M(a)?a(b):a},this.fromUrl=function(c,d){return M(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function r(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+([-.]+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new U.Param(b,c,d,e),p[b]}function g(a,b,c,d){var e=["",""],f=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return f;switch(c){case!1:e=["(",")"+(d?"?":"")];break;case!0:f=f.replace(/\/$/,""),e=["(?:/(",")|/)?"];break;default:e=["("+c+"|",")?"]}return f+e[0]+b+e[1]}function h(e,f){var g,h,i,j,k;return g=e[2]||e[3],k=b.params[g],i=a.substring(m,e.index),h=f?e[4]:e[4]||("*"==e[1]?".*":null),h&&(j=U.type(h)||d(U.type("string"),{pattern:new RegExp(h,b.caseInsensitive?"i":c)})),{id:g,regexp:h,segment:i,type:j,cfg:k}}b=R({params:{}},O(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new U.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash,s.isOptional),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(!1===b.strict?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function s(a){R(this,a)}function t(){function a(a){return null!=a?a.toString().replace(/~/g,"~~").replace(/\//g,"~2F"):a}function e(a){return null!=a?a.toString().replace(/~2F/g,"/").replace(/~~/g,"~"):a}function f(){return{strict:p,caseInsensitive:m}}function i(a){return M(a)||P(a)&&M(a[a.length-1])}function j(){for(;w.length;){var a=w.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(u[a.name],l.invoke(a.def))}}function k(a){R(this,a||{})}U=this;var l,m=!1,p=!0,q=!1,u={},v=!0,w=[],x={string:{encode:a,decode:e,is:function(a){return null==a||!L(a)||"string"==typeof a},pattern:/[^\/]*/},int:{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return L(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return!0===a||!1===a},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^\/]*/},any:{encode:b.identity,decode:b.identity,equals:b.equals,pattern:/.*/}};t.$$getDefaultValue=function(a){if(!i(a.value))return a.value;if(!l)throw new Error("Injectable functions cannot be called at configuration time");return l.invoke(a.value)},this.caseInsensitive=function(a){return L(a)&&(m=a),m},this.strictMode=function(a){return L(a)&&(p=a),p},this.defaultSquashPolicy=function(a){if(!L(a))return q;if(!0!==a&&!1!==a&&!N(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return q=a,a},this.compile=function(a,b){return new r(a,R(f(),b))},this.isMatcher=function(a){if(!O(a))return!1;var b=!0;return Q(r.prototype,function(c,d){M(c)&&(b=b&&L(a[d])&&M(a[d]))}),b},this.type=function(a,b,c){if(!L(b))return u[a];if(u.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return u[a]=new s(R({name:a},b)),c&&(w.push({name:a,def:c}),v||j()),this},Q(x,function(a,b){u[b]=new s(R({name:b},a))}),u=d(u,{}),this.$get=["$injector",function(a){return l=a,v=!1,j(),Q(x,function(a,b){u[b]||(u[b]=new s(a))}),this}],this.Param=function(a,d,e,f){function j(a){var b=O(a)?g(a):[];return-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array")&&(a={value:a}),a.$$fn=i(a.value)?a.value:function(){return a.value},a}function k(c,d,e){if(c.type&&d)throw new Error("Param '"+a+"' has two type configurations.");return d||(c.type?b.isString(c.type)?u[c.type]:c.type instanceof s?c.type:new s(c.type):"config"===e?u.any:u.string)}function m(){var b={array:"search"===f&&"auto"},c=a.match(/\[\]$/)?{array:!0}:{};return R(b,c,e).array}function p(a,b){var c=a.squash;if(!b||!1===c)return!1;if(!L(c)||null==c)return q;if(!0===c||N(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function r(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=P(a.replace)?a.replace:[],N(e)&&f.push({from:e,to:c}),g=o(f,function(a){return a.from}),n(i,function(a){return-1===h(g,a.from)}).concat(f)}function t(){if(!l)throw new Error("Injectable functions cannot be called at configuration time");var a=l.invoke(e.$$fn);if(null!==a&&a!==c&&!x.type.is(a))throw new Error("Default value ("+a+") for parameter '"+x.id+"' is not an instance of Type ("+x.type.name+")");return a}function v(a){function b(a){return function(b){return b.from===a}}function c(a){var c=o(n(x.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),L(a)?x.type.$normalize(a):t()}function w(){return"{Param:"+a+" "+d+" squash: '"+A+"' optional: "+z+"}"}var x=this;e=j(e),d=k(e,d,f);var y=m();d=y?d.$asArray(y,"search"===f):d,"string"!==d.name||y||"path"!==f||e.value!==c||(e.value="");var z=e.value!==c,A=p(e,z),B=r(e,y,z,A);R(this,{id:a,type:d,location:f,array:y,squash:A,replace:B,isOptional:z,value:v,dynamic:c,config:e,toString:w})},k.prototype={$$new:function(){return d(this,R(new k,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(k.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),Q(b,function(b){Q(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return Q(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return Q(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var d,e,f,g,h,i=this.$$keys();for(d=0;d<i.length&&(e=this[i[d]],(f=a[i[d]])!==c&&null!==f||!e.isOptional);d++){if(g=e.type.$normalize(f),!e.type.is(g))return!1;if(h=e.type.encode(g),b.isString(h)&&!e.type.pattern.exec(h))return!1}return!0},$$parent:c},this.ParamSet=k}function u(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return!L(d)||d}function h(d,e,f,g,h){function m(a,b,c){return"/"===q?a:b?q.slice(0,-1)+a:c?q.slice(1)+a:a}function n(a){function b(a){var b=a(f,d);return!!b&&(N(b)&&d.replace().url(b),!0)}if(!a||!a.defaultPrevented){p&&d.url(),p=c;var e,g=j.length;for(e=0;g>e;e++)if(b(j[e]))return;k&&b(k)}}function o(){return i=i||e.$on("$locationChangeSuccess",n)}var p,q=g.baseHref(),r=d.url();return l||o(),{sync:function(){n()},listen:function(){return o()},update:function(a){return a?void(r=d.url()):void(d.url()!==r&&(d.url(r),d.replace()))},push:function(a,b,e){var f=a.format(b||{});null!==f&&b&&b["#"]&&(f+="#"+b["#"]),d.url(f),p=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled),g=g&&h.history;var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),null!==i&&e&&e["#"]&&(i+="#"+e["#"]),i=m(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!M(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(N(a)){var b=a;a=function(){return b}}else if(!M(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=N(b);if(N(a)&&(a=d.compile(a)),!h&&!M(b)&&!P(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),R(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:N(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),R(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser","$sniffer"]}function v(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function m(a,b){if(!a)return c;var d=N(a),e=d?a:a.name;if(f(e)){if(!b)throw new Error("No reference point given for path '"+e+"'");b=m(b);for(var g=e.split("."),h=0,i=g.length,j=b;i>h;h++)if(""!==g[h]||0!==h){if("^"!==g[h])break;if(!j.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");j=j.parent}else j=b;g=g.slice(h).join("."),e=j.name+(j.name&&g?".":"")+g}var k=z[e];return!k||!d&&(d||k!==a&&k.self!==a)?c:k}function n(a,b){A[a]||(A[a]=[]),A[a].push(b)}function p(a){for(var b=A[a]||[];b.length;)q(b.shift())}function q(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!N(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(z.hasOwnProperty(c))throw new Error("State '"+c+"' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):N(b.parent)?b.parent:O(b.parent)&&N(b.parent.name)?b.parent.name:"";if(e&&!z[e])return n(e,b.self);for(var f in C)M(C[f])&&(b[f]=C[f](b,C.$delegates[f]));return z[c]=b,!b[B]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){y.$current.navigable==b&&j(a,c)||y.transitionTo(b,a,{inherit:!0,location:!1})}]),p(c),b}function r(a){return a.indexOf("*")>-1}function s(a){for(var b=a.split("."),c=y.$current.name.split("."),d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return"**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length==c.length&&c.join("")===b.join("")}function t(a,b){return N(a)&&!L(b)?C[a]:M(b)&&N(a)?(C[a]&&!C.$delegates[a]&&(C.$delegates[a]=C[a]),C[a]=b,this):this}function u(a,b){return O(a)?b=a:b.name=a,q(b),this}function v(a,e,f,h,l,n,p,q,t){function u(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),D;if(!g.retry)return null;if(f.$retry)return p.update(),E;var h=y.transition=e.when(g.retry);return h.then(function(){return h!==y.transition?A:(b.options.$retry=!0,y.transitionTo(b.to,b.toParams,b.options))},function(){return D}),p.update(),h}function v(a,c,d,g,i,j){function m(){var c=[];return Q(a.views,function(d,e){var g=d.resolve&&d.resolve!==a.resolve?d.resolve:{};g.$template=[function(){return f.load(e,{view:d,locals:i.globals,params:n,notify:j.notify})||""}],c.push(l.resolve(g,i.globals,i.resolve,a).then(function(c){if(M(d.controllerProvider)||P(d.controllerProvider)){var f=b.extend({},g,i.globals);c.$$controller=h.invoke(d.controllerProvider,null,f)}else c.$$controller=d.controller;c.$$state=a,c.$$controllerAs=d.controllerAs,i[e]=c}))}),e.all(c).then(function(){return i.globals})}var n=d?c:k(a.params.$$keys(),c),o={$stateParams:n};i.resolve=l.resolve(a.resolve,o,i.resolve,a);var p=[i.resolve.then(function(a){i.globals=a})];return g&&p.push(g),e.all(p).then(m).then(function(a){return i})}var A=e.reject(new Error("transition superseded")),C=e.reject(new Error("transition prevented")),D=e.reject(new Error("transition aborted")),E=e.reject(new Error("transition failed"));return x.locals={resolve:null,globals:{$stateParams:{}}},y={params:{},current:x.self,$current:x,transition:null},y.reload=function(a){return y.transitionTo(y.current,n,{reload:a||!0,inherit:!1,notify:!0})},y.go=function(a,b,c){return y.transitionTo(a,b,R({inherit:!0,relative:y.$current},c))},y.transitionTo=function(b,c,f){c=c||{},f=R({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=y.$current,l=y.params,o=j.path,q=m(b,f.relative),r=c["#"];if(!L(q)){var s={to:b,toParams:c,options:f},t=u(s,j.self,l,f);if(t)return t;if(b=s.to,c=s.toParams,f=s.options,q=m(b,f.relative),!L(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[B])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(n,c||{},y.$current,q)),!q.params.$$validates(c))return E;c=q.params.$$values(c),b=q;var z=b.path,D=0,F=z[D],G=x.locals,H=[];if(f.reload){if(N(f.reload)||O(f.reload)){if(O(f.reload)&&!f.reload.name)throw new Error("Invalid reload state object");var I=!0===f.reload?o[0]:m(f.reload);if(f.reload&&!I)throw new Error("No such reload state '"+(N(f.reload)?f.reload:f.reload.name)+"'");for(;F&&F===o[D]&&F!==I;)G=H[D]=F.locals,D++,F=z[D]}}else for(;F&&F===o[D]&&F.ownParams.$$equals(c,l);)G=H[D]=F.locals,D++,F=z[D];if(w(b,c,j,l,G,f))return r&&(c["#"]=r),y.params=c,S(y.params,n),S(k(b.params.$$keys(),n),b.locals.globals.$stateParams),f.location&&b.navigable&&b.navigable.url&&(p.push(b.navigable.url,c,{$$avoidResync:!0,replace:"replace"===f.location}),p.update(!0)),y.transition=null,e.when(y.current);if(c=k(b.params.$$keys(),c||{}),r&&(c["#"]=r),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,l,f).defaultPrevented)return a.$broadcast("$stateChangeCancel",b.self,c,j.self,l),null==y.transition&&p.update(),C;for(var J=e.when(G),K=D;K<z.length;K++,F=z[K])G=H[K]=d(G),J=v(F,c,F===b,J,G,f);var M=y.transition=J.then(function(){var d,e,g;if(y.transition!==M)return A;for(d=o.length-1;d>=D;d--)g=o[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<z.length;d++)e=z[d],e.locals=H[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return y.transition!==M?A:(y.$current=b,y.current=b.self,y.params=c,S(y.params,n),y.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,l),p.update(!0),y.current)},function(d){return y.transition!==M?A:(y.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,l,d),g.defaultPrevented||p.update(),e.reject(d))});return M},y.is=function(a,b,d){d=R({relative:y.$current},d||{});var e=m(a,d.relative);return L(e)?y.$current===e&&(!b||j(e.params.$$values(b),n)):c},y.includes=function(a,b,d){if(d=R({relative:y.$current},d||{}),N(a)&&r(a)){if(!s(a))return!1;a=y.$current.name}var e=m(a,d.relative);return L(e)?!!L(y.$current.includes[e.name])&&(!b||j(e.params.$$values(b),n,g(b))):c},y.href=function(a,b,d){d=R({lossy:!0,inherit:!0,absolute:!1,relative:y.$current},d||{});var e=m(a,d.relative);if(!L(e))return null;d.inherit&&(b=i(n,b||{},y.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys().concat("#"),b||{}),{absolute:d.absolute}):null},y.get=function(a,b){if(0===arguments.length)return o(g(z),function(a){return z[a].self});var c=m(a,b||y.$current);return c&&c.self?c.self:null},y}function w(a,b,c,d,e,f){function g(a,b,c){function d(b){return"search"!=a.params[b].location}var e=a.params.$$keys().filter(d),f=l.apply({},[a.params].concat(e));return new U.ParamSet(f).$$equals(b,c)}return!(f.reload||a!==c||!(e===c.locals||!1===a.self.reloadOnSearch&&g(c,d,b)))||void 0}var x,y,z={},A={},B="abstract",C={parent:function(a){if(L(a.parent)&&a.parent)return m(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?m(b[1]):x},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=d(a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(N(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||x).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new U.ParamSet;return Q(a.params||{},function(a,c){b[c]||(b[c]=new U.Param(c,null,a,"config"))}),b},params:function(a){var b=l(a.ownParams,a.ownParams.$$keys());return a.parent&&a.parent.params?R(a.parent.params.$$new(),b):new U.ParamSet},views:function(a){var b={};return Q(L(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?R({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};x=q({name:"",url:"^",views:null,abstract:!0}),x.navigable=null,this.decorator=t,this.state=u,this.$get=v,v.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function w(){function a(a,b){return{load:function(a,c){var d;return c=R({template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}},c),c.view&&(d=b.fromConfig(c.view,c.params,c.locals)),d}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function x(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){return c(function(){a[0].scrollIntoView()},0,!1)}}]}function y(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(a){return null}}}function g(a,c){function d(a){return 1===V&&W>=4?!!j.enabled(a):1===V&&W>=2?!!j.enabled():!!i}var e={enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}};if(a.noanimation)return e;if(j)return{enter:function(a,c,f){d(a)?b.version.minor>2?j.enter(a,null,c).then(f):j.enter(a,null,c,f):e.enter(a,c,f)},leave:function(a,c){d(a)?b.version.minor>2?j.leave(a).then(c):j.leave(a,c):e.leave(a,c)}};if(i){var f=i&&i(c,a);return{enter:function(a,b,c){f.enter(a,null,b),c()},leave:function(a,b){f.leave(a),b()}}}return e}var h=f(),i=h("$animator"),j=h("$animate");return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){function a(){b&&b.remove(),c&&c.$destroy()}var b=l,c=n;c&&(c._willBeDestroyed=!0),m?(r.leave(m,function(){a(),l=null}),l=m):(a(),l=null),m=null,n=null}function k(g){var k,l=A(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if((g||s!==o)&&!c._willBeDestroyed){k=c.$new(),o=a.$current.locals[l],k.$emit("$viewContentLoading",l);var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded",l),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),k(!0)}}}}function z(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=A(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e,k.$element=g;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function A(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function B(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),!(c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/))||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function C(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function D(a){var b="[object SVGAnimatedString]"===Object.prototype.toString.call(a.prop("href")),c="FORM"===a[0].nodeName;return{attr:c?"action":b?"xlink:href":"href",isAnchor:"A"===a.prop("tagName").toUpperCase(),clickable:!c}}function E(a,b,c,d,e){return function(f){var g=f.which||f.button,h=e();if(!(g>1||f.ctrlKey||f.metaKey||f.shiftKey||a.attr("target"))){var i=c(function(){b.go(h.state,h.params,h.options)});f.preventDefault();var j=d.isAnchor&&!h.href?1:0;f.preventDefault=function(){j--<=0&&c.cancel(i)}}}}function F(a,b){return{relative:C(a)||b.$current,inherit:!0}}function G(a,c){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(d,e,f,g){var h=B(f.uiSref,a.current.name),i={state:h.state,href:null,params:null},j=D(e),k=g[1]||g[0];i.options=R(F(e,a),f.uiSrefOpts?d.$eval(f.uiSrefOpts):{});var l=function(c){c&&(i.params=b.copy(c)),i.href=a.href(h.state,i.params,i.options),k&&k.$$addStateInfo(h.state,i.params),null!==i.href&&f.$set(j.attr,i.href)};h.paramExpr&&(d.$watch(h.paramExpr,function(a){a!==i.params&&l(a)},!0),i.params=b.copy(d.$eval(h.paramExpr))),l(),j.clickable&&e.bind("click",E(e,a,c,j,function(){return i}))}}}function H(a,b){return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(c,d,e,f){function g(b){l.state=b[0],l.params=b[1],l.options=b[2],l.href=a.href(l.state,l.params,l.options),i&&i.$$addStateInfo(l.state,l.params),l.href&&e.$set(h.attr,l.href)}var h=D(d),i=f[1]||f[0],j=[e.uiState,e.uiStateParams||null,e.uiStateOpts||null],k="["+j.map(function(a){return a||"null"}).join(", ")+"]",l={state:null,params:null,options:null,href:null};c.$watch(k,g,!0),g(c.$eval(k)),h.clickable&&d.bind("click",E(d,a,b,h,function(){return l}))}}}function I(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs","$timeout",function(b,d,e,f){function g(b,c,e){var f=a.get(b,C(d)),g=h(b,c);p.push({state:f||{name:b},params:c,hash:g}),q[g]=e}function h(a,c){if(!N(a))throw new Error("state should be a string");return O(c)?a+T(c):(c=b.$eval(c),O(c)?a+T(c):a)}function i(){for(var a=0;a<p.length;a++)l(p[a].state,p[a].params)?j(d,q[p[a].hash]):k(d,q[p[a].hash]),m(p[a].state,p[a].params)?j(d,n):k(d,n)}function j(a,b){f(function(){a.addClass(b)})}function k(a,b){a.removeClass(b)}function l(b,c){return a.includes(b.name,c)}function m(b,c){return a.is(b.name,c)}var n,o,p=[],q={};n=c(e.uiSrefActiveEq||"",!1)(b);try{o=b.$eval(e.uiSrefActive)}catch(a){}o=o||c(e.uiSrefActive||"",!1)(b),O(o)&&Q(o,function(c,d){if(N(c)){var e=B(c,a.current.name);g(e.state,b.$eval(e.paramExpr),d)}}),this.$$addStateInfo=function(a,b){O(o)&&p.length>0||(g(a,b,o),i())},b.$on("$stateChangeSuccess",i),i()}]}}function J(a){var b=function(b,c){return a.is(b,c)};return b.$stateful=!0,b}function K(a){var b=function(b,c,d){return a.includes(b,c,d)};return b.$stateful=!0,b}var L=b.isDefined,M=b.isFunction,N=b.isString,O=b.isObject,P=b.isArray,Q=b.forEach,R=b.extend,S=b.copy,T=b.toJson;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",p),q.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",q);var U;r.prototype.concat=function(a,b){var c={caseInsensitive:U.caseInsensitive(),strict:U.strictMode(),squash:U.defaultSquashPolicy()};return new r(this.sourcePath+a+this.sourceSearch,R(c,b),this)},r.prototype.toString=function(){return this.source},r.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/g,"-")}return o(o(b(a).split(/-(?!\\)/),b),c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");var l,m;for(e=0;j>e;e++){for(g=h[e],l=this.params[g],m=d[e+1],f=0;f<l.replace.length;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&!0===l.array&&(m=c(m)),L(m)&&(m=l.type.decode(m)),k[g]=l.value(m)}for(;i>e;e++){for(g=h[e],k[g]=this.params[g].value(b[g]),l=this.params[g],m=b[g],f=0;f<l.replace.length;f++)l.replace[f].from===m&&(m=l.replace[f].to);L(m)&&(m=l.type.decode(m)),k[g]=l.value(m)}return k},r.prototype.parameters=function(a){return L(a)?this.params[a]||null:this.$$paramNames},r.prototype.validates=function(a){return this.params.$$validates(a)},r.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],n=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),n),q=!!p&&m.squash,r=m.type.encode(n);if(k){var s=c[f+1],t=f+1===h;if(!1===q)null!=r&&(j+=P(r)?o(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(!0===q){var u=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(u)[1]}else N(q)&&(j+=q+s);t&&!0===m.squash&&"/"===j.slice(-1)&&(j=j.slice(0,-1))}else{if(null==r||p&&!1!==q)continue;if(P(r)||(r=[r]),0===r.length)continue;r=o(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+l+"="+r,g=!0}}return j},s.prototype.is=function(a,b){return!0},s.prototype.encode=function(a,b){return a},s.prototype.decode=function(a,b){return a},s.prototype.equals=function(a,b){return a==b},s.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},s.prototype.pattern=/.*/,s.prototype.toString=function(){return"{Type:"+this.name+"}"},s.prototype.$normalize=function(a){return this.is(a)?a:this.decode(a)},s.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return P(a)?a:L(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){if(P(c)&&0===c.length)return c;c=e(c);var d=o(c,a);return!0===b?0===n(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$normalize=h(d(a,"$normalize")),this.name=a.name,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",t),b.module("ui.router.util").run(["$urlMatcherFactory",function(a){}]),u.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",u),v.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").factory("$stateParams",function(){return{}}).provider("$state",v),w.$inject=[],b.module("ui.router.state").provider("$view",w),b.module("ui.router.state").provider("$uiViewScroll",x);var V=b.version.major,W=b.version.minor;y.$inject=["$state","$injector","$uiViewScroll","$interpolate"],z.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",y),b.module("ui.router.state").directive("uiView",z),G.$inject=["$state","$timeout"],H.$inject=["$state","$timeout"],I.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",G).directive("uiSrefActive",I).directive("uiSrefActiveEq",I).directive("uiState",H),J.$inject=["$state"],K.$inject=["$state"],
b.module("ui.router.state").filter("isState",J).filter("includedByState",K)}(window,window.angular),function(a,b){function c(c,d){if(!c)return c;var e=c.toString();if(d===b)return e;if(!a.isArray(d)&&!a.isObject(d))return e.split("$0").join(d);var f=a.isArray(d)&&"$"||":";return a.forEach(d,function(a,b){e=e.split(f+b).join(a)}),e}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var d=a.module("AxelSoft",[]);d.value("customSelectDefaults",{displayText:"Select...",emptyListText:"There are no items to display",emptySearchResultText:'No results match "$0"',addText:"Add",searchDelay:300}),d.directive("customSelect",["$parse","$compile","$timeout","$q","customSelectDefaults",function(d,e,f,g,h){var i=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;return{restrict:"A",require:"ngModel",link:function(j,k,l,m){function n(){var a={};a[A]=m.$modelValue;var c=z(j,a);if(c===b){var d=K[v(m.$modelValue)];d&&(c=d.label)}S=!c,R.displayText=c||H.displayText}function o(){return a.extend({},h,j.$eval(l.customSelectOptions))}function p(){return H=o(),H.displayText}function q(){var a=Q.find("li > a");a.length>0&&(J=0,a.eq(0).focus())}function r(){var a=Q.find("li > a");if(a.length>0){var b=a.eq(0).scope(),c=b[A];R.$apply(function(){R.select(c)}),O.dropdown("toggle")}}function s(a){var b={$searchTerm:a};g.when(D(j,b)).then(function(c){if(c){if(a===P.val().trim()){K={},R.matches.length=0;for(var d=0;d<c.length;d++){b[A]=c[d];var e=B(j,b),f=z(j,b);K[v(e)]={value:e,label:f},R.matches.push(c[d])}}S&&n()}},function(){t()})}function t(){R.matches=[],J=-1}function u(){R.addText=H.addText,R.emptySearchResultText=H.emptySearchResultText,R.emptyListText=H.emptyListText,R.select=function(a){var b={};b[A]=a;var c=B(R,b);R.displayText=z(R,b)||H.displayText,m.$setViewValue(c),O.focus(),"function"==typeof H.onSelect&&H.onSelect(a)},R.add=function(){g.when(H.onAdd(),function(a){if(a){var b={};b[A]=a;var c=B(j,b),d=z(j,b);K[v(c)]={value:c,label:d},R.matches.push(a),R.select(a)}})},R.format=c,n()}function v(a){if(a===b)return"undefined";var c,d=typeof a;return"object"==d&&null!==a?"function"==typeof(c=a.$$hashKey)?c=a.$$hashKey():c===b&&(c=a.$$hashKey="cs-"+T++):c=a,d+":"+c}var w=l.customSelect;if(!w)throw new Error("Expected custom-select attribute value.");var x=w.match(i);if(!x)throw new Error("Expected expression in form of '_select_ (as _label_)? for _value_ in _collection_[ track by _id_]' but got '"+w+"'.");k.addClass("dropdown custom-select");var y,z=d(x[2]||x[1]),A=x[3],B=d(x[2]?x[1]:A),C=x[4],D=d(C),E=x[5],F=E?" track by "+E:"",G=l.csDependsOn,H=o(),I="",J=-1,K={},L=k.html().trim()||"{{"+(x[2]||x[1])+"}}",M='<a class="dropdown-toggle" data-toggle="dropdown" href ng-class="{ disabled: disabled }"><span>{{displayText}}</span><b></b></a><div class="dropdown-menu"><div stop-propagation="click" class="custom-select-search"><input class="'+l.selectClass+'" type="text" autocomplete="off" ng-model="searchTerm" /></div><ul role="menu"><li role="presentation" ng-repeat="'+A+" in matches"+F+'"><a role="menuitem" tabindex="-1" href ng-click="select('+A+')">'+L+'</a></li><li ng-hide="matches.length" class="empty-result" stop-propagation="click"><em class="muted"><span ng-hide="searchTerm">{{emptyListText}}</span><span class="word-break" ng-show="searchTerm">{{ format(emptySearchResultText, searchTerm) }}</span></em></li></ul><div class="custom-select-action">'+("function"==typeof H.onAdd?'<button type="button" class="btn btn-primary btn-block add-button" ng-click="add()">{{addText}}</button>':"")+"</div></div>";k.empty();var N=a.element(M),O=N.eq(0).dropdown(),P=N.eq(1).find(":text"),Q=N.eq(1).find("ul"),R=j.$new(!0);u(),O.on("click",function(a){R.disabled||(R.$apply(function(){I="",R.searchTerm=""}),J=-1,P.focus(),H.async||s(""))}),G&&j.$watch(G,function(a,c){a!==c&&(R.matches=[],R.select(b))}),O.on("keypress",function(a){a.altKey||a.ctrlKey||O.click()}),P.on("keydown",function(a){if(/(13|27|40|^9$)/.test(a.keyCode))switch(a.preventDefault(),a.stopPropagation(),a.keyCode){case 27:O.dropdown("toggle");break;case 13:r();break;case 40:q();break;case 9:O.dropdown("toggle")}}),Q.on("keydown",function(a){if(/(38|40)/.test(a.keyCode)){a.preventDefault(),a.stopPropagation();var b=Q.find("li > a");b.length&&(38==a.keyCode&&J--,40==a.keyCode&&J<b.length-1&&J++,J>=0?b.eq(J).focus():(J=-1,P.focus()))}}),t(),e(N)(R),k.append(N),m.$render=function(){n()},R.$watch(p,n),R.$watch(function(){return k.attr("disabled")},function(a){R.disabled=a}),R.$watch("searchTerm",function(a){y&&f.cancel(y);var b=(a||"").trim();y=f(function(){s(b)},b&&H.searchDelay||0)}),"autofocus"in l&&O.focus();var S,T=0}}}]),d.directive("stopPropagation",function(){return{restrict:"A",link:function(a,b,c,d){var e=c.stopPropagation;b.bind(e,function(a){a.stopPropagation()})}}})}(angular),angular.module("notifications",[]).factory("$notification",["$timeout",function(a){function b(a,b,c,d,f){if(0===window.webkitNotifications.checkPermission()){a||(a="favicon.ico");var g=window.webkitNotifications.createNotification(a,b,c);"function"==typeof d&&(g.ondisplay=d),"function"==typeof f&&(g.onclose=f),g.show()}else e.html5Mode=!1}var c=JSON.parse(localStorage.getItem("$notifications"))||[],d=[],e={info:{duration:5e3,enabled:!0},warning:{duration:5e3,enabled:!0},error:{duration:5e3,enabled:!0},success:{duration:5e3,enabled:!0},progress:{duration:0,enabled:!0},custom:{duration:1e4,enabled:!0},details:!0,localStorage:!1,html5Mode:!1,html5DefaultIcon:"icon.png"};return{disableHtml5Mode:function(){e.html5Mode=!1},disableType:function(a){e[a].enabled=!1},enableHtml5Mode:function(){e.html5Mode=this.requestHtml5ModePermissions()},enableType:function(a){e[a].enabled=!0},getSettings:function(){return e},toggleType:function(a){e[a].enabled=!e[a].enabled},toggleHtml5Mode:function(){e.html5Mode=!e.html5Mode},requestHtml5ModePermissions:function(){return window.webkitNotifications?(console.log("notifications are available"),0===window.webkitNotifications.checkPermission()||(window.webkitNotifications.requestPermission(function(){0===window.webkitNotifications.checkPermission()?e.html5Mode=!0:e.html5Mode=!1}),!1)):(console.log("notifications are not supported"),!1)},getAll:function(){return c},getQueue:function(){return d},info:function(a,b,c){return console.log(a,b),this.awesomeNotify("info","info",a,b,c)},error:function(a,b,c){return this.awesomeNotify("error","remove",a,b,c)},success:function(a,b,c){return this.awesomeNotify("success","ok",a,b,c)},warning:function(a,b,c){return this.awesomeNotify("warning","exclamation",a,b,c)},awesomeNotify:function(a,b,c,d,e){return this.makeNotification(a,!1,b,c,d,e)},notify:function(a,b,c,d){return this.makeNotification("custom",a,!0,b,c,d)},makeNotification:function(f,g,h,i,j,k){var l={type:f,image:g,icon:h,title:i,content:j,timestamp:+new Date,userData:k};return c.push(l),e.html5Mode?b(g,i,j,function(){console.log("inner on display function")},function(){console.log("inner on close function")}):(d.push(l),a(function(){d.splice(d.indexOf(l),1)},e[f].duration)),this.save(),l},save:function(){e.localStorage&&localStorage.setItem("$notifications",JSON.stringify(c))},restore:function(){},clear:function(){c=[],this.save()}}}]).directive("notifications",["$notification","$compile",function(a,b){function c(a,b,c){var d=c.notifications;d=d.split(" "),b.addClass("dr-notification-container");for(var e=0;e<d.length;e++)b.addClass(d[e])}return{restrict:"A",scope:{},template:'<div class="dr-notification-wrapper" ng-repeat="noti in queue"><div class="dr-notification-close-btn" ng-click="removeNotification(noti)"><i class="icon-remove"></i></div><div class="dr-notification"><div class="dr-notification-image dr-notification-type-{{noti.type}}" ng-switch on="noti.image"><i class="icon-{{noti.icon}}" ng-switch-when="false"></i><img ng-src="{{noti.image}}" ng-switch-default /></div><div class="dr-notification-content"><h3 class="dr-notification-title">{{noti.title}}</h3><p class="dr-notification-text">{{noti.content}}</p></div></div></div>',link:c,controller:["$scope",function(b){b.queue=a.getQueue(),b.removeNotification=function(a){b.queue.splice(b.queue.indexOf(a),1)}}]}}]);var XLS={};!function(a){function b(){c(1200)}function c(a){ed=a,"undefined"!=typeof cptable&&(dd=cptable[a])}function d(a){return new(id?Buffer:Array)(a)}function e(a){return id?new Buffer(a,"binary"):a.split("").map(function(a){return 255&a.charCodeAt(0)})}function f(a,b,c,d,e){void 0===c&&(c=!0),d||(d=8),e||8!==d||(e=52);var f,g,h=8*d-e-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?-1:1,m=c?d-1:0,n=a[b+m];for(m+=l,f=n&(1<<-k)-1,n>>>=-k,k+=h;k>0;f=256*f+a[b+m],m+=l,k-=8);for(g=f&(1<<-k)-1,f>>>=-k,k+=e;k>0;g=256*g+a[b+m],m+=l,k-=8);return f===i?g?NaN:1/0*(n?-1:1):(0===f?f=1-j:(g+=Math.pow(2,e),f-=j),(n?-1:1)*g*Math.pow(2,f-e))}function g(a,b){var c,d,e,f,h,i,j,k=[];switch(b){case"lpstr":c=rd(this,this.l),a=5+c.length;break;case"lpwstr":c=td(this,this.l),a=5+c.length,"\0"==c[c.length-1]&&(a+=2);break;case"cstr":for(a=0,c="";0!==(f=yd(this,this.l+a++));)k.push(fd(f));c=k.join("");break;case"wstr":for(a=0,c="";0!==(f=zd(this,this.l+a));)k.push(fd(f)),a+=2;a+=2,c=k.join("");break;case"dbcs":for(c="",j=this.l,i=0;i!=a;++i){if(this.lens&&-1!==this.lens.indexOf(j))return f=yd(this,j),this.l=j+1,h=g.call(this,a-i,f?"dbcs":"sbcs"),k.join("")+h;k.push(fd(zd(this,j))),j+=2}c=k.join(""),a*=2;break;case"sbcs":for(c="",j=this.l,i=0;i!=a;++i){if(this.lens&&-1!==this.lens.indexOf(j))return f=yd(this,j),this.l=j+1,h=g.call(this,a-i,f?"dbcs":"sbcs"),k.join("")+h;k.push(fd(yd(this,j))),j+=1}c=k.join("");break;case"utf8":c=qd(this,this.l,this.l+a);break;case"utf16le":a*=2,c=md(this,this.l,this.l+a);break;default:switch(a){case 1:return d=yd(this,this.l),this.l++,d;case 2:return d="i"!==b?zd(this,this.l):Ad(this,this.l),this.l+=2,d;case 4:return"i"===b||0==(128&this[this.l+3])?(d=Cd(this,this.l),this.l+=4,d):(e=Bd(this,this.l),this.l+=4,e);case 8:if("f"===b)return e=vd(this,this.l),this.l+=8,e;case 16:c=od(this,this.l,a)}}return this.l+=a,c}function h(a,b){var c=od(this,this.l,a.length>>1);if(c!==a)throw b+"Expected "+a+" saw "+c;this.l+=a.length>>1}function i(a,b){a.l=b,a.read_shift=g,a.chk=h}function j(a){var b=a.read_shift(4),c=a.read_shift(4);return new Date(1e3*(c/1e7*Math.pow(2,32)+b/1e7-11644473600)).toISOString().replace(/\.000/,"")}function k(a,b,c){var d=a.read_shift(0,"lpstr");return c&&(a.l+=4-(d.length+1&3)&3),d}function l(a,b,c){var d=a.read_shift(0,"lpwstr");return c&&(a.l+=4-(d.length+1&3)&3),d}function m(a,b,c){return 31===b?l(a):k(a,b,c)}function n(a,b,c){return m(a,b,!1===c?0:4)}function o(a,b){if(!b)throw new Error("dafuq?");return m(a,b,0)}function p(a){for(var b=a.read_shift(4),c=[],d=0;d!=b;++d)c[d]=a.read_shift(0,"lpstr");return c}function q(a){return p(a)}function r(a){return[x(a,Pd),x(a,Gd)]}function s(a){for(var b=a.read_shift(4),c=[],d=0;d!=b/2;++d)c.push(r(a));return c}function t(a){return s(a)}function u(a,b){for(var c=a.read_shift(4),d={},e=0;e!=c;++e){var f=a.read_shift(4),g=a.read_shift(4);d[f]=a.read_shift(g,1200===b?"utf16le":"utf8").replace(kd,"").replace(ld,"!")}return 3&a.l&&(a.l=a.l>>3<<2),d}function v(a){var b=a.read_shift(4),c=a.slice(a.l,a.l+b);return!0&b&&(a.l+=4-(3&b)&3),c}function w(a){var b={};return b.Size=a.read_shift(4),a.l+=b.Size,b}function x(a,b,c){var d,e=a.read_shift(2),f=c||{};if(a.l+=2,b!==Id&&e!==b&&-1===Qd.indexOf(b))throw new Error("Expected type "+b+" saw "+e);switch(b===Id?e:b){case 2:return d=a.read_shift(2,"i"),f.raw||(a.l+=2),d;case 3:return d=a.read_shift(4,"i");case 11:return 0!==a.read_shift(4);case 19:return d=a.read_shift(4);case 30:return k(a,e,4).replace(kd,"");case 31:return l(a);case 64:return j(a);case 65:return v(a);case 71:return w(a);case 80:return n(a,e,!f.raw&&4).replace(kd,"");case 81:return o(a,e,4).replace(kd,"");case 4108:return t(a);case 4126:return q(a);default:throw new Error("TypedPropertyValue unrecognized type "+b+" "+e)}}function y(a,b){var d,e=a.l,f=a.read_shift(4),g=a.read_shift(4),h=[],i=0,k=0,l=-1;for(i=0;i!=g;++i){var m=a.read_shift(4),o=a.read_shift(4);h[i]=[m,o+e]}var p={};for(i=0;i!=g;++i){if(a.l!==h[i][1]){var q=!0;if(i>0&&b)switch(b[h[i-1][0]].t){case 2:a.l+2===h[i][1]&&(a.l+=2,q=!1);break;case 80:case 4108:a.l<=h[i][1]&&(a.l=h[i][1],q=!1)}if(!b&&a.l<=h[i][1]&&(q=!1,a.l=h[i][1]),q)throw new Error("Read Error: Expected address "+h[i][1]+" at "+a.l+" :"+i)}if(b){var r=b[h[i][0]];if(p[r.n]=x(a,r.t,{raw:!0}),"version"===r.p&&(p[r.n]=String(p[r.n]>>16)+"."+String(65535&p[r.n])),"CodePage"==r.n)switch(p[r.n]){case 0:p[r.n]=1252;case 1e4:case 1252:case 874:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 932:case 936:case 949:case 950:case 1200:case 1201:case 65e3:case-536:case 65001:case-535:c(k=p[r.n]);break;default:throw new Error("Unsupported CodePage: "+p[r.n])}}else if(1===h[i][0]){if(k=p.CodePage=x(a,Fd),c(k),-1!==l){var s=a.l;a.l=h[l][1],d=u(a,k),a.l=s}}else if(0===h[i][0]){if(0===k){l=i,a.l=h[i+1][1];continue}d=u(a,k)}else{var t,w=d[h[i][0]];switch(a[a.l]){case 65:a.l+=4,t=v(a);break;case 30:case 31:a.l+=4,t=n(a,a[a.l-4]);break;case 3:a.l+=4,t=a.read_shift(4,"i");break;case 19:a.l+=4,t=a.read_shift(4);break;case 5:a.l+=4,t=a.read_shift(8,"f");break;case 11:a.l+=4,t=E(a,4);break;case 64:a.l+=4,t=new Date(j(a));break;default:throw new Error("unparsed value: "+a[a.l])}p[w]=t}}return a.l=e+f,p}function z(a,b){var c=a.content;i(c,0);var d,e,f,g,h;c.chk("feff","Byte Order: ");var j=(c.read_shift(2),c.read_shift(4));if(c.chk(Ud.utils.consts.HEADER_CLSID,"CLSID: "),1!==(d=c.read_shift(4))&&2!==d)throw"Unrecognized #Sets: "+d;if(e=c.read_shift(16),g=c.read_shift(4),1===d&&g!==c.l)throw"Length mismatch";2===d&&(f=c.read_shift(16),h=c.read_shift(4));var k=y(c,b),l={SystemIdentifier:j};for(var m in k)l[m]=k[m];if(l.FMTID=e,1===d)return l;if(c.l!==h)throw"Length mismatch 2: "+c.l+" !== "+h;var n;try{n=y(c,null)}catch(a){}for(m in n)l[m]=n[m];return l.FMTID=[e,f],l}function A(a,b){a.read_shift(b)}function B(a,b){return a.read_shift(b),null}function C(a,b,c){for(var d=[],e=a.l+b;a.l<e;)d.push(c(a,e-a.l));if(e!==a.l)throw new Error("Slurp error");return d}function D(a,b,c){for(var d=[],e=a.l+b,f=a.read_shift(2);0!=f--;)d.push(c(a,e-a.l));if(e!==a.l)throw new Error("Slurp error");return d}function E(a,b){return 1===a.read_shift(b)}function F(a){return a.read_shift(2,"u")}function G(a,b){return C(a,b,F)}function H(a){var b=a.read_shift(1);return 1===a.read_shift(1)?b:1===b}function I(a,b,c){var d=a.read_shift(1),e="sbcs";if(void 0===c||5!==c.biff){a.read_shift(1)&&(2,e="dbcs")}return d?a.read_shift(d,e):""}function J(a){var b=ed;ed=1200;var c,d,e=a.read_shift(2),f=a.read_shift(1),g=4&f,h=8&f,i={};h&&(c=a.read_shift(2)),g&&(d=a.read_shift(4));var j=1&f?"dbcs":"sbcs",k=0===e?"":a.read_shift(e,j);return h&&(a.l+=4*c),g&&(a.l+=d),i.t=k,h||(i.raw="<t>"+i.t+"</t>",i.r=i.t),ed=b,i}function K(a,b,c){return 0===a.read_shift(1)?a.read_shift(b,"sbcs"):a.read_shift(b,"dbcs")}function L(a,b,c){var d=a.read_shift(void 0!==c&&c.biff>0&&c.biff<8?1:2);return 0===d?(a.l++,""):K(a,d,c)}function M(a,b,c){if(5!==c.biff&&2!==c.biff)return L(a,b,c);var d=a.read_shift(1);return 0===d?(a.l++,""):a.read_shift(d,"sbcs")}function N(a){return a.read_shift(8,"f")}function O(a,b){return[a.read_shift(1),a.read_shift(1),a.read_shift(1),a.read_shift(1)]}function P(a,b){var c=O(a,b);return c[3]=0,c}function Q(a){return a.map(function(a){return[a>>16&255,a>>8&255,255&a]})}function R(a){return Object.keys(a)}function S(a,b){for(var c={},d=R(a),e=0;e<d.length;++e){var f=d[e];b?(c[a[f]]=c[a[f]]||[]).push(f):c[a[f]]=f}return c}function T(a){for(var b=0,c=1;3!=b;++b)c=256*c+(a[b]>255?255:a[b]<0?0:a[b]);return c.toString(16).toUpperCase().substr(1)}function U(a,b){return{r:a.read_shift(2),c:a.read_shift(2),ixfe:a.read_shift(2)}}function V(a){var b=a.read_shift(2),c=a.read_shift(2);return a.l+=8,{type:b,flags:c}}function W(a,b,c){return 0===b?"":M(a,b,c)}function X(a,b){return[a.read_shift(2),a.read_shift(2,"i"),a.read_shift(2,"i")]}function Y(a){var b=a.slice(a.l,a.l+4),c=1&b[0],d=2&b[0];a.l+=4,b[0]&=-4;var e=0===d?vd([0,0,0,0,b[0],b[1],b[2],b[3]],0):Cd(b,0)>>2;return c?e/100:e}function Z(a,b){return[a.read_shift(2),Y(a)]}function $(a,b){a.l+=4,b-=4;var c=a.l+b,d=I(a,b),e=a.read_shift(2);if(c-=a.l,e!==c)throw"Malformed AddinUdf: padding = "+c+" != "+e;return a.l+=e,d}function _(a,b){var c=a.read_shift(2),d=a.read_shift(2);return{s:{c:a.read_shift(2),r:c},e:{c:a.read_shift(2),r:d}}}function aa(a,b){var c=a.read_shift(2),d=a.read_shift(2);return{s:{c:a.read_shift(1),r:c},e:{c:a.read_shift(1),r:d}}}function ba(a,b){a.l+=4;var c=a.read_shift(2),d=a.read_shift(2),e=a.read_shift(2);return a.l+=12,[d,c,e]}function ca(a,b){var c={};return a.l+=4,a.l+=16,c.fSharedNote=a.read_shift(2),a.l+=4,c}function da(a,b){var c={};return a.l+=4,a.cf=a.read_shift(2),c}function ea(a,b,c){for(var d=a.l,e=[];a.l<d+b;){var f=a.read_shift(2);a.l-=2;try{e.push(de[f](a,d+b-a.l))}catch(c){return a.l=d+b,e}}return a.l!=d+b&&(a.l=d+b),e}function fa(a,b){var c={};switch(c.BIFFVer=a.read_shift(2),b-=2,c.BIFFVer){case 1536:case 1280:case 2:case 7:break;default:throw"Unexpected BIFF Ver "+c.BIFFVer}return a.read_shift(b),c}function ga(a,b){if(0===b)return 1200;var c;if(1200!==(c=a.read_shift(2)))throw"InterfaceHdr codePage "+c;return 1200}function ha(a,b,c){if(c.enc)return a.l+=b,"";var d=a.l,e=L(a,0,c);return a.read_shift(b+d-a.l),e}function ia(a,b,c){var d=a.read_shift(4),e=a.read_shift(1)>>6,f=a.read_shift(1);switch(f){case 0:f="Worksheet";break;case 1:f="Macrosheet";break;case 2:f="Chartsheet";break;case 6:f="VBAModule"}var g=I(a,0,c);return 0===g.length&&(g="Sheet1"),{pos:d,hs:e,dt:f,name:g}}function ja(a,b){for(var c=a.read_shift(4),d=a.read_shift(4),e=[],f=0;f!=d;++f)e.push(J(a));return e.Count=c,e.Unique=d,e}function ka(a,b){var c={};return c.dsst=a.read_shift(2),a.l+=b-2,c}function la(a,b){var c=a.read_shift(2),d=a.read_shift(2),e=a.read_shift(2);a.read_shift(2);a.read_shift(4);a.read_shift(1);return a.read_shift(1),a.read_shift(2),{r:c,c:d,cnt:e-d}}function ma(a,b){var c=V(a);if(2211!=c.type)throw"Invalid Future Record "+c.type;return 0!==a.read_shift(4)}function na(a,b){return a.read_shift(2),a.read_shift(4)}function oa(a,b){var c,d=a.read_shift(2);return c=a.read_shift(2),[{Unsynced:1&d,DyZero:(2&d)>>1,ExAsc:(4&d)>>2,ExDsc:(8&d)>>3},c]}function pa(a,b){return{Pos:[a.read_shift(2),a.read_shift(2)],Dim:[a.read_shift(2),a.read_shift(2)],Flags:a.read_shift(2),CurTab:a.read_shift(2),FirstTab:a.read_shift(2),Selected:a.read_shift(2),TabRatio:a.read_shift(2)}}function qa(a,b,c){return a.l+=14,I(a,0,c)}function ra(a,b){var c=U(a);return c.isst=a.read_shift(4),c}function sa(a,b,c){var d=U(a,6),e=L(a,b-6,c);return d.val=e,d}function ta(a,b,c){return[a.read_shift(2),M(a,0,c)]}function ua(a,b){var c=10===b?2:4,d=a.read_shift(c),e=a.read_shift(c),f=a.read_shift(2),g=a.read_shift(2);return a.l+=2,{s:{r:d,c:f},e:{r:e,c:g}}}function va(a,b){var c=a.read_shift(2),d=a.read_shift(2),e=Z(a);return{r:c,c:d,ixfe:e[0],rknum:e[1]}}function wa(a,b){for(var c=a.l+b-2,d=a.read_shift(2),e=a.read_shift(2),f=[];a.l<c;)f.push(Z(a));if(a.l!==c)throw"MulRK read error";var g=a.read_shift(2);if(f.length!=g-e+1)throw"MulRK length mismatch";return{r:d,c:e,C:g,rkrec:f}}function xa(a,b,c){var d={},e=(a.read_shift(4),a.read_shift(4),a.read_shift(4)),f=a.read_shift(2);return d.patternType=_d[e>>26],d.icvFore=127&f,d.icvBack=f>>7&127,d}function ya(a,b){var c={};return c.ifnt=a.read_shift(2),c.ifmt=a.read_shift(2),c.flags=a.read_shift(2),c.fStyle=c.flags>>2&1,b-=6,c.data=xa(a,b,c.fStyle),c}function za(a,b){a.l+=4;var c=[a.read_shift(2),a.read_shift(2)];if(0!==c[0]&&c[0]--,0!==c[1]&&c[1]--,c[0]>7||c[1]>7)throw"Bad Gutters: "+c;return c}function Aa(a,b){var c=U(a,6),d=H(a,2);return c.val=d,c.t=!0===d||!1===d?"b":"e",c}function Ba(a,b){var c=U(a,6),d=N(a,8);return c.val=d,c}function Ca(a,b,c){var d,e=a.l+b,f=a.read_shift(2),g=a.read_shift(2);g>=1&&g<=255&&(d=K(a,g));var h=a.read_shift(e-a.l);return c.sbcch=g,[g,f,d,h]}function Da(a,b,c){var d,e=a.read_shift(2),f={fBuiltIn:1&e,fWantAdvise:e>>>1&1,fWantPict:e>>>2&1,fOle:e>>>3&1,fOleLink:e>>>4&1,cf:e>>>5&1023,fIcon:e>>>15&1};return 14849===c.sbcch&&(d=$(a,b-2)),f.body=d||a.read_shift(b-2),f}function Ea(a,b,c){if(c.biff<8)return sa(a,b,c);var d=a.l+b,e=(a.read_shift(2),a.read_shift(1)),f=a.read_shift(1),g=a.read_shift(2);a.l+=2;a.read_shift(2);return a.l+=4,{chKey:e,Name:K(a,f,c),rgce:Yb(a,d-a.l,c,g)}}function Fa(a,b,c){if(c.biff<8)return I(a,b,c);var d=D(a,b,X),e=[];if(1025===c.sbcch){for(var f=0;f!=d.length;++f)e.push(c.snames[d[f][1]]);return e}return d}function Ga(a,b,c){aa(a,6);a.l++;var d=a.read_shift(1);return b-=8,[$b(a,b,c),d]}function Ha(a,b,c){var d=ce(a,6);return a.l+=6,b-=12,[d,_b(a,b,c,d)]}function Ia(a,b){return[0!==a.read_shift(4),0!==a.read_shift(4),a.read_shift(4)]}function Ja(a,b,c){if(!(c.biff<8)){var d=a.read_shift(2),e=a.read_shift(2),f=a.read_shift(2),g=a.read_shift(2),h=M(a,0,c);return c.biff<8&&a.read_shift(1),[{r:d,c:e},h,g,f]}}function Ka(a,b,c){return Ja(a,b,c)}function La(a,b){for(var c=[],d=a.read_shift(2);d--;)c.push(_(a,b));return c}function Ma(a,b){var c=ba(a,22);return{cmo:c,ft:ea(a,b-22,c[1])}}function Na(a,b,c){var d=a.l;try{a.l+=4;var e=(c.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(e)?a.l+=6:Vd(a,6,c);var f=a.read_shift(2),g=(a.read_shift(2),ee(a,2),a.read_shift(2));a.l+=g;for(var h="",i=1;i<a.lens.length-1;++i){if(a.l-d!=a.lens[i])throw"TxO: bad continue record";var j=a[a.l],k=K(a,a.lens[i+1]-a.lens[i]-1);if(h+=k,h.length>=(j?f:2*f))break}if(h.length!==f&&h.length!==2*f)throw"cchText: "+f+" != "+h.length;return a.l=d+b,{t:h}}catch(c){return a.l=d+b,{t:h||""}}}function Oa(a,b){var c,d=[];return c=a.read_shift(2),d[0]=Qk[c]||c,c=a.read_shift(2),d[1]=Qk[c]||c,d}function Pa(a,b){for(var c=a.read_shift(2),d=[];c-- >0;)d.push(P(a,8));return d}function Qa(a,b){for(var c=a.read_shift(2),d=[];c-- >0;)d.push(P(a,8));return d}function Ra(a,b){a.l+=2;var c={cxfs:0,crc:0};return c.cxfs=a.read_shift(2),c.crc=a.read_shift(4),c}function Sa(a,b,c){var d=U(a,6);++a.l;var e=M(a,b-7,c);return d.val=e,d}function Ta(a,b,c){var d=U(a,6);++a.l;var e=N(a,8);return d.val=e,d}function Ua(a,b){var c=a.split(/\s+/),d=[];if(b||(d[0]=c[0]),1===c.length)return d;var e,f,g,h,i=a.match(Yj);if(i)for(h=0;h!=i.length;++h)e=i[h].match(Zj),-1===(f=e[1].indexOf(":"))?d[e[1]]=e[2].substr(1,e[2].length-2):(g="xmlns:"===e[1].substr(0,6)?"xmlns"+e[1].substr(6):e[1].substr(f+1),d[g]=e[2].substr(1,e[2].length-2));return d}function Va(a){var b=a.split(/\s+/),c={};if(1===b.length)return c;var d,e,f,g,h=a.match(Yj);if(h)for(g=0;g!=h.length;++g)d=h[g].match(Zj),-1===(e=d[1].indexOf(":"))?c[d[1]]=d[2].substr(1,d[2].length-2):(f="xmlns:"===d[1].substr(0,6)?"xmlns"+d[1].substr(6):d[1].substr(e+1),c[f]=d[2].substr(1,d[2].length-2));return c}function Wa(a){return"undefined"!=typeof cptable?cptable.utils.encode(1252,a):a.split("").map(function(a){return a.charCodeAt(0)})}function Xa(a,b){var c={};return c.Major=a.read_shift(2),c.Minor=a.read_shift(2),c}function Ya(a,b){var c={};c.Flags=a.read_shift(4);var d=a.read_shift(4);if(0!==d)throw"Unrecognized SizeExtra: "+d;switch(c.AlgID=a.read_shift(4),c.AlgID){case 0:case 26625:case 26126:case 26127:case 26128:break;default:throw"Unrecognized encryption algorithm: "+c.AlgID}return A(a,b-12),c}function Za(a,b){return A(a,b)}function $a(a,b){var c={},d=c.EncryptionVersionInfo=Xa(a,4);if(b-=4,2!=d.Minor)throw"unrecognized minor version code: "+d.Minor;if(d.Major>4||d.Major<2)throw"unrecognized major version code: "+d.Major;c.Flags=a.read_shift(4),b-=4;var e=a.read_shift(4);return b-=4,c.EncryptionHeader=Ya(a,e),b-=e,c.EncryptionVerifier=Za(a,b),c}function _a(a,b){var c={},d=c.EncryptionVersionInfo=Xa(a,4);if(b-=4,1!=d.Major||1!=d.Minor)throw"unrecognized version code "+d.Major+" : "+d.Minor;return c.Salt=a.read_shift(16),c.EncryptedVerifier=a.read_shift(16),c.EncryptedVerifierHash=a.read_shift(16),c}function ab(a){var b,c,e,f,g,h,i=0,j=Wa(a),k=j.length+1;for(b=d(k),b[0]=j.length,c=1;c!=k;++c)b[c]=j[c-1];for(c=k-1;c>=0;--c)e=b[c],f=0==(16384&i)?0:1,g=i<<1&32767,h=f|g,i=h^e;return 52811^i}function bb(a,b,c,d){var e={key:F(a),verificationBytes:F(a)};return c.password&&(e.verifier=ab(c.password)),d.valid=e.verificationBytes===e.verifier,d.valid&&(d.insitu_decrypt=ck(c.password)),e}function cb(a,b,c){var d=c||{};return d.Info=a.read_shift(2),a.l-=2,1===d.Info?d.Data=_a(a,b):d.Data=$a(a,b),d}function db(a,b,c){var d={Type:a.read_shift(2)};return d.Type?cb(a,b-2,d):bb(a,b-2,c,d),d}function eb(a){return function(b,c){b.l+=a}}function fb(a,b){a.l+=1}function gb(a,b){var c=a.read_shift(2);return[16383&c,c>>14&1,c>>15&1]}function hb(a,b){var c=a.read_shift(2),d=a.read_shift(2),e=gb(a,2),f=gb(a,2);return{s:{r:c,c:e[0],cRel:e[1],rRel:e[2]},e:{r:d,c:f[0],cRel:f[1],rRel:f[2]}}}function ib(a,b){var c=a.read_shift(2),d=a.read_shift(2),e=gb(a,2),f=gb(a,2);return{s:{r:c,c:e[0],cRel:e[1],rRel:e[2]},e:{r:d,c:f[0],cRel:f[1],rRel:f[2]}}}function jb(a,b){var c=a.read_shift(2),d=gb(a,2);return{r:c,c:d[0],cRel:d[1],rRel:d[2]}}function kb(a,b){var c=a.read_shift(2),d=a.read_shift(2),e=(32768&d)>>15,f=(16384&d)>>14;if(d&=16383,0!==e)for(;d>=256;)d-=256;return{r:c,c:d,cRel:e,rRel:f}}function lb(a,b){return[(96&a[a.l++])>>5,hb(a,8)]}function mb(a,b){return[(96&a[a.l++])>>5,a.read_shift(2),hb(a,8)]}function nb(a,b){var c=(96&a[a.l++])>>5;return a.l+=8,[c]}function ob(a,b){var c=(96&a[a.l++])>>5,d=a.read_shift(2);return a.l+=8,[c,d]}function pb(a,b){return[(96&a[a.l++])>>5,ib(a,8)]}function qb(a,b){var c=(96&a[a.l++])>>5;return a.l+=7,[c]}function rb(a,b){var c=1&a[a.l+1];return a.l+=4,[c,1]}function sb(a,b){a.l+=2;for(var c=a.read_shift(2),d=[],e=0;e<=c;++e)d.push(a.read_shift(2));return d}function tb(a,b){var c=255&a[a.l+1]?1:0;return a.l+=2,[c,a.read_shift(2)]}function ub(a,b){var c=255&a[a.l+1]?1:0;return a.l+=2,[c,a.read_shift(2)]}function vb(a,b){var c=255&a[a.l+1]?1:0;return a.l+=4,[c]}function wb(a,b){return[a.read_shift(1),a.read_shift(1)]}function xb(a,b){return a.read_shift(2),wb(a,2)}function yb(a,b){return a.read_shift(2),wb(a,2)}function zb(a,b){var c=(a[a.l],(96&a[a.l])>>5);return a.l+=1,[c,jb(a,4)]}function Ab(a,b){var c=(a[a.l],(96&a[a.l])>>5);return a.l+=1,[c,kb(a,4)]}function Bb(a,b){var c=(a[a.l],(96&a[a.l])>>5);return a.l+=1,[c,a.read_shift(2),jb(a,4)]}function Cb(a,b){a[a.l],a[a.l];a.l+=1;var c=a.read_shift(2);return[Nk[c],Mk[c]]}function Db(a,b){a.l++;var c=a.read_shift(1),d=Eb(a);return[c,(0===d[0]?Mk:Lk)[d[1]]]}function Eb(a,b){return[a[a.l+1]>>7,32767&a.read_shift(2)]}function Fb(a,b){return a.l++,[a.read_shift(2),a.read_shift(2)]}function Gb(a,b){return a.l++,Jk[a.read_shift(1)]}function Hb(a,b){return a.l++,a.read_shift(2)}function Ib(a,b){return a.l++,0!==a.read_shift(1)}function Jb(a,b){return a.l++,N(a,8)}function Kb(a,b){return a.l++,I(a)}function Lb(a){var b=[];switch(b[0]=a.read_shift(1)){case 4:b[1]=E(a,1)?"TRUE":"FALSE",a.l+=7;break;case 16:b[1]=Jk[a[a.l]],a.l+=8;break;case 0:a.l+=8;break;case 1:b[1]=N(a,8);break;case 2:b[1]=L(a)}return b}function Mb(a,b){for(var c=a.read_shift(2),d=[],e=0;e!=c;++e)d.push(_(a,8));return d}function Nb(a){for(var b=1+a.read_shift(1),c=1+a.read_shift(2),d=0,e=[];d!=c&&(e[d]=[]);++d)for(var f=0;f!=b;++f)e[d][f]=Lb(a);return e}function Ob(a,b){return[a.read_shift(1)>>>5&3,0,a.read_shift(4)]}function Pb(a,b){return[a.read_shift(1)>>>5&3,a.read_shift(2),a.read_shift(4)]}function Qb(a,b){var c=a.read_shift(1)>>>5&3;return a.l+=4,[c,a.read_shift(2)]}function Rb(a,b){return[a.read_shift(1)>>>5&3,a.read_shift(2)]}function Sb(a,b){var c=a.read_shift(1)>>>5&3;return a.l+=4,[c]}function Tb(a,b,c,d,e,f){var g=d.length>0?0|parseInt(d,10):0,h=f.length>0?0|parseInt(f,10):0;return h<0&&0===e.length&&(h=0),e.length>0&&(h+=Ek.c),c.length>0&&(g+=Ek.r),b+Rc(h)+Oc(g)}function Ub(a,b){return Ek=b,a.replace(Ik,Tb)}function Vb(a,b,c){var d=U(a,6),e=Wb(a,8),f=a.read_shift(1);a.read_shift(1);var g=(a.read_shift(4),"");return 5===c.biff?a.l+=b-20:g=Zb(a,b-20,c),{cell:d,val:e[0],formula:g,shared:f>>3&1,tt:e[1]}}function Wb(a){var b;if(65535!==zd(a,a.l+6))return[N(a),"n"];switch(a[a.l]){case 0:return a.l+=8,["String","s"];case 1:return b=1===a[a.l+2],a.l+=8,[b,"b"];case 2:return b=a[a.l+2],a.l+=8,[b,"e"];case 3:return a.l+=8,["","s"]}}function Xb(a,b,c,d){if(d.biff<8)return A(a,b);for(var e=a.l+b,f=[],g=0;g!==c.length;++g)switch(c[g][0]){case"PtgArray":c[g][1]=Nb(a),f.push(c[g][1]);break;case"PtgMemArea":c[g][2]=Mb(a,c[g][1]),f.push(c[g][2])}return b=e-a.l,0!==b&&f.push(A(a,b)),f}function Yb(a,b,c,d){var e,f=a.l+b,g=ac(a,d);return f!==a.l&&(e=Xb(a,f-a.l,g,c)),[g,e]}function Zb(a,b,c){var d,e=(a.l,a.read_shift(2));if(65535==e)return[[],A(a,b-2)];var f=ac(a,e);return b!==e+2&&(d=Xb(a,b-e-2,f,c)),[f,d]}function $b(a,b,c){var d,e=a.l+b,f=a.read_shift(2),g=ac(a,f);return 65535==f?[[],A(a,b-2)]:(b!==f+2&&(d=Xb(a,e-f-2,g,c)),[g,d])}function _b(a,b,c,d){var e,f=a.l+b,g=a.read_shift(2);if(65535==g)return[[],A(a,b-2)];var h=ac(a,g);return b!==g+2&&(e=Xb(a,f-g-2,h,c)),[h,e]}function ac(a,b){for(var c,d,e=a.l+b,f=[];e!=a.l;)b=e-a.l,d=a[a.l],c=Ck[d],24!==d&&25!==d||(d=a[a.l+1],c=(24===d?Gk:Hk)[d]),c&&c.f?f.push([c.n,c.f(a,b)]):f.push(A(a,b));return f}function bc(a){return a.map(function(a){return a[1]}).join(",")}function cc(a,b,c,d,e){if(void 0!==e&&5===e.biff)return"BIFF5??";var f,g,h,i,j,k,l=void 0!==b?b:{s:{c:0,r:0}},m=[];if(!a[0]||!a[0][0])return"";for(var n=0,o=a[0].length;n<o;++n){var p=a[0][n];switch(p[0]){case"PtgUminus":m.push("-"+m.pop());break;case"PtgUplus":m.push("+"+m.pop());break;case"PtgPercent":m.push(m.pop()+"%");break;case"PtgAdd":f=m.pop(),g=m.pop(),m.push(g+"+"+f);break;case"PtgSub":f=m.pop(),g=m.pop(),m.push(g+"-"+f);break;case"PtgMul":f=m.pop(),g=m.pop(),m.push(g+"*"+f);break;case"PtgDiv":f=m.pop(),g=m.pop(),m.push(g+"/"+f);break;case"PtgPower":f=m.pop(),g=m.pop(),m.push(g+"^"+f);break;case"PtgConcat":f=m.pop(),g=m.pop(),m.push(g+"&"+f);break;case"PtgLt":f=m.pop(),g=m.pop(),m.push(g+"<"+f);break;case"PtgLe":f=m.pop(),g=m.pop(),m.push(g+"<="+f);break;case"PtgEq":f=m.pop(),g=m.pop(),m.push(g+"="+f);break;case"PtgGe":f=m.pop(),g=m.pop(),m.push(g+">="+f);break;case"PtgGt":f=m.pop(),g=m.pop(),m.push(g+">"+f);break;case"PtgNe":f=m.pop(),g=m.pop(),m.push(g+"<>"+f);break;case"PtgIsect":f=m.pop(),g=m.pop(),m.push(g+" "+f);break;case"PtgUnion":f=m.pop(),g=m.pop(),m.push(g+","+f);break;case"PtgRange":case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":break;case"PtgRef":p[1][0],h=Lc(Uc(Vc(p[1][1])),l),m.push(Vc(h));break;case"PtgRefN":p[1][0],h=Lc(Uc(Vc(p[1][1])),c),m.push(Vc(h));break;case"PtgRef3d":p[1][0],i=p[1][1],h=Lc(p[1][2],l),m.push(d[1][i+1]+"!"+Vc(h));break;case"PtgFunc":case"PtgFuncVar":var q=p[1][0],r=p[1][1];q||(q=0);var s=m.slice(-q);m.length-=q,"User"===r&&(r=s.shift()),m.push(r+"("+s.join(",")+")");break;case"PtgBool":m.push(p[1]?"TRUE":"FALSE");break;case"PtgInt":m.push(p[1]);break;case"PtgNum":m.push(String(p[1]));break;case"PtgStr":m.push('"'+p[1]+'"');break;case"PtgErr":m.push(p[1]);break;case"PtgArea":p[1][0],k=Mc(p[1][1],l),m.push(Xc(k));break;case"PtgArea3d":p[1][0],i=p[1][1],k=p[1][2],m.push(d[1][i+1]+"!"+Xc(k));break;case"PtgAttrSum":m.push("SUM("+m.pop()+")");break;case"PtgAttrSemi":break;case"PtgName":j=p[1][2];var t=d[0][j],u=t.Name;u in Ok&&(u=Ok[u]),m.push(u);break;case"PtgNameX":var v=p[1][1];j=p[1][2];var w;d[v+1]?w=d[v+1][j]:d[v-1]&&(w=d[v-1][j]),w||(w={body:"??NAMEX??"}),m.push(w.body);break;case"PtgParen":m.push("("+m.pop()+")");break;case"PtgRefErr":m.push("#REF!");break;case"PtgExp":h={c:p[1][1],r:p[1][0]};var x={c:c.c,r:c.r};if(d.sharedf[Vc(h)]){var y=d.sharedf[Vc(h)];m.push(cc(y,l,x,d,e))}else{var z=!1;for(f=0;f!=d.arrayf.length;++f)g=d.arrayf[f],h.c<g[0].s.c||h.c>g[0].e.c||h.r<g[0].s.r||h.r>g[0].e.r||m.push(cc(g[1],l,x,d,e));z||m.push(p[1])}break;case"PtgArray":m.push("{"+p[1].map(bc).join(";")+"}");break;case"PtgMemArea":case"PtgAttrSpace":case"PtgTbl":case"PtgMemErr":break
;case"PtgMissArg":m.push("");break;case"PtgAreaErr":break;case"PtgAreaN":m.push("");break;case"PtgRefErr3d":case"PtgMemFunc":break;default:throw"Unrecognized Formula Token: "+p}}return m[0]}function dc(a,b){124226!==a.read_shift(4)&&(a.l+=b-4)}function ec(a,b){return a.read_shift(4)}function fc(a,b){var c={};switch(c.xclrType=a.read_shift(2),c.nTintShade=a.read_shift(2),c.xclrType){case 0:a.l+=4;break;case 1:c.xclrValue=gc(a,4);break;case 2:c.xclrValue=O(a,4);break;case 3:c.xclrValue=ec(a,4);break;case 4:a.l+=4}return a.l+=8,c}function gc(a,b){return A(a,b)}function hc(a,b){return A(a,b)}function ic(a,b){var c=a.read_shift(2),d=a.read_shift(2),e=[c];switch(c){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:e[1]=fc(a,d);break;case 6:e[1]=hc(a,d);break;case 14:case 15:e[1]=a.read_shift(5===d?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+c+" "+d)}return e}function jc(a,b){var c=a.l+b;a.l+=2;var d=a.read_shift(2);a.l+=2;for(var e=a.read_shift(2),f=[];e-- >0;)f.push(ic(a,c-a.l));return{ixfe:d,ext:f}}function kc(a,b){b.forEach(function(a){switch(a[0]){case 4:case 5:break;case 7:case 8:case 9:case 10:case 13:case 14:break;default:throw"bafuq"+a[0].toString(16)}})}function lc(a){return function(b){for(var c=0;c!=a.length;++c){var d=a[c];void 0===b[d[0]]&&(b[d[0]]=d[1]),"n"===d[2]&&(b[d[0]]=Number(b[d[0]]))}}}function mc(a){var b,c={},d=a.content,e=28;switch(b=rd(d,e),e+=4+Bd(d,e),c.UserType=b,b=Bd(d,e),e+=4,b){case 0:break;case 4294967295:case 4294967294:e+=4;break;default:if(b>400)throw new Error("Unsupported Clipboard: "+b.toString(16));e+=b}if(b=rd(d,e),e+=0===b.length?0:5+b.length,c.Reserved1=b,1907550708!==(b=Bd(d,e)))return c;throw"Unsupported Unicode Extension"}function nc(a,b,c,d){var e=c,f=[],g=b.slice(b.l,b.l+e);if(d&&d.enc&&d.enc.insitu_decrypt)switch(a.n){case"BOF":case"FilePass":case"FileLock":case"InterfaceHdr":case"RRDInfo":case"RRDHead":case"UsrExcl":break;default:if(0===g.length)break;d.enc.insitu_decrypt(g)}f.push(g),b.l+=e;for(var h=Pk[zd(b,b.l)];null!=h&&"Continue"===h.n;)e=zd(b,b.l+2),f.push(b.slice(b.l+4,b.l+4+e)),b.l+=4+e,h=Pk[zd(b,b.l)];var j=xd(f);i(j,0);var k=0;j.lens=[];for(var l=0;l<f.length;++l)j.lens.push(k),k+=f[l].length;return a.f(j,j.length,d)}function oc(a,b,c){if(a.XF)try{var d=a.XF.ifmt||0;"e"===a.t?a.w=a.w||Jk[a.v]:0===d?"n"===a.t?(0|a.v)===a.v?a.w=Ed._general_int(a.v):a.w=Ed._general_num(a.v):a.w=Ed._general(a.v):a.w=Ed.format(d,a.v,{date1904:c||!1}),b.cellNF&&(a.z=Ed._table[d])}catch(a){if(b.WTF)throw a}}function pc(a,b,c){return{v:a,ixfe:b,t:c}}function qc(a,b){var d,e,f,g,h,i,j,k,l={opts:{}},m={},n={},o={},p={},q=null,r=[],s="",t={},u={},v=[],w=!0,x=[],y=[],z=function(a){return a<8?ae[a]:a<64?y[a-8]||ae[a]:ae[a]},A=function(a,b){var c=b.XF.data;if(c&&c.patternType){b.s={},b.s.patternType=c.patternType;var d;(d=T(z(c.icvFore)))&&(b.s.fgColor={rgb:d}),(d=T(z(c.icvBack)))&&(b.s.bgColor={rgb:d})}},B=function(a,b,c){w&&(c.cellStyles&&b.XF&&b.XF.data&&A(a,b),d=a,e=Vc(a),p.s&&(a.r<p.s.r&&(p.s.r=a.r),a.c<p.s.c&&(p.s.c=a.c)),p.e&&(a.r+1>p.e.r&&(p.e.r=a.r+1),a.c+1>p.e.c&&(p.e.c=a.c+1)),c.sheetRows&&d.r>=c.sheetRows?w=!1:n[e]=b)},C={enc:!1,sbcch:0,snames:[],sharedf:u,arrayf:v,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,wtf:!1};b.password&&(C.password=b.password);var D=[],E=[],F=[[]],G=0,H=0,I=0;F.SheetNames=C.snames,F.sharedf=C.sharedf,F.arrayf=C.arrayf;var J="",K=0;for(C.codepage=1200,c(1200);a.l<a.length-1;){var L=a.l,M=a.read_shift(2);if(0===M&&"EOF"===J)break;var N=a.l===a.length?0:a.read_shift(2),O=Pk[M];if(O&&O.f){if(b.bookSheets&&"BoundSheet8"===J&&"BoundSheet8"!==O.n)break;if(J=O.n,2===O.r||12==O.r){var P=a.read_shift(2);if(N-=2,!C.enc&&P!==M)throw"rt mismatch";12==O.r&&(a.l+=10,N-=10)}var Q;Q="EOF"===O.n?O.f(a,N,C):nc(O,a,N,C);var R=O.n;if(5===C.biff||2===C.biff)switch(R){case"Lbl":R="Label"}switch(R){case"Date1904":l.opts.Date1904=Q;break;case"WriteProtect":l.opts.WriteProtect=!0;break;case"FilePass":if(C.enc||(a.l=0),C.enc=Q,C.WTF&&console.error(Q),!b.password)throw new Error("File is password-protected");if(0!==Q.Type)throw new Error("Encryption scheme unsupported");if(!Q.valid)throw new Error("Password is incorrect");break;case"WriteAccess":C.lastuser=Q;break;case"FileSharing":break;case"CodePage":21010===Q?Q=1200:32769===Q&&(Q=1252),C.codepage=Q,c(Q);break;case"RRTabId":C.rrtabid=Q;break;case"WinProtect":C.winlocked=Q;break;case"Template":break;case"RefreshAll":l.opts.RefreshAll=Q;break;case"BookBool":case"UsesELFs":break;case"MTRSettings":if(Q[0]&&Q[1])throw"Unsupported threads: "+Q;break;case"CalcCount":l.opts.CalcCount=Q;break;case"CalcDelta":l.opts.CalcDelta=Q;break;case"CalcIter":l.opts.CalcIter=Q;break;case"CalcMode":l.opts.CalcMode=Q;break;case"CalcPrecision":l.opts.CalcPrecision=Q;break;case"CalcSaveRecalc":l.opts.CalcSaveRecalc=Q;break;case"CalcRefMode":C.CalcRefMode=Q;break;case"Uncalced":break;case"ForceFullCalculation":l.opts.FullCalc=Q;break;case"WsBool":break;case"XF":x.push(Q);break;case"ExtSST":case"BookExt":case"RichTextStream":case"BkHim":break;case"SupBook":F[++G]=[Q],H=0;break;case"ExternName":F[G][++H]=Q;break;case"Index":break;case"Lbl":F[0][++I]=Q;break;case"ExternSheet":F[G]=F[G].concat(Q),H+=Q.length;break;case"Protect":n["!protect"]=Q;break;case"Password":0!==Q&&C.WTF&&console.error("Password verifier: "+Q);break;case"Prot4Rev":case"Prot4RevPass":break;case"BoundSheet8":o[Q.pos]=Q,C.snames.push(Q.name);break;case"EOF":if(--K)break;p.e&&(n["!range"]=p,p.e.r>0&&p.e.c>0&&(p.e.r--,p.e.c--,n["!ref"]=Xc(p),p.e.r++,p.e.c++),D.length>0&&(n["!merges"]=D),E.length>0&&(n["!objects"]=E)),""===s?t=n:m[s]=n,n={};break;case"BOF":if(8!==C.biff||(1280===Q.BIFFVer?C.biff=5:2===Q.BIFFVer?C.biff=2:7===Q.BIFFVer&&(C.biff=2)),K++)break;w=!0,n={},2===C.biff?(""===s&&(s="Sheet1"),p={s:{r:0,c:0},e:{r:0,c:0}}):s=(o[L]||{name:""}).name,D=[],E=[];break;case"Number":case"BIFF2NUM":j={ixfe:Q.ixfe,XF:x[Q.ixfe],v:Q.val,t:"n"},j.XF&&oc(j,b,l.opts.Date1904),B({c:Q.c,r:Q.r},j,b);break;case"BoolErr":j={ixfe:Q.ixfe,XF:x[Q.ixfe],v:Q.val,t:Q.t},j.XF&&oc(j,b,l.opts.Date1904),B({c:Q.c,r:Q.r},j,b);break;case"RK":j={ixfe:Q.ixfe,XF:x[Q.ixfe],v:Q.rknum,t:"n"},j.XF&&oc(j,b,l.opts.Date1904),B({c:Q.c,r:Q.r},j,b);break;case"MulRk":for(var S=Q.c;S<=Q.C;++S){var U=Q.rkrec[S-Q.c][0];j={ixfe:U,XF:x[U],v:Q.rkrec[S-Q.c][1],t:"n"},j.XF&&oc(j,b,l.opts.Date1904),B({c:S,r:Q.r},j,b)}break;case"Formula":switch(Q.val){case"String":q=Q;break;case"Array Formula":throw"Array Formula unsupported";default:j={v:Q.val,ixfe:Q.cell.ixfe,t:Q.tt},j.XF=x[j.ixfe],b.cellFormula&&(j.f="="+cc(Q.formula,p,Q.cell,F,C)),j.XF&&oc(j,b,l.opts.Date1904),B(Q.cell,j,b),q=Q}break;case"String":q&&(q.val=Q,j={v:q.val,ixfe:q.cell.ixfe,t:"s"},j.XF=x[j.ixfe],b.cellFormula&&(j.f="="+cc(q.formula,p,q.cell,F,C)),j.XF&&oc(j,b,l.opts.Date1904),B(q.cell,j,b),q=null);break;case"Array":v.push(Q);break;case"ShrFmla":if(!w)break;u[Vc(q.cell)]=Q[0];break;case"LabelSst":j=pc(r[Q.isst].t,Q.ixfe,"s"),j.XF=x[j.ixfe],j.XF&&oc(j,b,l.opts.Date1904),B({c:Q.c,r:Q.r},j,b);break;case"Label":case"BIFF2STR":j=pc(Q.val,Q.ixfe,"s"),j.XF=x[j.ixfe],j.XF&&oc(j,b,l.opts.Date1904),B({c:Q.c,r:Q.r},j,b);break;case"Dimensions":1===K&&(p=Q);break;case"SST":r=Q;break;case"Format":Ed.load(Q[1],Q[0]);break;case"MergeCells":D=D.concat(Q);break;case"Obj":E[Q.cmo[0]]=C.lastobj=Q;break;case"TxO":C.lastobj.TxO=Q;break;case"HLink":for(i=Q[0].s.r;i<=Q[0].e.r;++i)for(h=Q[0].s.c;h<=Q[0].e.c;++h)n[Vc({c:h,r:i})]&&(n[Vc({c:h,r:i})].l=Q[1]);break;case"HLinkTooltip":for(i=Q[0].s.r;i<=Q[0].e.r;++i)for(h=Q[0].s.c;h<=Q[0].e.c;++h)n[Vc({c:h,r:i})]&&(n[Vc({c:h,r:i})].l.tooltip=Q[1]);break;case"Note":if(C.biff<=5&&C.biff>=2)break;f=n[Vc(Q[0])];var V=E[Q[2]];if(!f)break;f.c||(f.c=[]),g={a:Q[1],t:V.TxO.t},f.c.push(g);break;default:switch(O.n){case"ClrtClient":break;case"XFExt":kc(x[Q.ixfe],Q.ext);break;case"NameCmt":case"Header":case"Footer":case"HCenter":case"VCenter":case"Pls":case"Setup":case"DefColWidth":case"GCW":case"LHRecord":case"ColInfo":case"Row":case"DBCell":case"MulBlank":case"EntExU2":case"SxView":case"Sxvd":case"SXVI":case"SXVDEx":case"SxIvd":case"SXDI":case"SXLI":case"SXEx":case"QsiSXTag":case"Selection":case"Feat":break;case"FeatHdr":case"FeatHdr11":break;case"Feature11":case"Feature12":case"List12":case"Blank":break;case"Country":k=Q;break;case"RecalcId":break;case"DefaultRowHeight":case"DxGCol":break;case"Fbi":case"Fbi2":case"GelFrame":case"Font":case"XFCRC":case"Style":case"StyleExt":break;case"Palette":y=Q;break;case"Theme":case"ScenarioProtect":case"ObjProtect":case"CondFmt12":case"Table":case"TableStyles":case"TableStyle":case"TableStyleElement":case"SXStreamID":case"SXVS":case"DConRef":case"SXAddl":case"DConBin":case"DConName":case"SXPI":case"SxFormat":case"SxSelect":case"SxRule":case"SxFilt":case"SxItm":case"SxDXF":case"ScenMan":case"DCon":case"CellWatch":case"PrintRowCol":case"PrintGrid":case"PrintSize":case"XCT":case"CRN":case"Scl":case"SheetExt":case"SheetExtOptional":case"ObNoMacros":case"ObProj":case"CodeName":case"GUIDTypeLib":case"WOpt":case"PhoneticInfo":case"OleObjectSize":break;case"DXF":case"DXFN":case"DXFN12":case"DXFN12List":case"DXFN12NoCB":break;case"Dv":case"DVal":break;case"BRAI":case"Series":case"SeriesText":case"DConn":case"DbOrParamQry":case"DBQueryExt":case"IFmtRecord":break;case"CondFmt":case"CF":case"CF12":case"CFEx":case"Excel9File":case"Units":break;case"InterfaceHdr":case"Mms":case"InterfaceEnd":case"DSF":case"BuiltInFnGroupCount":case"Window1":case"Window2":case"HideObj":case"GridSet":case"Guts":case"UserBView":case"UserSViewBegin":case"UserSViewEnd":case"Pane":break;default:switch(O.n){case"Dat":case"Begin":case"End":case"StartBlock":case"EndBlock":case"Frame":case"Area":case"Axis":case"AxisLine":case"Tick":break;case"AxesUsed":case"CrtLayout12":case"CrtLayout12A":case"CrtLink":case"CrtLine":case"CrtMlFrt":case"CrtMlFrtContinue":break;case"LineFormat":case"AreaFormat":case"Chart":case"Chart3d":case"Chart3DBarShape":case"ChartFormat":case"ChartFrtInfo":break;case"PlotArea":case"PlotGrowth":break;case"SeriesList":case"SerParent":case"SerAuxTrend":break;case"DataFormat":case"SerToCrt":case"FontX":break;case"CatSerRange":case"AxcExt":case"SerFmt":case"ShtProps":break;case"DefaultText":case"Text":case"CatLab":case"DataLabExtContents":break;case"Legend":case"LegendException":break;case"Pie":case"Scatter":break;case"PieFormat":case"MarkerFormat":break;case"StartObject":case"EndObject":break;case"AlRuns":case"ObjectLink":case"SIIndex":break;case"AttachedLabel":case"YMult":break;case"Line":case"Bar":case"Surf":case"AxisParent":case"Pos":case"ValueRange":case"SXViewEx9":case"SXViewLink":case"PivotChartBits":case"SBaseRef":case"TextPropsStream":case"LnExt":case"MkrExt":case"CrtCoopt":break;case"Qsi":case"Qsif":case"Qsir":case"QsiSXTag":case"TxtQry":case"FilterMode":break;case"AutoFilter":case"AutoFilterInfo":case"AutoFilter12":case"DropDownObjIds":case"Sort":case"SortData":case"ShapePropsStream":break;case"MsoDrawing":case"MsoDrawingGroup":case"MsoDrawingSelection":case"ImData":break;case"WebPub":case"AutoWebPub":case"RightMargin":case"LeftMargin":case"TopMargin":case"BottomMargin":case"HeaderFooter":case"HFPicture":case"PLV":case"HorizontalPageBreaks":case"VerticalPageBreaks":case"Backup":case"CompressPictures":case"Compat12":break;case"Continue":case"ContinueFrt12":break;case"FrtFontList":case"FrtWrapper":case"ExternCount":case"RString":break;case"TabIdConf":case"Radar":case"RadarArea":case"DropBar":case"Intl":case"CoordList":case"SerAuxErrBar":break;default:switch(O.n){case"SCENARIO":case"DConBin":case"PicF":case"DataLabExt":case"Lel":case"BopPop":case"BopPopCustom":case"RealTimeData":case"Name":break;default:if(b.WTF)throw"Unrecognized Record "+O.n}}}}}else a.l+=N}var W=2===C.biff?["Sheet1"]:Object.keys(o).sort(function(a,b){return Number(a)-Number(b)}).map(function(a){return o[a].name});W.slice();return l.Directory=W,l.SheetNames=W,b.bookSheets||(l.Sheets=m),l.Preamble=t,l.Strings=r,l.SSF=Ed.get_table(),C.enc&&(l.Encryption=C.enc),l.Metadata={},void 0!==k&&(l.Metadata.Country=k),l}function rc(a,c){c||(c={}),Rk(c),b();var d,e;a.find?(d=a.find("!CompObj"),a.find("!SummaryInformation"),e=a.find("/Workbook")):(i(a,0),e={content:a}),e||(e=a.find("/Book"));var f,g;if(d&&(f=mc(d)),c.bookProps&&!c.bookSheets)g={};else{if(!e)throw new Error("Cannot find Workbook stream");g=qc(e.content,c,!!e.find)}a.find&&sc(a);var h={};for(var j in a.Summary)h[j]=a.Summary[j];for(j in a.DocSummary)h[j]=a.DocSummary[j];return g.Props=g.Custprops=h,c.bookFiles&&(g.cfb=a),g.CompObjP=f,g}function sc(a){var b=a.find("!DocumentSummaryInformation");if(b)try{a.DocSummary=z(b,Rd)}catch(a){}var c=a.find("!SummaryInformation");if(c)try{a.Summary=z(c,Sd)}catch(a){}}function tc(a,b){return Xj(parseInt(b,16))}function uc(a){return $j[a]}function vc(a){return a.indexOf("&")>-1&&(a=a.replace(Sk,uc)),-1===a.indexOf("_")?a:a.replace(Tk,tc)}function wc(a,b){switch(a){case"1":case"true":case"TRUE":return!0;default:return!1}}function xc(a,b){return String.fromCharCode(parseInt(b,10))}function yc(a){return a.replace(Uk,xc)}function zc(a,b,c){switch(b){case"Description":b="Comments"}a[b]=c}function Ac(a,b){var c=Vk[a]||vc(a);return"General"===c?Ed._general(b):Ed.format(c,b)}function Bc(a,b,c,d){switch((c[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":d=wc(d);break;case"i2":case"int":d=parseInt(d,10);break;case"r4":case"float":d=parseFloat(d);break;case"date":case"dateTime.tz":d=new Date(d);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw"bad custprop:"+c[0]}a[vc(b[3])]=d}function Cc(a,b,c){try{"e"===a.t?a.w=a.w||Jk[a.v]:"General"===b?"n"===a.t?(0|a.v)===a.v?a.w=Ed._general_int(a.v):a.w=Ed._general_num(a.v):a.w=Ed._general(a.v):a.w=Ac(b||"General",a.v),c.cellNF&&(a.z=Vk[b]||b||"General")}catch(a){if(c.WTF)throw a}}function Dc(a,b,c){if(c.cellStyles&&b.Interior){var d=b.Interior;d.Pattern&&(d.patternType=Wk[d.Pattern]||d.Pattern)}a[b.ID]=b}function Ec(a,b,c,d,e,f,g,h,i){var j="General",k=d.StyleID,l={};i=i||{};var m=[];for(void 0===k&&h&&(k=h.StyleID),void 0===k&&g&&(k=g.StyleID);void 0!==f[k]&&(f[k].nf&&(j=f[k].nf),f[k].Interior&&m.push(f[k].Interior),f[k].Parent);)k=f[k].Parent;switch(c.Type){case"Boolean":d.t="b",d.v=wc(a);break;case"String":d.t="s",d.r=yc(vc(a)),d.v=a.indexOf("<")>-1?b:d.r;break;case"DateTime":d.v=(Date.parse(a)-new Date(Date.UTC(1899,11,30)))/864e5,d.v!==d.v?d.v=vc(a):d.v>=1&&d.v<60&&(d.v=d.v-1),j&&"General"!=j||(j="yyyy-mm-dd");case"Number":void 0===d.v&&(d.v=+a),d.t||(d.t="n");break;case"Error":d.t="e",d.v=Kk[a],d.w=a;break;default:d.t="s",d.v=yc(b)}Cc(d,j,i),null!=i.cellFormula&&d.Formula&&(d.f=Ub(vc(d.Formula),e),d.Formula=void 0),i.cellStyles&&(m.forEach(function(a){!l.patternType&&a.patternType&&(l.patternType=a.patternType)}),d.s=l),d.ixfe=void 0!==d.StyleID?d.StyleID:"Default"}function Fc(a){a.t=a.v,a.v=a.w=a.ixfe=void 0}function Gc(a){if(id&&Buffer.isBuffer(a))return a.toString("utf8");if("string"==typeof a)return a;throw"badf"}function Hc(a,b){for(var c,d,e,f,g,h=Gc(a),i=[],j={},k=[],l={},m="",n={},o={},p=0,q=0,r={s:{r:1e6,c:1e6},e:{r:0,c:0}},s={},t={},u="",v=0,w=[],x={},y={},z=0,A={},B=[],C={},D=[];c=Xk.exec(h);)switch(c[3]){case"Data":if(i[i.length-1][1])break;"/"===c[1]?Ec(h.slice(f,c.index),u,e,"Comment"==i[i.length-1][0]?C:n,{c:p,r:q},s,D[p],o,b):(u="",e=Ua(c[0]),f=c.index+c[0].length);break;case"Cell":if("/"===c[1]){if(B.length>0&&(n.c=B),(!b.sheetRows||b.sheetRows>q)&&void 0!==n.v&&(l[Rc(p)+Oc(q)]=n),n.HRef&&(n.l={Target:n.HRef,tooltip:n.HRefScreenTip},n.HRef=n.HRefScreenTip=void 0),n.MergeAcross||n.MergeDown){var E=p+(0|parseInt(n.MergeAcross,10)),F=q+(0|parseInt(n.MergeDown,10));w.push({s:{c:p,r:q},e:{c:E,r:F}})}++p,n.MergeAcross&&(p+=+n.MergeAcross)}else n=Va(c[0]),n.Index&&(p=+n.Index-1),p<r.s.c&&(r.s.c=p),p>r.e.c&&(r.e.c=p),"/>"===c[0].substr(-2)&&++p,B=[];break;case"Row":"/"===c[1]||"/>"===c[0].substr(-2)?(q<r.s.r&&(r.s.r=q),q>r.e.r&&(r.e.r=q),"/>"===c[0].substr(-2)&&(o=Ua(c[0]),o.Index&&(q=+o.Index-1)),p=0,++q):(o=Ua(c[0]),o.Index&&(q=+o.Index-1));break;case"Worksheet":if("/"===c[1]){if((d=i.pop())[0]!==c[3])throw"Bad state: "+d;k.push(m),r.s.r<=r.e.r&&r.s.c<=r.e.c&&(l["!ref"]=Xc(r)),w.length&&(l["!merges"]=w),j[m]=l}else r={s:{r:1e6,c:1e6},e:{r:0,c:0}},q=p=0,i.push([c[3],!1]),d=Ua(c[0]),m=d.Name,l={},w=[];break;case"Table":if("/"===c[1]){if((d=i.pop())[0]!==c[3])throw"Bad state: "+d}else{if("/>"==c[0].slice(-2))break;Ua(c[0]),i.push([c[3],!1]),D=[]}break;case"Style":"/"===c[1]?Dc(s,t,b):t=Ua(c[0]);break;case"NumberFormat":t.nf=Ua(c[0]).Format||"General";break;case"Column":if("Table"!==i[i.length-1][0])break;g=Ua(c[0]),D[g.Index-1||D.length]=g;for(var G=0;G<+g.Span;++G)D[D.length]=g;break;case"NamedRange":case"NamedCell":case"B":case"I":case"U":case"S":case"Sub":case"Sup":case"Span":case"Border":case"Alignment":case"Borders":break;case"Font":if("/>"===c[0].substr(-2))break;"/"===c[1]?u+=h.slice(v,c.index):v=c.index+c[0].length;break;case"Interior":if(!b.cellStyles)break;t.Interior=Ua(c[0]);break;case"Protection":break;case"Author":case"Title":case"Description":case"Created":case"Keywords":case"Subject":case"Category":case"Company":case"LastAuthor":case"LastSaved":case"LastPrinted":case"Version":case"Revision":case"TotalTime":case"HyperlinkBase":case"Manager":if("/>"===c[0].substr(-2))break;"/"===c[1]?zc(x,c[3],h.slice(z,c.index)):z=c.index+c[0].length;break;case"Paragraphs":break;case"Styles":case"Workbook":if("/"===c[1]){if((d=i.pop())[0]!==c[3])throw"Bad state: "+d}else i.push([c[3],!1]);break;case"Comment":if("/"===c[1]){if((d=i.pop())[0]!==c[3])throw"Bad state: "+d;Fc(C),B.push(C)}else i.push([c[3],!1]),d=Ua(c[0]),C={a:d.Author};break;case"Name":break;case"ComponentOptions":case"DocumentProperties":case"CustomDocumentProperties":case"OfficeDocumentSettings":case"PivotTable":case"PivotCache":case"Names":case"MapInfo":case"PageBreaks":case"QueryTable":case"DataValidation":case"AutoFilter":case"Sorting":case"Schema":case"data":case"ConditionalFormatting":case"SmartTagType":case"SmartTags":case"ExcelWorkbook":case"WorkbookOptions":case"WorksheetOptions":if("/"===c[1]){if((d=i.pop())[0]!==c[3])throw"Bad state: "+d}else"/"!==c[0].charAt(c[0].length-2)&&i.push([c[3],!0]);break;default:var H=!0;switch(i[i.length-1][0]){case"OfficeDocumentSettings":switch(c[3]){case"AllowPNG":case"RemovePersonalInformation":case"DownloadComponents":case"LocationOfComponents":case"Colors":case"Color":case"Index":case"RGB":case"PixelsPerInch":case"TargetScreenSize":case"ReadOnlyRecommended":break;default:H=!1}break;case"ComponentOptions":switch(c[3]){case"Toolbar":case"HideOfficeLogo":case"SpreadsheetAutoFit":case"Label":case"Caption":case"MaxHeight":case"MaxWidth":case"NextSheetNumber":break;default:H=!1}break;case"ExcelWorkbook":switch(c[3]){case"WindowHeight":case"WindowWidth":case"WindowTopX":case"WindowTopY":case"TabRatio":case"ProtectStructure":case"ProtectWindows":case"ActiveSheet":case"DisplayInkNotes":case"FirstVisibleSheet":case"SupBook":case"SheetName":case"SheetIndex":case"SheetIndexFirst":case"SheetIndexLast":case"Dll":case"AcceptLabelsInFormulas":case"DoNotSaveLinkValues":case"Date1904":case"Iteration":case"MaxIterations":case"MaxChange":case"Path":case"Xct":case"Count":case"SelectedSheets":case"Calculation":case"Uncalced":case"StartupPrompt":case"Crn":case"ExternName":case"Formula":case"ColFirst":case"ColLast":case"WantAdvise":case"Boolean":case"Error":case"Text":case"OLE":case"NoAutoRecover":case"PublishObjects":case"DoNotCalculateBeforeSave":case"Number":case"RefModeR1C1":case"EmbedSaveSmartTags":break;default:H=!1}break;case"WorkbookOptions":switch(c[3]){case"OWCVersion":case"Height":case"Width":break;default:H=!1}break;case"WorksheetOptions":switch(c[3]){case"Unsynced":case"Visible":case"Print":case"Panes":case"Scale":case"Pane":case"Number":case"Layout":case"Header":case"Footer":case"PageSetup":case"PageMargins":case"Selected":case"ProtectObjects":case"EnableSelection":case"ProtectScenarios":case"ValidPrinterInfo":case"HorizontalResolution":case"VerticalResolution":case"NumberofCopies":case"ActiveRow":case"ActiveCol":case"ActivePane":case"TopRowVisible":case"TopRowBottomPane":case"LeftColumnVisible":case"LeftColumnRightPane":case"FitToPage":case"RangeSelection":case"PaperSizeIndex":case"PageLayoutZoom":case"PageBreakZoom":case"FilterOn":case"DoNotDisplayGridlines":case"SplitHorizontal":case"SplitVertical":case"FreezePanes":case"FrozenNoSplit":case"FitWidth":case"FitHeight":case"CommentsLayout":case"Zoom":case"LeftToRight":case"Gridlines":case"AllowSort":case"AllowFilter":case"AllowInsertRows":case"AllowDeleteRows":case"AllowInsertCols":case"AllowDeleteCols":case"AllowInsertHyperlinks":case"AllowFormatCells":case"AllowSizeCols":case"AllowSizeRows":case"NoSummaryRowsBelowDetail":case"TabColorIndex":case"DoNotDisplayHeadings":case"ShowPageLayoutZoom":case"NoSummaryColumnsRightDetail":case"BlackAndWhite":case"DoNotDisplayZeros":case"DisplayPageBreak":case"RowColHeadings":case"DoNotDisplayOutline":case"NoOrientation":case"AllowUsePivotTables":case"ZeroHeight":case"ViewableRange":case"Selection":case"ProtectContents":break;default:H=!1}break;case"PivotTable":case"PivotCache":switch(c[3]){case"ImmediateItemsOnDrop":case"ShowPageMultipleItemLabel":case"CompactRowIndent":case"Location":case"PivotField":case"Orientation":case"LayoutForm":case"LayoutSubtotalLocation":case"LayoutCompactRow":case"Position":case"PivotItem":case"DataType":case"DataField":case"SourceName":case"ParentField":case"PTLineItems":case"PTLineItem":case"CountOfSameItems":case"Item":case"ItemType":case"PTSource":case"CacheIndex":case"ConsolidationReference":case"FileName":case"Reference":case"NoColumnGrand":case"NoRowGrand":case"BlankLineAfterItems":case"Hidden":case"Subtotal":case"BaseField":case"MapChildItems":case"Function":case"RefreshOnFileOpen":case"PrintSetTitles":case"MergeLabels":case"DefaultVersion":case"RefreshName":case"RefreshDate":case"RefreshDateCopy":case"VersionLastRefresh":case"VersionLastUpdate":case"VersionUpdateableMin":case"VersionRefreshableMin":case"Calculation":break;default:H=!1}break;case"PageBreaks":switch(c[3]){case"ColBreaks":case"ColBreak":case"RowBreaks":case"RowBreak":case"ColStart":case"ColEnd":case"RowEnd":break;default:H=!1}break;case"AutoFilter":switch(c[3]){case"AutoFilterColumn":case"AutoFilterCondition":case"AutoFilterAnd":case"AutoFilterOr":break;default:H=!1}break;case"QueryTable":switch(c[3]){case"Id":case"AutoFormatFont":case"AutoFormatPattern":case"QuerySource":case"QueryType":case"EnableRedirections":case"RefreshedInXl9":case"URLString":case"HTMLTables":case"Connection":case"CommandText":case"RefreshInfo":case"NoTitles":case"NextId":case"ColumnInfo":case"OverwriteCells":case"DoNotPromptForFile":case"TextWizardSettings":case"Source":case"Number":case"Decimal":case"ThousandSeparator":case"TrailingMinusNumbers":case"FormatSettings":case"FieldType":case"Delimiters":case"Tab":case"Comma":case"AutoFormatName":case"VersionLastEdit":case"VersionLastRefresh":break;default:H=!1}break;case"Sorting":case"ConditionalFormatting":case"DataValidation":switch(c[3]){case"Range":case"Type":case"Min":case"Max":case"Sort":case"Descending":case"Order":case"CaseSensitive":case"Value":case"ErrorStyle":case"ErrorMessage":case"ErrorTitle":case"CellRangeList":case"InputMessage":case"InputTitle":case"ComboHide":case"InputHide":case"Condition":case"Qualifier":case"UseBlank":case"Value1":case"Value2":case"Format":break;default:H=!1}break;case"MapInfo":case"Schema":case"data":switch(c[3]){case"Map":case"Entry":case"Range":case"XPath":case"Field":case"XSDType":case"FilterOn":case"Aggregate":case"ElementType":case"AttributeType":break;case"schema":case"element":case"complexType":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:H=!1}break;case"SmartTags":break;default:H=!1}if(H)break;if(!i[i.length-1][1])throw"Unrecognized tag: "+c[3]+"|"+i.join("|");if("CustomDocumentProperties"===i[i.length-1][0]){if("/>"===c[0].substr(-2))break;"/"===c[1]?Bc(y,c,A,h.slice(z,c.index)):(A=c,z=c.index+c[0].length);break}if(b.WTF)throw"Unrecognized tag: "+c[3]+"|"+i.join("|")}var I={};return b.bookSheets||b.bookProps||(I.Sheets=j),I.SheetNames=k,I.SSF=Ed.get_table(),I.Props=x,I.Custprops=y,I}function Ic(a,b){switch(Rk(b=b||{}),b.type||"base64"){case"base64":return Hc(jd.decode(a),b);case"binary":case"buffer":case"file":return Hc(a,b);case"array":return Hc(a.map(Xj).join(""),b)}}function Jc(a,b){switch((b||{}).type||"base64"){case"buffer":return a[0];case"base64":return jd.decode(a.substr(0,12)).charCodeAt(0);case"binary":return a.charCodeAt(0);case"array":return a[0];default:throw new Error("Unrecognized type "+b.type)}}function Kc(a,b){switch(b||(b={}),b.type||(b.type=id&&Buffer.isBuffer(a)?"buffer":"base64"),Jc(a,b)){case 208:return rc(Ud.read(a,b),b);case 9:return rc(e("base64"===b.type?jd.decode(a):a),b);case 60:return Ic(a,b);default:throw"Unsupported file"}}function Lc(a,b){for(b.s?(a.cRel&&(a.c+=b.s.c),a.rRel&&(a.r+=b.s.r)):(a.c+=b.c,a.r+=b.r),a.cRel=a.rRel=0;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536;return a}function Mc(a,b){return a.s=Lc(a.s,b.s),a.e=Lc(a.e,b.s),a}function Nc(a){return parseInt(Pc(a),10)-1}function Oc(a){return""+(a+1)}function Pc(a){return a.replace(/\$(\d+)$/,"$1")}function Qc(a){for(var b=Sc(a),c=0,d=0;d!==b.length;++d)c=26*c+b.charCodeAt(d)-64;return c-1}function Rc(a){var b="";for(++a;a;a=Math.floor((a-1)/26))b=String.fromCharCode((a-1)%26+65)+b;return b}function Sc(a){return a.replace(/^\$([A-Z])/,"$1")}function Tc(a){return a.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Uc(a){var b=Tc(a);return{c:Qc(b[0]),r:Nc(b[1])}}function Vc(a){return Rc(a.c)+Oc(a.r)}function Wc(a){var b=a.split(":").map(Uc);return{s:b[0],e:b[b.length-1]}}function Xc(a,b){return void 0===b||"number"==typeof b?Xc(a.s,a.e):("string"!=typeof a&&(a=Vc(a)),"string"!=typeof b&&(b=Vc(b)),a==b?a:a+":"+b)}function Yc(a){var b={s:{c:0,r:0},e:{c:0,r:0}},c=0,d=0,e=0,f=a.length;for(c=0;d<f&&!((e=a.charCodeAt(d)-64)<1||e>26);++d)c=26*c+e;for(b.s.c=--c,c=0;d<f&&!((e=a.charCodeAt(d)-48)<0||e>9);++d)c=10*c+e;if(b.s.r=--c,d===f||58===a.charCodeAt(++d))return b.e.c=b.s.c,b.e.r=b.s.r,b;for(c=0;d!=f&&!((e=a.charCodeAt(d)-64)<1||e>26);++d)c=26*c+e;for(b.e.c=--c,c=0;d!=f&&!((e=a.charCodeAt(d)-48)<0||e>9);++d)c=10*c+e;return b.e.r=--c,b}function Zc(a,b){if(void 0!==a.z)try{return a.w=Ed.format(a.z,b)}catch(a){}if(!a.XF)return b;try{return a.w=Ed.format(a.XF.ifmt||0,b)}catch(a){return""+b}}function $c(a,b){return null==a||null==a.t?"":void 0!==a.w?a.w:void 0===b?Zc(a,a.v):Zc(a,b)}function _c(a,b){var c,d,e,f,g,h,i,j,k=0,l=1,m=[],n=null!=b?b:{},o=n.raw;if(null==a||null==a["!ref"])return[];switch(e=void 0!==n.range?n.range:a["!ref"],1===n.header?k=1:"A"===n.header?k=2:Array.isArray(n.header)&&(k=3),typeof e){case"string":f=Yc(e);break;case"number":f=Yc(a["!ref"]),f.s.r=e;break;default:f=e}k>0&&(l=0);var p=Oc(f.s.r),q=new Array(f.e.c-f.s.c+1),r=new Array(f.e.r-f.s.r-l+1),s=0;for(i=f.s.c;i<=f.e.c;++i)switch(q[i]=Rc(i),c=a[q[i]+p],k){case 1:m[i]=i;break;case 2:m[i]=q[i];break;case 3:m[i]=n.header[i-f.s.c];break;default:if(void 0===c)continue;m[i]=$c(c)}for(h=f.s.r+l;h<=f.e.r;++h){for(p=Oc(h),g=!0,1===k?d=[]:(d={},Object.defineProperty?Object.defineProperty(d,"__rowNum__",{value:h,enumerable:!1}):d.__rowNum__=h),i=f.s.c;i<=f.e.c;++i)if(void 0!==(c=a[q[i]+p])&&void 0!==c.t){switch(j=c.v,c.t){case"e":continue;case"s":break;case"b":case"n":break;default:throw"unrecognized type "+c.t}void 0!==j&&(d[m[i]]=o?j:$c(c,j),g=!1)}!1!==g&&1!==k||(r[s++]=d)}return r.length=s,r}function ad(a,b){return _c(a,null!=b?b:{})}function bd(a,b){var c="",d="",e=/"/g,f=null==b?{}:b;if(null==a||null==a["!ref"])return"";var g,h=Yc(a["!ref"]),i=void 0!==f.FS?f.FS:",",j=i.charCodeAt(0),k=void 0!==f.RS?f.RS:"\n",l=k.charCodeAt(0),m="",n="",o=[],p=0,q=0,r=0,s=0;for(s=h.s.c;s<=h.e.c;++s)o[s]=Rc(s);for(r=h.s.r;r<=h.e.r;++r){for(m="",n=Oc(r),s=h.s.c;s<=h.e.c;++s){for(g=a[o[s]+n],d=void 0!==g?""+$c(g):"",p=0,q=0;p!==d.length;++p)if((q=d.charCodeAt(p))===j||q===l||34===q){d='"'+d.replace(e,'""')+'"';break}m+=(s===h.s.c?"":i)+d}c+=m+k}return c}function cd(a){var b,c,d="",e="";if(null==a||null==a["!ref"])return"";var f,g=Yc(a["!ref"]),h="",i=[];b=new Array((g.e.r-g.s.r+1)*(g.e.c-g.s.c+1));var j=0;for(f=g.s.c;f<=g.e.c;++f)i[f]=Rc(f);for(var k=g.s.r;k<=g.e.r;++k)for(h=Oc(k),f=g.s.c;f<=g.e.c;++f)if(d=i[f]+h,c=a[d],e="",void 0!==c){if(null!=c.f)e=c.f;else if(void 0!==c.w)e="'"+c.w;else{if(void 0===c.v)continue;e=""+c.v}b[j++]=d+"="+e}return b.length=j,b}a.version="0.7.4-a";var dd,ed=1200;"undefined"!=typeof module&&"undefined"!=typeof require&&("undefined"==typeof cptable&&(cptable=require("./dist/cpexcel")),dd=cptable[ed]);var fd=function(a){return String.fromCharCode(a)};"undefined"!=typeof cptable&&(fd=function(a){return 1200===ed?String.fromCharCode(a):cptable.utils.decode(ed,[255&a,a>>8])[0]});var gd,hd,id="undefined"!=typeof Buffer,jd=function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{decode:function(b,c){var d,e,f,g,h,i,j,k="";b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var l=0;l<b.length;)g=a.indexOf(b.charAt(l++)),h=a.indexOf(b.charAt(l++)),i=a.indexOf(b.charAt(l++)),j=a.indexOf(b.charAt(l++)),d=g<<2|h>>4,e=(15&h)<<4|i>>2,f=(3&i)<<6|j,k+=String.fromCharCode(d),64!=i&&(k+=String.fromCharCode(e)),64!=j&&(k+=String.fromCharCode(f));return k}}}(),kd=/\u0000/g,ld=/[\u0001-\u0006]/;gd=hd=function(a){for(var b=[],c=0;c<a[0].length;++c)b.push.apply(b,a[0][c]);return b};var md,nd;md=nd=function(a,b,c){for(var d=[],e=b;e<c;e+=2)d.push(String.fromCharCode(zd(a,e)));return d.join("")};var od,pd;od=pd=function(a,b,c){return a.slice(b,b+c).map(function(a){return(a<16?"0":"")+a.toString(16)}).join("")};var qd;qd=function(a,b,c){for(var d=[],e=b;e<c;e++)d.push(String.fromCharCode(yd(a,e)));return d.join("")};var rd,sd;rd=sd=function(a,b){var c=Bd(a,b);return c>0?qd(a,b+4,b+4+c-1):""};var td,ud;td=ud=function(a,b){var c=2*Bd(a,b);return c>0?qd(a,b+4,b+4+c-1):""};var vd,wd;vd=wd=function(a,b){return f(a,b)};var xd=function(a){return[].concat.apply([],a)};"undefined"!=typeof Buffer&&(md=function(a,b,c){return Buffer.isBuffer(a)?a.toString("utf16le",b,c):nd(a,b,c)},od=function(a,b,c){return Buffer.isBuffer(a)?a.toString("hex",b,b+c):pd(a,b,c)},rd=function(a,b){if(!Buffer.isBuffer(a))return sd(a,b);var c=a.readUInt32LE(b);return c>0?a.toString("utf8",b+4,b+4+c-1):""},td=function(a,b){if(!Buffer.isBuffer(a))return ud(a,b);var c=2*a.readUInt32LE(b);return a.toString("utf16le",b+4,b+4+c-1)},qd=function(a,b){return this.toString("utf8",a,b)},gd=function(a){return a[0].length>0&&Buffer.isBuffer(a[0][0])?Buffer.concat(a[0]):hd(a)},xd=function(a){return Buffer.isBuffer(a[0])?Buffer.concat(a):[].concat.apply([],a)},vd=function(a,b){return Buffer.isBuffer(a)?a.readDoubleLE(b):wd(a,b)});var yd=function(a,b){return a[b]},zd=function(a,b){return 256*a[b+1]+a[b]},Ad=function(a,b){var c=256*a[b+1]+a[b];return c<32768?c:-1*(65535-c+1)},Bd=function(a,b){return a[b+3]*(1<<24)+(a[b+2]<<16)+(a[b+1]<<8)+a[b]},Cd=function(a,b){return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]},Dd=function(a){return a.match(/../g).map(function(a){return parseInt(a,16)})};"undefined"!=typeof cptable&&(md=function(a,b,c){return cptable.utils.decode(1200,a.slice(b,c))},qd=function(a,b,c){return cptable.utils.decode(65001,a.slice(b,c))},rd=function(a,b){var c=Bd(a,b);return c>0?cptable.utils.decode(ed,a.slice(b+4,b+4+c-1)):""},td=function(a,b){var c=2*Bd(a,b);return c>0?cptable.utils.decode(1200,a.slice(b+4,b+4+c-1)):""});var Ed={};!function(a){function b(a){for(var b="",c=a.length-1;c>=0;)b+=a.charAt(c--);return b}function c(a,b){for(var c="";c.length<b;)c+=a;return c}function d(a,b){var d=""+a;return d.length>=b?d:c("0",b-d.length)+d}function e(a,b){var d=""+a;return d.length>=b?d:c(" ",b-d.length)+d}function f(a,b){var d=""+a;return d.length>=b?d:d+c(" ",b-d.length)}function g(a,b){var d=""+Math.round(a);return d.length>=b?d:c("0",b-d.length)+d}function h(a,b){var d=""+a;return d.length>=b?d:c("0",b-d.length)+d}function i(a,b){
return a>x||a<-x?g(a,b):h(Math.round(a),b)}function j(a,b){return a.length>=7+b&&103==(32|a.charCodeAt(b))&&101==(32|a.charCodeAt(b+1))&&110==(32|a.charCodeAt(b+2))&&101==(32|a.charCodeAt(b+3))&&114==(32|a.charCodeAt(b+4))&&97==(32|a.charCodeAt(b+5))&&108==(32|a.charCodeAt(b+6))}function k(a){for(var b=0;b!=y.length;++b)void 0===a[y[b][0]]&&(a[y[b][0]]=y[b][1])}function l(a,b,c){for(var d=a<0?-1:1,e=a*d,f=0,g=1,h=0,i=1,j=0,k=0,l=Math.floor(e);j<b&&(l=Math.floor(e),h=l*g+f,k=l*j+i,!(e-l<5e-10));)e=1/(e-l),f=g,g=h,i=j,j=k;if(k>b&&(k=j,h=g),k>b&&(k=i,h=f),!c)return[0,d*h,k];if(0===k)throw"Unexpected state: "+h+" "+g+" "+f+" "+k+" "+j+" "+i;var m=Math.floor(d*h/k);return[m,d*h-m*k,k]}function m(a,b){return""+a}function n(a,b){switch(typeof a){case"string":return a;case"boolean":return a?"TRUE":"FALSE";case"number":return(0|a)===a?m(a,b):C(a,b)}throw new Error("unsupported value in General format: "+a)}function o(a,b){return 0}function p(a,b,c){if(a>2958465||a<0)return null;var d=0|a,e=Math.floor(86400*(a-d)),f=0,g=[],h={D:d,T:e,u:86400*(a-d)-e,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),k(null!=b?b:b=[]),b.date1904&&(d+=1462),h.u>.999&&(h.u=0,86400==++e&&(e=0,++d)),60===d)g=c?[1317,10,29]:[1900,2,29],f=3;else if(0===d)g=c?[1317,8,29]:[1900,1,0],f=6;else{d>60&&--d;var i=new Date(1900,0,1);i.setDate(i.getDate()+d-1),g=[i.getFullYear(),i.getMonth()+1,i.getDate()],f=i.getDay(),d<60&&(f=(f+6)%7),c&&(f=o(i,g))}return h.y=g[0],h.m=g[1],h.d=g[2],h.S=e%60,e=Math.floor(e/60),h.M=e%60,e=Math.floor(e/60),h.H=e,h.q=f,h}function q(a,b,c,e){var f,g="",h=0,i=0,j=c.y,k=0;switch(a){case 98:j=c.y+543;case 121:switch(b.length){case 1:case 2:f=j%100,k=2;break;default:f=j%1e4,k=4}break;case 109:switch(b.length){case 1:case 2:f=c.m,k=b.length;break;case 3:return B[c.m-1][1];case 5:return B[c.m-1][0];default:return B[c.m-1][2]}break;case 100:switch(b.length){case 1:case 2:f=c.d,k=b.length;break;case 3:return A[c.q][0];default:return A[c.q][1]}break;case 104:switch(b.length){case 1:case 2:f=1+(c.H+11)%12,k=b.length;break;default:throw"bad hour format: "+b}break;case 72:switch(b.length){case 1:case 2:f=c.H,k=b.length;break;default:throw"bad hour format: "+b}break;case 77:switch(b.length){case 1:case 2:f=c.M,k=b.length;break;default:throw"bad minute format: "+b}break;case 115:if(0===c.u)switch(b){case"s":case"ss":return d(c.S,b.length)}switch(b){case"s":case"ss":case".0":case".00":case".000":return i=e>=2?3===e?1e3:100:1===e?10:1,(h=Math.round(i*(c.S+c.u)),h>=60*i&&(h=0),"s"===b)?0===h?"0":""+h/i:(g=d(h,2+e),"ss"===b?g.substr(0,2):"."+g.substr(2,b.length-1));default:throw"bad second format: "+b}case 90:switch(b){case"[h]":case"[hh]":f=24*c.D+c.H;break;case"[m]":case"[mm]":f=60*(24*c.D+c.H)+c.M;break;case"[s]":case"[ss]":f=60*(60*(24*c.D+c.H)+c.M)+Math.round(c.S+c.u);break;default:throw"bad abstime format: "+b}k=3===b.length?1:2;break;case 101:f=j,k=1}return k>0?d(f,k):""}function r(a){if(a.length<=3)return a;for(var b=a.length%3,c=a.substr(0,b);b!=a.length;b+=3)c+=(c.length>0?",":"")+a.substr(b,3);return c}function s(a){for(var b=[],c=!1,d=0,e=0;d<a.length;++d)switch(a.charCodeAt(d)){case 34:c=!c;break;case 95:case 42:case 92:++d;break;case 59:b[b.length]=a.substr(e,d-e),e=d+1}if(b[b.length]=a.substr(e),!0===c)throw new Error("Format |"+a+"| unterminated string ");return b}function t(a,b,c,d){for(var e,f,g,h,i=[],k="",l=0,m="",o="t",r="H";l<a.length;)switch(m=a[l]){case"G":if(!j(a,l))throw new Error("unrecognized character "+m+" in "+a);i[i.length]={t:"G",v:"General"},l+=7;break;case'"':for(k="";34!==(h=a.charCodeAt(++l))&&l<a.length;)k+=String.fromCharCode(h);i[i.length]={t:"t",v:k},++l;break;case"\\":var s=a[++l],t="("===s||")"===s?s:"t";i[i.length]={t:t,v:s},++l;break;case"_":i[i.length]={t:"t",v:" "},l+=2;break;case"@":i[i.length]={t:"T",v:b},++l;break;case"B":case"b":if("1"===a[l+1]||"2"===a[l+1]){if(null==f&&null==(f=p(b,c,"2"===a[l+1])))return"";i[i.length]={t:"X",v:a.substr(l,2)},o=m,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":m=m.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(b<0)return"";if(null==f&&null==(f=p(b,c)))return"";for(k=m;++l<a.length&&a[l].toLowerCase()===m;)k+=m;"m"===m&&"h"===o.toLowerCase()&&(m="M"),"h"===m&&(m=r),i[i.length]={t:m,v:k},o=m;break;case"A":if(e={t:m,v:"A"},null==f&&(f=p(b,c)),"A/P"===a.substr(l,3)?(null!=f&&(e.v=f.H>=12?"P":"A"),e.t="T",r="h",l+=3):"AM/PM"===a.substr(l,5)?(null!=f&&(e.v=f.H>=12?"PM":"AM"),e.t="T",l+=5,r="h"):(e.t="t",++l),null==f&&"T"===e.t)return"";i[i.length]=e,o=m;break;case"[":for(k=m;"]"!==a[l++]&&l<a.length;)k+=a[l];if("]"!==k.substr(-1))throw'unterminated "[" block: |'+k+"|";if(k.match(E)){if(null==f&&null==(f=p(b,c)))return"";i[i.length]={t:"Z",v:k.toLowerCase()}}else k="";break;case".":if(null!=f){for(k=m;"0"===(m=a[++l]);)k+=m;i[i.length]={t:"s",v:k};break}case"0":case"#":for(k=m;"0#?.,E+-%".indexOf(m=a[++l])>-1||"\\"==m&&"-"==a[l+1]&&"0#".indexOf(a[l+2])>-1;)k+=m;i[i.length]={t:"n",v:k};break;case"?":for(k=m;a[++l]===m;)k+=m;e={t:m,v:k},i[i.length]=e,o=m;break;case"*":++l," "!=a[l]&&"*"!=a[l]||++l;break;case"(":case")":i[i.length]={t:1===d?"t":m,v:m},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(k=m;"0123456789".indexOf(a[++l])>-1;)k+=a[l];i[i.length]={t:"D",v:k};break;case" ":i[i.length]={t:m,v:m},++l;break;default:if(-1===",$-+/():!^&'~{}<>=acfijklopqrtuvwxz".indexOf(m))throw new Error("unrecognized character "+m+" in "+a);i[i.length]={t:"t",v:m},++l}var u,v=0,w=0;for(l=i.length-1,o="t";l>=0;--l)switch(i[l].t){case"h":case"H":i[l].t=r,o="h",v<1&&(v=1);break;case"s":(u=i[l].v.match(/\.0+$/))&&(w=Math.max(w,u[0].length-1)),v<3&&(v=3);case"d":case"y":case"M":case"e":o=i[l].t;break;case"m":"s"===o&&(i[l].t="M",v<2&&(v=2));break;case"X":i[l].v;break;case"Z":v<1&&i[l].v.match(/[Hh]/)&&(v=1),v<2&&i[l].v.match(/[Mm]/)&&(v=2),v<3&&i[l].v.match(/[Ss]/)&&(v=3)}switch(v){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M)}var x,y="";for(l=0;l<i.length;++l)switch(i[l].t){case"t":case"T":case" ":case"D":break;case"X":i[l]=void 0;break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[l].v=q(i[l].t.charCodeAt(0),i[l].v,f,w),i[l].t="t";break;case"n":case"(":case"?":for(x=l+1;null!=i[x]&&("?"===(m=i[x].t)||"D"===m||(" "===m||"t"===m)&&null!=i[x+1]&&("?"===i[x+1].t||"t"===i[x+1].t&&"/"===i[x+1].v)||"("===i[l].t&&(" "===m||"n"===m||")"===m)||"t"===m&&("/"===i[x].v||"$".indexOf(i[x].v)>-1||" "===i[x].v&&null!=i[x+1]&&"?"==i[x+1].t));)i[l].v+=i[x].v,i[x]=void 0,++x;y+=i[l].v,l=x-1;break;case"G":i[l].t="t",i[l].v=n(b,c)}var z,A,B="";if(y.length>0){z=b<0&&45===y.charCodeAt(0)?-b:b,A=D(40===y.charCodeAt(0)?"(":"n",y,z),x=A.length-1;var C=i.length;for(l=0;l<i.length;++l)if(null!=i[l]&&i[l].v.indexOf(".")>-1){C=l;break}var F=i.length;if(C===i.length&&-1===A.indexOf("E")){for(l=i.length-1;l>=0;--l)null!=i[l]&&-1!=="n?(".indexOf(i[l].t)&&(x>=i[l].v.length-1?(x-=i[l].v.length,i[l].v=A.substr(x+1,i[l].v.length)):x<0?i[l].v="":(i[l].v=A.substr(0,x+1),x=-1),i[l].t="t",F=l);x>=0&&F<i.length&&(i[F].v=A.substr(0,x+1)+i[F].v)}else if(C!==i.length&&-1===A.indexOf("E")){for(x=A.indexOf(".")-1,l=C;l>=0;--l)if(null!=i[l]&&-1!=="n?(".indexOf(i[l].t)){for(g=i[l].v.indexOf(".")>-1&&l===C?i[l].v.indexOf(".")-1:i[l].v.length-1,B=i[l].v.substr(g+1);g>=0;--g)x>=0&&("0"===i[l].v[g]||"#"===i[l].v[g])&&(B=A[x--]+B);i[l].v=B,i[l].t="t",F=l}for(x>=0&&F<i.length&&(i[F].v=A.substr(0,x+1)+i[F].v),x=A.indexOf(".")+1,l=C;l<i.length;++l)if(null!=i[l]&&(-1!=="n?(".indexOf(i[l].t)||l===C)){for(g=i[l].v.indexOf(".")>-1&&l===C?i[l].v.indexOf(".")+1:0,B=i[l].v.substr(0,g);g<i[l].v.length;++g)x<A.length&&(B+=A[x++]);i[l].v=B,i[l].t="t",F=l}}}for(l=0;l<i.length;++l)null!=i[l]&&"n(?".indexOf(i[l].t)>-1&&(z=d>1&&b<0&&l>0&&"-"===i[l-1].v?-b:b,i[l].v=D(i[l].t,i[l].v,z),i[l].t="t");var G="";for(l=0;l!==i.length;++l)null!=i[l]&&(G+=i[l].v);return G}function u(a,b){if(null==b)return!1;var c=parseFloat(b[2]);switch(b[1]){case"=":if(a==c)return!0;break;case">":if(a>c)return!0;break;case"<":if(a<c)return!0;break;case"<>":if(a!=c)return!0;break;case">=":if(a>=c)return!0;break;case"<=":if(a<=c)return!0}return!1}function v(a,b){var c=s(a),d=c.length,e=c[d-1].indexOf("@");if(d<4&&e>-1&&--d,c.length>4)throw"cannot find right format for |"+c+"|";if("number"!=typeof b)return[4,4===c.length||e>-1?c[c.length-1]:"@"];switch(c.length){case 1:c=e>-1?["General","General","General",c[0]]:[c[0],c[0],c[0],"@"];break;case 2:c=e>-1?[c[0],c[0],c[0],c[1]]:[c[0],c[1],c[0],"@"];break;case 3:c=e>-1?[c[0],c[1],c[0],c[2]]:[c[0],c[1],c[2],"@"]}var f=b>0?c[0]:b<0?c[1]:c[2];if(-1===c[0].indexOf("[")&&-1===c[1].indexOf("["))return[d,f];if(null!=c[0].match(F)||null!=c[1].match(F)){var g=c[0].match(G),h=c[1].match(G);return u(b,g)?[d,c[0]]:u(b,h)?[d,c[1]]:[d,c[null!=g&&null!=h?2:1]]}return[d,f]}function w(a,b,c){k(null!=c?c:c=[]);var d="";switch(typeof a){case"string":d=a;break;case"number":d=(null!=c.table?c.table:z)[a]}if(j(d,0))return n(b,c);var e=v(d,b);if(j(e[1]))return n(b,c);if(!0===b)b="TRUE";else if(!1===b)b="FALSE";else if(""===b||null==b)return"";return t(e[1],b,c,e[0])}a.version="0.8.1";var x=Math.pow(2,32),y=[["date1904",0],["output",""],["WTF",!1]];a.opts=y;var z={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "',65535:"General"},A=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],B=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];a._general_int=m;var C=function(){function a(a){var b=a<0?12:11,c=d(a.toFixed(12));return c.length<=b?c:(c=a.toPrecision(10),c.length<=b?c:a.toExponential(5))}function b(a){var b=a.toFixed(11).replace(e,".$1");return b.length>(a<0?12:11)&&(b=a.toPrecision(6)),b}function c(a){for(var b=0;b!=a.length;++b)if(101==(32|a.charCodeAt(b)))return a.replace(g,".$1").replace(h,"E").replace("e","E").replace(i,"$10$2");return a}function d(a){return a.indexOf(".")>-1?a.replace(f,"").replace(e,".$1"):a}var e=/\.(\d*[1-9])0+$/,f=/\.0*$/,g=/\.(\d*[1-9])0+/,h=/\.0*[Ee]/,i=/(E[+-])(\d)$/;return function(e,f){var g,h=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return g=h>=-4&&h<=-1?e.toPrecision(10+h):Math.abs(h)<=9?a(e):10===h?e.toFixed(10).substr(0,12):b(e),d(c(g))}}();a._general_num=C,a._general=n,a.parse_date_code=p;var D=function(){function a(a,b,d){var e=b.replace(w,""),f=b.length-e.length;return D(a,e,d*Math.pow(10,2*f))+c("%",f)}function g(a,b,c){for(var d=b.length-1;44===b.charCodeAt(d-1);)--d;return D(a,b.substr(0,d),c/Math.pow(10,3*(b.length-d)))}function h(a,b){var c,d=a.indexOf("E")-a.indexOf(".")-1;if(a.match(/^#+0.0E\+0$/)){var e=a.indexOf(".");-1===e&&(e=a.indexOf("E"));var f=Math.floor(Math.log(Math.abs(b))*Math.LOG10E)%e;if(f<0&&(f+=e),c=(b/Math.pow(10,f)).toPrecision(d+1+(e+f)%e),-1===c.indexOf("e")){var g=Math.floor(Math.log(Math.abs(b))*Math.LOG10E);for(-1===c.indexOf(".")?c=c[0]+"."+c.substr(1)+"E+"+(g-c.length+f):c+="E+"+(g-f);"0."===c.substr(0,2);)c=c[0]+c.substr(2,e)+"."+c.substr(2+e),c=c.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");c=c.replace(/\+-/,"-")}c=c.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,b,c,d){return b+c+d.substr(0,(e+f)%e)+"."+d.substr(f)+"E"})}else c=b.toExponential(d);return a.match(/E\+00$/)&&c.match(/e[+-]\d$/)&&(c=c.substr(0,c.length-1)+"0"+c[c.length-1]),a.match(/E\-/)&&c.match(/e\+/)&&(c=c.replace(/e\+/,"e")),c.replace("e","E")}function j(a,b,f){var g=parseInt(a[4]),h=Math.round(b*g),i=Math.floor(h/g),j=h-i*g,k=g;return f+(0===i?"":""+i)+" "+(0===j?c(" ",a[1].length+1+a[4].length):e(j,a[1].length)+a[2]+"/"+a[3]+d(k,a[4].length))}function k(a,b,d){return d+(0===b?"":""+b)+c(" ",a[1].length+2+a[4].length)}function m(a){for(var b,c="",d=0;d!=a.length;++d)switch(b=a.charCodeAt(d)){case 35:break;case 63:c+=" ";break;case 48:c+="0";break;default:c+=String.fromCharCode(b)}return c}function n(a,b){var c=Math.pow(10,b);return""+Math.round(a*c)/c}function o(a,b){return Math.round((a-Math.floor(a))*Math.pow(10,b))}function p(a){return a<2147483647&&a>-2147483648?""+(a>=0?0|a:a-1|0):""+Math.floor(a)}function q(k,s,t){if(40===k.charCodeAt(0)&&!s.match(z)){var u=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?q("n",u,t):"("+q("n",u,-t)+")"}if(44===s.charCodeAt(s.length-1))return g(k,s,t);if(-1!==s.indexOf("%"))return a(k,s,t);if(-1!==s.indexOf("E"))return h(s,t);if(36===s.charCodeAt(0))return"$"+q(k,s.substr(" "==s[1]?2:1),t);var v,w,B,C,E=Math.abs(t),F=t<0?"-":"";if(s.match(/^00+$/))return F+i(E,s.length);if(s.match(/^[#?]+$/))return v=i(t,0),"0"===v&&(v=""),v.length>s.length?v:m(s.substr(0,s.length-v.length))+v;if(null!==(w=s.match(x)))return j(w,E,F);if(null!==s.match(/^#+0+$/))return F+i(E,s.length-s.indexOf("0"));if(null!==(w=s.match(y)))return v=n(t,w[1].length).replace(/^([^\.]+)$/,"$1."+w[1]).replace(/\.$/,"."+w[1]).replace(/\.(\d*)$/,function(a,b){return"."+b+c("0",w[1].length-b.length)}),-1!==s.indexOf("0.")?v:v.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),null!==(w=s.match(/^(0*)\.(#*)$/)))return F+n(E,w[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,w[1].length?"0.":".");if(null!==(w=s.match(/^#,##0(\.?)$/)))return F+r(i(E,0));if(null!==(w=s.match(/^#,##0\.([#0]*0)$/)))return t<0?"-"+q(k,s,-t):r(""+Math.floor(t))+"."+d(o(t,w[1].length),w[1].length);if(null!==(w=s.match(/^#,#*,#0/)))return q(k,s.replace(/^#,#*,/,""),t);if(null!==(w=s.match(/^([0#]+)(\\?-([0#]+))+$/)))return v=b(q(k,s.replace(/[\\-]/g,""),t)),B=0,b(b(s.replace(/\\/g,"")).replace(/[0#]/g,function(a){return B<v.length?v[B++]:"0"===a?"0":""}));if(null!==s.match(A))return v=q(k,"##########",t),"("+v.substr(0,3)+") "+v.substr(3,3)+"-"+v.substr(6);var G="";if(null!==(w=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/)))return B=Math.min(w[4].length,7),C=l(E,Math.pow(10,B)-1,!1),v=""+F,G=D("n",w[1],C[1])," "==G[G.length-1]&&(G=G.substr(0,G.length-1)+"0"),v+=G+w[2]+"/"+w[3],G=f(C[2],B),G.length<w[4].length&&(G=m(w[4].substr(w[4].length-G.length))+G),v+=G;if(null!==(w=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/)))return B=Math.min(Math.max(w[1].length,w[4].length),7),C=l(E,Math.pow(10,B)-1,!0),F+(C[0]||(C[1]?"":"0"))+" "+(C[1]?e(C[1],B)+w[2]+"/"+w[3]+f(C[2],B):c(" ",2*B+1+w[2].length+w[3].length));if(null!==(w=s.match(/^[#0?]+$/)))return v=i(t,0),s.length<=v.length?v:m(s.substr(0,s.length-v.length))+v;if(null!==(w=s.match(/^([#0?]+)\.([#0]+)$/))){v=""+t.toFixed(Math.min(w[2].length,10)).replace(/([^0])0+$/,"$1"),B=v.indexOf(".");var H=s.indexOf(".")-B,I=s.length-v.length-H;return m(s.substr(0,H)+v+s.substr(s.length-I))}if(null!==(w=s.match(/^00,000\.([#0]*0)$/)))return B=o(t,w[1].length),t<0?"-"+q(k,s,-t):r(p(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(a){return"00,"+(a.length<3?d(0,3-a.length):"")+a})+"."+d(B,w[1].length);switch(s){case"#,###":var J=r(i(E,0));return"0"!==J?F+J:""}throw new Error("unsupported format |"+s+"|")}function s(a,b,c){for(var d=b.length-1;44===b.charCodeAt(d-1);)--d;return D(a,b.substr(0,d),c/Math.pow(10,3*(b.length-d)))}function t(a,b,d){var e=b.replace(w,""),f=b.length-e.length;return D(a,e,d*Math.pow(10,2*f))+c("%",f)}function u(a,b){var c,d=a.indexOf("E")-a.indexOf(".")-1;if(a.match(/^#+0.0E\+0$/)){var e=a.indexOf(".");-1===e&&(e=a.indexOf("E"));var f=Math.floor(Math.log(Math.abs(b))*Math.LOG10E)%e;if(f<0&&(f+=e),c=(b/Math.pow(10,f)).toPrecision(d+1+(e+f)%e),!c.match(/[Ee]/)){var g=Math.floor(Math.log(Math.abs(b))*Math.LOG10E);-1===c.indexOf(".")?c=c[0]+"."+c.substr(1)+"E+"+(g-c.length+f):c+="E+"+(g-f),c=c.replace(/\+-/,"-")}c=c.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(a,b,c,d){return b+c+d.substr(0,(e+f)%e)+"."+d.substr(f)+"E"})}else c=b.toExponential(d);return a.match(/E\+00$/)&&c.match(/e[+-]\d$/)&&(c=c.substr(0,c.length-1)+"0"+c[c.length-1]),a.match(/E\-/)&&c.match(/e\+/)&&(c=c.replace(/e\+/,"e")),c.replace("e","E")}function v(a,g,h){if(40===a.charCodeAt(0)&&!g.match(z)){var i=g.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return h>=0?v("n",i,h):"("+v("n",i,-h)+")"}if(44===g.charCodeAt(g.length-1))return s(a,g,h);if(-1!==g.indexOf("%"))return t(a,g,h);if(-1!==g.indexOf("E"))return u(g,h);if(36===g.charCodeAt(0))return"$"+v(a,g.substr(" "==g[1]?2:1),h);var j,n,o,p,q=Math.abs(h),w=h<0?"-":"";if(g.match(/^00+$/))return w+d(q,g.length);if(g.match(/^[#?]+$/))return j=""+h,0===h&&(j=""),j.length>g.length?j:m(g.substr(0,g.length-j.length))+j;if(null!==(n=g.match(x)))return k(n,q,w);if(null!==g.match(/^#+0+$/))return w+d(q,g.length-g.indexOf("0"));if(null!==(n=g.match(y)))return j=(""+h).replace(/^([^\.]+)$/,"$1."+n[1]).replace(/\.$/,"."+n[1]).replace(/\.(\d*)$/,function(a,b){return"."+b+c("0",n[1].length-b.length)}),-1!==g.indexOf("0.")?j:j.replace(/^0\./,".");if(g=g.replace(/^#+([0.])/,"$1"),null!==(n=g.match(/^(0*)\.(#*)$/)))return w+(""+q).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,n[1].length?"0.":".");if(null!==(n=g.match(/^#,##0(\.?)$/)))return w+r(""+q);if(null!==(n=g.match(/^#,##0\.([#0]*0)$/)))return h<0?"-"+v(a,g,-h):r(""+h)+"."+c("0",n[1].length);if(null!==(n=g.match(/^#,#*,#0/)))return v(a,g.replace(/^#,#*,/,""),h);if(null!==(n=g.match(/^([0#]+)(\\?-([0#]+))+$/)))return j=b(v(a,g.replace(/[\\-]/g,""),h)),o=0,b(b(g.replace(/\\/g,"")).replace(/[0#]/g,function(a){return o<j.length?j[o++]:"0"===a?"0":""}));if(null!==g.match(A))return j=v(a,"##########",h),"("+j.substr(0,3)+") "+j.substr(3,3)+"-"+j.substr(6);var B="";if(null!==(n=g.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/)))return o=Math.min(n[4].length,7),p=l(q,Math.pow(10,o)-1,!1),j=""+w,B=D("n",n[1],p[1])," "==B[B.length-1]&&(B=B.substr(0,B.length-1)+"0"),j+=B+n[2]+"/"+n[3],B=f(p[2],o),B.length<n[4].length&&(B=m(n[4].substr(n[4].length-B.length))+B),j+=B;if(null!==(n=g.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/)))return o=Math.min(Math.max(n[1].length,n[4].length),7),p=l(q,Math.pow(10,o)-1,!0),w+(p[0]||(p[1]?"":"0"))+" "+(p[1]?e(p[1],o)+n[2]+"/"+n[3]+f(p[2],o):c(" ",2*o+1+n[2].length+n[3].length));if(null!==(n=g.match(/^[#0?]+$/)))return j=""+h,g.length<=j.length?j:m(g.substr(0,g.length-j.length))+j;if(null!==(n=g.match(/^([#0]+)\.([#0]+)$/))){j=""+h.toFixed(Math.min(n[2].length,10)).replace(/([^0])0+$/,"$1"),o=j.indexOf(".");var C=g.indexOf(".")-o,E=g.length-j.length-C;return m(g.substr(0,C)+j+g.substr(g.length-E))}if(null!==(n=g.match(/^00,000\.([#0]*0)$/)))return h<0?"-"+v(a,g,-h):r(""+h).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(a){return"00,"+(a.length<3?d(0,3-a.length):"")+a})+"."+d(0,n[1].length);switch(g){case"#,###":var F=r(""+q);return"0"!==F?w+F:""}throw new Error("unsupported format |"+g+"|")}var w=/%/g,x=/# (\?+)( ?)\/( ?)(\d+)/,y=/^#*0*\.(0+)/,z=/\).*[0#]/,A=/\(###\) ###\\?-####/;return function(a,b,c){return(0|c)===c?v(a,b,c):q(a,b,c)}}();a._split=s;var E=/\[[HhMmSs]*\]/;a._eval=t;var F=/\[[=<>]/,G=/\[([=<>]*)(-?\d+\.?\d*)\]/;a._table=z,a.load=function(a,b){z[b]=a},a.format=w,a.get_table=function(){return z},a.load_table=function(b){for(var c=0;392!=c;++c)void 0!==b[c]&&a.load(b[c],c)}}(Ed);var Fd=2,Gd=3,Hd=11,Id=12,Jd=19,Kd=30,Ld=64,Md=71,Nd=4096,Od=80,Pd=81,Qd=[Od,Pd],Rd={1:{n:"CodePage",t:Fd},2:{n:"Category",t:Od},3:{n:"PresentationFormat",t:Od},4:{n:"ByteCount",t:Gd},5:{n:"LineCount",t:Gd},6:{n:"ParagraphCount",t:Gd},7:{n:"SlideCount",t:Gd},8:{n:"NoteCount",t:Gd},9:{n:"HiddenCount",t:Gd},10:{n:"MultimediaClipCount",t:Gd},11:{n:"Scale",t:Hd},12:{n:"HeadingPair",t:Nd|Id},13:{n:"DocParts",t:Nd|Kd},14:{n:"Manager",t:Od},15:{n:"Company",t:Od},16:{n:"LinksDirty",t:Hd},17:{n:"CharacterCount",t:Gd},19:{n:"SharedDoc",t:Hd},22:{n:"HLinksChanged",t:Hd},23:{n:"AppVersion",t:Gd,p:"version"},26:{n:"ContentType",t:Od},27:{n:"ContentStatus",t:Od},28:{n:"Language",t:Od},29:{n:"Version",t:Od},255:{}},Sd={1:{n:"CodePage",t:Fd},2:{n:"Title",t:Od},3:{n:"Subject",t:Od},4:{n:"Author",t:Od},5:{n:"Keywords",t:Od},6:{n:"Comments",t:Od},7:{n:"Template",t:Od},8:{n:"LastAuthor",t:Od},9:{n:"RevNumber",t:Od},10:{n:"EditTime",t:Ld},11:{n:"LastPrinted",t:Ld},12:{n:"CreatedDate",t:Ld},13:{n:"ModifiedDate",t:Ld},14:{n:"PageCount",t:Gd},15:{n:"WordCount",t:Gd},16:{n:"CharCount",t:Gd},17:{n:"Thumbnail",t:Md},18:{n:"ApplicationName",t:Kd},19:{n:"DocumentSecurity",t:Gd},255:{}},Td={2147483648:{n:"Locale",t:Jd},2147483651:{n:"Behavior",t:Jd},1768515945:{}};!function(){for(var a in Td)Td.hasOwnProperty(a)&&(Rd[a]=Sd[a]=Td[a])}();var Ud=function(){function a(a){var e=3,g=512,h=0,l=0,o=0,p=0,q=0,r=[],s=a.slice(0,512);switch(i(s,0),e=b(s)[0]){case 3:g=512;break;case 4:g=4096;break;default:throw"Major Version: Expected 3 or 4 saw "+e}512!==g&&(s=a.slice(0,g),i(s,28));var t=a.slice(0,g);c(s,e);var v=s.read_shift(4,"i");if(3===e&&0!==v)throw"# Directory Sectors: Expected 0 saw "+v;s.l+=4,o=s.read_shift(4,"i"),s.l+=4,s.chk("00100000","Mini Stream Cutoff Size: "),p=s.read_shift(4,"i"),h=s.read_shift(4,"i"),q=s.read_shift(4,"i"),l=s.read_shift(4,"i");for(var w,x=0;x<109&&!((w=s.read_shift(4,"i"))<0);++x)r[x]=w;var y=d(a,g);k(q,l,y,g,r);var z=m(y,o,r,g);z[o].name="!Directory",h>0&&p!==u&&(z[p].name="!MiniFAT"),z[r[0]].name="!FAT",z.fat_addrs=r,z.ssz=g;var A={},B=[],C=[],D=[],E={};n(o,z,y,B,h,A,C),f(C,E,D,B);var F=B.shift();return B.root=F,{raw:{header:t,sectors:y},FileIndex:C,FullPaths:D,FullPathDir:E,find:j(D,B,C,A,F)}}function b(a){a.chk(v,"Header Signature: "),a.chk(w,"CLSID: ");var b=a.read_shift(2,"u");return[a.read_shift(2,"u"),b]}function c(a,b){var c=9;switch(a.chk("feff","Byte Order: "),c=a.read_shift(2)){case 9:if(3!==b)throw"MajorVersion/SectorShift Mismatch";break;case 12:if(4!==b)throw"MajorVersion/SectorShift Mismatch";break;default:throw"Sector Shift: Expected 9 or 12 saw "+c}a.chk("0600","Mini Sector Shift: "),a.chk("000000000000","Reserved: ")}function d(a,b){for(var c=Math.ceil(a.length/b)-1,d=new Array(c),e=1;e<c;++e)d[e-1]=a.slice(e*b,(e+1)*b);return d[c-1]=a.slice(c*b),d}function f(a,b,c,d){for(var e=0,f=0,g=0,h=0,i=0,j=d.length,k=new Array(j),l=new Array(j);e<j;++e)k[e]=l[e]=e,c[e]=d[e];for(;i<l.length;++i)e=l[i],f=a[e].L,g=a[e].R,h=a[e].C,k[e]===e&&(-1!==f&&k[f]!==f&&(k[e]=k[f]),-1!==g&&k[g]!==g&&(k[e]=k[g])),-1!==h&&(k[h]=e),-1!==f&&(k[f]=k[e],l.push(f)),-1!==g&&(k[g]=k[e],l.push(g));for(e=1;e!==j;++e)k[e]===e&&(-1!==g&&k[g]!==g?k[e]=k[g]:-1!==f&&k[f]!==f&&(k[e]=k[f]));for(e=1;e<j;++e)if(0!==a[e].type){if(0===(i=k[e]))c[e]=c[0]+"/"+c[e];else for(;0!==i;)c[e]=c[i]+"/"+c[e],i=k[i];k[e]=0}for(c[0]+="/",e=1;e<j;++e)2!==a[e].type&&(c[e]+="/"),b[c[e]]=a[e]}function j(a,b,c,d,e){var f,g=new Array(a.length),h=new Array(b.length);for(f=0;f<a.length;++f)g[f]=a[f].toUpperCase().replace(kd,"").replace(ld,"!");for(f=0;f<b.length;++f)h[f]=b[f].toUpperCase().replace(kd,"").replace(ld,"!");return function(a){var f;47===a.charCodeAt(0)?(f=!0,a=e+a):f=-1!==a.indexOf("/");var i=a.toUpperCase().replace(kd,"").replace(ld,"!"),j=!0===f?g.indexOf(i):h.indexOf(i);return-1===j?null:!0===f?c[j]:d[b[j]]}}function k(a,b,c,d,e){var f;if(a===u){if(0!==b)throw"DIFAT chain shorter than expected"}else if(-1!==a){for(var g=c[a],h=(d>>>2)-1,i=0;i<h&&(f=Cd(g,4*i))!==u;++i)e.push(f);k(Cd(g,d-4),b-1,c,d,e)}}function l(a,b,c,d,e){var f,g,h=a.length;e||(e=new Array(h));var i,j,k=d-1;for(f=[],g=[],i=b;i>=0;){e[i]=!0,f[f.length]=i,g.push(a[i]);var l=c[Math.floor(4*i/d)];if(j=4*i&k,d<4+j)throw"FAT boundary crossed: "+i+" 4 "+d;i=Cd(a[l],j)}return{nodes:f,data:gd([g])}}function m(a,b,c,d){var e,f,g,h,i,j,k=a.length,l=new Array(k),m=new Array(k),n=d-1;for(g=0;g<k;++g)if(e=[],i=g+b,i>=k&&(i-=k),!0!==m[i]){for(f=[],h=i;h>=0;){m[h]=!0,e[e.length]=h,f.push(a[h]);var o=c[Math.floor(4*h/d)];if(j=4*h&n,d<4+j)throw"FAT boundary crossed: "+h+" 4 "+d;h=Cd(a[o],j)}l[i]={nodes:e,data:gd([f])}}return l}function n(a,b,c,d,e,f,g){for(var h,j,k,m,n,p=0,q=d.length?2:0,r=b[a].data,s=0,v=0;s<r.length;s+=128)h=r.slice(s,s+128),i(h,64),0!==(v=h.read_shift(2))&&(j=md(h,0,v-q),d.push(j),k={name:j,type:h.read_shift(1),color:h.read_shift(1),L:h.read_shift(4,"i"),R:h.read_shift(4,"i"),C:h.read_shift(4,"i"),clsid:h.read_shift(16),state:h.read_shift(4,"i")},m=h.read_shift(2)+h.read_shift(2)+h.read_shift(2)+h.read_shift(2),0!==m&&(k.ctime=m,k.ct=o(h,h.l-8)),n=h.read_shift(2)+h.read_shift(2)+h.read_shift(2)+h.read_shift(2),0!==n&&(k.mtime=n,k.mt=o(h,h.l-8)),k.start=h.read_shift(4,"i"),k.size=h.read_shift(4,"i"),5===k.type?(p=k.start,e>0&&p!==u&&(b[p].name="!StreamData")):k.size>=4096?(k.storage="fat",void 0===b[k.start]&&(b[k.start]=l(c,k.start,b.fat_addrs,b.ssz)),b[k.start].name=k.name,k.content=b[k.start].data.slice(0,k.size),i(k.content,0)):(k.storage="minifat",p!==u&&k.start!==u&&(k.content=b[p].data.slice(k.start*t,k.start*t+k.size),i(k.content,0))),f[j]=k,g.push(k))}function o(a,b){return new Date(1e3*(Bd(a,b+4)/1e7*Math.pow(2,32)+Bd(a,b)/1e7-11644473600))}function p(b,c){return void 0===s&&(s=require("fs")),a(s.readFileSync(b),c)}function q(b,c){switch(void 0!==c&&void 0!==c.type?c.type:"base64"){case"file":return p(b,c);case"base64":return a(e(jd.decode(b)),c);case"binary":return a(e(b),c)}return a(b)}var r={};r.version="0.10.2";var s,t=64,u=-2,v="d0cf11e0a1b11ae1",w="00000000000000000000000000000000",x={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:u,FREESECT:-1,HEADER_SIGNATURE:v,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:w,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};return r.read=q,r.parse=a,r.utils={ReadShift:g,CheckField:h,prep_blob:i,bconcat:xd,consts:x},r}();"undefined"!=typeof require&&"undefined"!=typeof module&&!1&&(module.exports=Ud);var Vd=A,Wd=function(a,b){var c=a.read_shift(4),d=a.l,e=!1;c>24&&(a.l+=c-24,"795881f43b1d7f48af2c825dc4852763"===a.read_shift(16)&&(e=!0),a.l=d);var f=a.read_shift((e?c-24:c)>>1,"utf16le").replace(kd,"");return e&&(a.l+=24),f},Xd=function(a,b){var c=(a.read_shift(2),a.read_shift(4)),d=a.read_shift(c,"cstr");a.read_shift(2),a.read_shift(2);if(0===a.read_shift(4))return d.replace(/\\/g,"/");var e=a.read_shift(4);a.read_shift(2);return a.read_shift(e>>1,"utf16le").replace(kd,"")},Yd=function(a,b){var c=a.read_shift(16);switch(b-=16,c){case"e0c9ea79f9bace118c8200aa004ba90b":return Wd(a,b);case"0303000000000000c000000000000046":return Xd(a,b);default:throw"unsupported moniker "+c}},Zd=function(a,b){var c=a.read_shift(4);return a.read_shift(c,"utf16le").replace(kd,"")},$d=function(a,b){var c=a.l+b,d=a.read_shift(4);if(2!==d)throw new Error("Unrecognized streamVersion: "+d);var e=a.read_shift(2);a.l+=2;var f,g,h,i;16&e&&Zd(a,c-a.l),128&e&&(f=Zd(a,c-a.l)),257==(257&e)&&(g=Zd(a,c-a.l)),1==(257&e)&&(h=Yd(a,c-a.l)),8&e&&(i=Zd(a,c-a.l)),32&e&&a.read_shift(16),64&e&&j(a,8),a.l=c;var k=f||g||h;return i&&(k+="#"+i),{Target:k}},_d=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],ae=Q([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0]),be=F,ce=aa,de={21:ba,19:A,18:function(a,b){a.l+=12},17:function(a,b){a.l+=8},16:A,15:A,13:ca,12:function(a,b){a.l+=24},11:function(a,b){a.l+=10},10:function(a,b){a.l+=16},9:A,8:function(a,b){a.l+=6},7:da,6:function(a,b){a.l+=6},4:A,0:function(a,b){a.l+=4}},ee=F,fe=B,ge=W,he=function(a,b){var c=_(a,8);return a.l+=16,[c,$d(a,b-24)]},ie=function(a,b){a.l;a.read_shift(2);var c=_(a,8),d=a.read_shift((b-10)/2,"dbcs");return d=d.replace(kd,""),[c,d]},je=A,ke=A,le=A,me=A,ne=E,oe=U,pe=N,qe=F,re=F,se=N,te=E,ue=F,ve=E,we=B,xe=E,ye=F,ze=E,Ae=E,Be=F,Ce=B,De=B,Ee=B,Fe=B,Ge=B,He=F,Ie=ge,Je=F,Ke=E,Le=ge,Me=be,Ne=B,Oe=N,Pe=B,Qe=E,Re=F,Se=E,Te=E,Ue=F,Ve=E,We=F,Xe=E,Ye=E,Ze=N,$e=G,_e=E,af=G,bf=L,cf=E,df=N,ef=E,ff=E,gf=E,hf=A,jf=A,kf=A,lf=A,mf=A,nf=A,of=A,pf=A,qf=A,rf=A,sf=A,tf=A,uf=A,vf=A,wf=A,xf=A,yf=A,zf=A,Af=A,Bf=A,Cf=A,Df=A,Ef=A,Ff=A,Gf=A,Hf=A,If=A,Jf=A,Kf=A,Lf=A,Mf=A,Nf=A,Of=A,Pf=A,Qf=A,Rf=A,Sf=A,Tf=A,Uf=A,Vf=A,Wf=A,Xf=A,Yf=A,Zf=A,$f=A,_f=A,ag=A,bg=A,cg=A,dg=A,eg=A,fg=A,gg=A,hg=A,ig=A,jg=A,kg=A,lg=A,mg=A,ng=A,og=A,pg=A,qg=A,rg=A,sg=A,tg=A,ug=A,vg=A,wg=A,xg=A,yg=A,zg=A,Ag=A,Bg=A,Cg=A,Dg=A,Eg=A,Fg=A,Gg=A,Hg=A,Ig=A,Jg=A,Kg=A,Lg=A,Mg=A,Ng=A,Og=A,Pg=A,Qg=A,Rg=A,Sg=A,Tg=A,Ug=A,Vg=A,Wg=A,Xg=A,Yg=A,Zg=A,$g=A,_g=A,ah=A,bh=A,ch=A,dh=A,eh=A,fh=A,gh=A,hh=A,ih=A,jh=A,kh=A,lh=A,mh=L,nh=A,oh=A,ph=A,qh=A,rh=A,sh=A,th=A,uh=A,vh=A,wh=A,xh=A,yh=A,zh=A,Ah=A,Bh=A,Ch=A,Dh=A,Eh=A,Fh=A,Gh=A,Hh=A,Ih=A,Jh=A,Kh=A,Lh=A,Mh=A,Nh=A,Oh=A,Ph=A,Qh=A,Rh=A,Sh=A,Th=A,Uh=A,Vh=A,Wh=A,Xh=A,Yh=A,Zh=A,$h=A,_h=A,ai=A,bi=A,ci=A,di=A,ei=A,fi=A,gi=A,hi=A,ii=A,ji=A,ki=A,li=A,mi=A,ni=A,oi=A,pi=A,qi=A,ri=A,si=A,ti=A,ui=A,vi=A,wi=A,xi=A,yi=A,zi=A,Ai=A,Bi=A,Ci=A,Di=A,Ei=A,Fi=A,Gi=A,Hi=A,Ii=A,Ji=A,Ki=A,Li=A,Mi=A,Ni=A,Oi=A,Pi=A,Qi=A,Ri=A,Si=A,Ti=A,Ui=A,Vi=A,Wi=A,Xi=A,Yi=A,Zi=A,$i=A,_i=A,aj=A,bj=A,cj=A,dj=A,ej=A,fj=A,gj=A,hj=A,ij=A,jj=A,kj=A,lj=A,mj=A,nj=A,oj=A,pj=A,qj=A,rj=A,sj=A,tj=A,uj=A,vj=A,wj=A,xj=A,yj=A,zj=A,Aj=A,Bj=A,Cj=A,Dj=A,Ej=A,Fj=A,Gj=A,Hj=A,Ij=A,Jj=A,Kj=A,Lj=A,Mj=A,Nj=A,Oj=A,Pj=A,Qj=A,Rj=A,Sj=A,Tj=A,Uj=A,Vj=A,Wj=A,Xj=function(a){return String.fromCharCode(a)},Yj=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Zj=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/,$j={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},_j=(S($j),"&<>'\"".split(""),{});!function(a,b){var c;if(void 0!==b)c=b;else if("undefined"!=typeof require)try{c=require("crypto")}catch(a){c=null}a.rc4=function(a,b){var c=new Array(256),d=0,e=0,f=0,g=0;for(e=0;256!=e;++e)c[e]=e;for(e=0;256!=e;++e)f=f+c[e]+a[e%a.length].charCodeAt(0)&255,g=c[e],c[e]=c[f],c[f]=g;for(e=f=0,out=Buffer(b.length),d=0;d!=b.length;++d)e=e+1&255,f=(f+c[e])%256,g=c[e],c[e]=c[f],c[f]=g,out[d]=b[d]^c[c[e]+c[f]&255];return out},a.md5=c?function(a){return c.createHash("md5").update(a).digest("hex")}:function(a){throw"unimplemented"}}(_j,"undefined"!=typeof crypto?crypto:void 0);var ak=function(){var a=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],b=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],c=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],e=function(a){return 255&(a/2|128*a)},f=function(a,b){return e(a^b)},g=function(a){for(var d=b[a.length-1],e=104,f=a.length-1;f>=0;--f)for(var g=a[f],h=0;7!=h;++h)64&g&&(d^=c[e]),g*=2,--e;return d};return function(b){for(var c=Wa(b),e=g(c),h=c.length,i=d(16),j=0;16!=j;++j)i[j]=0;var k,l,m;for(1==(1&h)&&(k=e>>8,i[h]=f(a[0],k),--h,k=255&e,l=c[c.length-1],i[h]=f(l,k));h>0;)--h,k=e>>8,i[h]=f(c[h],k),--h,k=255&e,i[h]=f(c[h],k);for(h=15,m=15-c.length;m>0;)k=e>>8,i[h]=f(a[m],k),--h,
--m,k=255&e,i[h]=f(c[h],k),--h,--m;return i}}(),bk=function(a,b,c,d,e){e||(e=b),d||(d=ak(a));var f,g;for(f=0;f!=b.length;++f)g=b[f],g^=d[c],g=255&(g>>5|g<<3),e[f]=g,++c;return[e,c,d]},ck=function(a){var b=0,c=ak(a);return function(a){var d=bk(null,a,b,c);return b=d[1],d[0]}},dk=eb(4),ek=fb,fk=fb,gk=fb,hk=fb,ik=fb,jk=fb,kk=fb,lk=fb,mk=fb,nk=fb,ok=fb,pk=fb,qk=fb,rk=fb,sk=fb,tk=fb,uk=fb,vk=fb,wk=fb,xk=fb,yk=A,zk=A,Ak=A,Bk=A,Ck={1:{n:"PtgExp",f:Fb},2:{n:"PtgTbl",f:Bk},3:{n:"PtgAdd",f:fk},4:{n:"PtgSub",f:uk},5:{n:"PtgMul",f:ok},6:{n:"PtgDiv",f:gk},7:{n:"PtgPower",f:sk},8:{n:"PtgConcat",f:ek},9:{n:"PtgLt",f:mk},10:{n:"PtgLe",f:lk},11:{n:"PtgEq",f:hk},12:{n:"PtgGe",f:ik},13:{n:"PtgGt",f:jk},14:{n:"PtgNe",f:pk},15:{n:"PtgIsect",f:kk},16:{n:"PtgUnion",f:wk},17:{n:"PtgRange",f:tk},18:{n:"PtgUplus",f:xk},19:{n:"PtgUminus",f:vk},20:{n:"PtgPercent",f:rk},21:{n:"PtgParen",f:qk},22:{n:"PtgMissArg",f:nk},23:{n:"PtgStr",f:Kb},28:{n:"PtgErr",f:Gb},29:{n:"PtgBool",f:Ib},30:{n:"PtgInt",f:Hb},31:{n:"PtgNum",f:Jb},32:{n:"PtgArray",f:qb},33:{n:"PtgFunc",f:Cb},34:{n:"PtgFuncVar",f:Db},35:{n:"PtgName",f:Ob},36:{n:"PtgRef",f:zb},37:{n:"PtgArea",f:lb},38:{n:"PtgMemArea",f:Qb},39:{n:"PtgMemErr",f:yk},40:{n:"PtgMemNoMem",f:zk},41:{n:"PtgMemFunc",f:Rb},42:{n:"PtgRefErr",f:Sb},43:{n:"PtgAreaErr",f:nb},44:{n:"PtgRefN",f:Ab},45:{n:"PtgAreaN",f:pb},57:{n:"PtgNameX",f:Pb},58:{n:"PtgRef3d",f:Bb},59:{n:"PtgArea3d",f:mb},60:{n:"PtgRefErr3d",f:Ak},61:{n:"PtgAreaErr3d",f:ob},255:{}},Dk={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61};!function(){for(var a in Dk)Ck[a]=Ck[Dk[a]]}();var Ek,Fk,Gk={},Hk={1:{n:"PtgAttrSemi",f:vb},2:{n:"PtgAttrIf",f:ub},4:{n:"PtgAttrChoose",f:sb},8:{n:"PtgAttrGoto",f:tb},16:{n:"PtgAttrSum",f:dk},32:{n:"PtgAttrBaxcel",f:rb},64:{n:"PtgAttrSpace",f:xb},65:{n:"PtgAttrSpaceSemi",f:yb},255:{}},Ik=/(^|[^A-Za-z])R(\[?)(-?\d+|)\]?C(\[?)(-?\d+|)\]?/g,Jk={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Kk=S(Jk),Lk={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Mk={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD"},Nk={2:1,3:1,15:1,16:1,17:1,18:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,65:3,66:3,67:1,68:1,69:1,71:1,72:1,73:1,75:1,76:1,77:1,79:2,80:2,83:1,86:1,90:1,97:2,98:1,99:1,105:1,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,189:3,190:1,195:3,196:3,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,65535:0},Ok={"_xlfn.ACOT":"ACOT","_xlfn.ACOTH":"ACOTH","_xlfn.AGGREGATE":"AGGREGATE","_xlfn.ARABIC":"ARABIC","_xlfn.AVERAGEIF":"AVERAGEIF","_xlfn.AVERAGEIFS":"AVERAGEIFS","_xlfn.BASE":"BASE","_xlfn.BETA.DIST":"BETA.DIST","_xlfn.BETA.INV":"BETA.INV","_xlfn.BINOM.DIST":"BINOM.DIST","_xlfn.BINOM.DIST.RANGE":"BINOM.DIST.RANGE","_xlfn.BINOM.INV":"BINOM.INV","_xlfn.BITAND":"BITAND","_xlfn.BITLSHIFT":"BITLSHIFT","_xlfn.BITOR":"BITOR","_xlfn.BITRSHIFT":"BITRSHIFT","_xlfn.BITXOR":"BITXOR","_xlfn.CEILING.MATH":"CEILING.MATH","_xlfn.CEILING.PRECISE":"CEILING.PRECISE","_xlfn.CHISQ.DIST":"CHISQ.DIST","_xlfn.CHISQ.DIST.RT":"CHISQ.DIST.RT","_xlfn.CHISQ.INV":"CHISQ.INV","_xlfn.CHISQ.INV.RT":"CHISQ.INV.RT","_xlfn.CHISQ.TEST":"CHISQ.TEST","_xlfn.COMBINA":"COMBINA","_xlfn.CONFIDENCE.NORM":"CONFIDENCE.NORM","_xlfn.CONFIDENCE.T":"CONFIDENCE.T","_xlfn.COT":"COT","_xlfn.COTH":"COTH","_xlfn.COUNTIFS":"COUNTIFS","_xlfn.COVARIANCE.P":"COVARIANCE.P","_xlfn.COVARIANCE.S":"COVARIANCE.S","_xlfn.CSC":"CSC","_xlfn.CSCH":"CSCH","_xlfn.DAYS":"DAYS","_xlfn.DECIMAL":"DECIMAL","_xlfn.ECMA.CEILING":"ECMA.CEILING","_xlfn.ERF.PRECISE":"ERF.PRECISE","_xlfn.ERFC.PRECISE":"ERFC.PRECISE","_xlfn.EXPON.DIST":"EXPON.DIST","_xlfn.F.DIST":"F.DIST","_xlfn.F.DIST.RT":"F.DIST.RT","_xlfn.F.INV":"F.INV","_xlfn.F.INV.RT":"F.INV.RT","_xlfn.F.TEST":"F.TEST","_xlfn.FILTERXML":"FILTERXML","_xlfn.FLOOR.MATH":"FLOOR.MATH","_xlfn.FLOOR.PRECISE":"FLOOR.PRECISE","_xlfn.FORMULATEXT":"FORMULATEXT","_xlfn.GAMMA":"GAMMA","_xlfn.GAMMA.DIST":"GAMMA.DIST","_xlfn.GAMMA.INV":"GAMMA.INV","_xlfn.GAMMALN.PRECISE":"GAMMALN.PRECISE","_xlfn.GAUSS":"GAUSS","_xlfn.HYPGEOM.DIST":"HYPGEOM.DIST","_xlfn.IFNA":"IFNA","_xlfn.IFERROR":"IFERROR","_xlfn.IMCOSH":"IMCOSH","_xlfn.IMCOT":"IMCOT","_xlfn.IMCSC":"IMCSC","_xlfn.IMCSCH":"IMCSCH","_xlfn.IMSEC":"IMSEC","_xlfn.IMSECH":"IMSECH","_xlfn.IMSINH":"IMSINH","_xlfn.IMTAN":"IMTAN","_xlfn.ISFORMULA":"ISFORMULA","_xlfn.ISO.CEILING":"ISO.CEILING","_xlfn.ISOWEEKNUM":"ISOWEEKNUM","_xlfn.LOGNORM.DIST":"LOGNORM.DIST","_xlfn.LOGNORM.INV":"LOGNORM.INV","_xlfn.MODE.MULT":"MODE.MULT","_xlfn.MODE.SNGL":"MODE.SNGL","_xlfn.MUNIT":"MUNIT","_xlfn.NEGBINOM.DIST":"NEGBINOM.DIST","_xlfn.NETWORKDAYS.INTL":"NETWORKDAYS.INTL","_xlfn.NIGBINOM":"NIGBINOM","_xlfn.NORM.DIST":"NORM.DIST","_xlfn.NORM.INV":"NORM.INV","_xlfn.NORM.S.DIST":"NORM.S.DIST","_xlfn.NORM.S.INV":"NORM.S.INV","_xlfn.NUMBERVALUE":"NUMBERVALUE","_xlfn.PDURATION":"PDURATION","_xlfn.PERCENTILE.EXC":"PERCENTILE.EXC","_xlfn.PERCENTILE.INC":"PERCENTILE.INC","_xlfn.PERCENTRANK.EXC":"PERCENTRANK.EXC","_xlfn.PERCENTRANK.INC":"PERCENTRANK.INC","_xlfn.PERMUTATIONA":"PERMUTATIONA","_xlfn.PHI":"PHI","_xlfn.POISSON.DIST":"POISSON.DIST","_xlfn.QUARTILE.EXC":"QUARTILE.EXC","_xlfn.QUARTILE.INC":"QUARTILE.INC","_xlfn.QUERYSTRING":"QUERYSTRING","_xlfn.RANK.AVG":"RANK.AVG","_xlfn.RANK.EQ":"RANK.EQ","_xlfn.RRI":"RRI","_xlfn.SEC":"SEC","_xlfn.SECH":"SECH","_xlfn.SHEET":"SHEET","_xlfn.SHEETS":"SHEETS","_xlfn.SKEW.P":"SKEW.P","_xlfn.STDEV.P":"STDEV.P","_xlfn.STDEV.S":"STDEV.S","_xlfn.SUMIFS":"SUMIFS","_xlfn.T.DIST":"T.DIST","_xlfn.T.DIST.2T":"T.DIST.2T","_xlfn.T.DIST.RT":"T.DIST.RT","_xlfn.T.INV":"T.INV","_xlfn.T.INV.2T":"T.INV.2T","_xlfn.T.TEST":"T.TEST","_xlfn.UNICHAR":"UNICHAR","_xlfn.UNICODE":"UNICODE","_xlfn.VAR.P":"VAR.P","_xlfn.VAR.S":"VAR.S","_xlfn.WEBSERVICE":"WEBSERVICE","_xlfn.WEIBULL.DIST":"WEIBULL.DIST","_xlfn.WORKDAY.INTL":"WORKDAY.INTL","_xlfn.XOR":"XOR","_xlfn.Z.TEST":"Z.TEST"},Pk={3:{n:"BIFF2NUM",f:Ta},4:{n:"BIFF2STR",f:Sa},6:{n:"Formula",f:Vb},9:{n:"BOF",f:fa},10:{n:"EOF",f:Ee},12:{n:"CalcCount",f:re},13:{n:"CalcMode",f:ue},14:{n:"CalcPrecision",f:ve},15:{n:"CalcRefMode",f:we},16:{n:"CalcDelta",f:se},17:{n:"CalcIter",f:te},18:{n:"Protect",f:Xe},19:{n:"Password",f:Re},20:{n:"Header",f:Le},21:{n:"Footer",f:Ie},23:{n:"ExternSheet",f:Fa},24:{n:"Lbl",f:Ea},25:{n:"WinProtect",f:gf},26:{n:"VerticalPageBreaks",f:jf},27:{n:"HorizontalPageBreaks",f:kf},28:{n:"Note",f:Ka},29:{n:"Selection",f:lf},34:{n:"Date1904",f:Ae},35:{n:"ExternName",f:Da},38:{n:"LeftMargin",f:Oe},39:{n:"RightMargin",f:Ze},40:{n:"TopMargin",f:df},41:{n:"BottomMargin",f:pe},42:{n:"PrintRowCol",f:Te},43:{n:"PrintGrid",f:Se},47:{n:"FilePass",f:db},49:{n:"Font",f:qa},51:{n:"PrintSize",f:Ue},60:{n:"Continue",f:mf},61:{n:"Window1",f:pa},64:{n:"Backup",f:ne},65:{n:"Pane",f:nf},66:{n:"CodePage",f:ye},77:{n:"Pls",f:of},80:{n:"DCon",f:pf},81:{n:"DConRef",f:qf},82:{n:"DConName",f:rf},85:{n:"DefColWidth",f:Be},89:{n:"XCT",f:sf},90:{n:"CRN",f:tf},91:{n:"FileSharing",f:uf},92:{n:"WriteAccess",f:ha},93:{n:"Obj",f:Ma},94:{n:"Uncalced",f:vf},95:{n:"CalcSaveRecalc",f:xe},96:{n:"Template",f:wf},97:{n:"Intl",f:xf},99:{n:"ObjProtect",f:Qe},125:{n:"ColInfo",f:le},128:{n:"Guts",f:za},129:{n:"WsBool",f:yf},130:{n:"GridSet",f:Je},131:{n:"HCenter",f:Ke},132:{n:"VCenter",f:ff},133:{n:"BoundSheet8",f:ia},134:{n:"WriteProtect",f:hf},140:{n:"Country",f:Oa},141:{n:"HideObj",f:Me},144:{n:"Sort",f:zf},146:{n:"Palette",f:Qa},151:{n:"Sync",f:Af},152:{n:"LPr",f:Bf},153:{n:"DxGCol",f:Cf},154:{n:"FnGroupName",f:Df},155:{n:"FilterMode",f:Ef},156:{n:"BuiltInFnGroupCount",f:qe},157:{n:"AutoFilterInfo",f:Ff},158:{n:"AutoFilter",f:Gf},160:{n:"Scl",f:af},161:{n:"Setup",f:Hf},174:{n:"ScenMan",f:If},175:{n:"SCENARIO",f:Jf},176:{n:"SxView",f:Kf},177:{n:"Sxvd",f:Lf},178:{n:"SXVI",f:Mf},180:{n:"SxIvd",f:Nf},181:{n:"SXLI",f:Of},182:{n:"SXPI",f:Pf},184:{n:"DocRoute",f:Qf},185:{n:"RecipName",f:Rf},189:{n:"MulRk",f:wa},190:{n:"MulBlank",f:Sf},193:{n:"Mms",f:Pe},197:{n:"SXDI",f:Tf},198:{n:"SXDB",f:Uf},199:{n:"SXFDB",f:Vf},200:{n:"SXDBB",f:Wf},201:{n:"SXNum",f:Xf},202:{n:"SxBool",f:cf},203:{n:"SxErr",f:Yf},204:{n:"SXInt",f:Zf},205:{n:"SXString",f:$f},206:{n:"SXDtr",f:_f},207:{n:"SxNil",f:ag},208:{n:"SXTbl",f:bg},209:{n:"SXTBRGIITM",f:cg},210:{n:"SxTbpg",f:dg},211:{n:"ObProj",f:eg},213:{n:"SXStreamID",f:fg},215:{n:"DBCell",f:gg},216:{n:"SXRng",f:hg},217:{n:"SxIsxoper",f:ig},218:{n:"BookBool",f:jg},220:{n:"DbOrParamQry",f:kg},221:{n:"ScenarioProtect",f:_e},222:{n:"OleObjectSize",f:lg},224:{n:"XF",f:ya},225:{n:"InterfaceHdr",f:ga},226:{n:"InterfaceEnd",f:Ne},227:{n:"SXVS",f:mg},229:{n:"MergeCells",f:La},233:{n:"BkHim",f:ng},235:{n:"MsoDrawingGroup",f:og},236:{n:"MsoDrawing",f:pg},237:{n:"MsoDrawingSelection",f:qg},239:{n:"PhoneticInfo",f:rg},240:{n:"SxRule",f:sg},241:{n:"SXEx",f:tg},242:{n:"SxFilt",f:ug},244:{n:"SxDXF",f:vg},245:{n:"SxItm",f:wg},246:{n:"SxName",f:xg},247:{n:"SxSelect",f:yg},248:{n:"SXPair",f:zg},249:{n:"SxFmla",f:Ag},251:{n:"SxFormat",f:Bg},252:{n:"SST",f:ja},253:{n:"LabelSst",f:ra},255:{n:"ExtSST",f:ka},256:{n:"SXVDEx",f:Cg},259:{n:"SXFormula",f:Dg},290:{n:"SXDBEx",f:Eg},311:{n:"RRDInsDel",f:Fg},312:{n:"RRDHead",f:Gg},315:{n:"RRDChgCell",f:Hg},317:{n:"RRTabId",f:$e},318:{n:"RRDRenSheet",f:Ig},319:{n:"RRSort",f:Jg},320:{n:"RRDMove",f:Kg},330:{n:"RRFormat",f:Lg},331:{n:"RRAutoFmt",f:Mg},333:{n:"RRInsertSh",f:Ng},334:{n:"RRDMoveBegin",f:Og},335:{n:"RRDMoveEnd",f:Pg},336:{n:"RRDInsDelBegin",f:Qg},337:{n:"RRDInsDelEnd",f:Rg},338:{n:"RRDConflict",f:Sg},339:{n:"RRDDefName",f:Tg},340:{n:"RRDRstEtxp",f:Ug},351:{n:"LRng",f:Vg},352:{n:"UsesELFs",f:ef},353:{n:"DSF",f:Ce},401:{n:"CUsr",f:Wg},402:{n:"CbUsr",f:Xg},403:{n:"UsrInfo",f:Yg},404:{n:"UsrExcl",f:Zg},405:{n:"FileLock",f:$g},406:{n:"RRDInfo",f:_g},407:{n:"BCUsrs",f:ah},408:{n:"UsrChk",f:bh},425:{n:"UserBView",f:ch},426:{n:"UserSViewBegin",f:dh},427:{n:"UserSViewEnd",f:eh},428:{n:"RRDUserView",f:fh},429:{n:"Qsi",f:gh},430:{n:"SupBook",f:Ca},431:{n:"Prot4Rev",f:Ve},432:{n:"CondFmt",f:hh},433:{n:"CF",f:ih},434:{n:"DVal",f:jh},437:{n:"DConBin",f:kh},438:{n:"TxO",f:Na},439:{n:"RefreshAll",f:Ye},440:{n:"HLink",f:he},441:{n:"Lel",f:lh},442:{n:"CodeName",f:mh},443:{n:"SXFDBType",f:nh},444:{n:"Prot4RevPass",f:We},445:{n:"ObNoMacros",f:oh},446:{n:"Dv",f:ph},448:{n:"Excel9File",f:Fe},449:{n:"RecalcId",f:na,r:2},450:{n:"EntExU2",f:De},512:{n:"Dimensions",f:ua},513:{n:"Blank",f:oe},515:{n:"Number",f:Ba},516:{n:"Label",f:sa},517:{n:"BoolErr",f:Aa},519:{n:"String",f:bf},520:{n:"Row",f:la},523:{n:"Index",f:qh},545:{n:"Array",f:Ha},549:{n:"DefaultRowHeight",f:oa},566:{n:"Table",f:rh},574:{n:"Window2",f:me},638:{n:"RK",f:va},659:{n:"Style",f:je},1048:{n:"BigName",f:sh},1054:{n:"Format",f:ta},1084:{n:"ContinueBigName",f:th},1212:{n:"ShrFmla",f:Ga},2048:{n:"HLinkTooltip",f:ie},2049:{n:"WebPub",f:uh},2050:{n:"QsiSXTag",f:vh},2051:{n:"DBQueryExt",f:wh},2052:{n:"ExtString",f:xh},2053:{n:"TxtQry",f:yh},2054:{n:"Qsir",f:zh},2055:{n:"Qsif",f:Ah},2056:{n:"RRDTQSIF",f:Bh},2057:{n:"BOF",f:fa},2058:{n:"OleDbConn",f:Ch},2059:{n:"WOpt",f:Dh},2060:{n:"SXViewEx",f:Eh},2061:{n:"SXTH",f:Fh},2062:{n:"SXPIEx",f:Gh},2063:{n:"SXVDTEx",f:Hh},2064:{n:"SXViewEx9",f:Ih},2066:{n:"ContinueFrt",f:Jh},2067:{n:"RealTimeData",f:Kh},2128:{n:"ChartFrtInfo",f:Lh},2129:{n:"FrtWrapper",f:Mh},2130:{n:"StartBlock",f:Nh},2131:{n:"EndBlock",f:Oh},2132:{n:"StartObject",f:Ph},2133:{n:"EndObject",f:Qh},2134:{n:"CatLab",f:Rh},2135:{n:"YMult",f:Sh},2136:{n:"SXViewLink",f:Th},2137:{n:"PivotChartBits",f:Uh},2138:{n:"FrtFontList",f:Vh},2146:{n:"SheetExt",f:Wh},2147:{n:"BookExt",f:Xh,r:12},2148:{n:"SXAddl",f:Yh},2149:{n:"CrErr",f:Zh},2150:{n:"HFPicture",f:$h},2151:{n:"FeatHdr",f:Ge},2152:{n:"Feat",f:_h},2154:{n:"DataLabExt",f:ai},2155:{n:"DataLabExtContents",f:bi},2156:{n:"CellWatch",f:ci},2161:{n:"FeatHdr11",f:di},2162:{n:"Feature11",f:ei},2164:{n:"DropDownObjIds",f:fi},2165:{n:"ContinueFrt11",f:gi},2166:{n:"DConn",f:hi},2167:{n:"List12",f:ii},2168:{n:"Feature12",f:ji},2169:{n:"CondFmt12",f:ki},2170:{n:"CF12",f:li},2171:{n:"CFEx",f:mi},2172:{n:"XFCRC",f:Ra,r:12},2173:{n:"XFExt",f:jc,r:12},2174:{n:"AutoFilter12",f:ni},2175:{n:"ContinueFrt12",f:oi},2180:{n:"MDTInfo",f:pi},2181:{n:"MDXStr",f:qi},2182:{n:"MDXTuple",f:ri},2183:{n:"MDXSet",f:si},2184:{n:"MDXProp",f:ti},2185:{n:"MDXKPI",f:ui},2186:{n:"MDB",f:vi},2187:{n:"PLV",f:wi},2188:{n:"Compat12",f:ze,r:12},2189:{n:"DXF",f:xi},2190:{n:"TableStyles",f:yi,r:12},2191:{n:"TableStyle",f:zi},2192:{n:"TableStyleElement",f:Ai},2194:{n:"StyleExt",f:ke},2195:{n:"NamePublish",f:Bi},2196:{n:"NameCmt",f:Ci},2197:{n:"SortData",f:Di},2198:{n:"Theme",f:dc,r:12},2199:{n:"GUIDTypeLib",f:Ei},2200:{n:"FnGrp12",f:Fi},2201:{n:"NameFnGrp12",f:Gi},2202:{n:"MTRSettings",f:Ia,r:12},2203:{n:"CompressPictures",f:fe},2204:{n:"HeaderFooter",f:Hi},2205:{n:"CrtLayout12",f:Ii},2206:{n:"CrtMlFrt",f:Ji},2207:{n:"CrtMlFrtContinue",f:Ki},2211:{n:"ForceFullCalculation",f:ma},2212:{n:"ShapePropsStream",f:Li},2213:{n:"TextPropsStream",f:Mi},2214:{n:"RichTextStream",f:Ni},2215:{n:"CrtLayout12A",f:Oi},4097:{n:"Units",f:Pi},4098:{n:"Chart",f:Qi},4099:{n:"Series",f:Ri},4102:{n:"DataFormat",f:Si},4103:{n:"LineFormat",f:Ti},4105:{n:"MarkerFormat",f:Ui},4106:{n:"AreaFormat",f:Vi},4107:{n:"PieFormat",f:Wi},4108:{n:"AttachedLabel",f:Xi},4109:{n:"SeriesText",f:Yi},4116:{n:"ChartFormat",f:Zi},4117:{n:"Legend",f:$i},4118:{n:"SeriesList",f:_i},4119:{n:"Bar",f:aj},4120:{n:"Line",f:bj},4121:{n:"Pie",f:cj},4122:{n:"Area",f:dj},4123:{n:"Scatter",f:ej},4124:{n:"CrtLine",f:fj},4125:{n:"Axis",f:gj},4126:{n:"Tick",f:hj},4127:{n:"ValueRange",f:ij},4128:{n:"CatSerRange",f:jj},4129:{n:"AxisLine",f:kj},4130:{n:"CrtLink",f:lj},4132:{n:"DefaultText",f:mj},4133:{n:"Text",f:nj},4134:{n:"FontX",f:He},4135:{n:"ObjectLink",f:oj},4146:{n:"Frame",f:pj},4147:{n:"Begin",f:qj},4148:{n:"End",f:rj},4149:{n:"PlotArea",f:sj},4154:{n:"Chart3d",f:tj},4156:{n:"PicF",f:uj},4157:{n:"DropBar",f:vj},4158:{n:"Radar",f:wj},4159:{n:"Surf",f:xj},4160:{n:"RadarArea",f:yj},4161:{n:"AxisParent",f:zj},4163:{n:"LegendException",f:Aj},4164:{n:"ShtProps",f:Bj},4165:{n:"SerToCrt",f:Cj},4166:{n:"AxesUsed",f:Dj},4168:{n:"SBaseRef",f:Ej},4170:{n:"SerParent",f:Fj},4171:{n:"SerAuxTrend",f:Gj},4174:{n:"IFmtRecord",f:Hj},4175:{n:"Pos",f:Ij},4176:{n:"AlRuns",f:Jj},4177:{n:"BRAI",f:Kj},4187:{n:"SerAuxErrBar",f:Lj},4188:{n:"ClrtClient",f:Pa},4189:{n:"SerFmt",f:Mj},4191:{n:"Chart3DBarShape",f:Nj},4192:{n:"Fbi",f:Oj},4193:{n:"BopPop",f:Pj},4194:{n:"AxcExt",f:Qj},4195:{n:"Dat",f:Rj},4196:{n:"PlotGrowth",f:Sj},4197:{n:"SIIndex",f:Tj},4198:{n:"GelFrame",f:Uj},4199:{n:"BopPopCustom",f:Vj},4200:{n:"Fbi2",f:Wj},22:{n:"ExternCount",f:A},126:{n:"RK",f:A},127:{n:"ImData",f:A},135:{n:"Addin",f:A},136:{n:"Edg",f:A},137:{n:"Pub",f:A},145:{n:"Sub",f:A},148:{n:"LHRecord",f:A},149:{n:"LHNGraph",f:A},150:{n:"Sound",f:A},169:{n:"CoordList",f:A},171:{n:"GCW",f:A},188:{n:"ShrFmla",f:A},194:{n:"AddMenu",f:A},195:{n:"DelMenu",f:A},214:{n:"RString",f:A},223:{n:"UDDesc",f:A},234:{n:"TabIdConf",f:A},354:{n:"XL5Modify",f:A},421:{n:"FileSharing2",f:A},536:{n:"Name",f:A},547:{n:"ExternName",f:Da},561:{n:"Font",f:A},1030:{n:"Formula",f:Vb},2157:{n:"FeatInfo",f:A},2163:{n:"FeatInfo11",f:A},2177:{n:"SXAddl12",f:A},2240:{n:"AutoWebPub",f:A},2241:{n:"ListObj",f:A},2242:{n:"ListField",f:A},2243:{n:"ListDV",f:A},2244:{n:"ListCondFmt",f:A},2245:{n:"ListCF",f:A},2246:{n:"FMQry",f:A},2247:{n:"FMSQry",f:A},2248:{n:"PLV",f:A},2249:{n:"LnExt",f:A},2250:{n:"MkrExt",f:A},2251:{n:"CrtCoopt",f:A},0:{}},Qk={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Rk=lc([["cellNF",!1],["cellFormula",!0],["cellStyles",!1],["sheetRows",0,"n"],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["password",""],["WTF",!1]]),Sk=/&[a-z]*;/g,Tk=/_x([0-9a-fA-F]+)_/g,Uk=/&#(\d+);/g,Vk={"General Number":"General","General Date":Ed._table[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Ed._table[15],"Short Date":Ed._table[14],"Long Time":Ed._table[19],"Medium Time":Ed._table[18],"Short Time":Ed._table[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Ed._table[2],Standard:Ed._table[4],Percent:Ed._table[10],Scientific:Ed._table[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'},Wk={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"},Xk=/<(\/?)([a-z0-9]*:|)(\w+)[^>]*>/gm;"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports&&(Fk=require("fs"));var Yk=function(a,b){var c=Fk.readFileSync(a);switch(b||(b={}),Jc(c,{type:"buffer"})){case 208:return rc(Ud.read(c,{type:"buffer"}),b);case 9:return rc(c,b);case 60:return Ic(c,(b.type="buffer",b));default:throw"Unsupported file"}},Zk={encode_col:Rc,encode_row:Oc,encode_cell:Vc,encode_range:Xc,decode_col:Qc,decode_row:Nc,split_cell:Tc,decode_cell:Uc,decode_range:Wc,format_cell:$c,get_formulae:cd,make_csv:bd,make_json:_c,make_formulae:cd,sheet_to_csv:bd,sheet_to_json:_c,sheet_to_formulae:cd,sheet_to_row_object_array:ad};a.parse_xlscfb=rc,a.read=Kc,a.readFile=Yk,a.utils=Zk,a.CFB=Ud,a.SSF=Ed}("undefined"!=typeof exports?exports:XLS),function(a,b){if("function"!=typeof define||!define.amd)return b(a);define(["angular"],function(a){return b(a)})}(window.angular||null,function(a){var b=a.module("ngTable",[]);return function(){function b(b){function c(b,c){var f=b.charAt(0).toUpperCase()+b.substring(1),g={};return g["on"+f]=d(b),g["publish"+f]=e(b),a.extend(c,g)}function d(c){return function(d){var e=a.identity,g=b;if(2===arguments.length?a.isFunction(arguments[1].$new)?g=arguments[1]:e=arguments[1]:arguments.length>2&&(g=arguments[1],e=arguments[2]),a.isObject(e)){var h=e;e=function(a){return a===h}}return g.$on("ngTable:"+c,function(a,b){if(!b.isNullInstance){var c=f(arguments,2),g=[b].concat(c);e.apply(this,g)&&d.apply(this,g)}})}}function e(a){return function(){var c=["ngTable:"+a].concat(Array.prototype.slice.call(arguments));b.$broadcast.apply(b,c)}}function f(a,b){return Array.prototype.slice.call(a,null==b?1:b)}var g={};return g=c("afterCreated",g),g=c("afterReloadData",g),g=c("datasetChanged",g),g=c("pagesChanged",g)}a.module("ngTable").factory("ngTableEventsChannel",b),b.$inject=["$rootScope"]}(),function(){function b(){function b(){c()}function c(){f=g}function d(b){var c=a.extend({},f,b)
;c.aliasUrls=a.extend({},f.aliasUrls,b.aliasUrls),f=c}function e(){function b(a,b){return-1!==a.indexOf("/")?a:e.getUrlForAlias(a,b)}function c(a){return f.aliasUrls[a]||f.defaultBaseUrl+a+f.defaultExt}var d,e={config:d,getTemplateUrl:b,getUrlForAlias:c};return Object.defineProperty(e,"config",{get:function(){return d=d||a.copy(f)},enumerable:!0}),e}var f,g={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}};this.$get=e,this.resetConfigs=c,this.setConfig=d,b(),e.$inject=[]}a.module("ngTable").provider("ngTableFilterConfig",b),b.$inject=[]}(),function(){function b(){function a(a){function c(c,d){if(null==c)return[];var e=d.hasFilter()?a(b.filterFilterName)(c,d.filter(!0)):c,f=d.orderBy(),g=f.length?a(b.sortingFilterName)(e,f):e,h=g.slice((d.page()-1)*d.count(),d.page()*d.count());return d.total(g.length),h}return c}var b=this;b.$get=a,b.filterFilterName="filter",b.sortingFilterName="orderBy",a.$inject=["$filter"]}a.module("ngTable").provider("ngTableDefaultGetData",b),b.$inject=[]}(),function(){function b(a){function b(b){return function(){var c=a.defer(),d=b.apply(this,[c].concat(Array.prototype.slice.call(arguments)));return d||(d=c.promise),d}}return b}a.module("ngTable").factory("ngTableGetDataBcShim",b),b.$inject=["$q"]}(),b.value("ngTableDefaults",{params:{},settings:{}}),b.factory("NgTableParams",["$q","$log","ngTableDefaults","ngTableGetDataBcShim","ngTableDefaultGetData","ngTableEventsChannel",function(b,c,d,e,f,g){var h=function(a){return!isNaN(parseFloat(a))&&isFinite(a)};return function(i,j){function k(){var a=s.getDataFnAdaptor(s.getData);return b.when(a.call(s,o))}function l(){var a=s.getGroupsFnAdaptor(s.getGroups);return b.when(a.call(s,s.groupBy,o))}function m(a){return(s.interceptors||[]).reduce(function(a,c){var d=c.response&&c.response.bind(c)||b.when,e=c.responseError&&c.responseError.bind(c)||b.reject;return a.then(function(a){return d(a,o)},function(a){return e(a,o)})},a())}"boolean"==typeof i&&(this.isNullInstance=!0);var n,o=this,p=!1,q=function(){s.debugMode&&c.debug&&c.debug.apply(this,arguments)};this.data=[],this.parameters=function(b,c){if(c=c||!1,a.isDefined(b)){for(var d in b){var e=b[d];if(c&&d.indexOf("[")>=0){for(var f=d.split(/\[(.*)\]/).reverse(),g="",i=0,j=f.length;i<j;i++){var k=f[i];if(""!==k){var l=e;e={},e[g=k]=h(l)?parseFloat(l):l}}"sorting"===g&&(r[g]={}),r[g]=a.extend(r[g]||{},e[g])}else r[d]=h(b[d])?parseFloat(b[d]):b[d]}return q("ngTable: set parameters",r),this}return r},this.settings=function(b){if(a.isDefined(b)){a.isArray(b.data)&&(b.total=b.data.length),b.getData&&b.getData.length>1&&(b.getDataFnAdaptor=e),b.getGroups&&b.getGroups.length>2&&(b.getGroupsFnAdaptor=e);var c=s.data;s=a.extend(s,b);return b.hasOwnProperty("data")&&b.data!=c&&(p&&this.page(1),p=!1,g.publishDatasetChanged(this,b.data,c)),q("ngTable: set settings",s),this}return s},this.page=function(b){return a.isDefined(b)?this.parameters({page:b}):r.page},this.total=function(b){return a.isDefined(b)?this.settings({total:b}):s.total},this.count=function(b){return a.isDefined(b)?this.parameters({count:b,page:1}):r.count},this.filter=function(b){if(a.isDefined(b)&&a.isObject(b))return this.parameters({filter:b,page:1});if(!0===b){for(var c=Object.keys(r.filter),d={},e=0;e<c.length;e++){var f=r.filter[c[e]];null!=f&&""!==f&&(d[c[e]]=f)}return d}return r.filter},this.sorting=function(b){if(2==arguments.length){var c={};return c[b]=arguments[1],this.parameters({sorting:c}),this}return a.isDefined(b)?this.parameters({sorting:b}):r.sorting},this.isSortBy=function(b,c){return void 0!==c?a.isDefined(r.sorting[b])&&r.sorting[b]==c:a.isDefined(r.sorting[b])},this.orderBy=function(){var a=[];for(var b in r.sorting)a.push(("asc"===r.sorting[b]?"+":"-")+b);return a},this.getData=function(a){return f(this.data,a)},this.getGroups=function(b){return k().then(function(c){var d={};a.forEach(c,function(c){var e=a.isFunction(b)?b(c):c[b];d[e]=d[e]||{data:[]},d[e].value=e,d[e].data.push(c)});var e=[];for(var f in d)e.push(d[f]);return q("ngTable: refresh groups",e),e})},this.generatePagesArray=function(a,b,c,d){arguments.length||(a=this.page(),b=this.total(),c=this.count());var e,f,g,h,i;if(d=d&&d<6?6:d,i=[],(h=Math.ceil(b/c))>1){i.push({type:"prev",number:Math.max(1,a-1),active:a>1}),i.push({type:"first",number:1,active:a>1,current:1===a}),f=Math.round((s.paginationMaxBlocks-s.paginationMinBlocks)/2),g=Math.max(2,a-f),e=Math.min(h-1,a+2*f-(a-g)),g=Math.max(2,g-(2*f-(e-g)));for(var j=g;j<=e;)j===g&&2!==j||j===e&&j!==h-1?i.push({type:"more",active:!1}):i.push({type:"page",number:j,active:a!==j,current:a===j}),j++;i.push({type:"last",number:h,active:a!==h,current:a===h}),i.push({type:"next",number:Math.min(h,a+1),active:a<h})}return i},this.isDataReloadRequired=function(){return!p||!a.equals(r,n)},this.hasFilter=function(){return Object.keys(this.filter(!0)).length>0},this.hasFilterChanges=function(){return!a.equals(r&&r.filter,n&&n.filter)},this.url=function(b){b=b||!1;var c=b?[]:{};for(var d in r)if(r.hasOwnProperty(d)){var e=r[d],f=encodeURIComponent(d);if("object"==typeof e){for(var g in e)if(!a.isUndefined(e[g])&&""!==e[g]){var h=f+"["+encodeURIComponent(g)+"]";b?c.push(h+"="+e[g]):c[h]=e[g]}}else a.isFunction(e)||a.isUndefined(e)||""===e||(b?c.push(f+"="+encodeURIComponent(e)):c[f]=encodeURIComponent(e))}return c},this.reload=function(){var c=this,d=null;s.$loading=!0,n=a.copy(r),p=!0,d=m(s.groupBy?l:k),q("ngTable: reload data");var e=c.data;return d.then(function(a){return s.$loading=!1,c.data=a,g.publishAfterReloadData(c,a,e),c.reloadPages(),s.$scope&&s.$scope.$emit("ngTableAfterReloadData"),a}).catch(function(a){return n=null,p=!1,b.reject(a)})},this.reloadPages=function(){var b;return function(){var c=b,d=o.generatePagesArray(o.page(),o.total(),o.count());a.equals(c,d)||(b=d,g.publishPagesChanged(this,d,c))}}();var r={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null};a.extend(r,d.params);var s={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span",getDataFnAdaptor:a.identity,getGroupsFnAdaptor:a.identity,getGroups:this.getGroups,getData:this.getData};return this.settings(d.settings),this.settings(j),this.parameters(i,!0),g.publishAfterCreated(this),this}}]),b.factory("ngTableParams",["NgTableParams",function(a){return a}]),function(){function b(a,b){a.config=b}a.module("ngTable").controller("ngTableFilterRowController",b),b.$inject=["$scope","ngTableFilterConfig"]}(),function(){function b(a){function b(b,c){var d=b.sortable&&b.sortable();if(d){var e=a.params.settings().defaultSort,f="asc"===e?"desc":"asc",g=a.params.sorting()&&a.params.sorting()[d]&&a.params.sorting()[d]===e,h=c.ctrlKey||c.metaKey?a.params.sorting():{};h[d]=g?f:e,a.params.parameters({sorting:h})}}a.sortBy=b}a.module("ngTable").controller("ngTableSorterRowController",b),b.$inject=["$scope"]}(),b.controller("ngTableController",["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","ngTableColumn","ngTableEventsChannel",function(b,c,d,e,f,g,h,i,j){function k(a){if(a){b.params.settings().$scope=b;var c=b.params;if(c.hasFilterChanges()){var d=function(){c.page(1),c.reload()};c.settings().filterDelay?m(d,c.settings().filterDelay):d()}else c.reload()}}function l(){function a(a,c){a.settings().groupBy?b.$groups=c:b.$data=c}function c(a,c){b.pages=c}function d(a){return b.params===a}j.onAfterReloadData(a,b,d),j.onPagesChanged(c,b,d)}b.$filterRow={},b.$loading=!1,b.hasOwnProperty("params")||(b.params=new c(!0)),b.params.settings().$scope=b;var m=function(){var a=0;return function(b,c){d.cancel(a),a=d(b,c)}}();b.$watch("params",function(a,b){a!==b&&a&&a.reload()},!1),b.$watch("params.isDataReloadRequired()",k),this.compileDirectiveTemplates=function(){if(!h.hasClass("ng-table")){b.templates={header:g.templateHeader?g.templateHeader:"ng-table/header.html",pagination:g.templatePagination?g.templatePagination:"ng-table/pager.html"},h.addClass("ng-table");var c=null,d=!1;a.forEach(h.children(),function(a){"THEAD"===a.tagName&&(d=!0)}),d||(c=a.element(document.createElement("thead")).attr("ng-include","templates.header"),h.prepend(c));var e=a.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});h.after(e),c&&f(c)(b),f(e)(b)}},this.loadFilterData=function(c){a.forEach(c,function(c){var d;return d=c.filterData(b,{$column:c}),d?a.isObject(d)&&a.isObject(d.promise)?(delete c.filterData,d.promise.then(function(b){a.isArray(b)||a.isFunction(b)||a.isObject(b)?a.isArray(b)&&b.unshift({title:"",id:""}):b=[],c.data=b})):c.data=d:void delete c.filterData})},this.buildColumns=function(a){return a.map(function(a){return i.buildColumn(a,b)})},this.parseNgTableDynamicExpr=function(a){if(!a||a.indexOf(" with ")>-1){var b=a.split(/\s+with\s+/);return{tableParams:b[0],columns:b[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")},this.setupBindingsToInternalScope=function(c){var d=e(c);b.$watch(d,function(c){a.isUndefined(c)||(b.paramsModel=d,b.params=c)},!1),g.showFilter&&b.$parent.$watch(g.showFilter,function(a){b.show_filter=a}),g.disableFilter&&b.$parent.$watch(g.disableFilter,function(a){b.$filterRow.disabled=a})},l()}]),b.factory("ngTableColumn",[function(){function b(b,d){var e=Object.create(b);for(var f in c)void 0===e[f]&&(e[f]=c[f]),a.isFunction(e[f])||function(a){e[a]=function(){return b[a]}}(f),function(a){var c=e[a];e[a]=function(){return 0===arguments.length?c.call(b,d):c.apply(b,arguments)}}(f);return e}var c={class:function(){return""},filter:function(){return!1},filterData:a.noop,headerTemplateURL:function(){return!1},headerTitle:function(){return""},sortable:function(){return!1},show:function(){return!0},title:function(){return""},titleAlt:function(){return""}};return{buildColumn:b}}]),b.directive("ngTable",["$q","$parse",function(b,c){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(b){var d=[],e=0,f=null;if(a.forEach(a.element(b.find("tr")),function(b){b=a.element(b),b.hasClass("ng-table-group")||f||(f=b)}),f)return a.forEach(f.find("td"),function(b){var f=a.element(b);if(!f.attr("ignore-cell")||"true"!==f.attr("ignore-cell")){var g=function(a){return f.attr("x-data-"+a)||f.attr("data-"+a)||f.attr(a)},h=function(b){var e=g(b);if(e)return function(b,f){return c(e)(b,a.extend(f||{},{$columns:d}))}},i=g("title-alt")||g("title");i&&f.attr("data-title-text","{{"+i+"}}"),d.push({id:e++,title:h("title"),titleAlt:h("title-alt"),headerTitle:h("header-title"),sortable:h("sortable"),class:h("header-class"),filter:h("filter"),headerTemplateURL:h("header"),filterData:h("filter-data"),show:f.attr("ng-if")?function(a){return c(f.attr("ng-if"))(a)}:void 0})}}),function(a,b,c,e){a.$columns=d=e.buildColumns(d),e.setupBindingsToInternalScope(c.ngTable),e.loadFilterData(d),e.compileDirectiveTemplates()}}}}]),b.directive("ngTableDynamic",["$parse",function(b){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(b){var c;if(a.forEach(a.element(b.find("tr")),function(b){b=a.element(b),b.hasClass("ng-table-group")||c||(c=b)}),c)return a.forEach(c.find("td"),function(b){var c=a.element(b);(function(a){return c.attr("x-data-"+a)||c.attr("data-"+a)||c.attr(a)})("title")||c.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}"),c.attr("ng-if")||c.attr("ng-if","$columns[$index].show(this)")}),function(a,b,c,d){var e=d.parseNgTableDynamicExpr(c.ngTableDynamic);d.setupBindingsToInternalScope(e.tableParams),d.compileDirectiveTemplates(),a.$watchCollection(e.columns,function(b){a.$columns=d.buildColumns(b),d.loadFilterData(a.$columns)})}}}}]),function(){function b(){return{restrict:"E",replace:!0,templateUrl:"ng-table/filterRow.html",scope:!0,controller:"ngTableFilterRowController"}}a.module("ngTable").directive("ngTableFilterRow",b),b.$inject=[]}(),function(){function b(){return{restrict:"E",replace:!0,templateUrl:"ng-table/sorterRow.html",scope:!0,controller:"ngTableSorterRowController"}}a.module("ngTable").directive("ngTableSorterRow",b),b.$inject=[]}(),b.directive("ngTablePagination",["$compile","ngTableEventsChannel",function(b,c){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(d,e){c.onAfterReloadData(function(a){d.pages=a.generatePagesArray()},d,function(a){return a===d.params}),d.$watch("templateUrl",function(c){if(!a.isUndefined(c)){var f=a.element(document.createElement("div"));f.attr({"ng-include":"templateUrl"}),e.append(f),b(f)(d)}})}}}]),a.module("ngTable").run(["$templateCache",function(a){a.put("ng-table/filterRow.html",'<tr ng-show="show_filter" class="ng-table-filters"> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-if="$column.show(this)" class="filter"> <div ng-repeat="(name, filter) in $column.filter(this)"> <div ng-include="config.getTemplateUrl(filter)"></div> </div> </th> </tr> '),a.put("ng-table/filters/number.html",'<input type="number" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="input-filter form-control"/> '),a.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" multiple ng-multiple="true" ng-model="params.filter()[name]" class="filter filter-select-multiple form-control" name="{{name}}"> </select> '),a.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="filter filter-select form-control" name="{{name}}"> <option style="display:none" value=""></option> </select> '),a.put("ng-table/filters/text.html",'<input type="text" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="input-filter form-control"/> '),a.put("ng-table/header.html","<ng-table-sorter-row></ng-table-sorter-row> <ng-table-filter-row></ng-table-filter-row> "),a.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager" ng-if="params.data.length"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> \x3c!--<button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button>--\x3e </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> '),a.put("ng-table/sorterRow.html",'<tr> <th title="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" ng-class="{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\' }" ng-click="sortBy($column, $event)" ng-if="$column.show(this)" ng-init="template=$column.headerTemplateURL(this)" class="header {{$column.class(this)}}"> <div ng-if="!template" class="ng-table-header" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'div\'}"> <span ng-bind="$column.title(this)" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'span\'}"></span> </div> <div ng-if="template" ng-include="template"></div> </th> </tr> ')}]),b}),function(){angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",ENTITY_BINDING:"$$this",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["","","Ar","","","B/.","Br","Bs.","Bs.F.","GH","","c","Ch.","","C$","D","","","..",".","JD",".",".","",".","..",".","Db","$","","Esc","","","Ft","FBu","FCFA","CFA","Fr","FRw","G","gr","","h","","","K","kr","kn","MK","ZK","Kz","K","L","Le","","E","lp","M","KM","MT","","Nfk","","Nu.","UM","T$","MOP$","","Pt.","","..","LL","LS","P","Q","q","R","R$","..",".",".","","RM","p","Rf.","","","SRe","Rp","","Ksh","Sh.So.","USh","S/","SDR","","  ","WS$","","VT","","","z"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1,WHEN_NEEDED:2}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(a,b,c,d){return{priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(b,e,f,g){function h(){(0,b.col.compiledElementFn)(b,function(a,b){e.append(a)})}if(g&&b.col.compiledElementFn)h();else if(g&&!b.col.compiledElementFn)b.col.getCompiledElementFn().then(function(a){a(b,function(a,b){e.append(a)})}).catch(angular.noop);else{var i=b.col.cellTemplate.replace(d.MODEL_COL_FIELD,"row.entity."+c.preEval(b.col.field)).replace(d.COL_FIELD,"grid.getCellValue(row, col)"),j=a(i)(b);e.append(j)}},post:function(a,b){function c(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.cellClass)?a.col.cellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.cellClass,d.addClass(g)}function e(d,e){if(d!==e){(g||a.col.cellClass)&&c();var f=a.col.getColClass(!1);f!==h&&(b.removeClass(h),b.addClass(f),h=f)}}function f(){i(),j()}var g,h=a.col.getColClass(!1);b.addClass(h),a.col.cellClass&&c();var i=a.grid.registerDataChangeCallback(c,[d.dataChange.COLUMN,d.dataChange.EDIT]),j=a.$watch("row",e);a.$on("$destroy",f),b.on("$destroy",f)}}}}}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(a,b,c){var d={initialize:function(a,b){a.grid=b.grid,b.columnMenuScope=a,a.menuShown=!1},setColMenuItemWatch:function(a){var b=a.$watch("col.menuItems",function(b){void 0!==b&&b&&angular.isArray(b)?(b.forEach(function(b){void 0!==b.context&&b.context||(b.context={}),b.context.col=a.col}),a.menuItems=a.defaultMenuItems.concat(b)):a.menuItems=a.defaultMenuItems});a.$on("$destroy",b)},sortable:function(a){return Boolean(a.grid.options.enableSorting&&void 0!==a.col&&a.col&&a.col.enableSorting)},isActiveSort:function(a,b){return Boolean(void 0!==a.col&&void 0!==a.col.sort&&void 0!==a.col.sort.direction&&a.col.sort.direction===b)},suppressRemoveSort:function(a){return Boolean(a.col&&a.col.suppressRemoveSort)},hideable:function(a){return!(void 0!==a.col&&a.col&&a.col.colDef&&!1===a.col.colDef.enableHiding)},getDefaultMenuItems:function(c){return[{title:function(){return a.getSafeText("sort.ascending")},icon:"ui-grid-icon-sort-alt-up",action:function(a){a.stopPropagation(),c.sortColumn(a,b.ASC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.ASC)}},{title:function(){return a.getSafeText("sort.descending")},icon:"ui-grid-icon-sort-alt-down",action:function(a){a.stopPropagation(),c.sortColumn(a,b.DESC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.DESC)}},{title:function(){return a.getSafeText("sort.remove")},icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),c.unsortColumn()},shown:function(){return d.sortable(c)&&void 0!==c.col&&void 0!==c.col.sort&&void 0!==c.col.sort.direction&&null!==c.col.sort.direction&&!d.suppressRemoveSort(c)}},{title:function(){return a.getSafeText("column.hide")},icon:"ui-grid-icon-cancel",shown:function(){return d.hideable(c)},action:function(a){a.stopPropagation(),c.hideColumn()}}]},getColumnElementPosition:function(a,b,d){var e={};return e.left=d[0].offsetLeft,e.top=d[0].offsetTop,e.parentLeft=d[0].offsetParent.offsetLeft,e.offset=0,b.grid.options.offsetLeft&&(e.offset=b.grid.options.offsetLeft),e.height=c.elementHeight(d,!0),e.width=c.elementWidth(d,!0),e},repositionMenu:function(a,b,d,e,f){var g=e[0].querySelectorAll(".ui-grid-menu"),h=c.closestElm(f,".ui-grid-render-container"),i=h.getBoundingClientRect().left-a.grid.element[0].getBoundingClientRect().left,j=h.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,k=c.elementWidth(g,!0),l=b.lastMenuPaddingRight?b.lastMenuPaddingRight:a.lastMenuPaddingRight?a.lastMenuPaddingRight:10;if(0!==g.length){0!==g[0].querySelectorAll(".ui-grid-menu-mid").length&&(l=parseInt(c.getStyles(angular.element(g)[0]).paddingRight,10),a.lastMenuPaddingRight=l,b.lastMenuPaddingRight=l)}var m=d.left+i-j+d.parentLeft+d.width+l;m<d.offset+k&&(m=Math.max(d.left-j+d.parentLeft-l+k,d.offset+k)),e.css("left",m+"px"),e.css("top",d.top+d.height+"px")}};return d}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function(a,b,c,d,e){return{priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(f,g,h,i){function j(){function a(a,b,d,f){a.keyCode===c.keymap.TAB&&(b?a.preventDefault():d&&(a.preventDefault(),e[f].focus()))}var b,d=angular.element(g[0].querySelector(".ui-grid-menu-items"))[0],e=[];d&&(d.onkeydown=function(a){a.keyCode===c.keymap.ESC&&(a.preventDefault(),f.hideMenu())},b=d.querySelectorAll(".ui-grid-menu-item:not(.ng-hide)"),angular.forEach(b,function(a){null!==a.offsetParent&&this.push(a)},e),e.length&&(1===e.length?e[0].onkeydown=function(b){a(b,!0)}:(e[0].onkeydown=function(b){a(b,!1,b.shiftKey,e.length-1)},e[e.length-1].onkeydown=function(b){a(b,!1,!b.shiftKey,0)})))}d.initialize(f,i),f.defaultMenuItems=d.getDefaultMenuItems(f),f.menuItems=f.defaultMenuItems,d.setColMenuItemWatch(f),f.showMenu=function(a,b,c){f.col=a;var e=d.getColumnElementPosition(f,a,b);f.menuShown?(f.colElement=b,f.colElementPosition=e,f.hideThenShow=!0,f.$broadcast("hide-menu",{originalEvent:c})):(f.menuShown=!0,f.colElement=b,f.colElementPosition=e,f.$broadcast("show-menu",{originalEvent:c}))},f.hideMenu=function(a){f.menuShown=!1,a||f.$broadcast("hide-menu")},f.$on("menu-hidden",function(){var a=angular.element(g[0].querySelector(".ui-grid-menu-items"))[0];g[0].removeAttribute("style"),f.hideThenShow?(delete f.hideThenShow,f.$broadcast("show-menu"),f.menuShown=!0):(f.hideMenu(!0),f.col&&b.focus.bySelector(e,".ui-grid-header-cell."+f.col.getColClass()+" .ui-grid-column-menu-button",f.col.grid,!1)),a&&(a.onkeydown=null,angular.forEach(a.children,function(a){a.onkeydown=null}))}),f.$on("menu-shown",function(){a(function(){d.repositionMenu(f,f.col,f.colElementPosition,g,f.colElement),b.focus.bySelector(e,".ui-grid-menu-items .ui-grid-menu-item:not(.ng-hide)",!0),delete f.colElementPosition,delete f.columnElement,j()})}),f.sortColumn=function(a,b){a.stopPropagation(),f.grid.sortColumn(f.col,b,!0).then(function(){f.grid.refresh(),f.hideMenu()}).catch(angular.noop)},f.unsortColumn=function(){f.col.unsort(),f.grid.refresh(),f.hideMenu()};var k=function(){a(function(){var a,c=function(){return b.focus.byId("grid-menu",f.grid)};f.grid.columns.some(function(b,c){if(angular.equals(b,f.col))return a=c,!0});var d;if(f.grid.columns.some(function(b,c){if(!b.visible)return!1;if(c<a)d=b;else{if(c>a&&!d)return d=b,!0;if(c>a&&d)return!0}}),d){var g=d.getColClass();b.focus.bySelector(e,".ui-grid-header-cell."+g+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(a){if("canceled"!==a)return c()}).catch(angular.noop)}else c()})};f.hideColumn=function(){f.col.colDef.visible=!1,f.col.visible=!1,f.grid.queueGridRefresh(),f.hideMenu(),f.grid.api.core.notifyDataChange(c.dataChange.COLUMN),f.grid.api.core.raise.columnVisibilityChanged(f.col),k()}},controller:["$scope",function(a){var b=this;a.$watch("menuItems",function(a){b.menuItems=a})}]}}])}(),function(){angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function(a,b,c,d){return{compile:function(){return{pre:function(b,c){b.col.updateFilters=function(d){if(c.children().remove(),d){var e=b.col.filterHeaderTemplate;void 0===e&&""!==b.col.providedFilterHeaderTemplate?b.col.filterHeaderTemplatePromise&&b.col.filterHeaderTemplatePromise.then(function(){e=b.col.filterHeaderTemplate,c.append(a(e)(b))}):c.append(a(e)(b))}},b.$on("$destroy",function(){delete b.col.updateFilters})},post:function(a,b){a.aria=c.getSafeText("headerCell.aria"),a.removeFilter=function(a,c){a.term=null,d.focus.bySelector(b,".ui-grid-filter-input-"+c)}}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(a,b,c,d){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(){return{pre:function(a,b){var c=a.col.footerCellTemplate;void 0===c&&""!==a.col.providedFooterCellTemplate?a.col.footerCellTemplatePromise&&a.col.footerCellTemplatePromise.then(function(){c=a.col.footerCellTemplate,b.append(d(c)(a))}):b.append(d(c)(a))},post:function(a,b,d,e){a.grid=e.grid;var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(){var c=b;g&&(c.removeClass(g),g=null),g=angular.isFunction(a.col.footerCellClass)?a.col.footerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.footerCellClass,c.addClass(g)};a.col.footerCellClass&&h(),a.col.updateAggregationValue();var i=a.grid.registerDataChangeCallback(h,[c.dataChange.COLUMN]);a.grid.api.core.on.rowsRendered(a,a.col.updateAggregationValue),a.grid.api.core.on.rowsRendered(a,h),a.$on("$destroy",i)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,f){var g=f[0],h=f[1];a.grid=g.grid,a.colContainer=h.colContainer,h.footer=c;var i=a.grid.options.footerTemplate;d.getTemplate(i).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.append(f),h){var g=c[0].getElementsByClassName("ui-grid-footer-viewport")[0];g&&(h.footerViewport=g)}}).catch(angular.noop)},post:function(a,b,c,e){var f=e[0],g=e[1];f.grid;d.disableAnimations(b),g.footer=b;var h=b[0].getElementsByClassName("ui-grid-footer-viewport")[0];h&&(g.footerViewport=h)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil",function(a,b,c,d){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(){return{pre:function(a,c,e,f){a.grid=f.grid;var g=a.grid.options.gridFooterTemplate;d.getTemplate(g).then(function(d){var e=angular.element(d),f=b(e)(a);c.append(f)}).catch(angular.noop)}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function(a,b,c,d,e,f,g,h){var i=500,j=500;return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(b,c){var d=b.col.headerCellTemplate;void 0===d&&""!==b.col.providedHeaderCellTemplate?b.col.headerCellTemplatePromise&&b.col.headerCellTemplatePromise.then(function(){d=b.col.headerCellTemplate,c.append(a(d)(b))}):c.append(a(d)(b))},post:function(a,c,e,g){var k=g[0],l=g[1];a.i18n={headerCell:h.getSafeText("headerCell"),sort:h.getSafeText("sort")},a.isSortPriorityVisible=function(){return angular.isNumber(a.col.sort.priority)&&a.grid.columns.some(function(b,c){return angular.isNumber(b.sort.priority)&&b!==a.col})},a.getSortDirectionAriaLabel=function(){var b=a.col,c=b.sort.direction===f.ASC?a.i18n.sort.ascending:b.sort.direction===f.DESC?a.i18n.sort.descending:a.i18n.sort.none;return a.isSortPriorityVisible()&&(c=c+". "+a.i18n.headerCell.priority+" "+(b.sort.priority+1)),c},a.grid=k.grid,a.renderContainer=k.grid.renderContainers[l.containerId];var m=a.col.getColClass(!1);c.addClass(m),a.menuShown=!1,a.asc=f.ASC,a.desc=f.DESC;var n,o,p=angular.element(c[0].querySelectorAll(".ui-grid-cell-contents")),q=[];a.downFn=function(e){e.stopPropagation(),void 0!==e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),e.button&&0!==e.button||(o=e.pageX,a.mousedownStartTime=(new Date).getTime(),a.mousedownTimeout=b(function(){},i),a.mousedownTimeout.then(function(){a.colMenu&&k.columnMenuScope.showMenu(a.col,c,e)}).catch(angular.noop),k.fireEvent(f.events.COLUMN_HEADER_CLICK,{event:e,columnName:a.col.colDef.name}),a.offAllEvents(),"touchstart"===e.type?(d.on("touchend",a.upFn),d.on("touchmove",a.moveFn)):"mousedown"===e.type&&(d.on("mouseup",a.upFn),d.on("mousemove",a.moveFn)))},a.upFn=function(c){c.stopPropagation(),b.cancel(a.mousedownTimeout),a.offAllEvents(),a.onDownEvents(c.type),(new Date).getTime()-a.mousedownStartTime>i||a.sortable&&a.handleClick(c)},a.handleKeyDown=function(a){32===a.keyCode&&a.preventDefault()},a.moveFn=function(c){0!=c.pageX-o&&(b.cancel(a.mousedownTimeout),a.offAllEvents(),a.onDownEvents(c.type))},a.clickFn=function(b){b.stopPropagation(),p.off("click",a.clickFn)},a.offAllEvents=function(){p.off("touchstart",a.downFn),p.off("mousedown",a.downFn),d.off("touchend",a.upFn),d.off("mouseup",a.upFn),d.off("touchmove",a.moveFn),d.off("mousemove",a.moveFn),p.off("click",a.clickFn)},a.onDownEvents=function(c){switch(c){case"touchmove":case"touchend":p.on("click",a.clickFn),p.on("touchstart",a.downFn),b(function(){p.on("mousedown",a.downFn)},j);break;case"mousemove":case"mouseup":p.on("click",a.clickFn),p.on("mousedown",a.downFn),b(function(){p.on("touchstart",a.downFn)},j);break;default:p.on("click",a.clickFn),p.on("touchstart",a.downFn),p.on("mousedown",a.downFn)}};var r=function(){var b=c;n&&(b.removeClass(n),n=null),n=angular.isFunction(a.col.headerCellClass)?a.col.headerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.headerCellClass,b.addClass(n),a.$applyAsync(function(){var b=a.grid.renderContainers.right&&a.grid.renderContainers.right.visibleColumnCache.length?a.grid.renderContainers.right:a.grid.renderContainers.body;a.isLastCol=k.grid.options&&k.grid.options.enableGridMenu&&a.col===b.visibleColumnCache[b.visibleColumnCache.length-1]}),a.sortable=Boolean(a.col.enableSorting);var d=a.filterable;a.filterable=Boolean(k.grid.options.enableFiltering&&a.col.enableFiltering),
d!==a.filterable&&(void 0!==a.col.updateFilters&&a.col.updateFilters(a.filterable),a.filterable?(a.col.filters.forEach(function(b,c){q.push(a.$watch("col.filters["+c+"].term",function(a,b){a!==b&&(k.grid.api.core.raise.filterChanged(),k.grid.api.core.notifyDataChange(f.dataChange.COLUMN),k.grid.queueGridRefresh())}))}),a.$on("$destroy",function(){q.forEach(function(a){a()})})):q.forEach(function(a){a()})),a.colMenu=a.col.grid.options&&!1!==a.col.grid.options.enableColumnMenus&&a.col.colDef&&!1!==a.col.colDef.enableColumnMenu,a.offAllEvents(),(a.sortable||a.colMenu)&&(a.onDownEvents(),a.$on("$destroy",function(){a.offAllEvents()}))};r();var s=a.grid.registerDataChangeCallback(r,[f.dataChange.COLUMN]);a.$on("$destroy",s),a.handleClick=function(b){var c=!1;b.shiftKey&&(c=!0),k.grid.sortColumn(a.col,c).then(function(){k.columnMenuScope&&k.columnMenuScope.hideMenu(),k.grid.refresh()}).catch(angular.noop)},a.headerCellArrowKeyDown=function(b){32!==b.keyCode&&13!==b.keyCode||(b.preventDefault(),a.toggleMenu(b))},a.toggleMenu=function(b){b.stopPropagation(),k.columnMenuScope.menuShown&&k.columnMenuScope.col===a.col?k.columnMenuScope.hideMenu():k.columnMenuScope.showMenu(a.col,c)}}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(a,b,c,d,e,f){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(a,c,e,g){function h(){k.header=k.colContainer.header=c;var a=c[0].getElementsByClassName("ui-grid-header-canvas");a.length>0?k.headerCanvas=k.colContainer.headerCanvas=a[0]:k.headerCanvas=null}function i(){if(!j.grid.isScrollingHorizontally){var a=d.normalizeScrollLeft(k.headerViewport,j.grid),b=k.colContainer.scrollHorizontal(a),c=new f(j.grid,null,k.colContainer,f.Sources.ViewPortScroll);c.newScrollLeft=a,b>-1&&(c.x={percentage:b}),j.grid.scrollContainers(null,c)}}var j=g[0],k=g[1];a.grid=j.grid,a.colContainer=k.colContainer,h();var l;l=a.grid.options.showHeader?a.grid.options.headerTemplate?a.grid.options.headerTemplate:"ui-grid/ui-grid-header":"ui-grid/ui-grid-no-header",d.getTemplate(l).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.replaceWith(f),c=f,h(),k){var g=c[0].getElementsByClassName("ui-grid-header-viewport")[0];g&&(k.headerViewport=g,angular.element(g).on("scroll",i),a.$on("$destroy",function(){angular.element(g).off("scroll",i)}))}a.grid.queueRefresh()}).catch(angular.noop)},post:function(a,b,c,e){function f(){var a=h.colContainer.visibleColumnCache,b="",c=0;return a.forEach(function(a){b+=a.getColClassDefinition(),c+=a.drawnWidth}),h.colContainer.canvasWidth=c,b}var g=e[0],h=e[1];g.grid,d.disableAnimations(b),h.header=b;var i=b[0].getElementsByClassName("ui-grid-header-viewport")[0];i&&(h.headerViewport=i),g&&g.grid.registerStyleComputation({priority:15,func:f})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(a,b,c){var d={initialize:function(a,b){b.gridMenuScope=a,a.grid=b,a.registeredMenuItems=[],a.$on("$destroy",function(){a.grid&&a.grid.gridMenuScope&&(a.grid.gridMenuScope=null),a.grid&&(a.grid=null),a.registeredMenuItems&&(a.registeredMenuItems=null)}),a.registeredMenuItems=[],b.api.registerMethod("core","addToGridMenu",d.addToGridMenu),b.api.registerMethod("core","removeFromGridMenu",d.removeFromGridMenu)},addToGridMenu:function(b,c){angular.isArray(c)?b.gridMenuScope?(b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems?b.gridMenuScope.registeredMenuItems:[],b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems.concat(c)):a.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):a.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(b,c){var d=-1;b&&b.gridMenuScope&&b.gridMenuScope.registeredMenuItems.forEach(function(b,e){b.id===c&&(d>-1?a.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):d=e)}),d>-1&&b.gridMenuScope.registeredMenuItems.splice(d,1)},getMenuItems:function(c){var e=[];c.grid.options.gridMenuCustomItems&&(angular.isArray(c.grid.options.gridMenuCustomItems)?e=e.concat(c.grid.options.gridMenuCustomItems):a.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var f=[{title:b.getSafeText("gridMenu.clearAllFilters"),action:function(a){c.grid.clearAllFilters()},shown:function(){return c.grid.options.enableFiltering},order:100}];return e=e.concat(f),e=e.concat(c.registeredMenuItems),!1!==c.grid.options.gridMenuShowHideColumns&&(e=e.concat(d.showHideColumns(c))),e.sort(function(a,b){return a.order-b.order}),e},showHideColumns:function(a){function c(a){return!0===a.visible||void 0===a.visible}function e(a){return c(a)?"ui-grid-icon-ok":"ui-grid-icon-cancel"}var f=[];return a.grid.options.columnDefs&&0!==a.grid.options.columnDefs.length&&0!==a.grid.columns.length?(f.push({title:b.getSafeText("gridMenu.columns"),order:300,templateUrl:"ui-grid/ui-grid-menu-header-item"}),a.grid.options.gridMenuTitleFilter=a.grid.options.gridMenuTitleFilter?a.grid.options.gridMenuTitleFilter:function(a){return a},a.grid.options.columnDefs.forEach(function(b,c){if(!1!==b.enableHiding){var g={icon:e(b),action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol),a.target&&a.target.firstChild&&("I"===angular.element(a.target)[0].nodeName?a.target.className=e(this.context.gridCol.colDef):a.target.firstChild.className=e(this.context.gridCol.colDef))},shown:function(){return!1!==this.context.gridCol.colDef.enableHiding},context:{gridCol:a.grid.getColumn(b.name||b.field)},leaveOpen:!0,order:301+c};d.setMenuItemTitle(g,b,a.grid),f.push(g)}}),f):f},setMenuItemTitle:function(b,c,d){var e=d.options.gridMenuTitleFilter(c.displayName||a.readableColumnName(c.name)||c.field);"string"==typeof e?b.title=e:e.then?(b.title="",e.then(function(a){b.title=a},function(a){b.title=a}).catch(angular.noop)):(a.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),b.title="badconfig")},toggleColumnVisibility:function(a){a.colDef.visible=!(!0===a.colDef.visible||void 0===a.colDef.visible),a.grid.refresh(),a.grid.api.core.notifyDataChange(c.dataChange.COLUMN),a.grid.api.core.raise.columnVisibilityChanged(a)}};return d}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(a,b,c,d){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(b,e,f,g){var h=g[0];b.i18n={aria:d.getSafeText("gridMenu.aria")},c.initialize(b,h.grid),b.shown=!1,b.toggleMenu=function(){b.shown?(b.$broadcast("hide-menu"),b.shown=!1):(b.menuItems=c.getMenuItems(b),b.$broadcast("show-menu"),b.shown=!0)},b.$on("menu-hidden",function(){b.shown=!1,a.focus.bySelector(e,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function(a,b,c,d,e,f,g){return{priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(d,h,i,j){if(d.dynamicStyles="",j&&j.grid&&j.grid.options&&j.grid.options.gridMenuTemplate){var k=j.grid.options.gridMenuTemplate;e.getTemplate(k).then(function(b){var c=angular.element(b),e=a(c)(d);h.replaceWith(e)}).catch(angular.noop)}var l=function(a){var b=a-j.grid.headerHeight-20;d.dynamicStyles=[".grid"+j.grid.id+" .ui-grid-menu-mid {","max-height: "+b+"px;","}"].join(" ")};j&&(l(j.grid.gridHeight),j.grid.api.core.on.gridDimensionChanged(d,function(a,b,c,d){l(c)})),d.i18n={close:g.getSafeText("columnMenu.close")},d.showMenu=function(a,c){d.shown?d.shownMid||(d.shownMid=!0,d.$emit("menu-shown")):(d.shown=!0,b(function(){d.shownMid=!0,d.$emit("menu-shown")}));var e="click";c&&c.originalEvent&&c.originalEvent.type&&"touchstart"===c.originalEvent.type&&(e=c.originalEvent.type),angular.element(document).off("click touchstart",m),h.off("keyup",n),h.off("keydown",o),b(function(){angular.element(document).on(e,m),h.on("keyup",n),h.on("keydown",o)})},d.hideMenu=function(a){d.shown&&(d.shownMid=!1,b(function(){d.shownMid||(d.shown=!1,d.$emit("menu-hidden"))},40)),angular.element(document).off("click touchstart",m),h.off("keyup",n),h.off("keydown",o)},d.$on("hide-menu",function(a,b){d.hideMenu(a,b)}),d.$on("show-menu",function(a,b){d.showMenu(a,b)});var m=function(){d.shown&&d.$apply(function(){d.hideMenu()})},n=function(a){27===a.keyCode&&d.hideMenu()},o=function(a){var b=function(b){return b.focus(),a.preventDefault(),!1};if(9===a.keyCode){var c,d,e=h[0].querySelectorAll("button:not(.ng-hide)");e.length>0&&(c=e[0],d=e[e.length-1],a.target!==d||a.shiftKey?a.target===c&&a.shiftKey&&b(d):b(c))}};void 0!==d.autoHide&&void 0!==d.autoHide||(d.autoHide=!0),d.autoHide&&angular.element(c).on("resize",m),d.$on("$destroy",function(){angular.element(c).off("resize",m),angular.element(document).off("click touchstart",m),h.off("keyup",n),h.off("keydown",o)}),j&&d.$on("$destroy",j.grid.api.core.on.scrollBegin(d,m)),d.$on("$destroy",d.$on(f.events.ITEM_DRAGGING,m))}}}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(a,b,c){return{priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function(c,d){c.templateUrl&&a.getTemplate(c.templateUrl).then(function(a){var e=angular.element(a),f=b(e)(c);d.replaceWith(f)}).catch(angular.noop)},post:function(b,d,e,f){var g=f[0];void 0!==b.shown&&null!==b.shown||(b.shown=function(){return!0}),b.itemShown=function(){var a={};return b.context&&(a.context=b.context),void 0!==g&&g&&(a.grid=g.grid),b.shown.call(a)},b.itemAction=function(c,d){if(c.stopPropagation(),"function"==typeof b.action){var e={};if(b.context&&(e.context=b.context),void 0!==g&&g&&(e.grid=g.grid),b.action.call(e,c,d),b.leaveOpen){var f=c.target.parentElement;"I"===angular.element(c.target)[0].nodeName&&(f=f.parentElement),a.focus.bySelector(f,"button[type=button]",!0)}else b.$emit("hide-menu")}},b.label=function(){var a=b.name;return"function"==typeof b.name&&(a=b.name.call()),a},b.i18n=c.get()}}}}}])}(),function(){var a=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(b){var c="uiGridOneBind",d=(b.aria?c+"Aria":c)+(b.directiveName?b.directiveName:b.tag);a.directive(d,["gridUtil",function(a){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(c,e,f,g){var h=function(b){var e;if(c.grid)e=c.grid;else if(c.col&&c.col.grid)e=c.col.grid;else if(!g.some(function(a){if(a&&a.grid)return e=a.grid,!0}))throw a.logError("["+d+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+b),new Error("No valid grid could be found");if(e){new RegExp(e.id.toString()).test(b)||(b=e.id.toString()+"-"+b)}return b},i=c.$watch(f[d],function(a){if(a){if(b.appendGridId){var c=null;angular.forEach(a.split(" "),function(a){c=(c?c+" ":"")+h(a)}),a=c}switch(b.method){case"attr":b.aria?e[b.method]("aria-"+b.tag.toLowerCase(),a):e[b.method](b.tag.toLowerCase(),a);break;case"addClass":if(angular.isObject(a)&&!angular.isArray(a)){var d=[],f=!1;if(angular.forEach(a,function(a,b){null!==a&&void 0!==a&&(f=!0,a&&d.push(b))}),!f)return;a=d}if(!a)return;e.addClass(angular.isArray(a)?a.join(" "):a);break;default:e[b.method](a)}i()}},!0)}}}])})}(),function(){var a=angular.module("ui.grid");a.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(a,b,c,d,e){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(a,b,c,d){var e,f,g=d[0],h=d[1],i=a.grid=g.grid;if(!a.rowContainerName)throw new Error("No row render container name specified");if(!a.colContainerName)throw new Error("No column render container name specified");if(!i.renderContainers[a.rowContainerName])throw new Error('Row render container "'+a.rowContainerName+'" is not registered.');if(!i.renderContainers[a.colContainerName])throw new Error('Column render container "'+a.colContainerName+'" is not registered.');e=a.rowContainer=i.renderContainers[a.rowContainerName],f=a.colContainer=i.renderContainers[a.colContainerName],h.containerId=a.containerId,h.rowContainer=e,h.colContainer=f},post:function(a,b,c,f){function g(){var b="",c=l.canvasWidth,d=l.getViewportWidth(),e=k.getCanvasHeight(),f=k.getViewportHeight();l.needsHScrollbarPlaceholder()&&(f-=j.scrollbarHeight);var g,i;if(g=i=l.getHeaderViewportWidth(),b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-canvas { width: "+c+"px; height: "+e+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { width: "+(c+j.scrollbarWidth)+"px; }",o.explicitHeaderCanvasHeight){var m=document.querySelector(".grid"+h.grid.id+" .ui-grid-render-container-body .ui-grid-header-canvas");m&&(o.explicitHeaderCanvasHeight=m.offsetHeight),b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: "+o.explicitHeaderCanvasHeight+"px; }"}else b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: inherit; }";return b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-viewport { width: "+d+"px; height: "+f+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-viewport { width: "+g+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-canvas { width: "+(c+j.scrollbarWidth)+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-viewport { width: "+i+"px; }"}var h=f[0],i=f[1],j=h.grid,k=i.rowContainer,l=i.colContainer,m=null,n=null,o=j.renderContainers[a.containerId];b.addClass("ui-grid-render-container-"+a.containerId),d.on.mousewheel(b,function(a){var b=new e(j,k,l,e.Sources.RenderContainerMouseWheel);if(0!==a.deltaY){var c=-1*a.deltaY*a.deltaFactor;m=i.viewport[0].scrollTop,b.verticalScrollLength=k.getVerticalScrollLength();var f=(m+c)/b.verticalScrollLength;f>=1&&m<b.verticalScrollLength&&(i.viewport[0].scrollTop=b.verticalScrollLength),f<0?f=0:f>1&&(f=1),b.y={percentage:f,pixels:c}}if(0!==a.deltaX){var g=a.deltaX*a.deltaFactor;n=d.normalizeScrollLeft(i.viewport,j),b.horizontalScrollLength=l.getCanvasWidth()-l.getViewportWidth();var h=(n+g)/b.horizontalScrollLength;h<0?h=0:h>1&&(h=1),b.x={percentage:h,pixels:g}}0!==a.deltaY&&(b.atTop(m)||b.atBottom(m))||0!==a.deltaX&&(b.atLeft(n)||b.atRight(n))||(a.preventDefault(),a.stopPropagation(),b.fireThrottledScrollingEvent("",b))}),b.bind("$destroy",function(){b.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(a){b.unbind(a)})}),h.grid.registerStyleComputation({priority:6,func:g})}}}}}]),a.controller("uiGridRenderContainer",["$scope","gridUtil",function(a,b){}])}(),function(){angular.module("ui.grid").directive("uiGridRow",function(){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(a,b,c,d){function e(){a.row.getRowTemplateFn.then(function(c){var d=a.$new();c(d,function(a,c){h&&(h.remove(),i.$destroy()),b.empty().append(a),h=a,i=d})}).catch(angular.noop)}var f=d[0],g=d[1];a.grid=f.grid,a.colContainer=g.colContainer;var h,i;e(),a.$watch("row.getRowTemplateFn",function(a,b){a!==b&&e()})},post:function(a,b){a.row.element=b}}}}})}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(a,b){return{link:function(a,c){var d=b(c.text(),!0);d&&a.$watch(d,function(a){c.text(a)})}}}])}(),function(){angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent",function(a,b){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(c,d,e,f){function g(){var e=d[0].scrollTop,f=a.normalizeScrollLeft(d,p),g=n.scrollVertical(e),h=o.scrollHorizontal(f),i=new b(p,n,o,b.Sources.ViewPortScroll);i.newScrollLeft=f,i.newScrollTop=e,h>-1&&(i.x={percentage:h}),g>-1&&(i.y={percentage:g}),p.scrollContainers(c.$parent.containerId,i)}function h(a){m.prevScrollArgs=a,d[0].scrollTop=a.getNewScrollTop(n,m.viewport)}function i(b){m.prevScrollArgs=b;var c=b.getNewScrollLeft(o,m.viewport);d[0].scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p)}function j(b){var c=b.getNewScrollLeft(o,m.viewport);m.headerViewport&&(m.headerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}function k(b){var c=b.getNewScrollLeft(o,m.viewport);m.footerViewport&&(m.footerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}var l=f[0],m=f[1];c.containerCtrl=m;var n=m.rowContainer,o=m.colContainer,p=l.grid;c.grid=l.grid,c.rowContainer=m.rowContainer,c.colContainer=m.colContainer,m.viewport=d,p&&p.options&&p.options.customScroller?p.options.customScroller(d,g):d.on("scroll",g);c.$parent.bindScrollVertical&&p.addVerticalScrollSync(c.$parent.containerId,h),c.$parent.bindScrollHorizontal&&(p.addHorizontalScrollSync(c.$parent.containerId,i),p.addHorizontalScrollSync(c.$parent.containerId+"header",j),p.addHorizontalScrollSync(c.$parent.containerId+"footer",k)),c.$on("$destroy",function(){d.off()})},controller:["$scope",function(a){this.rowStyle=function(){var b=a.rowContainer,c=a.colContainer,d={};if(0!==b.currentTopRow){var e="translateY("+b.currentTopRow*b.grid.options.rowHeight+"px)";d.transform=e,d["-webkit-transform"]=e,d["-ms-transform"]=e}return 0!==c.currentFirstColumn&&(c.grid.isRTL()?d["margin-right"]=c.columnOffset+"px":d["margin-left"]=c.columnOffset+"px"),d}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(a,b,c){a.$watch(c.uiGridVisible,function(a){b[a?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){function a(a,b,c){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(d,e,f,g){function h(){e[0].offsetWidth<=0&&p<o?(setTimeout(h,n),p++):d.$applyAsync(j)}function i(){var b,c;angular.element(a).on("resize",l),e.on("$destroy",function(){angular.element(a).off("resize",l),b(),c()}),b=d.$watch(function(){return m.hasLeftContainer()},function(a,b){a!==b&&m.refreshCanvas(!0)}),c=d.$watch(function(){return m.hasRightContainer()},function(a,b){a!==b&&m.refreshCanvas(!0)})}function j(){m.gridWidth=d.gridWidth=b.elementWidth(e),m.canvasWidth=g.grid.gridWidth,m.gridHeight=d.gridHeight=b.elementHeight(e),m.gridHeight-m.scrollbarHeight<=m.options.rowHeight&&m.options.enableMinHeightCheck&&k(),m.refreshCanvas(!0)}function k(){var a=m.options.minRowsToShow*m.options.rowHeight,f=m.options.showHeader?m.options.headerRowHeight:0,g=m.calcFooterHeight(),h=0;m.options.enableHorizontalScrollbar===c.scrollbars.ALWAYS&&(h=b.getScrollbarWidth());var i=0;if(angular.forEach(m.options.columnDefs,function(a){a.hasOwnProperty("filter")?i<1&&(i=1):a.hasOwnProperty("filters")&&i<a.filters.length&&(i=a.filters.length)}),m.options.enableFiltering&&!i){m.options.columnDefs.length&&m.options.columnDefs.every(function(a){return!1===a.enableFiltering})||(i=1)}var j=i*f,k=f+a+g+h+j;e.css("height",k+"px"),m.gridHeight=d.gridHeight=b.elementHeight(e)}function l(){m.gridWidth=d.gridWidth=b.elementWidth(e),m.gridHeight=d.gridHeight=b.elementHeight(e),m.refreshCanvas(!0)}var m=g.grid;g.scrollbars=[],m.element=e;var n=100,o=20,p=0;i(),j(),m.renderingComplete(),h()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","gridClassFactory","$parse","$compile",function(a,b,c,d,e,f,g,h,i){function j(a){return a?a.length:0}function k(b,c){b&&b!==c&&(m.grid.options.columnDefs=a.uiGrid.columnDefs,m.grid.callDataChangeCallbacks(f.dataChange.COLUMN,{orderByColumnDefs:!0,preCompileCellTemplates:!0}))}function l(b){var d=[];if(m.grid.options.fastWatch&&(b=angular.isString(a.uiGrid.data)?m.grid.appScope.$eval(a.uiGrid.data):a.uiGrid.data),o=b,b){var g=m.grid.columns.length>(m.grid.rowHeaderColumns?m.grid.rowHeaderColumns.length:0);!g&&!c.uiGridColumns&&0===m.grid.options.columnDefs.length&&b.length>0&&m.grid.buildColumnDefsFromData(b),!g&&(m.grid.options.columnDefs.length>0||b.length>0)&&d.push(m.grid.buildColumns().then(function(){m.grid.preCompileCellTemplates()}).catch(angular.noop)),e.all(d).then(function(){m.grid.modifyRows(o).then(function(){m.grid.redrawInPlace(!0),a.$evalAsync(function(){m.grid.refreshCanvas(!0),m.grid.callDataChangeCallbacks(f.dataChange.ROW)})}).catch(angular.noop)}).catch(angular.noop)}}var m=this,n=[];m.grid=g.createGrid(a.uiGrid),m.grid.appScope=m.grid.appScope||a.$parent,b.addClass("grid"+m.grid.id),m.grid.rtl="rtl"===d.getStyles(b[0]).direction,a.grid=m.grid,c.uiGridColumns&&n.push(c.$observe("uiGridColumns",function(a){m.grid.options.columnDefs=angular.isString(a)?angular.fromJson(a):a,m.grid.buildColumns().then(function(){m.grid.preCompileCellTemplates(),m.grid.refreshCanvas(!0)}).catch(angular.noop)})),m.grid.options.fastWatch?(m.uiGrid=a.uiGrid,angular.isString(a.uiGrid.data)?(n.push(a.$parent.$watch(a.uiGrid.data,l)),n.push(a.$parent.$watch(function(){return m.grid.appScope[a.uiGrid.data]?m.grid.appScope[a.uiGrid.data].length:void 0},l))):(n.push(a.$parent.$watch(function(){return a.uiGrid.data},l)),n.push(a.$parent.$watch(function(){return j(a.uiGrid.data)},function(){l(a.uiGrid.data)}))),n.push(a.$parent.$watch(function(){return a.uiGrid.columnDefs},k)),n.push(a.$parent.$watch(function(){return j(a.uiGrid.columnDefs)},function(){k(a.uiGrid.columnDefs)}))):(angular.isString(a.uiGrid.data)?n.push(a.$parent.$watchCollection(a.uiGrid.data,l)):n.push(a.$parent.$watchCollection(function(){return a.uiGrid.data},l)),n.push(a.$parent.$watchCollection(function(){return a.uiGrid.columnDefs},k)));var o,p=a.$watch(function(){return m.grid.styleComputations},function(){m.grid.refreshCanvas(!0)});a.$on("$destroy",function(){n.forEach(function(a){a()}),p()}),m.fireEvent=function(b,c){c=c||{},angular.isUndefined(c.grid)&&(c.grid=m.grid),a.$broadcast(b,c)},m.innerCompile=function(b){i(b)(a)}}]),angular.module("ui.grid").directive("uiGrid",a),a.$inject=["$window","gridUtil","uiGridConstants"]}(),function(){angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(a){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(a,b,c,d){function e(){var a=this,b=0;a.visibleColumnCache.forEach(function(a){b+=a.drawnWidth});var c=a.getViewportAdjustment();return b+=c.width}function f(){if("left"===a.side||"right"===a.side){for(var b=h.renderContainers[a.side].visibleColumnCache,c=0,d=0;d<b.length;d++){var e=b[d];c+=e.drawnWidth||e.width||0}return c}}function g(){var c="";return"left"!==a.side&&"right"!==a.side||(i=f(),b.attr("style",null),c+=".grid"+h.id+" .ui-grid-pinned-container-"+a.side+", .grid"+h.id+" .ui-grid-pinned-container-"+a.side+" .ui-grid-render-container-"+a.side+" .ui-grid-viewport { width: "+i+"px; } "),c}var h=d.grid,i=0;b.addClass("ui-grid-pinned-container-"+a.side),"left"!==a.side&&"right"!==a.side||(h.renderContainers[a.side].getViewportWidth=e),h.renderContainers.body.registerViewportAdjuster(function(b){return i=f(),b.width-=i,b.side=a.side,b}),h.registerStyleComputation({priority:15,func:g})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,b){return a||b>0?b:null}function p(a,b){var c=a/b;return c<=1?c:1}function q(a,b,c){if(p(a,b)!==c)return{percentage:p(a,b)}}function r(a,b,c){var d=a/b;if((d=d>1?1:d)!==c)return{percentage:d}}function s(){}var t=function(a){function b(a){g.isScrollingVertically=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}function c(a){g.isScrollingHorizontally=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}var g=this;if(void 0===a||void 0===a.id||!a.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(a.id))throw new Error("Grid id '"+a.id+'" is invalid. It must follow CSS selector syntax rules.');g.id=a.id,delete a.id,g.options=f.initialize(a),g.appScope=g.options.appScopeProvider,g.headerHeight=g.options.headerRowHeight,g.footerHeight=g.calcFooterHeight(),g.columnFooterHeight=g.calcColumnFooterHeight(),g.rtl=!1,g.gridHeight=0,g.gridWidth=0,g.columnBuilders=[],g.rowBuilders=[],g.rowsProcessors=[],g.columnsProcessors=[],g.styleComputations=[],g.viewportAdjusters=[],g.rowHeaderColumns=[],g.dataChangeCallbacks={},g.verticalScrollSyncCallBackFns={},g.horizontalScrollSyncCallBackFns={},g.renderContainers={},g.renderContainers.body=new l("body",g),g.cellValueGetterCache={},g.getRowTemplateFn=null,g.rows=[],g.columns=[],g.isScrollingVertically=!1,g.isScrollingHorizontally=!1,g.scrollDirection=e.scrollDirection.NONE,g.disableScrolling=!1;var h=d.debounce(b,g.options.scrollDebounce),k=d.debounce(b,0),m=d.debounce(c,g.options.scrollDebounce),n=d.debounce(c,0);g.flagScrollingVertically=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingVertically=!0,0!==g.options.scrollDebounce&&a.withDelay?h(a):k(a)},g.flagScrollingHorizontally=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingHorizontally=!0,0!==g.options.scrollDebounce&&a.withDelay?m(a):n(a)},g.scrollbarHeight=0,g.scrollbarWidth=0,g.options.enableHorizontalScrollbar!==e.scrollbars.NEVER&&(g.scrollbarHeight=d.getScrollbarWidth()),g.options.enableVerticalScrollbar!==e.scrollbars.NEVER&&(g.scrollbarWidth=d.getScrollbarWidth()),g.api=new i(g),g.api.registerMethod("core","refresh",this.refresh),g.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),g.api.registerMethod("core","refreshRows",this.refreshRows),g.api.registerMethod("core","queueRefresh",this.queueRefresh),g.api.registerMethod("core","handleWindowResize",this.handleWindowResize),g.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),g.api.registerMethod("core","scrollToIfNecessary",function(a,b){return g.scrollToIfNecessary(a,b)}),g.api.registerMethod("core","scrollTo",function(a,b){return g.scrollTo(a,b)}),g.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),g.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),g.api.registerMethod("core","sortHandleNulls",j.handleNulls),g.api.registerEvent("core","sortChanged"),g.api.registerEvent("core","columnVisibilityChanged"),g.api.registerMethod("core","notifyDataChange",this.notifyDataChange),g.api.registerMethod("core","clearAllFilters",this.clearAllFilters),g.registerDataChangeCallback(g.columnRefreshCallback,[e.dataChange.COLUMN]),g.registerDataChangeCallback(g.processRowsCallback,[e.dataChange.EDIT]),g.registerDataChangeCallback(g.updateFooterHeightCallback,[e.dataChange.OPTIONS]),g.registerStyleComputation({priority:10,func:g.getFooterStyles})};t.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var a=0;return this.options.showGridFooter&&(a+=this.options.gridFooterHeight),a+=this.calcColumnFooterHeight()},t.prototype.calcColumnFooterHeight=function(){var a=0;return this.options.showColumnFooter&&(a+=this.options.columnFooterHeight),a},t.prototype.getFooterStyles=function(){var a=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return a+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},t.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},t.prototype.isRTL=function(){return this.rtl},t.prototype.registerColumnBuilder=function(a){this.columnBuilders.push(a)},t.prototype.buildColumnDefsFromData=function(a){this.options.columnDefs=d.getColumnsFromData(a,this.options.excludeProperties)},t.prototype.registerRowBuilder=function(a){this.rowBuilders.push(a)},t.prototype.registerDataChangeCallback=function(a,b,c){var f=this,g=d.nextUid();return b||(b=[e.dataChange.ALL]),Array.isArray(b)||d.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+b),this.dataChangeCallbacks[g]={callback:a,types:b,_this:c},function(){delete f.dataChangeCallbacks[g]}},t.prototype.callDataChangeCallbacks=function(a,b){angular.forEach(this.dataChangeCallbacks,function(c,d){-1===c.types.indexOf(e.dataChange.ALL)&&-1===c.types.indexOf(a)&&a!==e.dataChange.ALL||(c._this?c.callback.apply(c._this,this,b):c.callback(this,b))},this)},t.prototype.notifyDataChange=function(a){var b=e.dataChange;a===b.ALL||a===b.COLUMN||a===b.EDIT||a===b.ROW||a===b.OPTIONS?this.callDataChangeCallbacks(a):d.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+a)},t.prototype.columnRefreshCallback=function(a,b){a.buildColumns(b),a.queueGridRefresh()},t.prototype.processRowsCallback=function(a){a.queueGridRefresh()},t.prototype.updateFooterHeightCallback=function(a){a.footerHeight=a.calcFooterHeight(),a.columnFooterHeight=a.calcColumnFooterHeight()},t.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},t.prototype.getColDef=function(a){var b=this.options.columnDefs.filter(function(b){return b.name===a});return b.length>0?b[0]:null},t.prototype.assignTypes=function(){var a=this;a.options.columnDefs.forEach(function(b,c){if(!b.type){var e=new g(b,c,a),f=a.rows.length>0?a.rows[0]:null;b.type=f?d.guessType(a.getCellValue(f,e)):"string"}})},t.prototype.isRowHeaderColumn=function(a){return-1!==this.rowHeaderColumns.indexOf(a)},t.prototype.addRowHeaderColumn=function(a,b,c){var e=this;void 0===b&&(b=0);var f=new g(a,d.nextUid(),e);f.isRowHeader=!0,e.isRTL()?(e.createRightContainer(),f.renderContainer="right"):(e.createLeftContainer(),f.renderContainer="left"),e.columnBuilders[0](a,f,e.options).then(function(){f.enableFiltering=!1,f.enableSorting=!1,f.enableHiding=!1,f.headerPriority=b,e.rowHeaderColumns.push(f),e.rowHeaderColumns=e.rowHeaderColumns.sort(function(a,b){
return a.headerPriority-b.headerPriority}),c||e.buildColumns().then(function(){e.preCompileCellTemplates(),e.queueGridRefresh()}).catch(angular.noop)}).catch(angular.noop)},t.prototype.getOnlyDataColumns=function(){var a=this,b=[];return a.columns.forEach(function(c){-1===a.rowHeaderColumns.indexOf(c)&&b.push(c)}),b},t.prototype.buildColumns=function(b){var c={orderByColumnDefs:!1};angular.extend(c,b);var e,f=this,h=[],i=f.rowHeaderColumns.length;for(e=0;e<f.columns.length;e++)f.getColDef(f.columns[e].name)||(f.columns.splice(e,1),e--);for(var j=f.rowHeaderColumns.length-1;j>=0;j--)f.columns.unshift(f.rowHeaderColumns[j]);if(f.options.columnDefs.forEach(function(a,b){f.preprocessColDef(a);var c=f.getColumn(a.name);c?c.updateColumnDef(a,!1):(c=new g(a,d.nextUid(),f),f.columns.splice(b+i,0,c)),f.columnBuilders.forEach(function(b){h.push(b.call(f,a,c,f.options))})}),c.orderByColumnDefs){var k=f.columns.slice(0),l=Math.min(f.options.columnDefs.length,f.columns.length);for(e=0;e<l;e++)f.columns[e+i].name!==f.options.columnDefs[e].name?k[e+i]=f.getColumn(f.options.columnDefs[e].name):k[e+i]=f.columns[e+i];f.columns.length=0,Array.prototype.splice.apply(f.columns,[0,0].concat(k))}return a.all(h).then(function(){f.rows.length>0&&f.assignTypes(),c.preCompileCellTemplates&&f.preCompileCellTemplates()}).catch(angular.noop)},t.prototype.preCompileCellTemplate=function(a){var c=this,d=a.cellTemplate.replace(e.MODEL_COL_FIELD,c.getQualifiedColField(a));d=d.replace(e.COL_FIELD,"grid.getCellValue(row, col)"),a.compiledElementFn=b(d),a.compiledElementFnDefer&&a.compiledElementFnDefer.resolve(a.compiledElementFn)},t.prototype.preCompileCellTemplates=function(){var a=this;a.columns.forEach(function(b){b.cellTemplate?a.preCompileCellTemplate(b):b.cellTemplatePromise&&b.cellTemplatePromise.then(function(){a.preCompileCellTemplate(b)}).catch(angular.noop)})},t.prototype.getQualifiedColField=function(a){var b="row.entity";return a.field===e.ENTITY_BINDING?b:d.preEval(b+"."+a.field)},t.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new l("left",this,{disableColumnOffset:!0}))},t.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new l("right",this,{disableColumnOffset:!0}))},t.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},t.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},t.prototype.preprocessColDef=function(a){var b=this;if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===a.name&&void 0!==a.field){for(var c=a.field,d=2;b.getColumn(c);)c=a.field+d.toString(),d++;a.name=c}},t.prototype.newInN=function(a,b,c,d){for(var e=this,f=[],g=0;g<b.length;g++){for(var h=d?b[g][d]:b[g],i=!1,j=0;j<a.length;j++){var k=c?a[j][c]:a[j];if(e.options.rowEquality(h,k)){i=!0;break}}i||f.push(h)}return f},t.prototype.getRow=function(a,b){var c=this;b=void 0===b?c.rows:b;var d=b.filter(function(b){return c.options.rowEquality(b.entity,a)});return d.length>0?d[0]:null},t.prototype.modifyRows=function(b){var c=this,d=c.rows.slice(0),e=c.rowHashMap||c.createRowHashMap(),f=!0;c.rowHashMap=c.createRowHashMap(),c.rows.length=0,b.forEach(function(a,b){var g,i;i=c.options.enableRowHashing?e.get(a):c.getRow(a,d),i&&(g=i,g.entity=a),g||(g=c.processRowBuilders(new h(a,b,c))),c.rows.push(g),c.rowHashMap.put(a,g),g.isSelected||(f=!1)}),c.selection&&c.rows.length&&(c.selection.selectAll=f),c.assignTypes();var g=a.when(c.processRowsProcessors(c.rows)).then(function(a){return c.setVisibleRows(a)}).catch(angular.noop),i=a.when(c.processColumnsProcessors(c.columns)).then(function(a){return c.setVisibleColumns(a)}).catch(angular.noop);return a.all([g,i])},t.prototype.addRows=function(a){for(var b=this,c=b.rows.length,d=0;d<a.length;d++){var e=b.processRowBuilders(new h(a[d],d+c,b));if(b.options.enableRowHashing){var f=b.rowHashMap.get(e.entity);f&&(f.row=e)}b.rows.push(e)}},t.prototype.processRowBuilders=function(a){var b=this;return b.rowBuilders.forEach(function(c){c.call(b,a,b.options)}),a},t.prototype.registerStyleComputation=function(a){this.styleComputations.push(a)},t.prototype.registerRowsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.rowsProcessors.push({processor:a,priority:b}),this.rowsProcessors.sort(function(a,b){return a.priority-b.priority})},t.prototype.removeRowsProcessor=function(a){var b=-1;this.rowsProcessors.forEach(function(c,d){c.processor===a&&(b=d)}),-1!==b&&this.rowsProcessors.splice(b,1)},t.prototype.processRowsProcessors=function(b){function c(b,e){var g=d.rowsProcessors[b].processor;return a.when(g.call(d,e,d.columns)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";if(++b<=d.rowsProcessors.length-1)return c(b,a);f.resolve(a)}).catch(function(a){throw a})}var d=this,e=b.slice(0);if(0===d.rowsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},t.prototype.setVisibleRows=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.canvasHeightShouldUpdate=!0,void 0===d.visibleRowCache?d.visibleRowCache=[]:d.visibleRowCache.length=0}for(var e=0;e<a.length;e++){var f=a[e],g=void 0!==f.renderContainer&&f.renderContainer?f.renderContainer:"body";f.visible&&b.renderContainers[g].visibleRowCache.push(f)}b.api.core.raise.rowsVisibleChanged(this.api),b.api.core.raise.rowsRendered(this.api)},t.prototype.registerColumnsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.columnsProcessors.push({processor:a,priority:b}),this.columnsProcessors.sort(function(a,b){return a.priority-b.priority})},t.prototype.removeColumnsProcessor=function(a){var b=this.columnsProcessors.indexOf(a);void 0!==b&&void 0!==b&&this.columnsProcessors.splice(b,1)},t.prototype.processColumnsProcessors=function(b){function c(b,g){var h=d.columnsProcessors[b].processor;return a.when(h.call(d,g,d.rows)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";if(++b<=d.columnsProcessors.length-1)return c(b,e);f.resolve(e)}).catch(angular.noop)}var d=this,e=b.slice(0);if(0===d.columnsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},t.prototype.setVisibleColumns=function(a){var b=this;for(var c in b.renderContainers){b.renderContainers[c].visibleColumnCache.length=0}for(var d=0;d<a.length;d++){var e=a[d];e.visible&&(void 0!==e.renderContainer&&e.renderContainer?b.renderContainers[e.renderContainer].visibleColumnCache.push(e):b.renderContainers.body.visibleColumnCache.push(e))}},t.prototype.handleWindowResize=function(a){var b=this;return b.gridWidth=d.elementWidth(b.element),b.gridHeight=d.elementHeight(b.element),b.queueRefresh()},t.prototype.queueRefresh=function(){var a=this;return a.refreshCanceller&&m.cancel(a.refreshCanceller),a.refreshCanceller=m(function(){a.refreshCanvas(!0)}),a.refreshCanceller.then(function(){a.refreshCanceller=null}).catch(angular.noop),a.refreshCanceller},t.prototype.queueGridRefresh=function(){var a=this;return a.gridRefreshCanceller&&m.cancel(a.gridRefreshCanceller),a.gridRefreshCanceller=m(function(){a.refresh(!0)}),a.gridRefreshCanceller.then(function(){a.gridRefreshCanceller=null}).catch(angular.noop),a.gridRefreshCanceller},t.prototype.updateCanvasHeight=function(){var a=this;for(var b in a.renderContainers)if(a.renderContainers.hasOwnProperty(b)){var c=a.renderContainers[b];c.canvasHeightShouldUpdate=!0}},t.prototype.buildStyles=function(){var a=this;a.customStyles="",a.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(b){var c=b.func.call(a);angular.isString(c)&&(a.customStyles+="\n"+c)})},t.prototype.minColumnsToRender=function(){var a=this,b=this.getViewportWidth(),c=0,d=0;return a.columns.forEach(function(e,f){if(d<b)d+=e.drawnWidth,c++;else{for(var g=0,h=f;h>=f-c;h--)g+=a.columns[h].drawnWidth;g<b&&c++}}),c},t.prototype.getBodyHeight=function(){return this.getViewportHeight()},t.prototype.getViewportHeight=function(){var a=this,b=this.gridHeight-this.headerHeight-this.footerHeight;return b+=a.getViewportAdjustment().height},t.prototype.getViewportWidth=function(){var a=this,b=this.gridWidth;return b+=a.getViewportAdjustment().width},t.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},t.prototype.addVerticalScrollSync=function(a,b){this.verticalScrollSyncCallBackFns[a]=b},t.prototype.addHorizontalScrollSync=function(a,b){this.horizontalScrollSyncCallBackFns[a]=b},t.prototype.scrollContainers=function(a,b){if(b.y){var c=["body","left","right"];this.flagScrollingVertically(b),"body"===a?c=["left","right"]:"left"===a?c=["body","right"]:"right"===a&&(c=["body","left"]);for(var d=0;d<c.length;d++){var e=c[d];this.verticalScrollSyncCallBackFns[e]&&this.verticalScrollSyncCallBackFns[e](b)}}if(b.x){var f=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(b),"body"===a&&(f=["bodyheader","bodyfooter"]);for(var g=0;g<f.length;g++){var h=f[g];this.horizontalScrollSyncCallBackFns[h]&&this.horizontalScrollSyncCallBackFns[h](b)}}},t.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},t.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);void 0!==b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},t.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},t.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},t.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},t.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},t.prototype.searchRows=function(a){return k.search(this,a,this.columns)},t.prototype.sortByColumn=function(a){return j.sort(this,a,this.columns)},t.prototype.getCellValue=function(a,b){return void 0!==a.entity["$$"+b.uid]?a.entity["$$"+b.uid].rendered:this.options.flatEntityAccess&&void 0!==b.field?a.entity[b.field]:(b.cellValueGetterCache||(b.cellValueGetterCache=c(a.getEntityQualifiedColField(b))),b.cellValueGetterCache(a))},t.prototype.getCellDisplayValue=function(a,b){if(!b.cellDisplayGetterCache){var d=b.cellFilter?" | "+b.cellFilter:"";if(void 0!==a.entity["$$"+b.uid])b.cellDisplayGetterCache=c(a.entity["$$"+b.uid].rendered+d);else if(this.options.flatEntityAccess&&void 0!==b.field){var e=b.field.replace(/(')|(\\)/g,"\\$&");b.cellDisplayGetterCache=c("entity['"+e+"']"+d)}else b.cellDisplayGetterCache=c(a.getEntityQualifiedColField(b)+d)}var f=angular.extend({},a,{col:b});return b.cellDisplayGetterCache(f)},t.prototype.getNextColumnSortPriority=function(){var a=this,b=0;return a.columns.forEach(function(a){a.sort&&void 0!==a.sort.priority&&a.sort.priority>=b&&(b=a.sort.priority+1)}),b},t.prototype.resetColumnSorting=function(a){this.columns.forEach(function(b){b===a||b.suppressRemoveSort||(b.sort={})})},t.prototype.getColumnSorting=function(){var a,b=this,c=[];return a=b.columns.slice(0),a.sort(j.prioritySort).forEach(function(a){a.sort&&void 0!==a.sort.direction&&a.sort.direction&&(a.sort.direction===e.ASC||a.sort.direction===e.DESC)&&c.push(a)}),c},t.prototype.sortColumn=function(b,c,d){var e=this,f=null;if(void 0===b||!b)throw new Error("No column parameter provided");if("boolean"==typeof c?d=c:f=c,d?void 0===b.sort.priority&&(b.sort.priority=e.getNextColumnSortPriority()):(e.resetColumnSorting(b),b.sort.priority=void 0,b.sort.priority=e.getNextColumnSortPriority()),f)b.sort.direction=f;else{var g=b.sortDirectionCycle.indexOf(b.sort.direction?b.sort.direction:null);g=(g+1)%b.sortDirectionCycle.length,b.colDef&&b.suppressRemoveSort&&!b.sortDirectionCycle[g]&&(g=(g+1)%b.sortDirectionCycle.length),b.sortDirectionCycle[g]?b.sort.direction=b.sortDirectionCycle[g]:u(b,e)}return e.api.core.raise.sortChanged(e,e.getColumnSorting()),a.when(b)};var u=function(a,b){b.columns.forEach(function(b){b.sort&&void 0!==b.sort.priority&&b.sort.priority>a.sort.priority&&(b.sort.priority-=1)}),a.sort={}};return t.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},t.prototype.createRowHashMap=function(){var a=this,b=new s;return b.grid=a,b},t.prototype.refresh=function(b){var c=this,d=c.processRowsProcessors(c.rows).then(function(a){c.setVisibleRows(a)}).catch(angular.noop),e=c.processColumnsProcessors(c.columns).then(function(a){c.setVisibleColumns(a)}).catch(angular.noop);return a.all([d,e]).then(function(){c.refreshCanvas(!0),c.redrawInPlace(b)}).catch(angular.noop)},t.prototype.refreshRows=function(){var a=this;return a.processRowsProcessors(a.rows).then(function(b){a.setVisibleRows(b),a.redrawInPlace(),a.refreshCanvas(!0)}).catch(angular.noop)},t.prototype.refreshCanvas=function(b){var c=this,e=a.defer(),f=[];for(var g in c.renderContainers)if(c.renderContainers.hasOwnProperty(g)){var h=c.renderContainers[g];if(null===h.canvasWidth||isNaN(h.canvasWidth))continue;(h.header||h.headerCanvas)&&(h.explicitHeaderHeight=h.explicitHeaderHeight||null,h.explicitHeaderCanvasHeight=h.explicitHeaderCanvasHeight||null,f.push(h))}return b&&c.buildStyles(),m(f.length>0?function(){var a,g,h=!1,i=0,j=0,k=function(a,b){return a!==b&&(h=!0),b};for(a=0;a<f.length;a++)if(g=f[a],null!==g.canvasWidth&&!isNaN(g.canvasWidth)){if(g.header){var l=g.headerHeight=k(g.headerHeight,d.outerElementHeight(g.header)),m=d.getBorderSize(g.header,"top"),n=d.getBorderSize(g.header,"bottom"),o=parseInt(l-m-n,10);o=o<0?0:o,g.innerHeaderHeight=o,!g.explicitHeaderHeight&&o>i&&(i=o)}if(g.headerCanvas){var p=g.headerCanvasHeight=k(g.headerCanvasHeight,parseInt(d.outerElementHeight(g.headerCanvas),10));!g.explicitHeaderCanvasHeight&&p>j&&(j=p)}}for(a=0;a<f.length;a++)g=f[a],i>0&&void 0!==g.headerHeight&&null!==g.headerHeight&&(g.explicitHeaderHeight||g.headerHeight<i)&&(g.explicitHeaderHeight=k(g.explicitHeaderHeight,i)),j>0&&void 0!==g.headerCanvasHeight&&null!==g.headerCanvasHeight&&(g.explicitHeaderCanvasHeight||g.headerCanvasHeight<j)&&(g.explicitHeaderCanvasHeight=k(g.explicitHeaderCanvasHeight,j));b&&h&&c.buildStyles(),e.resolve()}:function(){e.resolve()}),e.promise},t.prototype.redrawInPlace=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c],e=o(a,d.prevScrollTop),f=o(a,d.prevScrollLeft),g=a||e>0?null:d.prevScrolltopPercentage,h=a||f>0?null:d.prevScrollleftPercentage;d.adjustRows(e,g),d.adjustColumns(f,h)}},t.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},t.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},t.prototype.scrollToIfNecessary=function(b,c){var d=this,e=new n(d,"uiGrid.scrollToIfNecessary"),f=d.renderContainers.body.visibleRowCache,g=d.renderContainers.body.visibleColumnCache,h=d.renderContainers.body.prevScrollTop+d.headerHeight;h=h<0?0:h;var i=d.renderContainers.body.prevScrollLeft,j=d.renderContainers.body.prevScrollTop+d.gridHeight-d.renderContainers.body.headerHeight-d.footerHeight-d.scrollbarHeight,k=d.renderContainers.body.prevScrollLeft+Math.ceil(d.renderContainers.body.getViewportWidth());if(null!==b){var l=f.indexOf(b),m=d.renderContainers.body.getCanvasHeight()-d.renderContainers.body.getViewportHeight(),o=l*d.options.rowHeight+d.headerHeight;o=o<0?0:o;var p;o<Math.floor(h)?(p=d.renderContainers.body.prevScrollTop-(h-o),c&&c.colDef&&c.colDef.enableCellEditOnFocus&&(p=p-d.footerHeight-d.scrollbarHeight),e.y=q(p,m,d.renderContainers.body.prevScrolltopPercentage)):o>Math.ceil(j)&&(p=o-j+d.renderContainers.body.prevScrollTop,e.y=q(p,m,d.renderContainers.body.prevScrolltopPercentage))}if(null!==c){for(var s=g.indexOf(c),t=d.renderContainers.body.getCanvasWidth()-d.renderContainers.body.getViewportWidth(),u=0,v=0;v<s;v++){u+=g[v].drawnWidth}u=u<0?0:u;var w=u+c.drawnWidth;w=w<0?0:w;var x;u<i?(x=d.renderContainers.body.prevScrollLeft-(i-u),e.x=r(x,t,d.renderContainers.body.prevScrollleftPercentage)):w>k&&(x=w-k+d.renderContainers.body.prevScrollLeft,e.x=r(x,t,d.renderContainers.body.prevScrollleftPercentage))}var y=a.defer();if(e.y||e.x){e.withDelay=!1,d.scrollContainers("",e);var z=d.api.core.on.scrollEnd(null,function(){y.resolve(e),z()})}else y.resolve();return y.promise},t.prototype.scrollTo=function(a,b){var c=null,d=null;return null!==a&&void 0!==a&&(c=this.getRow(a)),null!==b&&void 0!==b&&(d=this.getColumn(b.name?b.name:b.field)),this.scrollToIfNecessary(c,d)},t.prototype.clearAllFilters=function(a,b,c){if(void 0===a&&(a=!0),void 0===b&&(b=!1),void 0===c&&(c=!1),this.columns.forEach(function(a){a.filters.forEach(function(a){a.term=void 0,b&&(a.condition=void 0),c&&(a.flags=void 0)})}),a)return this.refreshRows()},s.prototype={put:function(a,b){this[this.grid.options.rowIdentity(a)]=b},get:function(a){return this[this.grid.options.rowIdentity(a)]},remove:function(a){var b=this[a=this.grid.options.rowIdentity(a)];return delete this[a],b}},t}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow",function(a,b,c,d,e){function f(a,c,d,e){return b.$on(a,function(a){var b=Array.prototype.slice.call(arguments);b.splice(0,1),c.apply(e||d.api,b)})}var g=function(a){this.grid=a,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",e.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",e.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged"),this.registerEvent("core","gridDimensionChanged")};return g.prototype.suppressEvents=function(a,b){var c=this,d=angular.isArray(a)?a:[a],e=c.listeners.filter(function(a){return d.some(function(b){return a.handler===b})});e.forEach(function(a){a.dereg()}),b(),e.forEach(function(a){a.dereg=f(a.eventId,a.handler,c.grid,a._this)})},g.prototype.registerEvent=function(a,d){var e=this;e[a]||(e[a]={});var g=e[a];g.on||(g.on={},g.raise={});var h=e.grid.id+a+d;g.raise[d]=function(){b.$emit.apply(b,[h].concat(Array.prototype.slice.call(arguments)))},g.on[d]=function(b,g,i){if(null!==b&&void 0===b.$on)return void c.logError("asked to listen on "+a+".on."+d+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var j=f(h,g,e.grid,i),k={handler:g,dereg:j,eventId:h,scope:b,_this:i};e.listeners.push(k);var l=function(){k.dereg();var a=e.listeners.indexOf(k);e.listeners.splice(a,1)};return b&&b.$on("$destroy",function(){l()}),l}},g.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},g.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={}),this[a][b]=c.createBoundedWrapper(e||this.grid,d)},g.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},g}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(a,b,c){function d(a,c,d){var e=this;e.grid=d,e.uid=c,e.updateColumnDef(a,!0),e.aggregationValue=void 0,e.updateAggregationValue=function(){if(!e.aggregationType)return void(e.aggregationValue=void 0);var a=0,c=e.grid.getVisibleRows(),d=function(){var a=[];return c.forEach(function(b){var c=e.grid.getCellValue(b,e),d=Number(c);isNaN(d)||a.push(d)}),a};angular.isFunction(e.aggregationType)?e.aggregationValue=e.aggregationType(c,e):e.aggregationType===b.aggregationTypes.count?e.aggregationValue=e.grid.getVisibleRowCount():e.aggregationType===b.aggregationTypes.sum?(d().forEach(function(b){a+=b}),e.aggregationValue=a):e.aggregationType===b.aggregationTypes.avg?(d().forEach(function(b){a+=b}),a/=d().length,e.aggregationValue=a):e.aggregationType===b.aggregationTypes.min?e.aggregationValue=Math.min.apply(null,d()):e.aggregationType===b.aggregationTypes.max?e.aggregationValue=Math.max.apply(null,d()):e.aggregationValue=""},this.getAggregationValue=function(){return e.aggregationValue}}function e(b){return void 0===b.displayName?a.readableColumnName(b.name):b.displayName}return d.prototype.hideColumn=function(){this.colDef.visible=!1},d.prototype.setPropertyOrDefault=function(a,b,c){var d=this;void 0!==a[b]&&a[b]?d[b]=a[b]:void 0!==d[b]?d[b]=d[b]:d[b]=c||{}},d.prototype.updateColumnDef=function(c,d){function f(a){return angular.isString(a)||angular.isNumber(a)}var g=this;if(g.colDef=c,void 0===c.name)throw new Error("colDef.name is required for column at index "+g.grid.options.columnDefs.indexOf(c));if(g.displayName=e(c),!angular.isNumber(g.width)||!g.hasCustomWidth||c.allowCustomWidthOverride){var h=c.width,i="Cannot parse column width '"+h+"' for column named '"+c.name+"'";if(g.hasCustomWidth=!1,angular.isString(h)||angular.isNumber(h))if(angular.isString(h))if(a.endsWith(h,"%")){var j=h.replace(/%/g,""),k=parseInt(j,10);if(isNaN(k))throw new Error(i);g.width=h}else if(h.match(/^(\d+)$/))g.width=parseInt(h.match(/^(\d+)$/)[1],10);else{if(!h.match(/^\*+$/))throw new Error(i);g.width=h}else g.width=h;else g.width="*"}["minWidth","maxWidth"].forEach(function(a){var b=c[a],d="Cannot parse column "+a+" '"+b+"' for column named '"+c.name+"'";if("minWidth"===a&&!f(b)&&angular.isDefined(g.grid.options.minimumColumnSize)&&(b=g.grid.options.minimumColumnSize),f(b))if(angular.isString(b)){if(!b.match(/^(\d+)$/))throw new Error(d);g[a]=parseInt(b.match(/^(\d+)$/)[1],10)}else g[a]=b;else g[a]="minWidth"===a?30:9e3}),g.field=void 0===c.field?c.name:c.field,"string"!=typeof g.field&&a.logError("Field is not a string, this is likely to break the code, Field is: "+g.field),g.name=c.name,g.displayName=e(c),g.aggregationType=angular.isDefined(c.aggregationType)?c.aggregationType:null,g.footerCellTemplate=angular.isDefined(c.footerCellTemplate)?c.footerCellTemplate:null,void 0===c.cellTooltip||!1===c.cellTooltip?g.cellTooltip=!1:!0===c.cellTooltip?g.cellTooltip=function(a,b){return g.grid.getCellValue(a,b)}:"function"==typeof c.cellTooltip?g.cellTooltip=c.cellTooltip:g.cellTooltip=function(a,b){return b.colDef.cellTooltip},void 0===c.headerTooltip||!1===c.headerTooltip?g.headerTooltip=!1:!0===c.headerTooltip?g.headerTooltip=function(a){return a.displayName}:"function"==typeof c.headerTooltip?g.headerTooltip=c.headerTooltip:g.headerTooltip=function(a){return a.colDef.headerTooltip},g.footerCellClass=c.footerCellClass,g.cellClass=c.cellClass,g.headerCellClass=c.headerCellClass,g.cellFilter=c.cellFilter?c.cellFilter:"",g.sortCellFiltered=!!c.sortCellFiltered,g.filterCellFiltered=!!c.filterCellFiltered,g.headerCellFilter=c.headerCellFilter?c.headerCellFilter:"",g.footerCellFilter=c.footerCellFilter?c.footerCellFilter:"",g.visible=a.isNullOrUndefined(c.visible)||c.visible,g.headerClass=c.headerClass,g.enableSorting=void 0!==c.enableSorting?c.enableSorting:g.grid.options.enableSorting,g.sortingAlgorithm=c.sortingAlgorithm,g.sortDirectionCycle=void 0!==c.sortDirectionCycle?c.sortDirectionCycle:[null,b.ASC,b.DESC],void 0===g.suppressRemoveSort&&(g.suppressRemoveSort=void 0!==c.suppressRemoveSort&&c.suppressRemoveSort),g.enableFiltering=void 0===c.enableFiltering||c.enableFiltering,g.setPropertyOrDefault(c,"menuItems",[]),d&&g.setPropertyOrDefault(c,"sort"),g.setPropertyOrDefault(c,"defaultSort");var l=[];c.filter?l.push(c.filter):c.filters?l=c.filters:l.push({}),d?(g.setPropertyOrDefault(c,"filter"),g.setPropertyOrDefault(c,"extraStyle"),g.setPropertyOrDefault(c,"filters",l)):g.filters.length===l.length&&g.filters.forEach(function(a,b){void 0!==l[b].placeholder&&(a.placeholder=l[b].placeholder),void 0!==l[b].ariaLabel&&(a.ariaLabel=l[b].ariaLabel),void 0!==l[b].flags&&(a.flags=l[b].flags),void 0!==l[b].type&&(a.type=l[b].type),void 0!==l[b].selectOptions&&(a.selectOptions=l[b].selectOptions)})},d.prototype.unsort=function(){var a=this.sort.priority;this.grid.columns.forEach(function(b){b.sort&&void 0!==b.sort.priority&&b.sort.priority>a&&(b.sort.priority-=1)}),this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},d.prototype.getColClass=function(a){var c=b.COL_CLASS_PREFIX+this.uid;return a?"."+c:c},d.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},d.prototype.isPinnedRight=function(){return"right"===this.renderContainer},d.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},d.prototype.getRenderContainer=function(){var a=this,b=a.renderContainer;return null!==b&&""!==b&&void 0!==b||(b="body"),a.grid.renderContainers[b]},d.prototype.showColumn=function(){this.colDef.visible=!0},d.prototype.getAggregationText=function(){var a=this;if(a.colDef.aggregationHideLabel)return"";if(a.colDef.aggregationLabel)return a.colDef.aggregationLabel;switch(a.colDef.aggregationType){case b.aggregationTypes.count:return c.getSafeText("aggregation.count");case b.aggregationTypes.sum:return c.getSafeText("aggregation.sum");case b.aggregationTypes.avg:return c.getSafeText("aggregation.avg");case b.aggregationTypes.min:return c.getSafeText("aggregation.min");case b.aggregationTypes.max:return c.getSafeText("aggregation.max");default:return""}},d.prototype.getCellTemplate=function(){return this.cellTemplatePromise},d.prototype.getCompiledElementFn=function(){return this.compiledElementFnDefer.promise},d}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(a,b){return{initialize:function(c){return c.onRegisterApi=c.onRegisterApi||angular.noop(),c.data=c.data||[],c.columnDefs=c.columnDefs||[],c.excludeProperties=c.excludeProperties||["$$hashKey"],c.enableRowHashing=!1!==c.enableRowHashing,c.rowIdentity=c.rowIdentity||function(b){return a.hashKey(b)},c.getRowIdentity=c.getRowIdentity||function(a){return a.$$hashKey},c.flatEntityAccess=!0===c.flatEntityAccess,c.showHeader=void 0===c.showHeader||c.showHeader,c.showHeader?c.headerRowHeight=void 0!==c.headerRowHeight?c.headerRowHeight:30:c.headerRowHeight=0,"string"==typeof c.rowHeight?c.rowHeight=parseInt(c.rowHeight)||30:c.rowHeight=c.rowHeight||30,c.minRowsToShow=void 0!==c.minRowsToShow?c.minRowsToShow:10,c.showGridFooter=!0===c.showGridFooter,c.showColumnFooter=!0===c.showColumnFooter,c.columnFooterHeight=void 0!==c.columnFooterHeight?c.columnFooterHeight:30,c.gridFooterHeight=void 0!==c.gridFooterHeight?c.gridFooterHeight:30,c.columnWidth=void 0!==c.columnWidth?c.columnWidth:50,c.maxVisibleColumnCount=void 0!==c.maxVisibleColumnCount?c.maxVisibleColumnCount:200,c.virtualizationThreshold=void 0!==c.virtualizationThreshold?c.virtualizationThreshold:20,c.columnVirtualizationThreshold=void 0!==c.columnVirtualizationThreshold?c.columnVirtualizationThreshold:10,c.excessRows=void 0!==c.excessRows?c.excessRows:4,c.scrollThreshold=void 0!==c.scrollThreshold?c.scrollThreshold:4,c.excessColumns=void 0!==c.excessColumns?c.excessColumns:4,c.aggregationCalcThrottle=void 0!==c.aggregationCalcThrottle?c.aggregationCalcThrottle:500,c.wheelScrollThrottle=void 0!==c.wheelScrollThrottle?c.wheelScrollThrottle:70,c.scrollDebounce=void 0!==c.scrollDebounce?c.scrollDebounce:300,c.enableSorting=!1!==c.enableSorting,c.enableFiltering=!0===c.enableFiltering,c.enableColumnMenus=!1!==c.enableColumnMenus,c.enableVerticalScrollbar=void 0!==c.enableVerticalScrollbar?c.enableVerticalScrollbar:b.scrollbars.ALWAYS,c.enableHorizontalScrollbar=void 0!==c.enableHorizontalScrollbar?c.enableHorizontalScrollbar:b.scrollbars.ALWAYS,c.enableMinHeightCheck=!1!==c.enableMinHeightCheck,c.minimumColumnSize=void 0!==c.minimumColumnSize?c.minimumColumnSize:30,c.rowEquality=c.rowEquality||function(a,b){return a===b},c.headerTemplate=c.headerTemplate||null,c.footerTemplate=c.footerTemplate||"ui-grid/ui-grid-footer",c.gridFooterTemplate=c.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",c.rowTemplate=c.rowTemplate||"ui-grid/ui-grid-row",c.gridMenuTemplate=c.gridMenuTemplate||"ui-grid/uiGridMenu",c.appScopeProvider=c.appScopeProvider||null,c}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(a,b){function c(a,b,c){var d=this;d.name=a,d.grid=b,d.visibleRowCache=[],d.visibleColumnCache=[],d.renderedRows=[],d.renderedColumns=[],d.prevScrollTop=0,d.prevScrolltopPercentage=0,d.prevRowScrollIndex=0,d.prevScrollLeft=0,d.prevScrollleftPercentage=0,d.prevColumnScrollIndex=0,d.columnStyles="",d.viewportAdjusters=[],d.hasHScrollbar=!1,d.hasVScrollbar=!1,d.canvasHeightShouldUpdate=!0,d.$$canvasHeight=0,c&&angular.isObject(c)&&angular.extend(d,c),b.registerStyleComputation({priority:5,func:function(){return d.updateColumnWidths(),d.columnStyles}})}return c.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},c.prototype.containsColumn=function(a){return-1!==this.visibleColumnCache.indexOf(a)},c.prototype.minRowsToRender=function(){for(var a=this,b=0,c=0,d=a.getViewportHeight(),e=a.visibleRowCache.length-1;c<d&&e>=0;e--)c+=a.visibleRowCache[e].height,b++;return b},c.prototype.minColumnsToRender=function(){for(var a=this,b=this.getViewportWidth(),c=0,d=0,e=0;e<a.visibleColumnCache.length;e++){var f=a.visibleColumnCache[e];if(d<b)d+=f.drawnWidth?f.drawnWidth:0,c++;else{for(var g=0,h=e;h>=e-c;h--)g+=a.visibleColumnCache[h].drawnWidth?a.visibleColumnCache[h].drawnWidth:0;g<b&&c++}}return c},c.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},c.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},c.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);b>-1&&this.viewportAdjusters.splice(b,1)},c.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},c.prototype.getMargin=function(a){var b=this,c=0;return b.viewportAdjusters.forEach(function(b){var d=b.call(this,{height:0,width:0});d.side&&d.side===a&&(c+=-1*d.width)}),c},c.prototype.getViewportHeight=function(){var a=this,b=a.headerHeight?a.headerHeight:a.grid.headerHeight,c=a.grid.gridHeight-b-a.grid.footerHeight;return c+=a.getViewportAdjustment().height},c.prototype.getViewportWidth=function(){var a=this,b=a.grid.gridWidth;return b+=a.getViewportAdjustment().width},c.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},c.prototype.getCanvasHeight=function(){var a=this;if(!a.canvasHeightShouldUpdate)return a.$$canvasHeight;var b=a.$$canvasHeight;return a.$$canvasHeight=0,a.visibleRowCache.forEach(function(b){a.$$canvasHeight+=b.height}),a.canvasHeightShouldUpdate=!1,a.grid.api.core.raise.canvasHeightChanged(b,a.$$canvasHeight),a.$$canvasHeight},c.prototype.getVerticalScrollLength=function(){
return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight!==0?this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight:-1},c.prototype.getHorizontalScrollLength=function(){return this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth!==0?this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth:-1},c.prototype.getCanvasWidth=function(){return this.canvasWidth},c.prototype.setRenderedRows=function(a){this.renderedRows.length=a.length;for(var b=0;b<a.length;b++)this.renderedRows[b]=a[b]},c.prototype.setRenderedColumns=function(a){this.renderedColumns.length=a.length;for(var b=0;b<a.length;b++)this.renderedColumns[b]=a[b];this.updateColumnOffset()},c.prototype.updateColumnOffset=function(){for(var a=0,b=0;b<this.currentFirstColumn;b++)a+=this.visibleColumnCache[b].drawnWidth;this.columnOffset=a},c.prototype.scrollVertical=function(a){var c=-1;if(a!==this.prevScrollTop){var d=a-this.prevScrollTop;d>0&&(this.grid.scrollDirection=b.scrollDirection.DOWN),d<0&&(this.grid.scrollDirection=b.scrollDirection.UP);return c=a/this.getVerticalScrollLength(),c>1&&(c=1),c<0&&(c=0),this.adjustScrollVertical(a,c),c}},c.prototype.scrollHorizontal=function(a){var c=-1;if(a!==this.prevScrollLeft){var d=a-this.prevScrollLeft;d>0&&(this.grid.scrollDirection=b.scrollDirection.RIGHT),d<0&&(this.grid.scrollDirection=b.scrollDirection.LEFT);var e=this.getHorizontalScrollLength();return c=0!==e?a/e:0,this.adjustScrollHorizontal(a,c),c}},c.prototype.adjustScrollVertical=function(a,b,c){(this.prevScrollTop!==a||c)&&(void 0!==a&&void 0!==a&&null!==a||(a=(this.getCanvasHeight()-this.getViewportHeight())*b),this.adjustRows(a,b,!1),this.prevScrollTop=a,this.prevScrolltopPercentage=b,this.grid.queueRefresh())},c.prototype.adjustScrollHorizontal=function(a,b,c){(this.prevScrollLeft!==a||c)&&(void 0!==a&&void 0!==a&&null!==a||(a=(this.getCanvasWidth()-this.getViewportWidth())*b),this.adjustColumns(a,b),this.prevScrollLeft=a,this.prevScrollleftPercentage=b,this.grid.queueRefresh())},c.prototype.adjustRows=function(a,b,c){var d=this,e=d.minRowsToRender(),f=d.visibleRowCache,g=f.length-e;void 0!==b&&null!==b||!a||(b=a/d.getVerticalScrollLength());var h=Math.ceil(Math.min(g,g*b));h>g&&(h=g);var i=[];if(f.length>d.grid.options.virtualizationThreshold){if(void 0!==a&&null!==a){if(!d.grid.suppressParentScrollDown&&d.prevScrollTop<a&&h<d.prevRowScrollIndex+d.grid.options.scrollThreshold&&h<g)return;if(!d.grid.suppressParentScrollUp&&d.prevScrollTop>a&&h>d.prevRowScrollIndex-d.grid.options.scrollThreshold&&h<g)return}i=[Math.max(0,h-d.grid.options.excessRows),Math.min(f.length,h+e+d.grid.options.excessRows)]}else{var j=d.visibleRowCache.length;i=[0,Math.max(j,e+d.grid.options.excessRows)]}d.updateViewableRowRange(i),d.prevRowScrollIndex=h},c.prototype.adjustColumns=function(a,b){var c=this,d=c.minColumnsToRender(),e=c.visibleColumnCache,f=e.length-d;void 0!==b&&null!==b||!a||(b=a/c.getHorizontalScrollLength());var g=Math.ceil(Math.min(f,f*b));g>f&&(g=f);var h=[];if(e.length>c.grid.options.columnVirtualizationThreshold&&c.getCanvasWidth()>c.getViewportWidth()){h=[Math.max(0,g-c.grid.options.excessColumns),Math.min(e.length,g+d+c.grid.options.excessColumns)]}else{var i=c.visibleColumnCache.length;h=[0,Math.max(i,d+c.grid.options.excessColumns)]}c.updateViewableColumnRange(h),c.prevColumnScrollIndex=g},c.prototype.updateViewableRowRange=function(a){var b=this.visibleRowCache.slice(a[0],a[1]);this.currentTopRow=a[0],this.setRenderedRows(b)},c.prototype.updateViewableColumnRange=function(a){var b=this.visibleColumnCache.slice(a[0],a[1]);this.currentFirstColumn=a[0],this.setRenderedColumns(b)},c.prototype.headerCellWrapperStyle=function(){var a=this;if(0!==a.currentFirstColumn){var b=a.columnOffset;return a.grid.isRTL()?{"margin-right":b+"px"}:{"margin-left":b+"px"}}return null},c.prototype.updateColumnWidths=function(){var b=this,c=[],d=0,e=0,f="",g=!1,h=[],i=[],j=0,k=b.grid.getViewportWidth()-b.grid.scrollbarWidth,l=[];angular.forEach(b.grid.renderContainers,function(a){l=l.concat(a.visibleColumnCache)}),l.forEach(function(f){var l=0;if(f.visible)if(g&&(k+=b.grid.scrollbarWidth),!g&&f.colDef.pinnedRight&&(g=!0),angular.isNumber(f.width))l=parseInt(f.width,10),e+=l,f.drawnWidth=l,h.push(f);else if(a.endsWith(f.width,"%")){var m=parseInt(f.width.replace(/%/g,""),10);l=parseInt(m/100*k),l>f.maxWidth&&(l=f.maxWidth),l<f.minWidth&&(l=f.minWidth),e+=l,f.drawnWidth=l,j+=m,i.push(f)}else angular.isString(f.width)&&-1!==f.width.indexOf("*")&&(d+=f.width.length,c.push(f))});var m=k-e;if(c.length>0){var n=m/d;c.forEach(function(a){var b=parseInt(a.width.length*n,10);b>a.maxWidth&&(b=a.maxWidth),b<a.minWidth&&(b=a.minWidth),e+=b,a.drawnWidth=b})}var o;if(c.length>0?o=c:i.length>0&&0===h.length&&100===j&&(o=i),!angular.isUndefined(o)){for(var p=function(a){a.drawnWidth<a.maxWidth&&q>0&&(a.drawnWidth++,e++,q--,r=!0)},q=k-e,r=!0;q>0&&r;)r=!1,o.forEach(p);var s=function(a){a.drawnWidth>a.minWidth&&t>0&&(a.drawnWidth--,e--,t--,r=!0)},t=e-k;for(r=!0;t>0&&r;)r=!1,o.forEach(s)}var u=0;b.visibleColumnCache.forEach(function(a){a.visible&&(u+=a.drawnWidth)}),l.forEach(function(a){f+=a.getColClassDefinition()}),b.canvasWidth=u,this.columnStyles=f},c.prototype.needsHScrollbarPlaceholder=function(){var a,c=this;return("left"===c.name||"right"===c.name&&!this.hasHScrollbar&&!this.grid.disableScrolling)&&(c.grid.options.enableHorizontalScrollbar===b.scrollbars.ALWAYS||(a=this.grid.element[0].querySelector(".ui-grid-render-container-body .ui-grid-viewport"),a.scrollWidth>a.offsetWidth))},c.prototype.getViewportStyle=function(){var a=this,c={},d={};return d[b.scrollbars.ALWAYS]="scroll",d[b.scrollbars.WHEN_NEEDED]="auto",a.hasHScrollbar=!1,a.hasVScrollbar=!1,a.grid.disableScrolling?(c["overflow-x"]="hidden",c["overflow-y"]="hidden",c):("body"===a.name?(a.hasHScrollbar=a.grid.options.enableHorizontalScrollbar!==b.scrollbars.NEVER,a.grid.isRTL()?a.grid.hasLeftContainerColumns()||(a.hasVScrollbar=a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER):a.grid.hasRightContainerColumns()||(a.hasVScrollbar=a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER)):"left"===a.name?a.hasVScrollbar=!!a.grid.isRTL()&&a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER:a.hasVScrollbar=!a.grid.isRTL()&&a.grid.options.enableVerticalScrollbar!==b.scrollbars.NEVER,c["overflow-x"]=a.hasHScrollbar?d[a.grid.options.enableHorizontalScrollbar]:"hidden",c["overflow-y"]=a.hasVScrollbar?d[a.grid.options.enableVerticalScrollbar]:"hidden",c)},c}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil","uiGridConstants",function(a,b){function c(b,c,d){this.grid=d,this.entity=b,this.uid=a.nextUid(),this.visible=!0,this.isSelected=!1,this.$$height=d.options.rowHeight}return Object.defineProperty(c.prototype,"height",{get:function(){return this.$$height},set:function(a){a!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=a)}}),c.prototype.getQualifiedColField=function(a){return"row."+this.getEntityQualifiedColField(a)},c.prototype.getEntityQualifiedColField=function(c){var d="entity";return c.field===b.ENTITY_BINDING?d:a.preEval(d+"."+c.field)},c.prototype.setRowInvisible=function(a){a&&a.setThisRowInvisible&&a.setThisRowInvisible("user")},c.prototype.clearRowInvisible=function(a){a&&a.clearThisRowInvisible&&a.clearThisRowInvisible("user")},c.prototype.setThisRowInvisible=function(a,b){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[a]=!0,this.evaluateRowVisibility(b)},c.prototype.clearThisRowInvisible=function(a,b){void 0!==this.invisibleReason&&delete this.invisibleReason[a],this.evaluateRowVisibility(b)},c.prototype.evaluateRowVisibility=function(a){var b=!0;void 0!==this.invisibleReason&&angular.forEach(this.invisibleReason,function(a,c){a&&(b=!1)}),void 0!==this.visible&&this.visible===b||(this.visible=b,a||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},c}])}(),function(){angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function(a,b){var c=function a(b,c){if(!(this instanceof a))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=b,this.col=c};return c.prototype.getIntersectionValueRaw=function(){return a(this.row.getEntityQualifiedColField(this.col))(this.row)},c}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(a){function b(b,c,d,e){var f=this;if(!b)throw new Error("grid argument is required");f.grid=b,f.source=e,f.withDelay=!0,f.sourceRowContainer=c,f.sourceColContainer=d,f.newScrollLeft=null,f.newScrollTop=null,f.x=null,f.y=null,f.verticalScrollLength=-9999999,f.horizontalScrollLength=-999999,f.fireThrottledScrollingEvent=a.throttle(function(a){f.grid.scrollContainers(a,f)},f.grid.options.wheelScrollThrottle,{trailing:!0})}return b.prototype.getNewScrollLeft=function(b,c){var d=this;if(!d.newScrollLeft){var e,f=b.getCanvasWidth()-b.getViewportWidth(),g=a.normalizeScrollLeft(c,d.grid);if(void 0!==d.x.percentage&&void 0!==d.x.percentage)e=d.x.percentage;else{if(void 0===d.x.pixels||void 0===d.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");e=d.x.percentage=(g+d.x.pixels)/f}return Math.max(0,e*f)}return d.newScrollLeft},b.prototype.getNewScrollTop=function(a,b){var c=this;if(!c.newScrollTop){var d,e=a.getVerticalScrollLength(),f=b[0].scrollTop;if(void 0!==c.y.percentage&&void 0!==c.y.percentage)d=c.y.percentage;else{if(void 0===c.y.pixels||void 0===c.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");d=c.y.percentage=(f+c.y.pixels)/e}return Math.max(0,d*e)}return c.newScrollTop},b.prototype.atTop=function(a){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===a},b.prototype.atBottom=function(a){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&a>0},b.prototype.atLeft=function(a){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===a},b.prototype.atRight=function(a){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&a>0},b.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},b}])}(),function(){angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(a,b,c,d,e,f,g,h){var i={createGrid:function(d){d=void 0!==d?d:{},d.id=a.newId();var e=new f(d);if(e.options.rowTemplate){var g=b.defer();e.getRowTemplateFn=g.promise,a.getTemplate(e.options.rowTemplate).then(function(a){var b=c(a);g.resolve(b)},function(){throw new Error("Couldn't fetch/use row template '"+e.options.rowTemplate+"'")}).catch(angular.noop)}return e.registerColumnBuilder(i.defaultColumnBuilder),e.registerRowBuilder(i.rowTemplateAssigner),e.registerRowsProcessor(function(a){return a.forEach(function(a){a.evaluateRowVisibility(!0)}),a},50),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.visible=!angular.isDefined(a.colDef.visible)||a.colDef.visible}),a},50),e.registerRowsProcessor(e.searchRows,100),e.options.externalSort&&angular.isFunction(e.options.externalSort)?e.registerRowsProcessor(e.options.externalSort,200):e.registerRowsProcessor(e.sortByColumn,200),e},defaultColumnBuilder:function(c,d,f){var g=[],h=function(b,f,h,i,j){c[b]?d[f]=c[b]:d[f]=h;var k=a.getTemplate(d[f]).then(function(a){angular.isFunction(a)&&(a=a());var c="cellTooltip"===j?"col.cellTooltip(row,col)":"col.headerTooltip(col)";j&&!1===d[j]?a=a.replace(e.TOOLTIP,""):j&&d[j]&&(a=a.replace(e.TOOLTIP,'title="{{'+c+' CUSTOM_FILTERS }}"')),d[b]=i?a.replace(e.CUSTOM_FILTERS,function(){return d[i]?"|"+d[i]:""}):a},function(){throw new Error("Couldn't fetch/use colDef."+b+" '"+c[b]+"'")}).catch(angular.noop);return g.push(k),k};return d.cellTemplatePromise=h("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),d.headerCellTemplatePromise=h("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),d.footerCellTemplatePromise=h("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),d.filterHeaderTemplatePromise=h("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),d.compiledElementFnDefer=b.defer(),b.all(g)},rowTemplateAssigner:function(d){var e=this;if(d.rowTemplate){var f=b.defer();d.getRowTemplateFn=f.promise,a.getTemplate(d.rowTemplate).then(function(a){var b=c(a);f.resolve(b)},function(){throw new Error("Couldn't fetch/use row template '"+d.rowTemplate+"'")})}else d.rowTemplate=e.options.rowTemplate,d.getRowTemplateFn=e.getRowTemplateFn;return d.getRowTemplateFn}};return i}])}(),function(){function a(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("ui.grid").service("rowSearcher",["gridUtil","uiGridConstants",function(b,c){var d=c.filter.CONTAINS,e={};return e.getTerm=function(a){if(void 0===a.term)return a.term;var b=a.term;return"string"==typeof b&&(b=b.trim()),b},e.stripTerm=function(b){var c=e.getTerm(b);return"string"==typeof c?a(c.replace(/(^\*|\*$)/g,"")):c},e.guessCondition=function(a){if(void 0===a.term||!a.term)return d;var b=e.getTerm(a);if(/\*/.test(b)){var c="";a.flags&&a.flags.caseSensitive||(c+="i");var f=b.replace(/(\\)?\*/g,function(a,b){return b?a:"[\\s\\S]*?"});return new RegExp("^"+f+"$",c)}return d},e.setupFilters=function(a){for(var d=[],f=a.length,g=0;g<f;g++){var h=a[g];if(h.noTerm||!b.isNullOrUndefined(h.term)){var i={},j="";h.flags&&h.flags.caseSensitive||(j+="i"),b.isNullOrUndefined(h.term)||(h.rawTerm?i.term=h.term:i.term=e.stripTerm(h)),i.noTerm=h.noTerm,h.condition?i.condition=h.condition:i.condition=e.guessCondition(h),i.flags=angular.extend({caseSensitive:!1,date:!1},h.flags),i.condition===c.filter.STARTS_WITH&&(i.startswithRE=new RegExp("^"+i.term,j)),i.condition===c.filter.ENDS_WITH&&(i.endswithRE=new RegExp(i.term+"$",j)),i.condition===c.filter.CONTAINS&&(i.containsRE=new RegExp(i.term,j)),i.condition===c.filter.EXACT&&(i.exactRE=new RegExp("^"+i.term+"$",j)),d.push(i)}}return d},e.runColumnFilter=function(a,b,d,e){var f,g=typeof e.condition,h=e.term;if(f=d.filterCellFiltered?a.getCellDisplayValue(b,d):a.getCellValue(b,d),e.condition instanceof RegExp)return e.condition.test(f);if("function"===g)return e.condition(h,f,b,d);if(e.startswithRE)return e.startswithRE.test(f);if(e.endswithRE)return e.endswithRE.test(f);if(e.containsRE)return e.containsRE.test(f);if(e.exactRE)return e.exactRE.test(f);if(e.condition===c.filter.NOT_EQUAL)return!new RegExp("^"+h+"$").exec(f);if("number"==typeof f&&"string"==typeof h){var i=parseFloat(h.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(i)||(h=i)}return!0===e.flags.date&&(f=new Date(f),h=new Date(h.replace(/\\/g,""))),e.condition===c.filter.GREATER_THAN?f>h:e.condition===c.filter.GREATER_THAN_OR_EQUAL?f>=h:e.condition===c.filter.LESS_THAN?f<h:e.condition!==c.filter.LESS_THAN_OR_EQUAL||f<=h},e.searchColumn=function(a,c,d,f){if(a.options.useExternalFiltering)return!0;for(var g=f.length,h=0;h<g;h++){var i=f[h];if((!b.isNullOrUndefined(i.term)&&""!==i.term||i.noTerm)&&!e.runColumnFilter(a,c,d,i))return!1}return!0},e.search=function(a,c,d){if(c){if(!a.options.enableFiltering)return c;for(var f=[],g=d.length,h=function(a){var c=!1;return a.forEach(function(a){(!b.isNullOrUndefined(a.term)&&""!==a.term||a.noTerm)&&(c=!0)}),c},i=0;i<g;i++){var j=d[i];void 0!==j.filters&&h(j.filters)&&f.push({col:j,filters:e.setupFilters(j.filters)})}if(f.length>0){for(var k=function(a,b,c,d){b.visible&&!e.searchColumn(a,b,c,d)&&(b.visible=!1)},l=function(a,b){for(var d=c.length,e=0;e<d;e++)k(a,c[e],b.col,b.filters)},m=f.length,n=0;n<m;n++)l(a,f[n]);a.api.core.raise.rowsVisibleChanged&&a.api.core.raise.rowsVisibleChanged()}return c}},e}])}(),function(){angular.module("ui.grid").service("rowSorter",["$parse","uiGridConstants",function(a,b){var c="("+b.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",d=(new RegExp("^[-+]?"+c+"[\\d,.]+"+c+"%?$"),{colSortFnCache:{}});return d.guessSortFn=function(a){switch(a){case"number":return d.sortNumber;case"numberStr":return d.sortNumberStr;case"boolean":return d.sortBool;case"string":return d.sortAlpha;case"date":return d.sortDate;case"object":return d.basicSort;default:throw new Error("No sorting function found for type: "+a)}},d.handleNulls=function(a,b){if(!a&&0!==a&&!1!==a||!b&&0!==b&&!1!==b){if(!a&&0!==a&&!1!==a&&!b&&0!==b&&!1!==b)return 0;if(!a&&0!==a&&!1!==a)return 1;if(!b&&0!==b&&!1!==b)return-1}return null},d.basicSort=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a===b?0:a<b?-1:1},d.sortNumber=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a-b},d.sortNumberStr=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e,f,g=!1,h=!1;return e=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(e)&&(g=!0),f=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(f)&&(h=!0),g&&h?0:g?1:h?-1:e-f},d.sortAlpha=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.toString().toLowerCase(),f=b.toString().toLowerCase();return e===f?0:e.localeCompare(f)},d.sortDate=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;a instanceof Date||(a=new Date(a)),b instanceof Date||(b=new Date(b));var e=a.getTime(),f=b.getTime();return e===f?0:e<f?-1:1},d.sortBool=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a&&b?0:a||b?a?1:-1:0},d.getSortFn=function(a,b,c){var e;return d.colSortFnCache[b.colDef.name]?e=d.colSortFnCache[b.colDef.name]:void 0!==b.sortingAlgorithm?(e=b.sortingAlgorithm,d.colSortFnCache[b.colDef.name]=b.sortingAlgorithm):b.sortCellFiltered&&b.cellFilter?(e=d.sortAlpha,d.colSortFnCache[b.colDef.name]=e):(e=d.guessSortFn(b.colDef.type),e?d.colSortFnCache[b.colDef.name]=e:e=d.sortAlpha),e},d.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:void 0!==a.sort.priority?-1:void 0!==b.sort.priority?1:0},d.sort=function(a,c,e){if(c){if(a.options.useExternalSorting)return c;var f=[],g=[];if(e.forEach(function(a){!a.sort||a.sort.ignoreSort||!a.sort.direction||a.sort.direction!==b.ASC&&a.sort.direction!==b.DESC?a.defaultSort&&a.defaultSort.direction&&(a.defaultSort.direction===b.ASC||a.defaultSort.direction===b.DESC)&&g.push({col:a,sort:a.defaultSort}):f.push({col:a,sort:a.sort})}),f=f.sort(d.prioritySort),g=g.sort(d.prioritySort),f=f.concat(g),0===f.length)return c;var h,i,j=function(a,b){a.entity.$$uiGridIndex=b};c.forEach(j);var k=c.slice(0),l=function(c,e){for(var g,j=0,l=0;0===j&&l<f.length;){h=f[l].col,i=f[l].sort.direction,g=d.getSortFn(a,h,k);var m,n;h.sortCellFiltered?(m=a.getCellDisplayValue(c,h),n=a.getCellDisplayValue(e,h)):(m=a.getCellValue(c,h),n=a.getCellValue(e,h)),j=g(m,n,c,e,i,h),l++}return 0===j?c.entity.$$uiGridIndex-e.entity.$$uiGridIndex:i===b.ASC?j:0-j},m=c.sort(l),n=function(a,b){delete a.entity.$$uiGridIndex};return c.forEach(n),m}},d}])}(),function(){function a(a){var b=a;return void 0!==b.length&&b.length&&(b=a[0]),b.ownerDocument.defaultView.getComputedStyle(b,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];f<4;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,e){var f,h=!0,i=a(c),j="border-box"===i.boxSizing;if(f<=0||null==f){if(f=i[d],(f<0||null==f)&&(f=c.style[d]),g.test(f))return f;h=j&&!0,f=parseFloat(f)||0}return f+b(c,d,e||(j?"border":"content"),h,i)}function d(b){b=angular.element(b)[0];var c=b.parentElement;return c||(c=document.getElementsByTagName("body")[0]),parseInt(a(c).fontSize)||parseInt(a(b).fontSize)||16}var e,f=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(e=function(){var a=Array.prototype.slice;return function(b){var c=this,d=a.call(arguments,1);return d.length?function(){return arguments.length?c.apply(b,d.concat(a.call(arguments))):c.apply(b,d)}:function(){return arguments.length?c.apply(b,arguments):c.call(b)}}});var g=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),h=/^(block|none|table(?!-c[ea]).+)/,i={position:"absolute",visibility:"hidden",display:"block"},j=["0","0","0","0"],k="uiGrid-";f.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(f,g,l,m,n,o,p,q,r,s,t){function u(a,b){var c=angular.element(this),d=0,e=0,f=0,g=0;if(b.originalEvent&&(b=b.originalEvent),"detail"in b&&(f=-1*b.detail),"wheelDelta"in b&&(f=b.wheelDelta),"wheelDeltaY"in b&&(f=b.wheelDeltaY),"wheelDeltaX"in b&&(e=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(e=-1*f,f=0),d=0===f?e:f,"deltaY"in b&&(f=-1*b.deltaY,d=f),"deltaX"in b&&(e=b.deltaX,0===f&&(d=-1*e)),0!==f||0!==e){if(1===b.deltaMode){var h=c.data("mousewheel-line-height");d*=h,f*=h,e*=h}else if(2===b.deltaMode){var i=c.data("mousewheel-page-height");d*=i,f*=i,e*=i}g=Math.max(Math.abs(f),Math.abs(e)),(!z||g<z)&&(z=g,w(b,g)&&(z/=40)),d=Math[d>=1?"floor":"ceil"](d/z),e=Math[e>=1?"floor":"ceil"](e/z),f=Math[f>=1?"floor":"ceil"](f/z);var j={originalEvent:b,deltaX:e,deltaY:f,deltaFactor:z,preventDefault:function(){b.preventDefault()},stopPropagation:function(){b.stopPropagation()}};y&&clearTimeout(y),y=setTimeout(v,200),a.call(c[0],j)}}function v(){z=null}function w(a,b){return"mousewheel"===a.type&&b%120==0}var x={augmentWidthOrHeight:b,getStyles:a,createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},readableColumnName:function(a){return void 0===a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return a.toLowerCase()}).replace(/([\w\u00C0-\u017F]+)/g,function(a){return a.charAt(0).toUpperCase()+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(a,b){var c=[];if(!a||void 0===a[0]||void 0===a[0])return[];angular.isUndefined(b)&&(b=[]);var d=a[0];return angular.forEach(d,function(a,d){-1===b.indexOf(d)&&c.push({name:d})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),getTemplate:function(a){if(n.get(a))return x.postProcessTemplate(n.get(a));if(angular.isFunction(a.then))return a.then(x.postProcessTemplate).catch(angular.noop);try{if(angular.element(a).length>0)return r.when(a).then(x.postProcessTemplate).catch(angular.noop)}catch(a){}return m({method:"GET",url:a}).then(function(b){var c=b.data.trim();return n.put(a,c),c},function(b){throw new Error("Could not get template "+a+": "+b)}).then(x.postProcessTemplate).catch(angular.noop)},postProcessTemplate:function(a){var b=s.startSymbol(),c=s.endSymbol();return"{{"===b&&"}}"===c||(a=a.replace(/\{\{/g,b),a=a.replace(/\}\}/g,c)),r.when(a)},guessType:function(a){var b=typeof a;switch(b){case"number":case"boolean":case"string":return b;default:return angular.isDate(a)?"date":"object"}},elementWidth:function(a){},elementHeight:function(a){},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},fakeElement:function(a,b,c,d){var e,f,g=angular.element(a).clone()[0];for(f in b)g.style[f]=b[f];return angular.element(document.body).append(g),e=c.call(g,g),angular.element(g).remove(),e},normalizeWheelEvent:function(a){var b,c,d,e=a||window.event,f=([].slice.call(arguments,1),0),g=0,h=0,i=0,j=0;return e.originalEvent&&(e=e.originalEvent),e.wheelDelta&&(f=e.wheelDelta),e.detail&&(f=-1*e.detail),h=f,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(h=0,g=-1*f),e.deltaY&&(h=-1*e.deltaY,f=h),e.deltaX&&(g=e.deltaX,f=-1*g),void 0!==e.wheelDeltaY&&(h=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(g=e.wheelDeltaX),i=Math.abs(f),(!b||i<b)&&(b=i),j=Math.max(Math.abs(h),Math.abs(g)),(!c||j<c)&&(c=j),d=f>0?"floor":"ceil",f=Math[d](f/b),g=Math[d](g/c),h=Math[d](h/c),{delta:f,deltaX:g,deltaY:h}},isTouchEnabled:function(){var a;return("ontouchstart"in g||g.DocumentTouch&&l instanceof DocumentTouch)&&(a=!0),a},isNullOrUndefined:function(a){return void 0===a||null===a},endsWith:function(a,b){return!(!a||!b||"string"!=typeof a)&&-1!==a.indexOf(b,a.length-b.length)},arrayContainsObjectWithProperty:function(a,b,c){var d=!1;return angular.forEach(a,function(a){a[b]===c&&(d=!0)}),d},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(a){var b;try{b=q.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?b.enabled(a,!1):b.enabled(!1,a)}catch(a){}},enableAnimations:function(a){var b;try{return b=q.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?b.enabled(a,!0):b.enabled(!0,a),b}catch(a){}},nextUid:function(){for(var a,b=j.length;b;){if(b--,57===(a=j[b].charCodeAt(0)))return j[b]="A",k+j.join("");if(90!==a)return j[b]=String.fromCharCode(a+1),k+j.join("");j[b]="0"}return j.unshift("0"),k+j.join("")},hashKey:function(a){var b,c=typeof a;return"object"===c&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():void 0!==a.$$hashKey&&a.$$hashKey?b=a.$$hashKey:void 0===b&&(b=a.$$hashKey=x.nextUid()):b=a,c+": "+b},resetUids:function(){j=["0","0","0"]},logError:function(a){t.LOG_ERROR_MESSAGES&&f.error(a)},logWarn:function(a){t.LOG_WARN_MESSAGES&&f.warn(a)},logDebug:function(){t.LOG_DEBUG_MESSAGES&&f.debug.apply(f,arguments)}};x.focus={queue:[],byId:function(a,b){this._purgeQueue();var c=o(function(){var c=(b&&b.id?b.id+"-":"")+a,d=g.document.getElementById(c);d?d.focus():x.logWarn("[focus.byId] Element id "+c+" was not found.")},0,!1);return this.queue.push(c),c},byElement:function(a){if(!angular.isElement(a))return x.logWarn("Trying to focus on an element that isn't an element."),r.reject("not-element");a=angular.element(a),this._purgeQueue();var b=o(function(){a&&a[0].focus()},0,!1);return this.queue.push(b),b},bySelector:function(a,b,c){var d=this;if(!angular.isElement(a))throw new Error("The parent element is not an element.");a=angular.element(a);var e=function(){var c=a[0].querySelector(b);return d.byElement(c)};if(this._purgeQueue(),c){var f=o(e,0,!1);return this.queue.push(f),f}return e()},_purgeQueue:function(){this.queue.forEach(function(a){o.cancel(a)}),this.queue=[]}},["width","height"].forEach(function(b){var d=b.charAt(0).toUpperCase()+b.substr(1);x["element"+d]=function(d,e){var f=d;if(f&&void 0!==f.length&&f.length&&(f=d[0]),f&&null!==f){var g=a(f);return 0===f.offsetWidth&&h.test(g.display)?x.swap(f,i,function(){return c(f,b,e)}):c(f,b,e)}return null},x["outerElement"+d]=function(a,b){return a?x["element"+d].call(this,a,b?"margin":"border"):null}}),x.closestElm=function(a,b){void 0!==a.length&&a.length&&(a=a[0]);var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){return"function"==typeof document.body[a]&&(c=a,!0)});for(var d;null!==a;){if(null!==(d=a.parentElement)&&d[c](b))return d;a=d}return null},x.type=function(a){return Function.prototype.toString.call(a.constructor).match(/function (.*?)\(/)[1]},x.getBorderSize=function(b,c){void 0!==b.length&&b.length&&(b=b[0]);var d=a(b);c=c?"border"+c.charAt(0).toUpperCase()+c.slice(1):"border",c+="Width";var e=parseInt(d[c],10);return isNaN(e)?0:e},x.detectBrowser=function(){var a=g.navigator.userAgent,b={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var c in b)if(b[c].test(a))return c;return"unknown"},x.rtlScrollType=function a(){if(a.type)return a.type;var b=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],c="reverse";return document.body.appendChild(b),b.scrollLeft>0?c="default":(b.scrollLeft=1,0===b.scrollLeft&&(c="negative")),angular.element(b).remove(),a.type=c,c},x.normalizeScrollLeft=function(a,b){void 0!==a.length&&a.length&&(a=a[0]);var c=a.scrollLeft;if(b.isRTL())switch(x.rtlScrollType()){case"default":return a.scrollWidth-c-a.clientWidth;case"negative":return Math.abs(c);case"reverse":return c}return c},x.denormalizeScrollLeft=function(a,b,c){if(void 0!==a.length&&a.length&&(a=a[0]),c.isRTL())switch(x.rtlScrollType()){case"default":return a.scrollWidth-a.clientWidth-b;case"negative":return-1*b;case"reverse":return b}return b},x.preEval=function(a){var b=t.BRACKET_REGEXP.exec(a);if(b)return(b[1]?x.preEval(b[1]):b[1])+b[2]+(b[3]?x.preEval(b[3]):b[3]);a=a.replace(t.APOS_REGEXP,"\\'");var c=a.split(t.DOT_REGEXP),d=[c.shift()];return angular.forEach(c,function(a){d.push(a.replace(t.FUNC_REGEXP,"']$1"))}),d.join("['")},x.debounce=function(a,b,c){function d(){g=this,f=arguments;var d=function(){e=null,c||(h=a.apply(g,f))},i=c&&!e;return e&&o.cancel(e),e=o(d,b,!1),i&&(h=a.apply(g,f)),h}var e,f,g,h;return d.cancel=function(){o.cancel(e),e=null},d},x.throttle=function(a,b,c){function d(b){g=+new Date,a.apply(e,f),p(function(){h=null},0,1,!1)}c=c||{};var e,f,g=0,h=null;return function(){if(e=this,f=arguments,null===h){var a=+new Date-g;a>b?d():c.trailing&&(h=p(d,b-a,1,!1))}}},x.on={},x.off={},x._events={},x.addOff=function(a){x.off[a]=function(b,c){var d=x._events[a].indexOf(c);d>0&&x._events[a].removeAt(d)}};var y,z,A="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return x.on.mousewheel=function(a,b){if(a&&b){var c=angular.element(a);c.data("mousewheel-line-height",d(c)),c.data("mousewheel-page-height",x.elementHeight(c)),c.data("mousewheel-callbacks")||c.data("mousewheel-callbacks",{});var f=c.data("mousewheel-callbacks");f[b]=(Function.prototype.bind||e).call(u,c[0],b);for(var g=A.length;g;)c.on(A[--g],f[b]);c.on("$destroy",function(){for(var a=A.length;a;)c.off(A[--a],f[b])})}},x.off.mousewheel=function(a,b){var c=angular.element(a),d=c.data("mousewheel-callbacks"),e=d[b];if(e)for(var f=A.length;f;)c.off(A[--f],e);delete d[b],0===Object.keys(d).length&&(c.removeData("mousewheel-line-height"),c.removeData("mousewheel-page-height"),c.removeData("mousewheel-callbacks"))},x}]),f.filter("px",function(){return function(a){return a.match(/^[\d\.]+$/)?a+"px":a}})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ar",{headerCell:{aria:{defaultFilterLabel:" ",removeFilter:" ",columnMenuButtonLabel:" "},priority:" : ",filterLabel:"  :"},aggregate:{label:""},groupPanel:{description:"      "},search:{placeholder:"  ...",showingItems:"  :",selectedItems:"  :",totalItems:"  :",size:"  :",first:" ",next:" ",previous:" ",last:" "},menu:{text:"  :"},sort:{ascending:" ",descending:" ",none:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:" : ",min:": ",max:": "},pinning:{pinLeft:" ",pinRight:" ",unpin:" "},columnMenu:{close:""},gridMenu:{aria:{
buttonLabel:" "},columns:":",importerTitle:" ",exporterAllAsCsv:"   (csv)",exporterVisibleAsCsv:"     (csv)",exporterSelectedAsCsv:"     (csv)",exporterAllAsPdf:"   (pdf)",exporterVisibleAsPdf:"     (pdf)",exporterSelectedAsPdf:"     (pdf)",clearAllFilters:"  "},importer:{noHeaders:"        ",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"        (CSV) ",invalidJson:"        (JSON) ",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:" ",pageBack:" ",pageSelected:" ",pageForward:" ",pageToLast:" "},sizes:"   ",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:" ",aggregate_count:" : ",aggregate_sum:" : ",aggregate_max:" : ",aggregate_min:" : ",aggregate_avg:" : ",aggregate_remove:" : "},validate:{error:" :",minLength:"      THRESHOLD .",maxLength:"      THRESHOLD .",required:" "}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("bg",{headerCell:{aria:{defaultFilterLabel:"  ",removeFilter:" ",columnMenuButtonLabel:"  "},priority:":",filterLabel:"  : "},aggregate:{label:""},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:":",size:"  :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:"   ",descending:"   ",none:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:"-: ",max:"-: "},pinning:{pinLeft:" ",pinRight:" ",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:"  "},columns:":",importerTitle:"  ",exporterAllAsCsv:"    csv",exporterVisibleAsCsv:"     csv",exporterSelectedAsCsv:"     csv",exporterAllAsPdf:"    pdf",exporterVisibleAsPdf:"     pdf",exporterSelectedAsPdf:"     pdf",clearAllFilters:"  "},importer:{noHeaders:"       ,    ?",noObjects:"     ,    ,   ?",invalidCsv:"     ,  ,    CSV ",invalidJson:"     ,  ,    JSON ",jsonNotArray:" JSON     , ."},pagination:{aria:{pageToFirst:"  ",pageBack:" ",pageSelected:" ",pageForward:" ",pageToLast:"  "},sizes:"  ",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"  ",aggregate_count:": ",aggregate_sum:": ",aggregate_max:": ",aggregate_min:": ",aggregate_avg:": ",aggregate_remove:": "},validate:{error:":",minLength:"     THRESHOLD .",maxLength:"       THRESHOLD .",required:"  ."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){var b={aggregate:{label:"poloky"},groupPanel:{description:"Pesute zhlav zde pro vytvoen skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji poloky:",selectedItems:"Vybran poloky:",totalItems:"Celkem poloek:",size:"Velikost strany:",first:"Prvn strana",next:"Dal strana",previous:"Pedchoz strana",last:"Posledn strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seadit od A-Z",descending:"Seadit od Z-A",remove:"Odebrat seazen"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem dk: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat vechna data do csv",exporterVisibleAsCsv:"Exportovat viditeln data do csv",exporterSelectedAsCsv:"Exportovat vybran data do csv",exporterAllAsPdf:"Exportovat vechna data do pdf",exporterVisibleAsPdf:"Exportovat viditeln data do pdf",exporterSelectedAsPdf:"Exportovat vybran data do pdf",exporterAllAsExcel:"Exportovat vechna data do excel",exporterVisibleAsExcel:"Exportovat viditeln data do excel",exporterSelectedAsExcel:"Exportovat vybran data do excel",clearAllFilters:"Odstranit vechny filtry"},importer:{noHeaders:"Nzvy sloupc se nepodailo zskat, obsahuje soubor zhlav?",noObjects:"Data se nepodailo zpracovat, obsahuje soubor dky mimo zhlav?",invalidCsv:"Soubor nelze zpracovat, jedn se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor mus obsahovat json. Ukonuji.."},pagination:{sizes:"poloek na strnku",totalItems:"poloek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupen",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return a.add("cs",b),a.add("cz",b),a.add("cs-cz",b),a.add("cs-CZ",b),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupr rkker udfra en kolonne ved at trkke dens overskift hertil."},search:{placeholder:"Sg...",showingItems:"Viste rkker:",selectedItems:"Valgte rkker:",totalItems:"Rkker totalt:",size:"Side strrelse:",first:"Frste side",next:"Nste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vlg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rkker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fastgr til venstre",pinRight:"Fastgr til hjre",unpin:"Frigr"},gridMenu:{columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter markerede data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter markerede data som pdf",exporterAllAsExcel:"Eksporter alle data som excel",exporterVisibleAsExcel:"Eksporter synlige data som excel",exporterSelectedAsExcel:"Eksporter markerede data som excel",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"G til frste",pageBack:"G tilbage",pageSelected:"Valgte side",pageForward:"G frem",pageToLast:"G til sidste"},sizes:"genstande per side",totalItems:"genstande",through:"gennem",of:"af"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter fr Spalte",removeFilter:"Filter lschen",columnMenuButtonLabel:"Spaltenmen",column:"Spalte"},priority:"Prioritt:",filterLabel:"Filter fr Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{aria:{selected:"Zeile markiert",notSelected:"Zeile nicht markiert"},placeholder:"Suche...",showingItems:"Zeige Eintrge:",selectedItems:"Ausgewhlte Eintrge:",totalItems:"Eintrge gesamt:",size:"Eintrge pro Seite:",first:"Erste Seite",next:"Nchste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswhlen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurcksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lsen"},columnMenu:{close:"Schlieen"},gridMenu:{aria:{buttonLabel:"Tabellenmen"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"Sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"Markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"Sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"Markierte Daten als PDF exportieren",exporterAllAsExcel:"Alle Daten als Excel exportieren",exporterVisibleAsExcel:"Sichtbare Daten als Excel exportieren",exporterSelectedAsExcel:"Markierte Daten als Excel exportieren",clearAllFilters:"Alle Filter zurcksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei auer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gltige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthlt sie gltiges JSON?",jsonNotArray:"Die importierte JSON-Datei mu ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurck",pageSelected:"Ausgewhlte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"Eintrge pro Seite",totalItems:"Eintrgen",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu",column:"Column"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{aria:{selected:"Row selected",notSelected:"Row not selected"},placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",exporterAllAsExcel:"Export all data as excel",exporterVisibleAsExcel:"Export visible data as excel",exporterSelectedAsExcel:"Export selected data as excel",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es-ct",{headerCell:{aria:{defaultFilterLabel:"Filtre per columna",removeFilter:"Elimina el filtre",columnMenuButtonLabel:"Men de Columna",column:"Columna"},priority:"Priority:",filterLabel:"Filtre per columna: "},aggregate:{label:"items"},groupPanel:{description:"Arrossegueu una capalera de columna aqu i deixeu-lo anar per agrupar per aquesta columna."},search:{aria:{selected:"Fila seleccionada",notSelected:"Fila no seleccionada"},placeholder:"Cerca...",showingItems:"tems Mostrats:",selectedItems:"tems Seleccionats:",totalItems:"tems Totals:",size:"Mida de la pgina:",first:"Primera Pgina",next:"Propera Pgina",previous:"Pgina Anterior",last:"ltima Pgina"},menu:{text:"Triar Columnes:"},sort:{ascending:"Ordena Ascendent",descending:"Ordena Descendent",none:"Sense Ordre",remove:"Eliminar Ordre"},column:{hide:"Amaga la Columna"},aggregation:{count:"Files Totals: ",sum:"total: ",avg:"mitj: ",min:"mn: ",max:"mx: "},pinning:{pinLeft:"Fixar a l'Esquerra",pinRight:"Fixar a la Dreta",unpin:"Treure Fixaci"},columnMenu:{close:"Tanca"},gridMenu:{aria:{buttonLabel:"Men de Quadrcula"},columns:"Columnes:",importerTitle:"Importa el fitxer",exporterAllAsCsv:"Exporta tot com CSV",exporterVisibleAsCsv:"Exporta les dades visibles com a CSV",exporterSelectedAsCsv:"Exporta les dades seleccionades com a CSV",exporterAllAsPdf:"Exporta tot com PDF",exporterVisibleAsPdf:"Exporta les dades visibles com a PDF",exporterSelectedAsPdf:"Exporta les dades seleccionades com a PDF",exporterAllAsExcel:"Exporta tot com Excel",exporterVisibleAsExcel:"Exporta les dades visibles com Excel",exporterSelectedAsExcel:"Exporta les dades seleccionades com Excel",clearAllFilters:"Netejar tots els filtres"},importer:{noHeaders:"No va ser possible derivar els noms de les columnes, t encapalats l'arxiu?",noObjects:"No va ser possible obtenir registres, cont dades l'arxiu, a part de les capaleres?",invalidCsv:"No va ser possible processar l'arxiu, s un CSV vlid?",invalidJson:"No va ser possible processar l'arxiu, s un JSON vlid?",jsonNotArray:"El fitxer json importat ha de contenir una matriu, avortant."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"tems per pgina",totalItems:"tems",through:"a",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Compte",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Mx",aggregate_min:"Agr: Mn",aggregate_avg:"Agr: Mitj",aggregate_remove:"Agr: Treure"},validate:{error:"Error:",minLength:"El valor ha de tenir almenys carcters THRESHOLD.",maxLength:"El valor ha de tenir com a mxim carcters THRESHOLD.",required:"Un valor s necessari."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es",{aggregate:{label:"Artculos"},groupPanel:{description:"Arrastre un encabezado de columna aqu y sultelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artculos Mostrados:",selectedItems:"Artculos Seleccionados:",totalItems:"Artculos Totales:",size:"Tamao de Pgina:",first:"Primera Pgina",next:"Pgina Siguiente",previous:"Pgina Anterior",last:"ltima Pgina"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijacin"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar seleccin como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar seleccin como pdf",exporterAllAsExcel:"Exportar todo como excel",exporterVisibleAsExcel:"Exportar vista como excel",exporterSelectedAsExcel:"Exportar seleccin como excel",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, es un CSV vlido?",invalidJson:"No fue posible procesar el archivo, es un Json vlido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por pgina",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Mx",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fa",{aggregate:{label:""},groupPanel:{description:"            ."},search:{placeholder:"...",showingItems:" :",selectedItems:"  :",totalItems:" :",size:" :",first:" ",next:"",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:"  "},column:{hide:" "},aggregation:{count:": ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:"   ",pinRight:"   ",unpin:" "},gridMenu:{columns:":",importerTitle:"  ",exporterAllAsCsv:"     csv",exporterVisibleAsCsv:"      csv",exporterSelectedAsCsv:"     csv",exporterAllAsPdf:"     pdf",exporterVisibleAsPdf:"      pdf",exporterSelectedAsPdf:"     pdf",clearAllFilters:"   "},importer:{noHeaders:"    .    ",noObjects:"   .         ",invalidCsv:"   .    csv   ",invalidJson:"   .   json    ",jsonNotArray:" json      .   ."},pagination:{sizes:"   ",totalItems:"",of:""},grouping:{group:"",ungroup:" ",aggregate_count:"Agg: ",aggregate_sum:"Agg: ",aggregate_max:"Agg: ",aggregate_min:"Agg: ",aggregate_avg:"Agg: ",aggregate_remove:"Agg: "}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko thn ryhmittksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Nytetn rivej:",selectedItems:"Valitut rivit:",totalItems:"Rivej yht.:",size:"Nyt:",first:"Ensimminen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Jrjest nouseva",descending:"Jrjest laskeva",remove:"Poista jrjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivej yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie nkyv tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie nkyv tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",exporterAllAsExcel:"Vie tiedot excel-muodossa",exporterVisibleAsExcel:"Vie nkyv tieto excel-muodossa",exporterSelectedAsExcel:"Vie valittu tieto excel-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimi ei voitu ptell, onko tiedostossa otsikkorivi?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu ksitell, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu ksitell, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisltnyt taulukkoa, lopetetaan."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fr",{headerCell:{aria:{defaultFilterLabel:"Filtre de la colonne",removeFilter:"Supprimer le filtre",columnMenuButtonLabel:"Menu de la colonne"},priority:"Priorit:",filterLabel:"Filtre de la colonne: "},aggregate:{label:"lments"},groupPanel:{description:"Faites glisser une en-tte de colonne ici pour crer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des lments :",selectedItems:"lments slectionns :",totalItems:"Nombre total d'lments:",size:"Taille de page:",first:"Premire page",next:"Page Suivante",previous:"Page prcdente",last:"Dernire page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre dcroissant",none:"Aucun tri",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"pingler  gauche",pinRight:"pingler  droite",unpin:"Dtacher"},columnMenu:{close:"Fermer"},gridMenu:{aria:{buttonLabel:"Menu du tableau"},columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les donnes en CSV",exporterVisibleAsCsv:"Exporter les donnes visibles en CSV",exporterSelectedAsCsv:"Exporter les donnes slectionnes en CSV",exporterAllAsPdf:"Exporter toutes les donnes en PDF",exporterVisibleAsPdf:"Exporter les donnes visibles en PDF",exporterSelectedAsPdf:"Exporter les donnes slectionnes en PDF",exporterAllAsExcel:"Exporter toutes les donnes en Excel",exporterVisibleAsExcel:"Exporter les donnes visibles en Excel",exporterSelectedAsExcel:"Exporter les donnes slectionnes en Excel",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de dterminer le nom des colonnes, le fichier possde-t-il une en-tte ?",noObjects:"Aucun objet trouv, le fichier possde-t-il des donnes autres que l'en-tte ?",invalidCsv:"Le fichier n'a pas pu tre trait, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu tre trait, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON import doit contenir un tableau, abandon."},pagination:{aria:{pageToFirst:"Aller  la premire page",pageBack:"Page prcdente",pageSelected:"Page slectionne",pageForward:"Page suivante",pageToLast:"Aller  la dernire page"},sizes:"lments par page",totalItems:"lments",through:"",of:"sur"},grouping:{group:"Grouper",ungroup:"Dgrouper",aggregate_count:"Agg: Compter",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"},validate:{error:"Erreur:",minLength:"La valeur doit tre suprieure ou gale  THRESHOLD caractres.",maxLength:"La valeur doit tre infrieure ou gale  THRESHOLD caractres.",required:"Une valeur est ncssaire."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("he",{aggregate:{label:"items"},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:":",selectedItems:'" :',totalItems:'" :',size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:""},column:{hide:" "},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",exporterAllAsExcel:"Export all data as excel",exporterVisibleAsExcel:"Export visible data as excel",exporterSelectedAsExcel:"Export selected data as excel",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("hy",{aggregate:{label:""},groupPanel:{description:"        "},search:{placeholder:"...",showingItems:" ",selectedItems:":",totalItems:"",size:"  ",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:" "},column:{hide:" "},aggregation:{count:"  ",sum:" ",avg:" ",min:" ",max:" "},pinning:{pinLeft:"  ",pinRight:"  ",unpin:""},gridMenu:{columns:":",importerTitle:" ",exporterAllAsCsv:"  CSV",exporterVisibleAsCsv:"   CSV",exporterSelectedAsCsv:"   CSV",exporterAllAsPdf:" PDF",exporterVisibleAsPdf:"   PDF",exporterSelectedAsPdf:"   PDF",exporterAllAsExcel:" excel",exporterVisibleAsExcel:"   excel",exporterSelectedAsExcel:"   excel",clearAllFilters:"  "},importer:{noHeaders:"        ",noObjects:"       ",invalidCsv:"       CSV ",invalidJson:"       Json ",jsonNotArray:" json     ,  "}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("is",{headerCell:{aria:{defaultFilterLabel:"Sa fyrir dlk",removeFilter:"Fjarlgja su",columnMenuButtonLabel:"Dlkavalmynd"},priority:"Forgangsrun:",filterLabel:"Sa fyrir dlka: "},aggregate:{label:"hlutir"},groupPanel:{description:"Dragu dlkhaus hinga til a flokka saman eftir eim dlki."},search:{placeholder:"Leita...",showingItems:"Sni hluti:",selectedItems:"Valdir hlutir:",totalItems:"Hlutir alls:",size:"Str su:",first:"Fyrsta sa",next:"Nsta sa",previous:"Fyrri sa",last:"Sasta sa"},menu:{text:"Veldu dlka:"},sort:{ascending:"Raa hkkandi",descending:"Raa lkkandi",none:"Engin run",remove:"Fjarlgja run"},column:{hide:"Fela dlk"},aggregation:{count:"fjldi raa: ",sum:"summa: ",avg:"mealtal: ",min:"lgmark: ",max:"hmark: "},pinning:{pinLeft:"Festa til vinstri",pinRight:"Festa til hgri",unpin:"Losa"},columnMenu:{close:"Loka"},gridMenu:{aria:{buttonLabel:"Tflu valmynd"},columns:"Dlkar:",importerTitle:"Flytja inn skjal",exporterAllAsCsv:"Flytja t ggn sem csv",exporterVisibleAsCsv:"Flytja t snileg ggn sem csv",exporterSelectedAsCsv:"Flytja t valin ggn sem csv",exporterAllAsPdf:"Flytja t ll ggn sem pdf",exporterVisibleAsPdf:"Flytja t snileg ggn sem pdf",exporterSelectedAsPdf:"Flytja t valin ggn sem pdf",clearAllFilters:"Hreinsa allar sur"},importer:{noHeaders:"Ekki hgt a vinna dlkanfn r skjalinu, er skjali rugglega me haus?",noObjects:"Ekki hgt a vinna hluti r skjalinu, voru rugglega ggn  skjalinu nnur en hausinn?",invalidCsv:"Tkst ekki a vinna skjal, er a rggulega gilt CSV?",invalidJson:"Tkst ekki a vinna skjal, er a rugglega gilt Json?",jsonNotArray:"Innflutt json skjal verur a innihalda fylki, htti vi."},pagination:{aria:{pageToFirst:"Fletta a fyrstu",pageBack:"Fletta til baka",pageSelected:"Valin sa",pageForward:"Fletta fram",pageToLast:"Fletta a sustu"},sizes:"hlutir  su",totalItems:"hlutir",through:"gegnum",of:"af"},grouping:{group:"Flokka",ungroup:"Sundurlia",aggregate_count:"Fjldi: ",aggregate_sum:"Summa: ",aggregate_max:"Hmark: ",aggregate_min:"Lgmark: ",aggregate_avg:"Mealtal: ",aggregate_remove:"Fjarlgja: "},validate:{error:"Villa:",minLength:"Gildi tti a vera a.m.k. THRESHOLD stafa langt.",maxLength:"Gildi tti a vera  mesta lagi THRESHOLD stafa langt.",required:"arf a hafa gildi."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",
exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",exporterAllAsExcel:"Esporta tutti i dati in excel",exporterVisibleAsExcel:"Esporta i dati visibili in excel",exporterSelectedAsExcel:"Esporta i dati selezionati in excel",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},pagination:{aria:{pageToFirst:"Prima",pageBack:"Indietro",pageSelected:"Pagina selezionata",pageForward:"Avanti",pageToLast:"Ultima"},sizes:"elementi per pagina",totalItems:"elementi",through:"a",of:"di"},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ja",{headerCell:{aria:{defaultFilterLabel:"",removeFilter:"",columnMenuButtonLabel:""},priority:":",filterLabel:": "},aggregate:{label:""},groupPanel:{description:""},search:{placeholder:"...",showingItems:":",selectedItems:":",totalItems:":",size:":",first:"",next:"",previous:"",last:""},menu:{text:":"},sort:{ascending:"",descending:"",none:"",remove:""},column:{hide:""},aggregation:{count:": ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:"",pinRight:"",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:"/:",importerTitle:"",exporterAllAsCsv:"CSV",exporterVisibleAsCsv:"CSV",exporterSelectedAsCsv:"CSV",exporterAllAsPdf:"PDF",exporterVisibleAsPdf:"PDF",exporterSelectedAsPdf:"PDF",clearAllFilters:""},importer:{noHeaders:"",noObjects:"",invalidCsv:"CSV",invalidJson:"JSON",jsonNotArray:"JSON"},pagination:{aria:{pageToFirst:"",pageBack:"",pageSelected:"",pageForward:"",pageToLast:""},sizes:"/",totalItems:"",through:"",of:"/"},grouping:{group:"",ungroup:"",aggregate_count:": ",aggregate_sum:": ",aggregate_max:": ",aggregate_min:": ",aggregate_avg:": ",aggregate_remove:": "},validate:{error:"Error:",minLength:"THRESHOLD ",maxLength:"THRESHOLD ",required:""}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ko",{aggregate:{label:""},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:" :",size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:" ",pinRight:" ",unpin:" "},gridMenu:{columns:":",importerTitle:" ",exporterAllAsCsv:"csv   ",exporterVisibleAsCsv:"csv   ",exporterSelectedAsCsv:"csv   ",exporterAllAsPdf:"pdf   ",exporterVisibleAsPdf:"pdf   ",exporterSelectedAsPdf:"pdf   ",clearAllFilters:"  "},importer:{noHeaders:"   .      .",noObjects:"   .     .",invalidCsv:"   .  csv  .",invalidJson:"   .  json  .",jsonNotArray:"json    ."},pagination:{sizes:" ",totalItems:" "}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",exporterAllAsExcel:"Exporteer alle data als excel",exporterVisibleAsExcel:"Exporteer zichtbare data als excel",exporterSelectedAsExcel:"Exporteer alle data als excel",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("no",{headerCell:{aria:{defaultFilterLabel:"Filter for kolonne",removeFilter:"Fjern filter",columnMenuButtonLabel:"Kolonnemeny"},priority:"Prioritet:",filterLabel:"Filter for kolonne: "},aggregate:{label:"elementer"},groupPanel:{description:"Trekk en kolonneoverskrift hit og slipp den for  gruppere etter den kolonnen."},search:{placeholder:"Sk...",showingItems:"Viste elementer:",selectedItems:"Valgte elementer:",totalItems:"Antall elementer:",size:"Sidestrrelse:",first:"Frste side",next:"Neste side",previous:"Forrige side",last:"Siste side"},menu:{text:"Velg kolonner:"},sort:{ascending:"Sortere stigende",descending:"Sortere fallende",none:"Ingen sortering",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antall rader: ",sum:"total: ",avg:"gjennomsnitt: ",min:"minimum: ",max:"maksimum: "},pinning:{pinLeft:"Fest til venstre",pinRight:"Fest til hyre",unpin:"Lsne"},columnMenu:{close:"Lukk"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter utvalgte data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter utvalgte data som pdf",exporterAllAsExcel:"Eksporter alle data som excel",exporterVisibleAsExcel:"Eksporter synlige data som excel",exporterSelectedAsExcel:"Eksporter utvalgte data som excel",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Kolonnenavn kunne ikke avledes. Har filen en overskrift?",noObjects:"Objekter kunne ikke avledes. Er der andre data i filen enn overskriften?",invalidCsv:"Filen kunne ikke behandles. Er den gyldig CSV?",invalidJson:"Filen kunne ikke behandles. Er den gyldig JSON?",jsonNotArray:"Importert JSON-fil m inneholde en liste. Avbryter."},pagination:{aria:{pageToFirst:"G til frste side",pageBack:"G til forrige side",pageSelected:"Valgte side",pageForward:"G til neste side",pageToLast:"G til siste side"},sizes:"elementer per side",totalItems:"elementer",through:"til",of:"av"},grouping:{group:"Gruppere",ungroup:"Fjerne gruppering",aggregate_count:"Agr: Antall",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Maksimum",aggregate_min:"Agr: Minimum",aggregate_avg:"Agr: Gjennomsnitt",aggregate_remove:"Agr: Fjern"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filtr dla kolumny",removeFilter:"Usu filtr",columnMenuButtonLabel:"Opcje kolumny",column:"Kolumna"},priority:"Priorytet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{description:"Przecignij nagwek kolumny tutaj, aby pogrupowa wedug niej."},search:{aria:{selected:"Wiersz zaznaczony",notSelected:"Wiersz niezaznaczony"},placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"Nastpna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnco",descending:"Sortuj malejco",none:"Brak sortowania",remove:"Wycz sortowanie"},column:{hide:"Ukryj kolumn"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"rednia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Opcje tabeli"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",exporterAllAsExcel:"Eksportuj wszystkie dane do excel",exporterVisibleAsExcel:"Eksportuj widoczne dane do excel",exporterSelectedAsExcel:"Eksportuj zaznaczone dane do excel",clearAllFilters:"Wyczy filtry"},importer:{noHeaders:"Nie udao si wczyta nazw kolumn. Czy plik posiada nagwek?",noObjects:"Nie udalo si wczyta pozycji. Czy plik zawiera dane?",invalidCsv:"Nie udao si przetworzy pliku. Czy to prawidowy plik CSV?",invalidJson:"Nie udao si przetworzy pliku. Czy to prawidowy plik JSON?",jsonNotArray:"Importowany plik JSON musi zawiera tablic. Importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"Nastpna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stron",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: rednia",aggregate_remove:"Zbiorczo: Usu"},validate:{error:"Bd:",minLength:"Warto powinna skada si z co najmniej THRESHOLD znakw.",maxLength:"Warto powinna skada si z przynajmniej THRESHOLD znakw.",required:"Warto jest wymagana."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna",column:"Coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{aria:{selected:"Linha selecionada",notSelected:"Linha no est selecionada"},placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Pgina:",first:"Primeira Pgina",next:"Prxima Pgina",previous:"Pgina Anterior",last:"ltima Pgina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenao"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",exporterAllAsExcel:"Exportar todos os dados como excel",exporterVisibleAsExcel:"Exportar dados visveis como excel",exporterSelectedAsExcel:"Exportar dados selecionados como excel",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas no puderam ser derivados. O arquivo tem um cabealho?",noObjects:"Objetos no puderam ser derivados. Havia dados no arquivo, alm dos cabealhos?",invalidCsv:"Arquivo no pode ser processado.  um CSV vlido?",invalidJson:"Arquivo no pode ser processado.  um Json vlido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira pgina",pageBack:"Pgina anterior",pageSelected:"Pgina Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por pgina",totalItems:"itens",through:"atravs dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"},validate:{error:"Erro:",minLength:"O valor deve ter, no minimo, THRESHOLD caracteres.",maxLength:"O valor deve ter, no mximo, THRESHOLD caracteres.",required:"Um valor  necessrio."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna",column:"Coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{aria:{selected:"Linha selecionada",notSelected:"Linha no est selecionada"},placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Pgina:",first:"Primeira Pgina",next:"Prxima Pgina",previous:"Pgina Anterior",last:"ltima Pgina"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenao"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",exporterAllAsExcel:"Exportar todos os dados como excel",exporterVisibleAsExcel:"Exportar dados visveis como excel",exporterSelectedAsExcel:"Exportar dados selecionados como excel",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas no puderam ser derivados. O ficheiro tem um cabealho?",noObjects:"Objetos no puderam ser derivados. Havia dados no ficheiro, alm dos cabealhos?",invalidCsv:"Ficheiro no pode ser processado.  um CSV vlido?",invalidJson:"Ficheiro no pode ser processado.  um Json vlido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira pgina",pageBack:"Pgina anterior",pageSelected:"Pgina Selecionada",pageForward:"Prxima",pageToLast:"Anterior"},sizes:"itens por pgina",totalItems:"itens",through:"a",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"},validate:{error:"Erro:",minLength:"O valor deve ter, no minimo, THRESHOLD caracteres.",maxLength:"O valor deve ter, no mximo, THRESHOLD caracteres.",required:"Um valor  necessrio."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("rs-lat",{headerCell:{aria:{defaultFilterLabel:"Filter za kolonu",removeFilter:"Ukloni Filter",columnMenuButtonLabel:"Meni Kolone",column:"Kolona"},priority:"Prioritet:",filterLabel:"Filter za kolonu: "},aggregate:{label:"stavke"},groupPanel:{description:"Ovde prevuci zaglavlje kolone i spusti do grupe pored te kolone."},search:{aria:{selected:"Red odabran",notSelected:"Red nije odabran"},placeholder:"Pretraga...",showingItems:"Prikazane Stavke:",selectedItems:"Odabrane Stavke:",totalItems:"Ukupno Stavki:",size:"Veliina Stranice:",first:"Prva Stranica",next:"Sledea Stranica",previous:"Prethodna Stranica",last:"Poslednja Stranica"},menu:{text:"Odaberite kolonu:"},sort:{ascending:"Sortiraj po rastuem redosledu",descending:"Sortiraj po opadajuem redosledu",none:"Bez Sortiranja",remove:"Ukloni Sortiranje"},column:{hide:"Sakrij Kolonu"},aggregation:{count:"ukupno redova: ",sum:"ukupno: ",avg:"prosecno: ",min:"minimum: ",max:"maksimum: "},pinning:{pinLeft:"Zakai Levo",pinRight:"Zakai Desno",unpin:"Otkai"},columnMenu:{close:"Zatvori"},gridMenu:{aria:{buttonLabel:"Reetkasti Meni"},columns:"Kolone:",importerTitle:"Importuj fajl",exporterAllAsCsv:"Eksportuj sve podatke kao csv",exporterVisibleAsCsv:"Eksportuj vidljive podatke kao csv",exporterSelectedAsCsv:"Eksportuj obeleene podatke kao csv",exporterAllAsPdf:"Eksportuj sve podatke kao pdf",exporterVisibleAsPdf:"Eksportuj vidljive podake kao pdf",exporterSelectedAsPdf:"Eksportuj odabrane podatke kao pdf",exporterAllAsExcel:"Eksportuj sve podatke kao excel",exporterVisibleAsExcel:"Eksportuj vidljive podatke kao excel",exporterSelectedAsExcel:"Eksportuj odabrane podatke kao excel",clearAllFilters:"Obrii sve filtere"},importer:{noHeaders:"Kolone se nisu mogle podeliti, da li fajl poseduje heder?",noObjects:"Objecti nisu mogli biti podeljeni, da li je bilo i drugih podataka sem hedera?",invalidCsv:"Fajl nije bilo mogue procesirati, da li je ispravni CSV?",invalidJson:"Fajl nije bilo mogue procesirati, da li je ispravni JSON",jsonNotArray:"Importovani json fajl mora da sadri niz, prekidam operaciju."},pagination:{aria:{pageToFirst:"Prva stranica",pageBack:"Stranica pre",pageSelected:"Odabrana stranica",pageForward:"Sledea stranica",pageToLast:"Poslednja stranica"},sizes:"stavki po stranici",totalItems:"stavke",through:"kroz",of:"od"},grouping:{group:"Grupii",ungroup:"Odrupii",aggregate_count:"Agg: Broj",aggregate_sum:"Agg: Suma",aggregate_max:"Agg: Maksimum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Prosena",aggregate_remove:"Agg: Ukloni"},validate:{error:"Greka:",minLength:"Vrednost bi trebala da bude duga bar THRESHOLD karaktera.",maxLength:"Vrednost bi trebalo da bude najvie duga THRESHOLD karaktera.",required:"Portreba je vrednost."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ru",{headerCell:{aria:{defaultFilterLabel:" ",removeFilter:" ",columnMenuButtonLabel:" "},priority:":",filterLabel:" : "},aggregate:{label:""},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:" :",size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",none:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:" ",pinRight:" ",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:":",importerTitle:" ",exporterAllAsCsv:"   CSV",exporterVisibleAsCsv:"    CSV",exporterSelectedAsCsv:"    CSV",exporterAllAsPdf:"   PDF",exporterVisibleAsPdf:"    PDF",exporterSelectedAsPdf:"    PDF",clearAllFilters:"  "},importer:{noHeaders:"    ,     ?",noObjects:"   ,       ?",invalidCsv:"   ,   CSV-?",invalidJson:"   ,   JSON?",jsonNotArray:" JSON-   ,  ."},pagination:{aria:{pageToFirst:" ",pageBack:" ",pageSelected:" ",pageForward:" ",pageToLast:" "},sizes:"  ",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"",aggregate_count:": Count",aggregate_sum:" : ",aggregate_max:" : ",aggregate_min:" : ",aggregate_avg:" : ",aggregate_remove:" : "}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sk",{headerCell:{aria:{defaultFilterLabel:"Filter pre stpec",removeFilter:"Odstrni filter",columnMenuButtonLabel:"Menu pre stpec",column:"Stpec"},priority:"Priorita:",filterLabel:"Filter pre stpec: "},aggregate:{label:"poloky"},groupPanel:{description:"Pretiahni sem nzov stpca pre zoskupenie poda toho stpca."},search:{aria:{selected:"Oznaen riadok",notSelected:"Neoznaen riadok"},placeholder:"Hadaj...",showingItems:"Zobrazujem poloky:",selectedItems:"Vybrat poloky:",totalItems:"Poet poloiek:",size:"Poet:",first:"Prv strana",next:"alia strana",previous:"Predchdzajca strana",last:"Posledn strana"},menu:{text:"Vyberte stpce:"},sort:{ascending:"Zotriedi vzostupne",descending:"Zotriedi zostupne",none:"Nezotriedi",remove:"Vymaza triedenie"},column:{hide:"Skry stpec"},aggregation:{count:"poet riadkov: ",sum:"spolu: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pripn vavo",pinRight:"Pripn vpravo",unpin:"Odopn"},columnMenu:{close:"Zavrie"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Stpce:",importerTitle:"Importova sbor",exporterAllAsCsv:"Exportova vetky daje ako CSV",exporterVisibleAsCsv:"Exportov viditen daje ako CSV",exporterSelectedAsCsv:"Exportova oznaen daje ako CSV",exporterAllAsPdf:"Exportova vetky daje ako pdf",exporterVisibleAsPdf:"Exportova viditen daje ako pdf",exporterSelectedAsPdf:"Exportova oznaen daje ako pdf",exporterAllAsExcel:"Exportova vetky daje ako excel",exporterVisibleAsExcel:"Exportova viditen daje ako excel",exporterSelectedAsExcel:"Exportova oznaen daje ako excel",clearAllFilters:"Zrui vetky filtre"},importer:{noHeaders:"Nzvy stpcov sa nedali odvodi, m sbor hlaviku?",noObjects:"Objekty nebolo mon odvodi, existovali in daje v sbore ako hlaviky?",invalidCsv:"Sbor sa nepodarilo spracova, je to platn sbor CSV?",invalidJson:"Sbor nebolo mon spracova, je to platn sbor typu Json?",jsonNotArray:"Importovan sbor json mus obsahova pole, ukonujem."},pagination:{aria:{pageToFirst:"Strana na zaiatok",pageBack:"Strana dozadu",pageSelected:"Oznaen strana",pageForward:"Strana dopredu",pageToLast:"Strana na koniec"},sizes:"poloky na stranu",totalItems:"poloky spolu",through:"do konca",of:"z"},grouping:{group:"Zoskupi",ungroup:"Zrui zoskupenie",aggregate_count:"Agg: Poet",aggregate_sum:"Agg: Suma",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Zrui"},validate:{error:"Chyba:",minLength:"Hodnota by mala ma aspo THRESHOLD znakov dlh.",maxLength:"Hodnota by mala by maximlne THRESHOLD znakov dlh.",required:"Vyaduje sa hodnota."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och slpp den fr att gruppera efter den kolumnen."},search:{placeholder:"Sk...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Frsta sidan",next:"Nsta sida",previous:"Fregende sida",last:"Sista sidan"},menu:{text:"Vlj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Gm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fst vnster",pinRight:"Fst hger",unpin:"Lsgr"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"Rengr alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte hrledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte hrledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, r den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, r den en giltig JSON?",jsonNotArray:"Importerad JSON-fil mste innehlla ett flt. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ta",{aggregate:{label:""},groupPanel:{description:"          "},search:{placeholder:" ...",showingItems:" :",selectedItems:"  :",totalItems:" :",size:" : ",first:" ",next:" ",previous:"  ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",remove:" "},column:{hide:"   "},aggregation:{count:" :",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:"  ",pinRight:" ",unpin:""},gridMenu:{columns:":",importerTitle:" : ",exporterAllAsCsv:"  : csv",exporterVisibleAsCsv:"  : csv",exporterSelectedAsCsv:"  : csv",exporterAllAsPdf:"  : pdf",exporterVisibleAsPdf:"  : pdf",exporterSelectedAsPdf:"  : pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"   ,   ?",noObjects:"  ,      ? ",invalidCsv:"   ,  ? - csv",invalidJson:"   ,  ? - json",jsonNotArray:"   ,    : json"},pagination:{sizes:" / ",totalItems:" "},grouping:{group:"",ungroup:"",aggregate_count:" : ",aggregate_sum:" : ",
aggregate_max:" : ",aggregate_min:" : ",aggregate_avg:" : ",aggregate_remove:" : "}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("tr",{headerCell:{aria:{defaultFilterLabel:"Stun iin filtre",removeFilter:"Filtreyi Kaldr",columnMenuButtonLabel:"Stun Mens"},priority:"ncelik:",filterLabel:"Stun iin filtre: "},aggregate:{label:"kaytlar"},groupPanel:{description:"Stuna gre gruplamak iin stun baln buraya srkleyin ve brakn."},search:{placeholder:"Arama...",showingItems:"Gsterilen Kayt:",selectedItems:"Seili Kayt:",totalItems:"Toplam Kayt:",size:"Sayfa Boyutu:",first:"lk Sayfa",next:"Sonraki Sayfa",previous:"nceki Sayfa",last:"Son Sayfa"},menu:{text:"Stunlar Se:"},sort:{ascending:"Artan Srada Srala",descending:"Azalan Srada Srala",none:"Sralama Yapma",remove:"Sralamay Kaldr"},column:{hide:"Stunu Gizle"},aggregation:{count:"toplam satr: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"Saa Sabitle",unpin:"Sabitlemeyi Kaldr"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo Men"},columns:"Stunlar:",importerTitle:"Dosya ieri aktar",exporterAllAsCsv:"Btn veriyi CSV olarak dar aktar",exporterVisibleAsCsv:"Grnen veriyi CSV olarak dar aktar",exporterSelectedAsCsv:"Seili veriyi CSV olarak dar aktar",exporterAllAsPdf:"Btn veriyi PDF olarak dar aktar",exporterVisibleAsPdf:"Grnen veriyi PDF olarak dar aktar",exporterSelectedAsPdf:"Seili veriyi PDF olarak dar aktar",clearAllFilters:"Btn filtreleri kaldr"},importer:{noHeaders:"Stun isimleri retilemiyor, dosyann bir bal var m?",noObjects:"Nesneler retilemiyor, dosyada balktan baka bir veri var m?",invalidCsv:"Dosya ilenemedi, geerli bir CSV dosyas m?",invalidJson:"Dosya ilenemedi, geerli bir Json dosyas m?",jsonNotArray:"Alnan Json dosyasnda bir dizi bulunmaldr, ilem iptal ediliyor."},pagination:{aria:{pageToFirst:"lk sayfaya",pageBack:"Geri git",pageSelected:"Seili sayfa",pageForward:"leri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne says",totalItems:"kaytlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: Say",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ua",{headerCell:{aria:{defaultFilterLabel:" ",removeFilter:" ",columnMenuButtonLabel:" "},priority:":",filterLabel:" : "},aggregate:{label:""},groupPanel:{description:"       ."},search:{placeholder:"...",showingItems:" :",selectedItems:" :",totalItems:" :",size:" :",first:" ",next:" ",previous:" ",last:" "},menu:{text:" :"},sort:{ascending:" ",descending:" ",none:" ",remove:" "},column:{hide:" "},aggregation:{count:" : ",sum:": ",avg:": ",min:": ",max:": "},pinning:{pinLeft:" ",pinRight:" ",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:":",importerTitle:" ",exporterAllAsCsv:"   CSV",exporterVisibleAsCsv:"    CSV",exporterSelectedAsCsv:"    CSV",exporterAllAsPdf:"   PDF",exporterVisibleAsPdf:"    PDF",exporterSelectedAsPdf:"    PDF",clearAllFilters:"  "},importer:{noHeaders:"    ,     ?",noObjects:"   ,       ?",invalidCsv:"   ,    CSV-?",invalidJson:"   ,    JSON?",jsonNotArray:"JSON-     ,  ."},pagination:{aria:{pageToFirst:" ",pageBack:" ",pageSelected:" ",pageForward:" ",pageToLast:" "},sizes:"  ",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"",aggregate_count:": ",aggregate_sum:" : ",aggregate_max:" : ",aggregate_min:" : ",aggregate_avg:" : ",aggregate_remove:" : "}}),a}])}])}(),function(){function a(a,b){return{compile:function(){return{pre:function(c,d,e){var f=b.LOCALE_DIRECTIVE_ALIAS,g=c.$eval(e[f]);g?c.$watch(e[f],function(){a.setCurrentLang(g)}):e.$$observers&&e.$observe(f,function(){a.setCurrentLang(e[f]||b.DEFAULT_LANG)})}}}}}function b(a,b){return{restrict:"EA",compile:function(){return{pre:function(c,e,f){function g(b){var c=a.getSafeText(b);e.html(c)}var h,i,j,k=d[0],l=d[1],m=f[k]||f[l]||e.html();f.$$observers&&(j=f[k]?k:l,i=f.$observe(j,function(a){a&&g(a)})),h=c.$on(b.UPDATE_EVENT,function(){i?i(f[k]||f[l]):g(m)}),c.$on("$destroy",h),g(m)}}}}}function c(a){return function(b,c){return a.getSafeText(b,c)}}var d=["uiT","uiTranslate"],e=["t","uiTranslate"],f=angular.module("ui.grid.i18n");f.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),f.service("i18nService",["$log","$parse","i18nConstants","$rootScope",function(a,b,c,d){var e={_langs:{},current:null,fallback:c.DEFAULT_LANG,get:function(a){var b=this,c=b.getFallbackLang();return a!==b.fallback?angular.extend({},b._langs[c],b._langs[a.toLowerCase()]):b._langs[a.toLowerCase()]},add:function(a,b){var c=a.toLowerCase();this._langs[c]||(this._langs[c]={}),angular.merge(this._langs[c],b)},getAllLangs:function(){var a=[];if(!this._langs)return a;for(var b in this._langs)a.push(b);return a},setCurrent:function(a){this.current=a.toLowerCase()},setFallback:function(a){this.fallback=a.toLowerCase()},getCurrentLang:function(){return this.current},getFallbackLang:function(){return this.fallback.toLowerCase()}},f={add:function(a,b){"object"==typeof a?angular.forEach(a,function(a){a&&e.add(a,b)}):e.add(a,b)},getAllLangs:function(){return e.getAllLangs()},get:function(a){var b=a||f.getCurrentLang();return e.get(b)},getSafeText:function(a,d){var g=d||f.getCurrentLang(),h=e.get(g),i=c.MISSING+a,j=b(a);return h?j(h)||i:i},setCurrentLang:function(a){a&&(e.setCurrent(a),d.$broadcast(c.UPDATE_EVENT))},setFallbackLang:function(a){a&&e.setFallback(a)},getCurrentLang:function(){var a=e.getCurrentLang();return a||(a=c.DEFAULT_LANG,e.setCurrent(a)),a},getFallbackLang:function(){return e.getFallbackLang()}};return f}]),f.directive("uiI18n",["i18nService","i18nConstants",a]),angular.forEach(d,function(a){f.directive(a,["i18nService","i18nConstants",b])}),angular.forEach(e,function(a){f.filter(a,["i18nService",c])})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"",removeFilter:"",columnMenuButtonLabel:""},priority:":",filterLabel:": "},aggregate:{label:""},groupPanel:{description:""},search:{placeholder:"",showingItems:"",selectedItems:"",totalItems:"",size:"",first:"",next:"",previous:"",last:""},menu:{text:""},sort:{ascending:"",descending:"",none:"",remove:""},column:{hide:""},aggregation:{count:"",sum:"",avg:"",min:"",max:""},pinning:{pinLeft:"",pinRight:"",unpin:""},columnMenu:{close:""},gridMenu:{aria:{buttonLabel:""},columns:"",importerTitle:"",exporterAllAsCsv:"CSV",exporterVisibleAsCsv:"CSV",exporterSelectedAsCsv:"CSV",exporterAllAsPdf:"PDF",exporterVisibleAsPdf:"PDF",exporterSelectedAsPdf:"PDF",clearAllFilters:""},importer:{noHeaders:"",noObjects:"",invalidCsv:"CSV",invalidJson:"JSON",jsonNotArray:"JSON"},pagination:{aria:{pageToFirst:"",pageBack:"",pageSelected:"",pageForward:"",pageToLast:""},sizes:"",totalItems:"",through:"",of:""},grouping:{group:"",ungroup:"",aggregate_count:": ",aggregate_sum:": ",aggregate_max:": ",aggregate_min:": ",aggregate_avg:": ",aggregate_remove:": "}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-tw",{aggregate:{label:""},groupPanel:{description:""},search:{placeholder:"",showingItems:"",selectedItems:"",totalItems:"",size:"",first:"",next:"",previous:"",last:""},menu:{text:""},sort:{ascending:"",descending:"",remove:""},column:{hide:""},aggregation:{count:"",sum:"",avg:"",min:"",max:""},pinning:{pinLeft:"",pinRight:"",unpin:""},gridMenu:{columns:"",importerTitle:"",exporterAllAsCsv:"CSV",exporterVisibleAsCsv:"CSV",exporterSelectedAsCsv:"CSV",exporterAllAsPdf:"PDF",exporterVisibleAsPdf:"PDF",exporterSelectedAsPdf:"PDF",clearAllFilters:""},importer:{noHeaders:"",noObjects:"",invalidCsv:"CSV",invalidJson:"JSON",jsonNotArray:"JSON"},pagination:{sizes:"",totalItems:""}}),a}])}])}(),function(){angular.module("ui.grid.autoResize",["ui.grid"]).directive("uiGridAutoResize",["gridUtil",function(a){return{require:"uiGrid",scope:!1,link:function(b,c,d,e){function f(){return{width:a.elementWidth(c),height:a.elementHeight(c)}}function g(a,b,d,f){null!==c[0].offsetParent&&(e.grid.gridWidth=d,e.grid.gridHeight=f,e.grid.queueGridRefresh().then(function(){e.grid.api.core.raise.gridDimensionChanged(b,a,f,d)}))}var h;h=a.debounce(g,400),b.$watchCollection(f,function(a,b){angular.equals(a,b)||h(b.width,b.height,a.width,a.height)})}}}])}(),function(){var a=angular.module("ui.grid.cellNav",["ui.grid"]);a.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),a.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(a,b,c,d,e){var f=function(a,b,c,d){this.rows=a.visibleRowCache,this.columns=b.visibleColumnCache,this.leftColumns=c?c.visibleColumnCache:[],this.rightColumns=d?d.visibleColumnCache:[],this.bodyContainer=a};return f.prototype.getFocusableCols=function(){return this.leftColumns.concat(this.columns,this.rightColumns).filter(function(a){return a.colDef.allowCellFocus})},f.prototype.getFocusableRows=function(){return this.rows.filter(function(a){return!1!==a.allowCellFocus})},f.prototype.getNextRowCol=function(a,b,d){switch(a){case c.direction.LEFT:return this.getRowColLeft(b,d);case c.direction.RIGHT:return this.getRowColRight(b,d);case c.direction.UP:return this.getRowColUp(b,d);case c.direction.DOWN:return this.getRowColDown(b,d);case c.direction.PG_UP:return this.getRowColPageUp(b,d);case c.direction.PG_DOWN:return this.getRowColPageDown(b,d)}},f.prototype.initializeSelection=function(){var a=this.getFocusableCols(),b=this.getFocusableRows();return 0===a.length||0===b.length?null:new d(b[0],a[0])},f.prototype.getRowColLeft=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=1);var h=0===f?c.length-1:f-1;return h>=f?0===g?new d(a,c[h]):new d(e[g-1],c[h]):new d(a,c[h])},f.prototype.getRowColRight=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=f===c.length-1?0:f+1;return h<=f?g===e.length-1?new d(a,c[h]):new d(e[g+1],c[h]):new d(a,c[h])},f.prototype.getRowColDown=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);return-1===f&&(f=0),g===e.length-1?new d(a,c[f]):new d(e[g+1],c[f])},f.prototype.getRowColPageDown=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return g>=e.length-h?new d(e[e.length-1],c[f]):new d(e[g+h],c[f])},f.prototype.getRowColUp=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);return-1===f&&(f=0),0===g?new d(a,c[f]):new d(e[g-1],c[f])},f.prototype.getRowColPageUp=function(a,b){var c=this.getFocusableCols(),e=this.getFocusableRows(),f=c.indexOf(b),g=e.indexOf(a);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return g-h<0?new d(e[0],c[f]):new d(e[g-h],c[f])},f}]),a.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a){a.registerColumnBuilder(h.cellNavColumnBuilder),a.cellNav={},a.cellNav.lastRowCol=null,a.cellNav.focusedCells=[],h.defaultGridOptions(a.options);var b={events:{cellNav:{navigate:function(a,b){},viewPortKeyDown:function(a,b){},viewPortKeyPress:function(a,b){}}},methods:{cellNav:{scrollToFocus:function(b,c){return h.scrollToFocus(a,b,c)},getFocusedCell:function(){return a.cellNav.lastRowCol},getCurrentSelection:function(){return a.cellNav.focusedCells},rowColSelectIndex:function(b){for(var c=-1,d=0;d<a.cellNav.focusedCells.length;d++)if(a.cellNav.focusedCells[d].col.uid===b.col.uid&&a.cellNav.focusedCells[d].row.uid===b.row.uid){c=d;break}return c}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.modifierKeysToMultiSelectCells=!0===a.modifierKeysToMultiSelectCells,a.keyDownOverrides=a.keyDownOverrides||[]},decorateRenderContainers:function(a){var b=a.hasRightContainer()?a.renderContainers.right:null,c=a.hasLeftContainer()?a.renderContainers.left:null;null!==c&&(a.renderContainers.left.cellNav=new e(a.renderContainers.body,c,b,a.renderContainers.body)),null!==b&&(a.renderContainers.right.cellNav=new e(a.renderContainers.body,b,a.renderContainers.body,c)),a.renderContainers.body.cellNav=new e(a.renderContainers.body,a.renderContainers.body,c,b)},getDirection:function(a){return a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey?c.direction.LEFT:a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB?c.direction.RIGHT:a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey?c.direction.UP:a.keyCode===b.keymap.PG_UP?c.direction.PG_UP:a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER&&!a.ctrlKey&&!a.altKey?c.direction.DOWN:a.keyCode===b.keymap.PG_DOWN?c.direction.PG_DOWN:null},cellNavColumnBuilder:function(a,b,c){var e=[];return a.allowCellFocus=void 0===a.allowCellFocus||a.allowCellFocus,d.all(e)},scrollToFocus:function(a,b,c){var d=null,e=null;return void 0!==b&&null!==b&&(d=a.getRow(b)),void 0!==c&&null!==c&&(e=a.getColumn(c.name?c.name:c.field)),a.api.core.scrollToIfNecessary(d,e).then(function(){var b={row:d,col:e};null!==d&&null!==e&&a.cellNav.broadcastCellNav(b,null,null)})},getLeftWidth:function(a,b){var c=0;if(!b)return c;var d=a.renderContainers.body.visibleColumnCache.indexOf(b);a.renderContainers.body.visibleColumnCache.forEach(function(a,b){b<d&&(c+=a.drawnWidth)});var e=0===d?0:(d+1)/a.renderContainers.body.visibleColumnCache.length;return c+=b.drawnWidth*e}};return h}]),a.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile","i18nService",function(a,b,c,d,e,f,g,h){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(a,f,g,h){var i=a,j=h.grid;b.initializeGrid(j),h.cellNav={},h.cellNav.makeRowCol=function(a){return a instanceof e||(a=new e(a.row,a.col)),a},h.cellNav.getActiveCell=function(){var a=f[0].getElementsByClassName("ui-grid-cell-focus");if(a.length>0)return a[0]},h.cellNav.broadcastCellNav=j.cellNav.broadcastCellNav=function(a,b,d){b=!(void 0===b||!b),a=h.cellNav.makeRowCol(a),h.cellNav.broadcastFocus(a,b,d),i.$broadcast(c.CELL_NAV_EVENT,a,b,d)},h.cellNav.clearFocus=j.cellNav.clearFocus=function(){j.cellNav.focusedCells=[],i.$broadcast(c.CELL_NAV_EVENT)},h.cellNav.broadcastFocus=function(a,b,c){b=!(void 0===b||!b),a=h.cellNav.makeRowCol(a);var d=a.row,f=a.col,g=h.grid.api.cellNav.rowColSelectIndex(a);if(null===j.cellNav.lastRowCol||-1===g||j.cellNav.lastRowCol.col===f&&j.cellNav.lastRowCol.row===d){var i=new e(d,f);(null===j.cellNav.lastRowCol||j.cellNav.lastRowCol.row!==i.row||j.cellNav.lastRowCol.col!==i.col||j.options.enableCellEditOnFocus)&&(j.api.cellNav.raise.navigate(i,j.cellNav.lastRowCol,c),j.cellNav.lastRowCol=i),h.grid.options.modifierKeysToMultiSelectCells&&b?j.cellNav.focusedCells.push(a):j.cellNav.focusedCells=[a]}else j.options.modifierKeysToMultiSelectCells&&b&&g>=0&&j.cellNav.focusedCells.splice(g,1)},h.cellNav.handleKeyDown=function(a){var e=b.getDirection(a);if(null===e)return null;var f="body";a.uiGridTargetRenderContainerId&&(f=a.uiGridTargetRenderContainerId);var g=h.grid.api.cellNav.getFocusedCell();if(g){var i=h.grid.renderContainers[f].cellNav.getNextRowCol(e,g.row,g.col),k=h.grid.renderContainers[f].cellNav.getFocusableCols(),l=h.grid.api.cellNav.rowColSelectIndex(i);return e===c.direction.LEFT&&i.col===k[k.length-1]&&i.row===g.row&&a.keyCode===d.keymap.TAB&&a.shiftKey?(j.cellNav.focusedCells.splice(l,1),h.cellNav.clearFocus(),!0):e!==c.direction.RIGHT||i.col!==k[0]||i.row!==g.row||a.keyCode!==d.keymap.TAB||a.shiftKey?(j.scrollToIfNecessary(i.row,i.col).then(function(){h.cellNav.broadcastCellNav(i,null,a)}),a.stopPropagation(),a.preventDefault(),!1):(j.cellNav.focusedCells.splice(l,1),h.cellNav.clearFocus(),!0)}}},post:function(a,b,d,e){function f(){var d='<div id="'+i.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="alert" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',e=g(d)(a);b.prepend(e),a.$on(c.CELL_NAV_EVENT,function(a,b,c,d){function f(a){a!==e.text().trim()&&(e[0].style.clip="rect(0px,0px,0px,0px)",e[0].innerHTML="",e[0].style.visibility="hidden",e[0].style.visibility="visible",""!==a&&(e[0].style.clip="auto",e[0].appendChild(document.createTextNode(a+" ")),e[0].style.visibility="hidden",e[0].style.visibility="visible"))}function g(a){return", "+h.getSafeText("headerCell.aria.column")+" "+a.displayName}function j(a){return"selectionRowHeaderCol"===a.col.field?a.row.isSelected?h.getSafeText("search.aria.selected"):h.getSafeText("search.aria.notSelected"):i.getCellDisplayValue(a.row,a.col)}if(!d||"focus"!==d.type){for(var k=[],l=i.api.cellNav.getCurrentSelection(),m=0;m<l.length;m++){var n=j(l[m])+g(l[m].col);k.push(n)}f(k.toString())}})}var i=e.grid,j=!0;try{angular.module("ngAria")}catch(a){j=!1}j&&f()}}}}}]),a.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function(a,b,c,d,e,f,g){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(b,d,h,i){var j=i[0],k=i[1],l=i[2];if(j.grid.api.cellNav){var m=k.containerId,n=j.grid;if(e.decorateRenderContainers(n),"body"===m){j.grid.options.modifierKeysToMultiSelectCells?d.attr("aria-multiselectable",!0):d.attr("aria-multiselectable",!1);var o=f('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+n.id+"-aria-speakable "+n.id+'-grid-container" aria-owns="'+n.id+'-grid-container"></div>')(b);d.append(o),o.on("focus",function(a){a.uiGridTargetRenderContainerId=m;var b=j.grid.api.cellNav.getFocusedCell();null===b&&(b=j.grid.renderContainers[m].cellNav.getNextRowCol(g.direction.DOWN,null,null),b.row&&b.col&&j.cellNav.broadcastCellNav(b))}),l.setAriaActivedescendant=function(a){d.attr("aria-activedescendant",a)},l.removeAriaActivedescendant=function(a){d.attr("aria-activedescendant")===a&&d.attr("aria-activedescendant","")},j.focus=function(){c.focus.byElement(o[0])};var p=null;o.on("keydown",function(a){a.uiGridTargetRenderContainerId=m;var b=j.grid.api.cellNav.getFocusedCell();null===(j.grid.options.keyDownOverrides.some(function(b){return Object.keys(b).every(function(c){return b[c]===a[c]})})?null:j.cellNav.handleKeyDown(a))&&(j.grid.api.cellNav.raise.viewPortKeyDown(a,b,j.cellNav.handleKeyDown),p=b)}),o.on("keypress",function(b){p&&(a(function(){j.grid.api.cellNav.raise.viewPortKeyPress(b,p)},4),p=null)}),b.$on("$destroy",function(){o.off()})}}}}}}}]),a.directive("uiGridViewport",function(){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(a,b,c,d){},post:function(a,b,c,d){var e=d[0],f=d[1];if(e.grid.api.cellNav){if("body"===f.containerId){var g=e.grid;g.api.core.on.scrollBegin(a,function(){var a=e.grid.api.cellNav.getFocusedCell();null!==a&&f.colContainer.containsColumn(a.col)&&e.cellNav.clearFocus()}),g.api.core.on.scrollEnd(a,function(a){var b=e.grid.api.cellNav.getFocusedCell();null!==b&&f.colContainer.containsColumn(b.col)&&e.cellNav.broadcastCellNav(b)}),g.api.cellNav.on.navigate(a,function(){e.focus()})}}}}}}}),a.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function(a,b,c,d,e,f,g){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function(a,b,c,d){function h(a){a.preventDefault()}function i(){n.cellNav.focusedCells.some(function(b,c){return b.row===a.row&&b.col===a.col})?j():k()}function j(){if(!a.focused){b.find("div").addClass("ui-grid-cell-focus"),b.attr("aria-selected",!0),m.setAriaActivedescendant(b.attr("id")),a.focused=!0}}function k(){if(a.focused){b.find("div").removeClass("ui-grid-cell-focus"),b.attr("aria-selected",!1),m.removeAriaActivedescendant(b.attr("id")),a.focused=!1}}var l=d[0],m=d[1];if(l.grid.api.cellNav&&a.col.colDef.allowCellFocus){var n=l.grid;a.focused=!1,b.attr("tabindex",-1),b.find("div").on("click",function(b){l.cellNav.broadcastCellNav(new g(a.row,a.col),b.ctrlKey||b.metaKey,b),b.stopPropagation(),a.$apply()}),b.on("mousedown",h),l.grid.api.edit&&(l.grid.api.edit.on.beginCellEdit(a,function(){b.off("mousedown",h)}),l.grid.api.edit.on.afterCellEdit(a,function(){b.on("mousedown",h)}),l.grid.api.edit.on.cancelCellEdit(a,function(){b.on("mousedown",h)})),i(),b.on("focus",function(b){l.cellNav.broadcastCellNav(new g(a.row,a.col),!1,b),b.stopPropagation(),a.$apply()}),a.$on(e.CELL_NAV_EVENT,i);var o=l.grid.registerDataChangeCallback(function(b){k(),a.$applyAsync(i)},[f.dataChange.ROW]);a.$on("$destroy",function(){o(),b.find("div").off(),b.off()})}}}}])}(),function(){var a=angular.module("ui.grid.edit",["ui.grid"]);a.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),a.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(a,b,c){var d={initializeGrid:function(a){d.defaultGridOptions(a.options),a.registerColumnBuilder(d.editColumnBuilder),a.edit={};var b={events:{edit:{afterCellEdit:function(a,b,c,d){},beginCellEdit:function(a,b,c){},cancelCellEdit:function(a,b){}}},methods:{edit:{}}};a.api.registerEventsFromObject(b.events)},defaultGridOptions:function(a){a.cellEditableCondition=void 0===a.cellEditableCondition||a.cellEditableCondition,a.enableCellEditOnFocus=void 0!==a.enableCellEditOnFocus&&a.enableCellEditOnFocus},editColumnBuilder:function(b,d,e){var f=[];return b.enableCellEdit=void 0===b.enableCellEdit?void 0===e.enableCellEdit?"object"!==b.type:e.enableCellEdit:b.enableCellEdit,b.cellEditableCondition=void 0===b.cellEditableCondition?e.cellEditableCondition:b.cellEditableCondition,b.enableCellEdit&&(b.editableCellTemplate=b.editableCellTemplate||e.editableCellTemplate||"ui-grid/cellEditor",f.push(c.getTemplate(b.editableCellTemplate).then(function(a){d.editableCellTemplate=a},function(a){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+b.editableCellTemplate+"'")}))),b.enableCellEditOnFocus=void 0===b.enableCellEditOnFocus?e.enableCellEditOnFocus:b.enableCellEditOnFocus,a.all(f)},isStartEditKey:function(a){return!(a.metaKey||a.keyCode===b.keymap.ESC||a.keyCode===b.keymap.SHIFT||a.keyCode===b.keymap.CTRL||a.keyCode===b.keymap.ALT||a.keyCode===b.keymap.WIN||a.keyCode===b.keymap.CAPSLOCK||a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey||a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB||a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey||a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER)}};return d}]),a.directive("uiGridEdit",["gridUtil","uiGridEditService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["uiGridEditConstants",function(a){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(b,c,d,e){var f=e[0];if(f.grid.api.edit&&f.grid.api.cellNav){"body"===e[1].containerId&&(b.$on(a.events.CANCEL_CELL_EDIT,function(){f.focus()}),b.$on(a.events.END_CELL_EDIT,function(){f.focus()}))}}}}}}]),a.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function(a,b,c,d,e,f,g,h,i,j){var k=500;if(b.has("uiGridCellNavService")){b.get("uiGridCellNavService")}return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(b,l,m,n){function o(){l.on("dblclick",u),l.on("touchstart",p),n&&n.grid.api.cellNav&&(G=n.grid.api.cellNav.on.viewPortKeyDown(b,function(a,c){null!==c&&(c.row!==b.row||c.col!==b.col||b.col.colDef.enableCellEditOnFocus||s(a))}),F=n.grid.api.cellNav.on.navigate(b,function(a,d,e){b.col.colDef.enableCellEditOnFocus&&(a.row!==b.row||a.col!==b.col||null!==e&&(!e||"click"!==e.type&&"keydown"!==e.type)||c(function(){u(e)}))})),b.beginEditEventsWired=!0}function p(a){void 0!==a.originalEvent&&void 0!==a.originalEvent&&(a=a.originalEvent),l.on("touchend",q),C=c(function(){},k),C.then(function(){setTimeout(u,0),l.off("touchend",q)})}function q(){c.cancel(C),l.off("touchend",q)}function r(){l.off("dblclick",u),l.off("keydown",s),l.off("touchstart",p),F(),G(),b.beginEditEventsWired=!1}function s(a){h.isStartEditKey(a)&&u(a)}function t(a,c,d){return!c.isSaving&&(angular.isFunction(a.colDef.cellEditableCondition)?a.colDef.cellEditableCondition(b,d):a.colDef.cellEditableCondition)}function u(a){b.grid.api.core.scrollToIfNecessary(b.row,b.col).then(function(){v(a)})}function v(h){if(!E&&t(b.col,b.row,h)){var k=b.row.getQualifiedColField(b.col);b.col.colDef.editModelField&&(k=f.preEval("row.entity."+b.col.colDef.editModelField)),B=g(k),A=B(b),z=b.col.editableCellTemplate,z=z.replace(d.MODEL_COL_FIELD,k),z=z.replace(d.COL_FIELD,"grid.getCellValue(row, col)");var m=b.col.colDef.editDropdownFilter?"|"+b.col.colDef.editDropdownFilter:"";z=z.replace(d.CUSTOM_FILTERS,m);var n="text";switch(b.col.colDef.type){case"boolean":n="checkbox";break;case"number":n="number";break;case"date":n="date"}z=z.replace("INPUT_TYPE",n);var o=b.col.colDef.editDropdownOptionsFunction;if(o)j.when(o(b.row.entity,b.col.colDef)).then(function(a){b.editDropdownOptionsArray=a});else{var p=b.col.colDef.editDropdownRowEntityOptionsArrayPath;b.editDropdownOptionsArray=p?y(b.row.entity,p):b.col.colDef.editDropdownOptionsArray}b.editDropdownIdLabel=b.col.colDef.editDropdownIdLabel?b.col.colDef.editDropdownIdLabel:"id",b.editDropdownValueLabel=b.col.colDef.editDropdownValueLabel?b.col.colDef.editDropdownValueLabel:"value";var q=function(){E=!0,r();var c=angular.element(z);l.append(c),D=b.$new(),a(c)(D),angular.element(l.children()[0]).addClass("ui-grid-cell-contents-hidden")};i.$$phase?q():b.$apply(q);var s=b.col.grid.api.core.on.scrollBegin(b,function(){b.grid.disableScrolling||(w(),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,B(b),A),s(),u(),v())}),u=b.$on(e.events.END_CELL_EDIT,function(){w(),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,B(b),A),u(),s(),v()}),v=b.$on(e.events.CANCEL_CELL_EDIT,function(){x(),v(),s(),u()});b.$broadcast(e.events.BEGIN_CELL_EDIT,h),c(function(){b.grid.api.edit.raise.beginCellEdit(b.row.entity,b.col.colDef,h)})}}function w(){if(b.grid.disableScrolling=!1,E){n&&n.grid.api.cellNav&&n.focus();var a=angular.element(l.children()[0]);D.$destroy();for(var c=l.children(),e=1;e<c.length;e++)angular.element(c[e]).remove();a.removeClass("ui-grid-cell-contents-hidden"),E=!1,o(),b.grid.api.core.notifyDataChange(d.dataChange.EDIT)}}function x(){b.grid.disableScrolling=!1,E&&(B.assign(b,A),b.$apply(),b.grid.api.edit.raise.cancelCellEdit(b.row.entity,b.col.colDef),w())}function y(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split(".");c.length;){var d=c.shift();if(!(d in a))return;a=a[d]}return a}var z,A,B,C,D,E=!1;if(b.col.colDef.enableCellEdit){var F=function(){},G=function(){},H=function(){b.col.colDef.enableCellEdit&&!1!==b.row.enableCellEdit?b.beginEditEventsWired||o():b.beginEditEventsWired&&r()};H();var I=b.$watch("row",function(a,b){a!==b&&H()});b.$on("$destroy",function(){I(),l.off()})}}}}]),a.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(a,b,c,d,e){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function(a,b,c){},post:function(a,f,g,h){var i,j,k;h[0]&&(i=h[0]),h[1]&&(j=h[1]),h[2]&&(k=h[2]),a.$on(c.events.BEGIN_CELL_EDIT,function(){if(d(function(){if(f[0].focus(),!f[0].select||!a.col.colDef.enableCellEditOnFocus&&i&&i.grid.api.cellNav)try{f[0].setSelectionRange(f[0].value.length,f[0].value.length)}catch(a){}else f[0].select()}),i&&i.grid.api.cellNav)var b=i.grid.api.cellNav.on.viewPortKeyPress(a,function(a,c){if(e.isStartEditKey(a)){var d="number"==typeof a.which?a.which:a.keyCode;d>0&&(k.$setViewValue(String.fromCharCode(d),a),k.$render())}b()});f.on("mousedown",function(b){"checkbox"===f[0].type&&(f.off("blur",a.stopEdit),d(function(){f[0].focus(),f.on("blur",a.stopEdit)}))}),f.on("blur",a.stopEdit)}),a.deepEdit=!1,a.stopEdit=function(b){a.inputForm&&!a.inputForm.$valid?(b.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)):a.$emit(c.events.END_CELL_EDIT),a.deepEdit=!1},f.on("click",function(b){"checkbox"!==f[0].type&&(a.deepEdit=!0,a.$applyAsync(function(){a.grid.disableScrolling=!0}))}),f.on("keydown",function(d){switch(d.keyCode){case b.keymap.ESC:d.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)}if(!a.deepEdit||d.keyCode!==b.keymap.LEFT&&d.keyCode!==b.keymap.RIGHT&&d.keyCode!==b.keymap.UP&&d.keyCode!==b.keymap.DOWN)if(i&&i.grid.api.cellNav)d.uiGridTargetRenderContainerId=j.containerId,null!==i.cellNav.handleKeyDown(d)&&a.stopEdit(d);else switch(d.keyCode){case b.keymap.ENTER:case b.keymap.TAB:d.stopPropagation(),d.preventDefault(),a.stopEdit(d)}else d.stopPropagation();return!0}),a.$on("$destroy",function(){f.off()})}}}}}]),a.directive("uiGridEditor",["$filter",function(a){function b(a){if(void 0===a||""===a)return null
;var b=a.split("-");if(3!==b.length)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);return d<1||c<1||e<1?null:new Date(c,d-1,e)}return{priority:-100,require:"?ngModel",link:function(c,d,e,f){2===angular.version.minor&&e.type&&"date"===e.type&&f&&(f.$formatters.push(function(b){return f.$setValidity(null,!b||!isNaN(b.getTime())),a("date")(b,"yyyy-MM-dd")}),f.$parsers.push(function(a){if(a&&a.length>0){var c=b(a);return f.$setValidity(null,c&&!isNaN(c.getTime())),c}return f.$setValidity(null,!0),null}))}}}]),a.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants","$timeout",function(a,b,c){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(a,b,c){},post:function(d,e,f,g){var h=g[0],i=g[1];d.$on(b.events.BEGIN_CELL_EDIT,function(){c(function(){e[0].focus()}),e[0].style.width=e[0].parentElement.offsetWidth-1+"px",e.on("blur",function(a){d.stopEdit(a)})}),d.stopEdit=function(a){d.$emit(b.events.END_CELL_EDIT)},e.on("keydown",function(c){switch(c.keyCode){case a.keymap.ESC:c.stopPropagation(),d.$emit(b.events.CANCEL_CELL_EDIT)}if(h&&h.grid.api.cellNav)c.uiGridTargetRenderContainerId=i.containerId,null!==h.cellNav.handleKeyDown(c)&&d.stopEdit(c);else switch(c.keyCode){case a.keymap.ENTER:case a.keymap.TAB:c.stopPropagation(),c.preventDefault(),d.stopEdit(c)}return!0}),d.$on("$destroy",function(){e.off()})}}}}}]),a.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants",function(a,b,c){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(a,b,c){},post:function(b,d){function e(f){var g=f.srcElement||f.target;g&&g.files&&g.files.length>0?("function"==typeof b.col.colDef.editFileChooserCallback?b.col.colDef.editFileChooserCallback(b.row,b.col,g.files):a.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),g.form.reset(),b.$emit(c.events.END_CELL_EDIT)):b.$emit(c.events.CANCEL_CELL_EDIT),d[0].removeEventListener("change",e,!1)}d[0].addEventListener("change",e,!1),b.$on(c.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].select(),d.on("blur",function(){b.$emit(c.events.END_CELL_EDIT),d.off()})})}}}}}])}(),function(){var a=angular.module("ui.grid.emptyBaseLayer",["ui.grid"]);a.service("uiGridBaseLayerService",["gridUtil","$compile",function(a,b){return{initializeGrid:function(a,b){a.baseLayer={emptyRows:[]},!1!==a.options.enableEmptyGridBaseLayer&&(a.options.enableEmptyGridBaseLayer=!b)},setNumberOfEmptyRows:function(a,b){var c=b.options.rowHeight,d=Math.ceil(a/c);if(d>0){b.baseLayer.emptyRows=[];for(var e=0;e<d;e++)b.baseLayer.emptyRows.push({})}}}}]),a.directive("uiGridEmptyBaseLayer",["gridUtil","uiGridBaseLayerService","$parse",function(a,b,c){return{require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,d,e,f){var g=!1===c(e.uiGridEmptyBaseLayer)(a);b.initializeGrid(f.grid,g)},post:function(a,c,d,e){function f(){var a=h.getViewportHeight();return a!==i&&(i=a,!0)}function g(a){return".grid"+e.grid.id+" .ui-grid-render-container .ui-grid-empty-base-layer-container.ui-grid-canvas { height: "+a+"px; }"}if(e.grid.options.enableEmptyGridBaseLayer){var h=e.grid.renderContainers.body,i=h.getViewportHeight();e.grid.registerStyleComputation({func:function(){return f()&&b.setNumberOfEmptyRows(i,e.grid),g(i)}})}}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a){var b=c.get("ui-grid/emptyBaseLayerContainer");return a.prepend(b),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){var a=angular.module("ui.grid.expandable",["ui.grid"]);a.service("uiGridExpandableService",["gridUtil",function(a){var b={initializeGrid:function(c){c.expandable={},c.expandable.expandedAll=!1,c.options.enableOnDblClickExpand=!1!==c.options.enableOnDblClickExpand,c.options.enableExpandable=!1!==c.options.enableExpandable,c.options.showExpandAllButton=!1!==c.options.showExpandAllButton,c.options.expandableRowHeight=c.options.expandableRowHeight||150,c.options.expandableRowHeaderWidth=c.options.expandableRowHeaderWidth||40,c.options.enableExpandable&&!c.options.expandableRowTemplate&&(a.logError("You have not set the expandableRowTemplate, disabling expandable module"),c.options.enableExpandable=!1);var d={events:{expandable:{rowExpandedBeforeStateChanged:function(a,b,c){},rowExpandedStateChanged:function(a,b,c){},rowExpandedRendered:function(a,b,c){}}},methods:{expandable:{toggleRowExpansion:function(a,d){var e=c.getRow(a);null!==e&&b.toggleRowExpansion(c,e,d)},expandAllRows:function(){b.expandAllRows(c)},collapseAllRows:function(){b.collapseAllRows(c)},toggleAllRows:function(){b.toggleAllRows(c)},expandRow:function(a){var d=c.getRow(a);null===d||d.isExpanded||b.toggleRowExpansion(c,d)},collapseRow:function(a){var d=c.getRow(a);null!==d&&d.isExpanded&&b.toggleRowExpansion(c,d)},getExpandedRows:function(){return b.getExpandedRows(c).map(function(a){return a.entity})}}}};c.api.registerEventsFromObject(d.events),c.api.registerMethodsFromObject(d.methods)},toggleRowExpansion:function(a,c,d){function e(){c.expandedRendered?a.api.expandable.raise.rowExpandedRendered(c,d):window.setTimeout(e,100)}a.api.expandable.raise.rowExpandedBeforeStateChanged(c),c.isExpanded=!c.isExpanded,angular.isUndefined(c.expandedRowHeight)&&(c.expandedRowHeight=a.options.expandableRowHeight),c.isExpanded?(c.height=c.grid.options.rowHeight+c.expandedRowHeight,a.expandable.expandedAll=b.getExpandedRows(a).length===a.rows.length):(c.height=c.grid.options.rowHeight,a.expandable.expandedAll=!1),a.api.expandable.raise.rowExpandedStateChanged(c,d),e()},expandAllRows:function(a){a.renderContainers.body.visibleRowCache.forEach(function(c){c.isExpanded||c.entity.subGridOptions&&c.entity.subGridOptions.disableRowExpandable||b.toggleRowExpansion(a,c)}),a.expandable.expandedAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.renderContainers.body.visibleRowCache.forEach(function(c){c.isExpanded&&b.toggleRowExpansion(a,c)}),a.expandable.expandedAll=!1,a.queueGridRefresh()},toggleAllRows:function(a){a.expandable.expandedAll?b.collapseAllRows(a):b.expandAllRows(a)},getExpandedRows:function(a){return a.rows.filter(function(a){return a.isExpanded})}};return b}]),a.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(a.initializeGrid(f.grid),f.grid.options.enableExpandable&&!1!==f.grid.options.enableExpandableRowHeader){var g={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:f.grid.options.expandableRowHeaderWidth||30};g.cellTemplate=b.get("ui-grid/expandableRowHeader"),g.headerCellTemplate=b.get("ui-grid/expandableTopRowHeader"),f.grid.addRowHeaderColumn(g,-90)}},post:function(a,b,c,d){}}}}}]),a.directive("uiGrid",function(){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,b,c,d){d.grid.api.core.on.renderingComplete(a,function(){a.row&&a.row.grid&&a.row.grid.options&&a.row.grid.options.enableExpandable&&(d.grid.parentRow=a.row)})},post:function(a,b,c,d){}}}}}),a.directive("uiGridExpandableRow",["uiGridExpandableService","$compile","uiGridConstants","gridUtil",function(a,b,c,d){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,c){d.getTemplate(a.grid.options.expandableRowTemplate).then(function(d){if(a.grid.options.expandableRowScope){var e=a.grid.options.expandableRowScope;for(var f in e)e.hasOwnProperty(f)&&(a[f]=e[f])}var g=angular.element(d);g=b(g)(a),c.append(g),a.row.element=c,a.row.expandedRendered=!0})},post:function(a,b){a.row.element=b,a.$on("$destroy",function(){a.row.expandedRendered=!1})}}}}}]),a.directive("uiGridRow",function(){return{priority:-200,scope:!1,compile:function(){return{pre:function(a,b){a.grid.options.enableExpandable&&(a.expandableRow={},a.expandableRow.shouldRenderExpand=function(){return"body"===a.colContainer.name&&!1!==a.grid.options.enableExpandable&&a.row.isExpanded&&(!a.grid.isScrollingVertically||a.row.expandedRendered)},a.expandableRow.shouldRenderFiller=function(){return a.row.isExpanded&&("body"!==a.colContainer.name||a.grid.isScrollingVertically&&!a.row.expandedRendered)},a.grid.options.enableOnDblClickExpand&&b.on("dblclick",function(b){a.grid.api.expandable.toggleRowExpansion(a.row.entity,b)}))},post:function(a,b,c,d){}}}}}),a.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a){var b=angular.element(a.children().children()[0]),d=c.get("ui-grid/expandableScrollFiller"),e=c.get("ui-grid/expandableRow");return b.append(e),b.append(d),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){var a=angular.module("ui.grid.exporter",["ui.grid"]);a.constant("uiGridExporterConstants",{featureName:"exporter",rowHeaderColName:"treeBaseRowHeaderCol",selectionRowHeaderColName:"selectionRowHeaderCol",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),a.service("uiGridExporterService",["$filter","$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(a,b,c,d,e,f,g){function h(b,c){return b.options.exporterHeaderFilter?b.options.exporterHeaderFilterUseName?b.options.exporterHeaderFilter(c.name):b.options.exporterHeaderFilter(c.displayName):c.headerCellFilter?a(c.headerCellFilter)(c.displayName):c.displayName}function i(b,c,d,e){if(d.cellFilter){var f,g,h,i;return f=d.cellFilter.replace(/[\'\"\s]/g,"").split(":"),g=f[0]?f[0]:null,h=f[1]?f[1]:null,i=f[2]?f[2]:null,a(g)(e,h,i)}return e}var j={delay:100,initializeGrid:function(a){a.exporter={},this.defaultGridOptions(a.options);var b={events:{exporter:{}},methods:{exporter:{csvExport:function(b,c){j.csvExport(a,b,c)},pdfExport:function(b,c){j.pdfExport(a,b,c)},excelExport:function(b,c){j.excelExport(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods),a.api.core.addToGridMenu?j.addToMenu(a):f(function(){a.api.core.addToGridMenu&&j.addToMenu(a)},this.delay,1)},defaultGridOptions:function(a){a.exporterSuppressMenu=!0===a.exporterSuppressMenu,a.exporterMenuLabel=a.exporterMenuLabel?a.exporterMenuLabel:"Export",a.exporterSuppressColumns=a.exporterSuppressColumns?a.exporterSuppressColumns:[],a.exporterCsvColumnSeparator=a.exporterCsvColumnSeparator?a.exporterCsvColumnSeparator:",",a.exporterCsvFilename=a.exporterCsvFilename?a.exporterCsvFilename:"download.csv",a.exporterPdfFilename=a.exporterPdfFilename?a.exporterPdfFilename:"download.pdf",a.exporterExcelFilename=a.exporterExcelFilename?a.exporterExcelFilename:"download.xlsx",a.exporterExcelSheetName=a.exporterExcelSheetName?a.exporterExcelSheetName:"Sheet1",a.exporterOlderExcelCompatibility=!0===a.exporterOlderExcelCompatibility,a.exporterIsExcelCompatible=!0===a.exporterIsExcelCompatible,a.exporterMenuItemOrder=a.exporterMenuItemOrder?a.exporterMenuItemOrder:200,a.exporterPdfDefaultStyle=a.exporterPdfDefaultStyle?a.exporterPdfDefaultStyle:{fontSize:11},a.exporterPdfTableStyle=a.exporterPdfTableStyle?a.exporterPdfTableStyle:{margin:[0,5,0,15]},a.exporterPdfTableHeaderStyle=a.exporterPdfTableHeaderStyle?a.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},a.exporterPdfHeader=a.exporterPdfHeader?a.exporterPdfHeader:null,a.exporterPdfFooter=a.exporterPdfFooter?a.exporterPdfFooter:null,a.exporterPdfOrientation=a.exporterPdfOrientation?a.exporterPdfOrientation:"landscape",a.exporterPdfPageSize=a.exporterPdfPageSize?a.exporterPdfPageSize:"A4",a.exporterPdfMaxGridWidth=a.exporterPdfMaxGridWidth?a.exporterPdfMaxGridWidth:720,a.exporterMenuAllData=void 0===a.exporterMenuAllData||a.exporterMenuAllData,a.exporterMenuVisibleData=void 0===a.exporterMenuVisibleData||a.exporterMenuVisibleData,a.exporterMenuSelectedData=void 0===a.exporterMenuSelectedData||a.exporterMenuSelectedData,a.exporterMenuCsv=void 0===a.exporterMenuCsv||a.exporterMenuCsv,a.exporterMenuPdf=void 0===a.exporterMenuPdf||a.exporterMenuPdf,a.exporterMenuExcel=void 0===a.exporterMenuExcel||a.exporterMenuExcel,a.exporterPdfCustomFormatter=a.exporterPdfCustomFormatter&&"function"==typeof a.exporterPdfCustomFormatter?a.exporterPdfCustomFormatter:function(a){return a},a.exporterHeaderFilterUseName=!0===a.exporterHeaderFilterUseName,a.exporterFieldCallback=a.exporterFieldCallback?a.exporterFieldCallback:i,a.exporterFieldFormatCallback=a.exporterFieldFormatCallback?a.exporterFieldFormatCallback:function(a,b,c,d){return null},a.exporterExcelCustomFormatters=a.exporterExcelCustomFormatters?a.exporterExcelCustomFormatters:function(a,b,c){return c},a.exporterExcelHeader=a.exporterExcelHeader?a.exporterExcelHeader:function(a,b,c,d){return null},a.exporterColumnScaleFactor=a.exporterColumnScaleFactor?a.exporterColumnScaleFactor:3.5,a.exporterFieldApplyFilters=!0===a.exporterFieldApplyFilters,a.exporterAllDataFn=a.exporterAllDataFn?a.exporterAllDataFn:null,null===a.exporterAllDataFn&&a.exporterAllDataPromise&&(a.exporterAllDataFn=a.exporterAllDataPromise)},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.exporterAllAsCsv"),action:function(){a.api.exporter.csvExport(c.ALL,c.ALL)},shown:function(){return a.options.exporterMenuCsv&&a.options.exporterMenuAllData},order:a.options.exporterMenuItemOrder},{title:g.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(){a.api.exporter.csvExport(c.VISIBLE,c.VISIBLE)},shown:function(){return a.options.exporterMenuCsv&&a.options.exporterMenuVisibleData},order:a.options.exporterMenuItemOrder+1},{title:g.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(){a.api.exporter.csvExport(c.SELECTED,c.VISIBLE)},shown:function(){return a.options.exporterMenuCsv&&a.options.exporterMenuSelectedData&&a.api.selection&&a.api.selection.getSelectedRows().length>0},order:a.options.exporterMenuItemOrder+2},{title:g.getSafeText("gridMenu.exporterAllAsPdf"),action:function(){a.api.exporter.pdfExport(c.ALL,c.ALL)},shown:function(){return a.options.exporterMenuPdf&&a.options.exporterMenuAllData},order:a.options.exporterMenuItemOrder+3},{title:g.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(){a.api.exporter.pdfExport(c.VISIBLE,c.VISIBLE)},shown:function(){return a.options.exporterMenuPdf&&a.options.exporterMenuVisibleData},order:a.options.exporterMenuItemOrder+4},{title:g.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(){a.api.exporter.pdfExport(c.SELECTED,c.VISIBLE)},shown:function(){return a.options.exporterMenuPdf&&a.options.exporterMenuSelectedData&&a.api.selection&&a.api.selection.getSelectedRows().length>0},order:a.options.exporterMenuItemOrder+5},{title:g.getSafeText("gridMenu.exporterAllAsExcel"),action:function(){a.api.exporter.excelExport(c.ALL,c.ALL)},shown:function(){return a.options.exporterMenuExcel&&a.options.exporterMenuAllData},order:a.options.exporterMenuItemOrder+6},{title:g.getSafeText("gridMenu.exporterVisibleAsExcel"),action:function(){a.api.exporter.excelExport(c.VISIBLE,c.VISIBLE)},shown:function(){return a.options.exporterMenuExcel&&a.options.exporterMenuVisibleData},order:a.options.exporterMenuItemOrder+7},{title:g.getSafeText("gridMenu.exporterSelectedAsExcel"),action:function(){a.api.exporter.excelExport(c.SELECTED,c.VISIBLE)},shown:function(){return a.options.exporterMenuExcel&&a.options.exporterMenuSelectedData&&a.api.selection&&a.api.selection.getSelectedRows().length>0},order:a.options.exporterMenuItemOrder+8}])},csvExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=a.options.showHeader?d.getColumnHeaders(a,c):[],f=d.getData(a,b,c),g=d.formatAsCsv(e,f,a.options.exporterCsvColumnSeparator);d.downloadFile(a.options.exporterCsvFilename,g,a.options.exporterCsvColumnSeparator,a.options.exporterOlderExcelCompatibility,a.options.exporterIsExcelCompatible)})},loadAllDataIfNeeded:function(a,d,e){if(d===c.ALL&&a.rows.length!==a.options.totalItems&&a.options.exporterAllDataFn)return a.options.exporterAllDataFn().then(function(b){a.modifyRows(b)});var f=b.defer();return f.resolve(),f.promise},getColumnHeaders:function(a,b){var d,e=[];if(b===c.ALL)d=a.columns;else{var f=a.renderContainers.left?a.renderContainers.left.visibleColumnCache.filter(function(a){return a.visible}):[],g=a.renderContainers.body?a.renderContainers.body.visibleColumnCache.filter(function(a){return a.visible}):[],i=a.renderContainers.right?a.renderContainers.right.visibleColumnCache.filter(function(a){return a.visible}):[];d=f.concat(g,i)}return d.forEach(function(b){if(!0!==b.colDef.exporterSuppressExport&&"$$hashKey"!==b.field&&-1===a.options.exporterSuppressColumns.indexOf(b.name)){var c={name:b.field,displayName:h(a,b),width:b.drawnWidth?b.drawnWidth:b.width,align:b.colDef.align?b.colDef.align:"number"===b.colDef.type?"right":"left"};e.push(c)}}),e},getRowsFromNode:function(a){for(var b=[],c=0;c<a.children.length;c++)if(a.children[c].children&&0===a.children[c].children.length)b.push(a.children[c]);else{var d=this.getRowsFromNode(a.children[c]);b=b.concat(d)}return b},getDataSorted:function(a){if(!a.treeBase||0===a.treeBase.numberLevels)return a.rows;for(var b=[],c=0;c<a.treeBase.tree.length;c++)for(var d=this.getRowsFromNode(a.treeBase.tree[c]),e=0;e<d.length;e++)b.push(d[e].row);return b},getData:function(a,b,e,f){var g,h,i=[];switch(b){case c.ALL:g=this.getDataSorted(a,b,e,f);break;case c.VISIBLE:g=a.getVisibleRows();break;case c.SELECTED:a.api.selection?g=a.api.selection.getSelectedGridRows():d.logError("selection feature must be enabled to allow selected rows to be exported")}if(e===c.ALL)h=a.columns;else{var j=a.renderContainers.left?a.renderContainers.left.visibleColumnCache.filter(function(a){return a.visible}):[],k=a.renderContainers.body?a.renderContainers.body.visibleColumnCache.filter(function(a){return a.visible}):[],l=a.renderContainers.right?a.renderContainers.right.visibleColumnCache.filter(function(a){return a.visible}):[];h=j.concat(k,l)}return g.forEach(function(b){if(!1!==b.exporterEnableExporting){var d=[];h.forEach(function(g){if((g.visible||e===c.ALL)&&!0!==g.colDef.exporterSuppressExport&&"$$hashKey"!==g.field&&-1===a.options.exporterSuppressColumns.indexOf(g.name)){var h=f?a.getCellDisplayValue(b,g):a.getCellValue(b,g),i={value:a.options.exporterFieldCallback(a,b,g,h)},j=a.options.exporterFieldFormatCallback(a,b,g,h);j&&Object.assign(i,j),g.colDef.exporterPdfAlign&&(i.alignment=g.colDef.exporterPdfAlign),d.push(i)}}),i.push(d)}}),i},formatAsCsv:function(a,b,c){var d=this,e=a.map(function(a){return{value:a.displayName}}),f=e.length>0?d.formatRowAsCsv(this,c)(e)+"\n":"";return f+=b.map(this.formatRowAsCsv(this,c)).join("\n")},formatRowAsCsv:function(a,b){return function(c){return c.map(a.formatFieldAsCsv).join(b)}},formatFieldAsCsv:function(a){return null==a.value?"":"number"==typeof a.value?a.value:"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?'"'+a.value.replace(/"/g,'""')+'"':JSON.stringify(a.value)},isIE:function(){var a=navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/),b=!1;return-1!==a&&(b=!0),b},downloadFile:function(a,b,c,d,e){var f,g=document,h=g.createElement("a"),i="application/octet-stream;charset=utf-8",j=this.isIE();if(e&&(b="sep="+c+"\r\n"+b),navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([d?"\ufeff":"",b],{type:i}),a);if(j){var k=g.createElement("iframe");return document.body.appendChild(k),k.contentWindow.document.open("text/html","replace"),k.contentWindow.document.write(b),k.contentWindow.document.close(),k.contentWindow.focus(),k.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(k),!0}if("download"in h){var l=new Blob([d?"\ufeff":"",b],{type:i});f=URL.createObjectURL(l),h.setAttribute("download",a)}else f="data: "+i+","+encodeURIComponent(b),h.setAttribute("target","_blank");h.href=f,h.setAttribute("style","display:none;"),g.body.appendChild(h),setTimeout(function(){if(h.click)h.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),h.dispatchEvent(a)}g.body.removeChild(h)},this.delay)},pdfExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=d.getColumnHeaders(a,c),f=d.getData(a,b,c),g=d.prepareAsPdf(a,e,f);d.isIE()||-1!==navigator.appVersion.indexOf("Edge")?d.downloadPDF(a.options.exporterPdfFilename,g):pdfMake.createPdf(g).open()})},downloadPDF:function(a,b){var c,d=document;d.createElement("a");c=this.isIE();var e,f=pdfMake.createPdf(b);f.getBuffer(function(b){if(e=new Blob([b]),navigator.msSaveBlob)return navigator.msSaveBlob(e,a);if(c){var f=d.createElement("iframe");return document.body.appendChild(f),f.contentWindow.document.open("text/html","replace"),f.contentWindow.document.write(e),f.contentWindow.document.close(),f.contentWindow.focus(),f.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(f),!0}})},prepareAsPdf:function(a,b,c){var d=this.calculatePdfHeaderWidths(a,b),e=b.map(function(a){return{text:a.displayName,style:"tableHeader"}}),f=c.map(this.formatRowAsPdf(this)),g=[e].concat(f),h={pageOrientation:a.options.exporterPdfOrientation,pageSize:a.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:d,body:g}}],styles:{tableStyle:a.options.exporterPdfTableStyle,tableHeader:a.options.exporterPdfTableHeaderStyle},defaultStyle:a.options.exporterPdfDefaultStyle};return a.options.exporterPdfLayout&&(h.layout=a.options.exporterPdfLayout),a.options.exporterPdfHeader&&(h.header=a.options.exporterPdfHeader),a.options.exporterPdfFooter&&(h.footer=a.options.exporterPdfFooter),a.options.exporterPdfCustomFormatter&&(h=a.options.exporterPdfCustomFormatter(h)),h},calculatePdfHeaderWidths:function(a,b){var c=0;b.forEach(function(a){"number"==typeof a.width&&(c+=a.width)});var d=0;b.forEach(function(a){if("*"===a.width&&(d+=100),"string"==typeof a.width&&a.width.match(/(\d)*%/)){var b=parseInt(a.width.match(/(\d)*%/)[0]);a.width=c*b/100,d+=a.width}});var e=c+d;return b.map(function(b){return"*"===b.width?b.width:b.width*a.options.exporterPdfMaxGridWidth/e})},formatRowAsPdf:function(a){return function(b){return b.map(a.formatFieldAsPdfString)}},formatFieldAsPdfString:function(a){var b;return b=null==a.value?"":"number"==typeof a.value?a.value.toString():"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?a.value.replace(/"/g,'""'):a.value instanceof Date?JSON.stringify(a.value).replace(/^"/,"").replace(/"$/,""):"object"==typeof a.value?a.value:JSON.stringify(a.value).replace(/^"/,"").replace(/"$/,""),a.alignment&&"string"==typeof a.alignment&&(b={text:b,alignment:a.alignment}),b},formatAsExcel:function(a,b,c,d,e){for(var f=a.map(function(a){return{value:a.displayName}}),g=[],h=[],i=0;i<f.length;i++){var j="header";switch(a[i].align){case"center":j="headerCenter";break;case"right":j="headerRight"}var k=e.styles&&e.styles[j]?{style:e.styles[j].id}:null;h.push({value:f[i].value,metadata:k})}g.push(h);for(var l=b.map(this.formatRowAsExcel(this,c,d)),m=0;m<l.length;m++)g.push(l[m]);return g},formatRowAsExcel:function(a,b,c){return function(d){for(var e=[],f=0;f<d.length;f++){var g=a.formatFieldAsExcel(d[f],b,c);e.push({value:g,metadata:d[f].metadata})}return e}},formatFieldAsExcel:function(a,b,c,d){return null==a.value?"":"number"==typeof a.value?a.value:"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?a.value.replace(/"/g,'""'):JSON.stringify(a.value)},prepareAsExcel:function(a,b,c){var d={styles:{}};if(a.options.exporterExcelCustomFormatters&&(d=a.options.exporterExcelCustomFormatters(a,b,d)),a.options.exporterExcelHeader)if(angular.isFunction(a.options.exporterExcelHeader))a.options.exporterExcelHeader(a,b,c,d);else{var e=a.options.exporterExcelHeader.text,f=a.options.exporterExcelHeader.style;c.data.push([{value:e,metadata:{style:d.styles[f].id}}])}return d},excelExport:function(a,b,d){var e=this;this.loadAllDataIfNeeded(a,b,d).then(function(){var f=a.options.showHeader?e.getColumnHeaders(a,d):[],g=new ExcelBuilder.Workbook,h=a.options.exporterExcelSheetName?a.options.exporterExcelSheetName:"Sheet1",i=new ExcelBuilder.Worksheet({name:h});g.addWorksheet(i);for(var j=e.prepareAsExcel(a,g,i),k=[],l=a.treeBase?a.treeBase.numberLevels:a.enableRowSelection?1:0,m=l;m<a.columns.length;m++)a.columns[m].field!==c.rowHeaderColName&&a.columns[m].field!==c.selectionRowHeaderColName&&k.push({width:a.columns[m].drawnWidth/a.options.exporterColumnScaleFactor});i.setColumns(k);var n=e.getData(a,b,d,a.options.exporterFieldApplyFilters),o=e.formatAsExcel(f,n,g,i,j);i.setData(i.data.concat(o)),ExcelBuilder.Builder.createFile(g,{type:"blob"}).then(function(b){e.downloadFile(a.options.exporterExcelFilename,b,a.options.exporterCsvColumnSeparator,a.options.exporterOlderExcelCompatibility)})})}};return j}]),a.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid),e.grid.exporter.$scope=a}}}])}(),function(){var a=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);a.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function(a,b,c,d,e,f,g,h,i){var j={initializeGrid:function(a,b){i.initializeGrid(a,b),a.grouping={},a.grouping.groupHeaderCache={},j.defaultGridOptions(a.options),a.registerRowsProcessor(j.groupRows,400),a.registerColumnBuilder(j.groupingColumnBuilder),a.registerColumnsProcessor(j.groupingColumnProcessor,400);var c={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(b){var c=j.getGrouping(a);return c.grouping.forEach(function(a){a.colName=a.col.name,delete a.col}),c.aggregations.forEach(function(a){a.colName=a.col.name,delete a.col}),c.aggregations=c.aggregations.filter(function(a){return!a.aggregation.source||"grouping"!==a.aggregation.source}),b&&(c.rowExpandedStates=j.getRowExpandedStates(a.grouping.groupingHeaderCache)),c},setGrouping:function(b){j.setGrouping(a,b)},groupColumn:function(b){var c=a.getColumn(b);j.groupColumn(a,c)},ungroupColumn:function(b){var c=a.getColumn(b);j.ungroupColumn(a,c)},clearGrouping:function(){j.clearGrouping(a)},aggregateColumn:function(b,c,d){var e=a.getColumn(b);j.aggregateColumn(a,e,c,d)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods),a.api.core.on.sortChanged(b,j.tidyPriorities)},defaultGridOptions:function(a){a.enableGrouping=!1!==a.enableGrouping,a.groupingShowCounts=!1!==a.groupingShowCounts,a.groupingNullLabel=void 0===a.groupingNullLabel?"Null":a.groupingNullLabel,a.enableGroupHeaderSelection=!0===a.enableGroupHeaderSelection},groupingColumnBuilder:function(a,d,e){if(!1!==a.enableGrouping){void 0===d.grouping&&void 0!==a.grouping?(d.grouping=angular.copy(a.grouping),void 0!==d.grouping.groupPriority&&d.grouping.groupPriority>-1&&(d.treeAggregationFn=i.nativeAggregations()[b.aggregation.COUNT].aggregationFn,d.treeAggregationFinalizerFn=j.groupedFinalizerFn)):void 0===d.grouping&&(d.grouping={}),void 0!==d.grouping&&void 0!==d.grouping.groupPriority&&d.grouping.groupPriority>=0&&(d.suppressRemoveSort=!0);var f={name:"ui.grid.grouping.group",title:g.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return void 0===this.context.col.grouping||void 0===this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){j.groupColumn(this.context.col.grid,this.context.col)}},h={name:"ui.grid.grouping.ungroup",title:g.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return void 0!==this.context.col.grouping&&void 0!==this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){j.ungroupColumn(this.context.col.grid,this.context.col)}},k={name:"ui.grid.grouping.aggregateRemove",title:g.get().grouping.aggregate_remove,shown:function(){return void 0!==this.context.col.treeAggregationFn},action:function(){j.aggregateColumn(this.context.col.grid,this.context.col,null)}},l=function(a,b){b=b||g.get().grouping["aggregate_"+a]||a;var e={name:"ui.grid.grouping.aggregate"+a,title:b,shown:function(){return void 0===this.context.col.treeAggregation||void 0===this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==a},action:function(){j.aggregateColumn(this.context.col.grid,this.context.col,a)}};c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregate"+a)||d.menuItems.push(e)};!1!==d.colDef.groupingShowGroupingMenu&&(c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.group")||d.menuItems.push(f),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.ungroup")||d.menuItems.push(h)),!1!==d.colDef.groupingShowAggregationMenu&&(angular.forEach(i.nativeAggregations(),function(a,b){l(b)}),angular.forEach(e.treeCustomAggregations,function(a,b){l(b,a.menuTitle)}),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregateRemove")||d.menuItems.push(k))}},groupingColumnProcessor:function(a,b){return a=j.moveGroupColumns(this,a,b)},groupedFinalizerFn:function(a){var b=this;void 0!==a.groupVal?(a.rendered=a.groupVal,b.grid.options.groupingShowCounts&&"date"!==b.colDef.type&&"object"!==b.colDef.type&&(a.rendered+=" ("+a.value+")")):a.rendered=null},moveGroupColumns:function(a,b){return!1===a.options.moveGroupColumns?b:(b.forEach(function(a,b){a.groupingPosition=b}),b.sort(function(a,b){var c,d;return c=a.isRowHeader?a.headerPriority:void 0===a.grouping||void 0===a.grouping.groupPriority||a.grouping.groupPriority<0?null:a.grouping.groupPriority,d=b.isRowHeader?b.headerPriority:void 0===b.grouping||void 0===b.grouping.groupPriority||b.grouping.groupPriority<0?null:b.grouping.groupPriority,null!==c&&null===d?-1:null!==d&&null===c?1:null!==c&&null!==d?c-d:a.groupingPosition-b.groupingPosition}),b.forEach(function(a){delete a.groupingPosition}),b)},groupColumn:function(a,c){void 0===c.grouping&&(c.grouping={});var d=j.getGrouping(a);c.grouping.groupPriority=d.grouping.length,c.previousSort=angular.copy(c.sort),c.sort?void 0!==c.sort.direction&&null!==c.sort.direction||(c.sort.direction=h.ASC):c.sort={direction:h.ASC},c.treeAggregation={type:b.aggregation.COUNT,source:"grouping"},c.treeAggregationFn=i.nativeAggregations()[b.aggregation.COUNT].aggregationFn,c.treeAggregationFinalizerFn=j.groupedFinalizerFn,a.api.grouping.raise.groupingChanged(c),a.api.core.raise.sortChanged(a,a.getColumnSorting()),a.queueGridRefresh()},ungroupColumn:function(a,b){void 0!==b.grouping&&(delete b.grouping.groupPriority,delete b.treeAggregation,delete b.customTreeAggregationFinalizer,b.previousSort&&(b.sort=b.previousSort,delete b.previousSort),j.tidyPriorities(a),a.api.grouping.raise.groupingChanged(b),a.api.core.raise.sortChanged(a,a.getColumnSorting()),a.queueGridRefresh())},aggregateColumn:function(a,b,c){void 0!==b.grouping&&void 0!==b.grouping.groupPriority&&b.grouping.groupPriority>=0&&j.ungroupColumn(a,b);var d={};void 0!==a.options.treeCustomAggregations[c]?d=a.options.treeCustomAggregations[c]:void 0!==i.nativeAggregations()[c]&&(d=i.nativeAggregations()[c]),b.treeAggregation={type:c,label:g.get().aggregation[d.label]||d.label},b.treeAggregationFn=d.aggregationFn,b.treeAggregationFinalizerFn=d.finalizerFn,a.api.grouping.raise.aggregationChanged(b),a.queueGridRefresh()},setGrouping:function(a,b){void 0!==b&&(j.clearGrouping(a),
b.grouping&&b.grouping.length&&b.grouping.length>0&&b.grouping.forEach(function(b){var c=a.getColumn(b.colName);c&&j.groupColumn(a,c)}),b.aggregations&&b.aggregations.length&&b.aggregations.forEach(function(b){var c=a.getColumn(b.colName);c&&j.aggregateColumn(a,c,b.aggregation.type)}),b.rowExpandedStates&&j.applyRowExpandedStates(a.grouping.groupingHeaderCache,b.rowExpandedStates))},clearGrouping:function(a){var b=j.getGrouping(a);b.grouping.length>0&&b.grouping.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),j.ungroupColumn(a,b.col)}),b.aggregations.length>0&&b.aggregations.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),j.aggregateColumn(a,b.col,null)})},tidyPriorities:function(a){void 0!==a&&void 0===a.grid||void 0===this.grid||(a=this.grid);var b=[],c=[];a.columns.forEach(function(a,d){void 0!==a.grouping&&void 0!==a.grouping.groupPriority&&a.grouping.groupPriority>=0?b.push(a):void 0!==a.sort&&void 0!==a.sort.priority&&a.sort.priority>=0&&c.push(a)}),b.sort(function(a,b){return a.grouping.groupPriority-b.grouping.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.suppressRemoveSort=!0,void 0===a.sort&&(a.sort={}),a.sort.priority=b});var d=b.length;c.sort(function(a,b){return a.sort.priority-b.sort.priority}),c.forEach(function(a){a.sort.priority=d,a.suppressRemoveSort=a.colDef.suppressRemoveSort,d++})},groupRows:function(a){if(0===a.length)return a;var b=this;b.grouping.oldGroupingHeaderCache=b.grouping.groupingHeaderCache||{},b.grouping.groupingHeaderCache={};for(var c=j.initialiseProcessingState(b),e=function(e,h){var i=b.getCellValue(g,e.col);e.initialised&&0===d.getSortFn(b,e.col,a)(i,e.currentValue)||(j.insertGroupHeader(b,a,f,c,h),f++)},f=0;f<a.length;f++){var g=a[f];g.visible&&c.forEach(e)}return delete b.grouping.oldGroupingHeaderCache,a},initialiseProcessingState:function(a){var b=[];return j.getGrouping(a).grouping.forEach(function(a,c){b.push({fieldName:a.field,col:a.col,initialised:!1,currentValue:null,currentRow:null})}),b},getGrouping:function(a){var b=[],c=[];return a.columns.forEach(function(a){a.grouping&&void 0!==a.grouping.groupPriority&&a.grouping.groupPriority>=0&&b.push({field:a.field,col:a,groupPriority:a.grouping.groupPriority,grouping:a.grouping}),a.treeAggregation&&a.treeAggregation.type&&c.push({field:a.field,col:a,aggregation:a.treeAggregation})}),b.sort(function(a,b){return a.groupPriority-b.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.groupPriority=b,delete a.grouping}),{grouping:b,aggregations:c}},insertGroupHeader:function(a,b,c,d,g){function h(a){return angular.isObject(a)?JSON.stringify(a):a}var i=d[g].col,k=a.getCellValue(b[c],i),l=k;void 0!==k&&null!==k||(l=a.options.groupingNullLabel);for(var m=a.grouping.oldGroupingHeaderCache,n=0;n<g;n++)m&&m[h(d[n].currentValue)]&&(m=m[h(d[n].currentValue)].children);var o;for(m&&m[h(k)]?(o=m[h(k)].row,o.entity={}):(o=new e({},null,a),f.rowTemplateAssigner.call(a,o)),o.entity["$$"+d[g].col.uid]={groupVal:l},o.treeLevel=g,o.groupHeader=!0,o.internalRow=!0,o.enableCellEdit=!1,o.enableSelection=a.options.enableGroupHeaderSelection,d[g].initialised=!0,d[g].currentValue=k,d[g].currentRow=o,j.finaliseProcessingState(d,g+1),b.splice(c,0,o),m=a.grouping.groupingHeaderCache,n=0;n<g;n++)m=m[h(d[n].currentValue)].children;m[h(k)]={row:o,children:{}}},finaliseProcessingState:function(a,b){for(var c=b;c<a.length;c++)a[c].initialised=!1,a[c].currentRow=null,a[c].currentValue=null},getRowExpandedStates:function(a){if(void 0===a)return{};var b={};return angular.forEach(a,function(a,c){b[c]={state:a.row.treeNode.state},a.children?b[c].children=j.getRowExpandedStates(a.children):b[c].children={}}),b},applyRowExpandedStates:function(a,b){void 0!==b&&angular.forEach(b,function(b,c){a[c]&&(a[c].row.treeNode.state=b.state,b.children&&a[c].children&&j.applyRowExpandedStates(a[c].children,b.children))})}};return j}]),a.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){!1!==e.grid.options.enableGrouping&&b.initializeGrid(e.grid,a)},post:function(a,b,c,d){}}}}}])}(),function(){var a=angular.module("ui.grid.importer",["ui.grid"]);a.constant("uiGridImporterConstants",{featureName:"importer"}),a.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){b.importer={$scope:a},this.defaultGridOptions(b.options);var c={events:{importer:{}},methods:{importer:{importFile:function(a){i.importThisFile(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.options.enableImporter&&b.options.importerShowMenu&&(b.api.core.addToGridMenu?i.addToMenu(b):f(function(){b.api.core.addToGridMenu&&i.addToMenu(b)},100,1))},defaultGridOptions:function(a){a.enableImporter||void 0===a.enableImporter?h.hasOwnProperty("File")&&h.hasOwnProperty("FileReader")&&h.hasOwnProperty("FileList")&&h.hasOwnProperty("Blob")?a.enableImporter=!0:(d.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),a.enableImporter=!1):a.enableImporter=!1,a.importerProcessHeaders=a.importerProcessHeaders||i.processHeaders,a.importerHeaderFilter=a.importerHeaderFilter||function(a){return a},a.importerErrorCallback&&"function"==typeof a.importerErrorCallback||delete a.importerErrorCallback,!0!==a.enableImporter||a.importerDataAddCallback||(d.logError("You have not set an importerDataAddCallback, importer is disabled"),a.enableImporter=!1),a.importerShowMenu=!1!==a.importerShowMenu,a.importerObjectCallback=a.importerObjectCallback||function(a,b){return b}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(){this.grid.api.importer.importAFile(a)},order:151}])},importThisFile:function(a,b){if(!b)return void d.logError("No file object provided to importThisFile, should be impossible, aborting");var c=new FileReader;switch(b.type){case"application/json":c.onload=i.importJsonClosure(a);break;default:c.onload=i.importCsvClosure(a)}c.readAsText(b)},importJsonClosure:function(a){return function(b){var c,d=[],e=i.parseJson(a,b);null!==e&&(e.forEach(function(b){c=i.newObject(a),angular.extend(c,b),c=a.options.importerObjectCallback(a,c),d.push(c)}),i.addObjects(a,d))}},parseJson:function(a,b){var c;try{c=JSON.parse(b.target.result)}catch(c){return void i.alertError(a,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",b.target.result)}return Array.isArray(c)?c:(i.alertError(a,"importer.jsonNotarray","Import failed, file is not an array, file was: ",b.target.result),[])},importCsvClosure:function(a){return function(b){var c=i.parseCsv(b);if(!c||c.length<1)return void i.alertError(a,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",b.target.result);var d=i.createCsvObjects(a,c);if(!d||0===d.length)return void i.alertError(a,"importer.noObjects","Objects were not able to be derived, content was: ",b.target.result);i.addObjects(a,d)}},parseCsv:function(a){var b=a.target.result;return CSV.parse(b)},createCsvObjects:function(a,b){var c=a.options.importerProcessHeaders(a,b.shift());if(!c||0===c.length)return i.alertError(a,"importer.noHeaders","Column names could not be derived, content was: ",b),[];var d,e=[];return b.forEach(function(b){d=i.newObject(a),null!==b&&b.forEach(function(a,b){null!==c[b]&&(d[c[b]]=a)}),d=a.options.importerObjectCallback(a,d),e.push(d)}),e},processHeaders:function(a,b){var c=[];if(a.options.columnDefs&&0!==a.options.columnDefs.length){var d=i.flattenColumnDefs(a,a.options.columnDefs);return b.forEach(function(a){d[a]?c.push(d[a]):d[a.toLowerCase()]?c.push(d[a.toLowerCase()]):c.push(null)}),c}return b.forEach(function(a){c.push(a.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),c},flattenColumnDefs:function(a,b){var c={};return b.forEach(function(b){b.name&&(c[b.name]=b.field||b.name,c[b.name.toLowerCase()]=b.field||b.name),b.field&&(c[b.field]=b.field||b.name,c[b.field.toLowerCase()]=b.field||b.name),b.displayName&&(c[b.displayName]=b.field||b.name,c[b.displayName.toLowerCase()]=b.field||b.name),b.displayName&&a.options.importerHeaderFilter&&(c[a.options.importerHeaderFilter(b.displayName)]=b.field||b.name,c[a.options.importerHeaderFilter(b.displayName).toLowerCase()]=b.field||b.name)}),c},addObjects:function(a,c){if(a.api.rowEdit){var d=a.registerDataChangeCallback(function(){a.api.rowEdit.setRowsDirty(c),d()},[b.dataChange.ROW]);a.importer.$scope.$on("$destroy",d)}a.importer.$scope.$apply(a.options.importerDataAddCallback(a,c))},newObject:function(a){return void 0!==a.options&&void 0!==a.options.importerNewObject?new a.options.importerNewObject:{}},alertError:function(a,b,c,e){a.options.importerErrorCallback?a.options.importerErrorCallback(a,b,c,e):(h.alert(g.getSafeText(b)),d.logError(c+e))}};return i}]),a.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(a,e.grid)}}}]),a.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"?^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(a,d,e,f){function g(a){var d=a.srcElement||a.target;if(d&&d.files&&1===d.files.length){var e=d.files[0];void 0!==f&&f?(h=f.grid,b.importThisFile(h,e),d.form.reset()):c.logError("Could not import file because UI Grid was not found.")}}var h,i=d[0].querySelectorAll(".ui-grid-importer-file-chooser");1!==i.length?c.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):i[0].addEventListener("change",g,!1)}}}])}(),function(){var a=angular.module("ui.grid.infiniteScroll",["ui.grid"]);a.service("uiGridInfiniteScrollService",["gridUtil","$compile","$rootScope","uiGridConstants","ScrollEvent","$q",function(a,b,c,d,e,f){var g={initializeGrid:function(a,b){if(g.defaultGridOptions(a.options),a.options.enableInfiniteScroll){a.infiniteScroll={dataLoading:!1},g.setScrollDirections(a,a.options.infiniteScrollUp,a.options.infiniteScrollDown),a.api.core.on.scrollEnd(b,g.handleScroll);var c={events:{infiniteScroll:{needLoadMoreData:function(a,b){},needLoadMoreDataTop:function(a,b){}}},methods:{infiniteScroll:{dataLoaded:function(b,c){return g.setScrollDirections(a,b,c),g.adjustScroll(a).then(function(){a.infiniteScroll.dataLoading=!1})},resetScroll:function(b,c){g.setScrollDirections(a,b,c),g.adjustInfiniteScrollPosition(a,0)},saveScrollPercentage:function(){a.infiniteScroll.prevScrollTop=a.renderContainers.body.prevScrollTop,a.infiniteScroll.previousVisibleRows=a.getVisibleRowCount()},dataRemovedTop:function(b,c){g.dataRemovedTop(a,b,c)},dataRemovedBottom:function(b,c){g.dataRemovedBottom(a,b,c)},setScrollDirections:function(b,c){g.setScrollDirections(a,b,c)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)}},defaultGridOptions:function(a){a.enableInfiniteScroll=!1!==a.enableInfiniteScroll,a.infiniteScrollRowsFromEnd=a.infiniteScrollRowsFromEnd||20,a.infiniteScrollUp=!0===a.infiniteScrollUp,a.infiniteScrollDown=!1!==a.infiniteScrollDown},setScrollDirections:function(a,b,c){a.infiniteScroll.scrollUp=!0===b,a.suppressParentScrollUp=!0===b,a.infiniteScroll.scrollDown=!1!==c,a.suppressParentScrollDown=!1!==c},handleScroll:function(a){if(!(a.grid.infiniteScroll&&a.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===a.source)&&a.y)if(0===a.y.percentage)a.grid.scrollDirection=d.scrollDirection.UP,g.loadData(a.grid);else if(1===a.y.percentage)a.grid.scrollDirection=d.scrollDirection.DOWN,g.loadData(a.grid);else{var b=a.grid.options.infiniteScrollRowsFromEnd/a.grid.renderContainers.body.visibleRowCache.length;a.grid.scrollDirection===d.scrollDirection.UP?a.y.percentage<=b&&g.loadData(a.grid):a.grid.scrollDirection===d.scrollDirection.DOWN&&1-a.y.percentage<=b&&g.loadData(a.grid)}},loadData:function(a){a.infiniteScroll.previousVisibleRows=a.renderContainers.body.visibleRowCache.length,a.infiniteScroll.direction=a.scrollDirection,delete a.infiniteScroll.prevScrollTop,a.scrollDirection===d.scrollDirection.UP&&a.infiniteScroll.scrollUp?(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreDataTop()):a.scrollDirection===d.scrollDirection.DOWN&&a.infiniteScroll.scrollDown&&(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(a){var b=f.defer();return c.$applyAsync(function(){var e,f,h,i,j;e=a.getViewportHeight()+a.headerHeight-a.renderContainers.body.headerHeight-a.scrollbarHeight,f=a.options.rowHeight,void 0===a.infiniteScroll.direction&&g.adjustInfiniteScrollPosition(a,0),h=a.getVisibleRowCount();var k=f*h;a.infiniteScroll.scrollDown&&e>k&&a.api.infiniteScroll.raise.needLoadMoreData(),a.infiniteScroll.direction===d.scrollDirection.UP&&(i=a.infiniteScroll.prevScrollTop||0,j=i+(h-a.infiniteScroll.previousVisibleRows)*f,g.adjustInfiniteScrollPosition(a,j),c.$applyAsync(function(){b.resolve()})),a.infiniteScroll.direction===d.scrollDirection.DOWN&&(j=a.infiniteScroll.prevScrollTop||a.infiniteScroll.previousVisibleRows*f-e,g.adjustInfiniteScrollPosition(a,j),c.$applyAsync(function(){b.resolve()}))},0),b.promise},adjustInfiniteScrollPosition:function(a,b){var c=new e(a,null,null,"ui.grid.adjustInfiniteScrollPosition"),d=a.getVisibleRowCount(),f=a.getViewportHeight()+a.headerHeight-a.renderContainers.body.headerHeight-a.scrollbarHeight,g=a.options.rowHeight,h=d*g-f;0===b&&a.infiniteScroll.scrollUp?c.y={percentage:1/h}:c.y={percentage:b/h},a.scrollContainers("",c)},dataRemovedTop:function(a,b,c){var d,e,f,h;g.setScrollDirections(a,b,c),d=a.renderContainers.body.visibleRowCache.length,e=a.infiniteScroll.prevScrollTop,h=a.options.rowHeight,f=e-(a.infiniteScroll.previousVisibleRows-d)*h,g.adjustInfiniteScrollPosition(a,f)},dataRemovedBottom:function(a,b,c){var d;g.setScrollDirections(a,b,c),d=a.infiniteScroll.prevScrollTop,g.adjustInfiniteScrollPosition(a,d)}};return g}]),a.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(a){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid,b)},post:function(a,b,c){}}}}}])}(),function(){var a=angular.module("ui.grid.moveColumns",["ui.grid"]);a.service("uiGridMoveColumnService",["$q","$rootScope","$log","ScrollEvent","uiGridConstants","gridUtil",function(a,b,c,d,e,f){var g={initializeGrid:function(a){var b=this;this.registerPublicApi(a),this.defaultGridOptions(a.options),a.moveColumns={orderCache:[]},a.registerColumnBuilder(b.movableColumnBuilder),a.registerDataChangeCallback(b.verifyColumnOrder,[e.dataChange.COLUMN])},registerPublicApi:function(a){var b=this,c={events:{colMovable:{columnPositionChanged:function(a,b,c){}}},methods:{colMovable:{moveColumn:function(c,d){var e=a.columns;if(!angular.isNumber(c)||!angular.isNumber(d))return void f.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var g=0,h=0;h<e.length;h++)(angular.isDefined(e[h].colDef.visible)&&!1===e[h].colDef.visible||!0===e[h].isRowHeader)&&g++;if(c>=e.length-g||d>=e.length-g)return void f.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var i=function(a){for(var b=a,c=0;c<=b;c++)angular.isDefined(e[c])&&(angular.isDefined(e[c].colDef.visible)&&!1===e[c].colDef.visible||!0===e[c].isRowHeader)&&b++;return b};b.redrawColumnAtPosition(a,i(c),i(d))}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableColumnMoving=!1!==a.enableColumnMoving},movableColumnBuilder:function(b,c,d){var e=[];return b.enableColumnMoving=void 0===b.enableColumnMoving?d.enableColumnMoving:b.enableColumnMoving,a.all(e)},updateColumnCache:function(a){a.moveColumns.orderCache=a.getOnlyDataColumns()},verifyColumnOrder:function(a){var b,c=a.rowHeaderColumns.length;angular.forEach(a.moveColumns.orderCache,function(d,e){if(-1!==(b=a.columns.indexOf(d))&&b-c!==e){var f=a.columns.splice(b,1)[0];a.columns.splice(e+c,0,f)}})},redrawColumnAtPosition:function(a,c,d){var f=a.columns;if(c!==d){var h=c<d?c+1:c-1,i=Math.min(h,d);for(i;i<=Math.max(h,d)&&!f[i].visible;i++);if(!(i>Math.max(h,d))){var j=f[c];if(j.colDef.enableColumnMoving){if(c>d)for(var k=c;k>d;k--)f[k]=f[k-1];else if(d>c)for(var l=c;l<d;l++)f[l]=f[l+1];f[d]=j,g.updateColumnCache(a),a.queueGridRefresh(),b.$applyAsync(function(){a.api.core.notifyDataChange(e.dataChange.COLUMN),a.api.colMovable.raise.columnPositionChanged(j.colDef,c,d)})}}}}};return g}]),a.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(a){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,b,e,f){if(a.col.colDef.enableColumnMoving){var h,i,j,k,l,m,n=angular.element(b[0].querySelectorAll(".ui-grid-cell-contents")),o=!1,p=!1,q=function(b){h=a.grid.element[0].getBoundingClientRect().left,a.grid.hasLeftContainer()&&(h+=a.grid.renderContainers.left.header[0].getBoundingClientRect().width),i=b.pageX||(b.originalEvent?b.originalEvent.pageX:0),j=0,k=h+a.grid.getViewportWidth(),"mousedown"===b.type?(d.on("mousemove",r),d.on("mouseup",s)):"touchstart"===b.type&&(d.on("touchmove",r),d.on("touchend",s))},r=function(a){var b=a.pageX||(a.originalEvent?a.originalEvent.pageX:0),c=b-i;0!==c&&(document.onselectstart=function(){return!1},p=!0,o?o&&(w(c),i=b):v())},s=function(b){if(document.onselectstart=null,l&&(l.remove(),o=!1),u(),t(),p){for(var d=a.grid.columns,e=0,f=0;f<d.length&&d[f].colDef.name!==a.col.colDef.name;f++)e++;var g;if(j<0){var h,i=0;if(a.grid.isRTL()){for(h=e+1;h<d.length;h++)if((angular.isUndefined(d[h].colDef.visible)||!0===d[h].colDef.visible)&&(i+=d[h].drawnWidth||d[h].width||d[h].colDef.width)>Math.abs(j)){c.redrawColumnAtPosition(a.grid,e,h-1);break}}else for(h=e-1;h>=0;h--)if((angular.isUndefined(d[h].colDef.visible)||!0===d[h].colDef.visible)&&(i+=d[h].drawnWidth||d[h].width||d[h].colDef.width)>Math.abs(j)){c.redrawColumnAtPosition(a.grid,e,h+1);break}i<Math.abs(j)&&(g=0,a.grid.isRTL()&&(g=d.length-1),c.redrawColumnAtPosition(a.grid,e,g))}else if(j>0){var k,m=0;if(a.grid.isRTL()){for(k=e-1;k>0;k--)if((angular.isUndefined(d[k].colDef.visible)||!0===d[k].colDef.visible)&&(m+=d[k].drawnWidth||d[k].width||d[k].colDef.width)>j){c.redrawColumnAtPosition(a.grid,e,k);break}}else for(k=e+1;k<d.length;k++)if((angular.isUndefined(d[k].colDef.visible)||!0===d[k].colDef.visible)&&(m+=d[k].drawnWidth||d[k].width||d[k].colDef.width)>j){c.redrawColumnAtPosition(a.grid,e,k-1);break}m<j&&(g=d.length-1,a.grid.isRTL()&&(g=0),c.redrawColumnAtPosition(a.grid,e,g))}}},t=function(){n.on("touchstart",q),n.on("mousedown",q)},u=function(){n.off("touchstart",q),n.off("mousedown",q),d.off("mousemove",r),d.off("touchmove",r),d.off("mouseup",s),d.off("touchend",s)};t();var v=function(){o=!0,l=b.clone(),b.parent().append(l),l.addClass("movingColumn");var c={};c.left=b[0].offsetLeft+"px";var d=a.grid.element[0].getBoundingClientRect().right,e=b[0].getBoundingClientRect().right;e>d&&(m=a.col.drawnWidth+(d-e),c.width=m+"px"),l.css(c)},w=function(b){for(var c=a.grid.columns,d=0,e=0;e<c.length;e++)(angular.isUndefined(c[e].colDef.visible)||!0===c[e].colDef.visible)&&(d+=c[e].drawnWidth||c[e].width||c[e].colDef.width);var i,n=l[0].getBoundingClientRect().left-1,o=l[0].getBoundingClientRect().right;if(i=n-h+b,i=i<k?i:k,(n>=h||b>0)&&(o<=k||b<0))l.css({visibility:"visible",left:l[0].offsetLeft+(i<k?b:k-n)+"px"});else if(d>Math.ceil(f.grid.gridWidth)){b*=8;var p=new g(a.col.grid,null,null,"uiGridHeaderCell.moveElement");p.x={pixels:b},p.grid.scrollContainers("",p)}for(var q=0,r=0;r<c.length;r++)if(angular.isUndefined(c[r].colDef.visible)||!0===c[r].colDef.visible){if(c[r].colDef.name===a.col.colDef.name)break;q+=c[r].drawnWidth||c[r].width||c[r].colDef.width}void 0===a.newScrollLeft?j+=b:j=a.newScrollLeft+i-q,m<a.col.drawnWidth&&(m+=Math.abs(b),l.css({width:m+"px"}))};a.$on("$destroy",u)}}}}}}])}(),function(){var a=angular.module("ui.grid.pagination",["ng","ui.grid"]);a.service("uiGridPaginationService",["gridUtil",function(a){var b={initializeGrid:function(a){b.defaultGridOptions(a.options);var c={events:{pagination:{paginationChanged:function(a,b){}}},methods:{pagination:{getPage:function(){return a.options.enablePagination?a.options.paginationCurrentPage:null},getFirstRowIndex:function(){return a.options.useCustomPagination?a.options.paginationPageSizes.reduce(function(b,c,d){return d<a.options.paginationCurrentPage-1?b+c:b},0):(a.options.paginationCurrentPage-1)*a.options.paginationPageSize},getLastRowIndex:function(){return a.options.useCustomPagination?c.methods.pagination.getFirstRowIndex()+a.options.paginationPageSizes[a.options.paginationCurrentPage-1]-1:Math.min(a.options.paginationCurrentPage*a.options.paginationPageSize,a.options.totalItems)-1},getTotalPages:function(){return a.options.enablePagination?a.options.useCustomPagination?a.options.paginationPageSizes.length:0===a.options.totalItems?1:Math.ceil(a.options.totalItems/a.options.paginationPageSize):null},nextPage:function(){a.options.enablePagination&&(a.options.totalItems>0?a.options.paginationCurrentPage=Math.min(a.options.paginationCurrentPage+1,c.methods.pagination.getTotalPages()):a.options.paginationCurrentPage++)},previousPage:function(){a.options.enablePagination&&(a.options.paginationCurrentPage=Math.max(a.options.paginationCurrentPage-1,1))},seek:function(b){if(a.options.enablePagination){if(!angular.isNumber(b)||b<1)throw"Invalid page number: "+b;a.options.paginationCurrentPage=Math.min(b,c.methods.pagination.getTotalPages())}}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods);var d=function(b){if(a.options.useExternalPagination||!a.options.enablePagination)return b;var d=parseInt(a.options.paginationPageSize,10),e=parseInt(a.options.paginationCurrentPage,10),f=b.filter(function(a){return a.visible});a.options.totalItems=f.length;var g=c.methods.pagination.getFirstRowIndex(),h=c.methods.pagination.getLastRowIndex();return g>f.length&&(e=a.options.paginationCurrentPage=1,g=(e-1)*d),f.slice(g,h+1)};a.registerRowsProcessor(d,900)},defaultGridOptions:function(b){b.enablePagination=!1!==b.enablePagination,b.enablePaginationControls=!1!==b.enablePaginationControls,b.useExternalPagination=!0===b.useExternalPagination,b.useCustomPagination=!0===b.useCustomPagination,a.isNullOrUndefined(b.totalItems)&&(b.totalItems=0),a.isNullOrUndefined(b.paginationPageSizes)&&(b.paginationPageSizes=[250,500,1e3]),a.isNullOrUndefined(b.paginationPageSize)&&(b.paginationPageSizes.length>0?b.paginationPageSize=b.paginationPageSizes[0]:b.paginationPageSize=0),a.isNullOrUndefined(b.paginationCurrentPage)&&(b.paginationCurrentPage=1),a.isNullOrUndefined(b.paginationTemplate)&&(b.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(a,b,c){a.api.pagination.raise.paginationChanged(b,c),a.options.useExternalPagination||a.queueGridRefresh()}};return b}]),a.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(a,b){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(c,d,e,f){b.initializeGrid(f.grid),a.getTemplate(f.grid.options.paginationTemplate).then(function(a){var b=angular.element(a);d.append(b),f.innerCompile(b)})}}}}]),a.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService","i18nConstants",function(a,b,c,d,e){return{priority:-200,scope:!0,require:"^uiGrid",link:function(f,g,h,i){var j=".ui-grid-pager-control-input";f.aria=d.getSafeText("pagination.aria");var k=function(){f.paginationApi=i.grid.api.pagination,f.sizesLabel=d.getSafeText("pagination.sizes"),f.totalItemsLabel=d.getSafeText("pagination.totalItems"),f.paginationOf=d.getSafeText("pagination.of"),f.paginationThrough=d.getSafeText("pagination.through")};k(),f.$on(e.UPDATE_EVENT,k);var l=i.grid.options;i.grid.renderContainers.body.registerViewportAdjuster(function(a){return l.enablePaginationControls&&(a.height=a.height-c.elementHeight(g,"padding")),a});var m=i.grid.registerDataChangeCallback(function(a){a.options.useExternalPagination||(a.options.totalItems=a.rows.length)},[b.dataChange.ROW]);f.$on("$destroy",m);var n=f.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(b,c){if(b!==c&&void 0!==c)return!angular.isNumber(l.paginationCurrentPage)||l.paginationCurrentPage<1?void(l.paginationCurrentPage=1):l.totalItems>0&&l.paginationCurrentPage>f.paginationApi.getTotalPages()?void(l.paginationCurrentPage=f.paginationApi.getTotalPages()):void a.onPaginationChanged(f.grid,l.paginationCurrentPage,l.paginationPageSize)});f.$on("$destroy",function(){n()}),f.cantPageForward=function(){return f.paginationApi.getTotalPages()?f.cantPageToLast():l.data.length<1},f.cantPageToLast=function(){var a=f.paginationApi.getTotalPages();return!a||l.paginationCurrentPage>=a},f.cantPageBackward=function(){return l.paginationCurrentPage<=1};var o=function(a){a&&c.focus.bySelector(g,j)};f.pageFirstPageClick=function(){f.paginationApi.seek(1),o(f.cantPageBackward())},f.pagePreviousPageClick=function(){f.paginationApi.previousPage(),o(f.cantPageBackward())},f.pageNextPageClick=function(){f.paginationApi.nextPage(),o(f.cantPageForward())},f.pageLastPageClick=function(){f.paginationApi.seek(f.paginationApi.getTotalPages()),o(f.cantPageToLast())}}}}])}(),function(){var a=angular.module("ui.grid.pinning",["ui.grid"]);a.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),a.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(a,b,c,d){var e={initializeGrid:function(a){e.defaultGridOptions(a.options),a.registerColumnBuilder(e.pinningColumnBuilder);var b={events:{pinning:{columnPinned:function(a,b){}}},methods:{pinning:{pinColumn:function(b,c){e.pinColumn(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enablePinning=!1!==a.enablePinning,a.hidePinLeft=a.enablePinning&&a.hidePinLeft,a.hidePinRight=a.enablePinning&&a.hidePinRight},pinningColumnBuilder:function(b,f,g){if(b.enablePinning=void 0===b.enablePinning?g.enablePinning:b.enablePinning,b.hidePinLeft=void 0===b.hidePinLeft?g.hidePinLeft:b.hidePinLeft,b.hidePinRight=void 0===b.hidePinRight?g.hidePinRight:b.hidePinRight,b.pinnedLeft?(f.renderContainer="left",f.grid.createLeftContainer()):b.pinnedRight&&(f.renderContainer="right",f.grid.createRightContainer()),b.enablePinning){var h={name:"ui.grid.pinning.pinLeft",title:c.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.LEFT)}},i={name:"ui.grid.pinning.pinRight",title:c.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.RIGHT)}},j={name:"ui.grid.pinning.unpin",title:c.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return void 0!==this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.NONE)}};b.hidePinLeft||a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinLeft")||f.menuItems.push(h),b.hidePinRight||a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinRight")||f.menuItems.push(i),a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.unpin")||f.menuItems.push(j)}},pinColumn:function(a,b,c){c===d.container.NONE?(b.renderContainer=null,b.colDef.pinnedLeft=b.colDef.pinnedRight=!1):(b.renderContainer=c,c===d.container.LEFT?a.createLeftContainer():c===d.container.RIGHT&&a.createRightContainer()),a.refresh().then(function(){a.api.pinning.raise.columnPinned(b.colDef,c)})}};return e}]),a.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(a,b){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}])}(),function(){var a=angular.module("ui.grid.resizeColumns",["ui.grid"]);a.service("uiGridResizeColumnsService",["gridUtil","$q","$rootScope",function(a,b,c){return{defaultGridOptions:function(a){a.enableColumnResizing=!1!==a.enableColumnResizing,!1===a.enableColumnResize&&(a.enableColumnResizing=!1)},colResizerColumnBuilder:function(a,c,d){var e=[];return a.enableColumnResizing=void 0===a.enableColumnResizing?d.enableColumnResizing:a.enableColumnResizing,!1===a.enableColumnResize&&(a.enableColumnResizing=!1),b.all(e)},registerPublicApi:function(a){var b={events:{colResizable:{columnSizeChanged:function(a,b){}}}};a.api.registerEventsFromObject(b.events)},fireColumnSizeChanged:function(b,d,e){c.$applyAsync(function(){b.api.colResizable?b.api.colResizable.raise.columnSizeChanged(d,e):a.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(a,b,c){var d=a.getRenderContainer();if("left"===b){var e=d.visibleColumnCache.indexOf(a);return d.visibleColumnCache[e-1*c]}return a}}}]),a.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.defaultGridOptions(e.grid.options),e.grid.registerColumnBuilder(b.colResizerColumnBuilder),b.registerPublicApi(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants",function(a,b,c,d,e,f){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,d,g,h){var i=h.grid;if(i.options.enableColumnResizing){var j=b.get("ui-grid/columnResizer"),k=1;i.isRTL()&&(a.position="left",k=-1);var l=function(){for(var b=d[0].getElementsByClassName("ui-grid-column-resizer"),f=0;f<b.length;f++)angular.element(b[f]).remove();var g=e.findTargetCol(a.col,"left",k),h=a.col.getRenderContainer();if(g&&0!==h.visibleColumnCache.indexOf(a.col)&&!1!==g.colDef.enableColumnResizing){var i=angular.element(j).clone();i.attr("position","left"),d.prepend(i),c(i)(a)}if(!1!==a.col.colDef.enableColumnResizing){var l=angular.element(j).clone();l.attr("position","right"),d.append(l),c(l)(a)}};l();var m=function(){a.$applyAsync(l)},n=i.registerDataChangeCallback(m,[f.dataChange.COLUMN]);a.$on("$destroy",n)}}}}}}]),a.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(a,b,c,d){var e=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(f,g,h,i){function j(a){i.grid.refreshCanvas(!0).then(function(){i.grid.queueGridRefresh()})}function k(a,b){var c=b;return a.minWidth&&c<a.minWidth?c=a.minWidth:a.maxWidth&&c>a.maxWidth&&(c=a.maxWidth),c}
function l(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),o=(a.targetTouches?a.targetTouches[0]:a).clientX-p,o<0?o=0:o>i.grid.gridWidth&&(o=i.grid.gridWidth);var g=d.findTargetCol(f.col,f.position,q);if(!1!==g.colDef.enableColumnResizing){i.grid.element.hasClass("column-resizing")||i.grid.element.addClass("column-resizing");var h=o-n,j=parseInt(g.drawnWidth+h*q,10);o+=(k(g,j)-j)*q,e.css({left:o+"px"}),i.fireEvent(c.events.ITEM_DRAGGING)}}function m(a){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),i.grid.element.removeClass("column-resizing"),e.remove(),o=(a.changedTouches?a.changedTouches[0]:a).clientX-p;var b=o-n;if(0===b)return t(),void s();var c=d.findTargetCol(f.col,f.position,q);if(!1!==c.colDef.enableColumnResizing){var g=parseInt(c.drawnWidth+b*q,10);c.width=k(c,g),c.hasCustomWidth=!0,j(b),d.fireColumnSizeChanged(i.grid,c.colDef,b),t(),s()}}var n=0,o=0,p=0,q=1;i.grid.isRTL()&&(f.position="left",q=-1),"left"===f.position?g.addClass("left"):"right"===f.position&&g.addClass("right");var r=function(b,c){b.originalEvent&&(b=b.originalEvent),b.stopPropagation(),p=i.grid.element[0].getBoundingClientRect().left,n=(b.targetTouches?b.targetTouches[0]:b).clientX-p,i.grid.element.append(e),e.css({left:n}),"touchstart"===b.type?(a.on("touchend",m),a.on("touchmove",l),g.off("mousedown",r)):(a.on("mouseup",m),a.on("mousemove",l),g.off("touchstart",r))},s=function(){g.on("mousedown",r),g.on("touchstart",r)},t=function(){a.off("mouseup",m),a.off("touchend",m),a.off("mousemove",l),a.off("touchmove",l),g.off("mousedown",r),g.off("touchstart",r)};s();var u=function(a,e){a.stopPropagation();var h=d.findTargetCol(f.col,f.position,q);if(!1!==h.colDef.enableColumnResizing){var l=0,m=b.closestElm(g,".ui-grid-render-container"),n=m.querySelectorAll("."+c.COL_CLASS_PREFIX+h.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(n,function(a){var c;angular.element(a).parent().hasClass("ui-grid-header-cell")&&(c=angular.element(a).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),b.fakeElement(a,{},function(a){var d=angular.element(a);d.attr("style","float: left");var e=b.elementWidth(d);if(c){e+=b.elementWidth(c)}e>l&&(l=e)})});var o=k(h,l),p=o-h.drawnWidth;h.width=o,h.hasCustomWidth=!0,j(p),d.fireColumnSizeChanged(i.grid,h.colDef,p)}};g.on("dblclick",u),g.on("$destroy",function(){g.off("dblclick",u),t()})}}}])}(),function(){var a=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);a.constant("uiGridRowEditConstants",{}),a.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(a,b,c,d,e){var f={initializeGrid:function(a,b){b.rowEdit={};var c={events:{rowEdit:{saveRow:function(a){}}},methods:{rowEdit:{setSavePromise:function(a,c){f.setSavePromise(b,a,c)},getDirtyRows:function(){return b.rowEdit.dirtyRows?b.rowEdit.dirtyRows:[]},getErrorRows:function(){return b.rowEdit.errorRows?b.rowEdit.errorRows:[]},flushDirtyRows:function(){return f.flushDirtyRows(b)},setRowsDirty:function(a){f.setRowsDirty(b,a)},setRowsClean:function(a){f.setRowsClean(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.api.core.on.renderingComplete(a,function(c){b.api.edit.on.afterCellEdit(a,f.endEditCell),b.api.edit.on.beginCellEdit(a,f.beginEditCell),b.api.edit.on.cancelCellEdit(a,f.cancelEditCell),b.api.cellNav&&b.api.cellNav.on.navigate(a,f.navigate)})},defaultGridOptions:function(a){},saveRow:function(a,b){var c=this;return function(){if(b.isSaving=!0,b.rowEditSavePromise)return b.rowEditSavePromise;var d=a.api.rowEdit.raise.saveRow(b.entity);return b.rowEditSavePromise?b.rowEditSavePromise.then(c.processSuccessPromise(a,b),c.processErrorPromise(a,b)):e.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),d}},setSavePromise:function(a,b,c){a.getRow(b).rowEditSavePromise=c},processSuccessPromise:function(a,b){var c=this;return function(){delete b.isSaving,delete b.isDirty,delete b.isError,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,c.removeRow(a.rowEdit.errorRows,b),c.removeRow(a.rowEdit.dirtyRows,b)}},processErrorPromise:function(a,b){return function(){delete b.isSaving,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,b.isError=!0,a.rowEdit.errorRows||(a.rowEdit.errorRows=[]),f.isRowPresent(a.rowEdit.errorRows,b)||a.rowEdit.errorRows.push(b)}},removeRow:function(a,b){void 0!==a&&null!==a&&a.forEach(function(c,d){c.uid===b.uid&&a.splice(d,1)})},isRowPresent:function(a,b){var c=!1;return a.forEach(function(a,d){a.uid===b.uid&&(c=!0)}),c},flushDirtyRows:function(a){var c=[];return a.api.rowEdit.getDirtyRows().forEach(function(b){f.cancelTimer(a,b),f.saveRow(a,b)(),c.push(b.rowEditSavePromise)}),b.all(c)},endEditCell:function(a,b,c,d){var g=this.grid,h=g.getRow(a);if(!h)return void e.logError("Unable to find rowEntity in grid data, dirty flag cannot be set");(c!==d||h.isDirty)&&(g.rowEdit.dirtyRows||(g.rowEdit.dirtyRows=[]),h.isDirty||(h.isDirty=!0,g.rowEdit.dirtyRows.push(h)),delete h.isError,f.considerSetTimer(g,h))},beginEditCell:function(a,b){var c=this.grid,d=c.getRow(a);if(!d)return void e.logError("Unable to find rowEntity in grid data, timer cannot be cancelled");f.cancelTimer(c,d)},cancelEditCell:function(a,b){var c=this.grid,d=c.getRow(a);if(!d)return void e.logError("Unable to find rowEntity in grid data, timer cannot be set");f.considerSetTimer(c,d)},navigate:function(a,b){var c=this.grid;a.row.rowEditSaveTimer&&f.cancelTimer(c,a.row),b&&b.row&&b.row!==a.row&&f.considerSetTimer(c,b.row)},considerSetTimer:function(b,c){if(f.cancelTimer(b,c),c.isDirty&&!c.isSaving&&-1!==b.options.rowEditWaitInterval){var d=b.options.rowEditWaitInterval?b.options.rowEditWaitInterval:2e3;c.rowEditSaveTimer=a(f.saveRow(b,c),d,1)}},cancelTimer:function(b,c){c.rowEditSaveTimer&&!c.isSaving&&(a.cancel(c.rowEditSaveTimer),delete c.rowEditSaveTimer)},setRowsDirty:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),c.isDirty||(c.isDirty=!0,a.rowEdit.dirtyRows.push(c)),delete c.isError,f.considerSetTimer(a,c)):e.logError("requested row not found in rowEdit.setRowsDirty, row was: "+b)})},setRowsClean:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(delete c.isDirty,f.removeRow(a.rowEdit.dirtyRows,c),f.cancelTimer(a,c),delete c.isError,f.removeRow(a.rowEdit.errorRows,c)):e.logError("requested row not found in rowEdit.setRowsClean, row was: "+b)})}};return f}]),a.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(a,b,c,d){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){var a=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);a.constant("uiGridSaveStateConstants",{featureName:"saveState"}),a.service("uiGridSaveStateService",function(){var a={initializeGrid:function(b){b.saveState={},this.defaultGridOptions(b.options);var c={events:{saveState:{}},methods:{saveState:{save:function(){return a.save(b)},restore:function(c,d){return a.restore(b,c,d)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.saveWidths=!1!==a.saveWidths,a.saveOrder=!1!==a.saveOrder,a.saveScroll=!0===a.saveScroll,a.saveFocus=!0!==a.saveScroll&&!1!==a.saveFocus,a.saveVisible=!1!==a.saveVisible,a.saveSort=!1!==a.saveSort,a.saveFilter=!1!==a.saveFilter,a.saveSelection=!1!==a.saveSelection,a.saveGrouping=!1!==a.saveGrouping,a.saveGroupingExpandedStates=!0===a.saveGroupingExpandedStates,a.savePinning=!1!==a.savePinning,a.saveTreeView=!1!==a.saveTreeView},save:function(b){var c={};return c.columns=a.saveColumns(b),c.scrollFocus=a.saveScrollFocus(b),c.selection=a.saveSelection(b),c.grouping=a.saveGrouping(b),c.treeView=a.saveTreeView(b),c.pagination=a.savePagination(b),c},restore:function(b,c,d){return d.columns&&a.restoreColumns(b,d.columns),d.scrollFocus&&a.restoreScrollFocus(b,c,d.scrollFocus),d.selection&&a.restoreSelection(b,d.selection),d.grouping&&a.restoreGrouping(b,d.grouping),d.treeView&&a.restoreTreeView(b,d.treeView),d.pagination&&a.restorePagination(b,d.pagination),b.refresh()},saveColumns:function(a){var b=[];return a.getOnlyDataColumns().forEach(function(c){var d={};d.name=c.name,a.options.saveVisible&&(d.visible=c.visible),a.options.saveWidths&&(d.width=c.width),a.options.saveSort&&(d.sort=angular.copy(c.sort)),a.options.saveFilter&&(d.filters=[],c.filters.forEach(function(a){var b={};angular.forEach(a,function(a,c){"condition"!==c&&"$$hashKey"!==c&&"placeholder"!==c&&(b[c]=a)}),d.filters.push(b)})),a.api.pinning&&a.options.savePinning&&(d.pinned=c.renderContainer?c.renderContainer:""),b.push(d)}),b},saveScrollFocus:function(b){if(!b.api.cellNav)return{};var c={};if(b.options.saveFocus){c.focus=!0;var d=b.api.cellNav.getFocusedCell();null!==d&&(null!==d.col&&(c.colName=d.col.colDef.name),null!==d.row&&(c.rowVal=a.getRowVal(b,d.row)))}return(b.options.saveScroll||b.options.saveFocus&&!c.colName&&!c.rowVal)&&(c.focus=!1,b.renderContainers.body.prevRowScrollIndex&&(c.rowVal=a.getRowVal(b,b.renderContainers.body.visibleRowCache[b.renderContainers.body.prevRowScrollIndex])),b.renderContainers.body.prevColScrollIndex&&(c.colName=b.renderContainers.body.visibleColumnCache[b.renderContainers.body.prevColScrollIndex].name)),c},saveSelection:function(b){return b.api.selection&&b.options.saveSelection?b.api.selection.getSelectedGridRows().map(function(c){return a.getRowVal(b,c)}):[]},saveGrouping:function(a){return a.api.grouping&&a.options.saveGrouping?a.api.grouping.getGrouping(a.options.saveGroupingExpandedStates):{}},savePagination:function(a){return a.api.pagination&&a.options.paginationPageSize?{paginationCurrentPage:a.options.paginationCurrentPage,paginationPageSize:a.options.paginationPageSize}:{}},saveTreeView:function(a){return a.api.treeView&&a.options.saveTreeView?a.api.treeView.getTreeView():{}},getRowVal:function(a,b){if(!b)return null;var c={};return a.options.saveRowIdentity?(c.identity=!0,c.row=a.options.saveRowIdentity(b.entity)):(c.identity=!1,c.row=a.renderContainers.body.visibleRowCache.indexOf(b)),c},restoreColumns:function(a,b){var c=!1;b.forEach(function(b,d){var e=a.getColumn(b.name);if(e&&!a.isRowHeaderColumn(e)){!a.options.saveVisible||e.visible===b.visible&&e.colDef.visible===b.visible||(e.visible=b.visible,e.colDef.visible=b.visible,a.api.core.raise.columnVisibilityChanged(e)),a.options.saveWidths&&e.width!==b.width&&(e.width=b.width,e.hasCustomWidth=!0),!a.options.saveSort||angular.equals(e.sort,b.sort)||void 0===e.sort&&angular.isEmpty(b.sort)||(e.sort=angular.copy(b.sort),c=!0),a.options.saveFilter&&!angular.equals(e.filters,b.filters)&&(b.filters.forEach(function(a,b){angular.extend(e.filters[b],a),void 0!==a.term&&null!==a.term||delete e.filters[b].term}),a.api.core.raise.filterChanged()),a.api.pinning&&a.options.savePinning&&e.renderContainer!==b.pinned&&a.api.pinning.pinColumn(e,b.pinned);var f=a.getOnlyDataColumns().indexOf(e);if(-1!==f&&a.options.saveOrder&&f!==d){var g=a.columns.splice(f+a.rowHeaderColumns.length,1)[0];a.columns.splice(d+a.rowHeaderColumns.length,0,g)}}}),c&&a.api.core.raise.sortChanged(a,a.getColumnSorting())},restoreScrollFocus:function(b,c,d){if(b.api.cellNav){var e,f;if(d.colName){var g=b.options.columnDefs.filter(function(a){return a.name===d.colName});g.length>0&&(e=g[0])}d.rowVal&&d.rowVal.row&&(f=d.rowVal.identity?a.findRowByIdentity(b,d.rowVal):b.renderContainers.body.visibleRowCache[d.rowVal.row]);var h=f&&f.entity?f.entity:null;(e||h)&&(d.focus?b.api.cellNav.scrollToFocus(h,e):b.scrollTo(h,e))}},restoreSelection:function(b,c){b.api.selection&&(b.api.selection.clearSelectedRows(),c.forEach(function(c){if(c.identity){var d=a.findRowByIdentity(b,c);d&&b.api.selection.selectRow(d.entity)}else b.api.selection.selectRowByVisibleIndex(c.row)}))},restoreGrouping:function(a,b){a.api.grouping&&void 0!==b&&null!==b&&!angular.equals(b,{})&&a.api.grouping.setGrouping(b)},restoreTreeView:function(a,b){a.api.treeView&&void 0!==b&&null!==b&&!angular.equals(b,{})&&a.api.treeView.setTreeView(b)},restorePagination:function(a,b){a.api.pagination&&a.options.paginationPageSize&&(a.options.paginationCurrentPage=b.paginationCurrentPage,a.options.paginationPageSize=b.paginationPageSize)},findRowByIdentity:function(a,b){if(!a.options.saveRowIdentity)return null;var c=a.rows.filter(function(c){return a.options.saveRowIdentity(c.entity)===b.row});return c.length>0?c[0]:null}};return a}),a.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid)}}}])}(),function(){var a=angular.module("ui.grid.selection",["ui.grid"]);a.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(a){a.decorator("GridRow",["$delegate",function(a){return a.prototype.setSelected=function(a){a!==this.isSelected&&(this.isSelected=a,this.grid.selection.selectedCount+=a?1:-1)},a.prototype.setFocused=function(a){a!==this.isFocused&&(this.grid.selection.focusedRow&&(this.grid.selection.focusedRow.isFocused=!1),this.grid.selection.focusedRow=a?this:null,this.isFocused=a)},a}])}]),a.service("uiGridSelectionService",function(){var a={initializeGrid:function(b){b.selection={lastSelectedRow:null,focusedRow:null,selectAll:!1},b.selection.selectedCount=0,a.defaultGridOptions(b.options);var c={events:{selection:{rowFocusChanged:function(a,b,c){},rowSelectionChanged:function(a,b,c){},rowSelectionChangedBatch:function(a,b,c){}}},methods:{selection:{toggleRowSelection:function(c,d){var e=b.getRow(c);null!==e&&a.toggleRowSelection(b,e,d,b.options.multiSelect,b.options.noUnselect)},selectRow:function(c,d){var e=b.getRow(c);null===e||e.isSelected||a.toggleRowSelection(b,e,d,b.options.multiSelect,b.options.noUnselect)},selectRowByVisibleIndex:function(c,d){var e=b.renderContainers.body.visibleRowCache[c];null===e||void 0===e||e.isSelected||a.toggleRowSelection(b,e,d,b.options.multiSelect,b.options.noUnselect)},unSelectRow:function(c,d){var e=b.getRow(c);null!==e&&e.isSelected&&a.toggleRowSelection(b,e,d,b.options.multiSelect,b.options.noUnselect)},unSelectRowByVisibleIndex:function(c,d){var e=b.renderContainers.body.visibleRowCache[c];null!==e&&void 0!==e&&e.isSelected&&a.toggleRowSelection(b,e,d,b.options.multiSelect,b.options.noUnselect)},selectAllRows:function(c){if(!1!==b.options.multiSelect){var d=[];b.rows.forEach(function(e){e.isSelected||!1===e.enableSelection||!1===b.options.isRowSelectable(e)||(e.setSelected(!0),a.decideRaiseSelectionEvent(b,e,d,c))}),b.selection.selectAll=!0,a.decideRaiseSelectionBatchEvent(b,d,c)}},selectAllVisibleRows:function(c){if(!1!==b.options.multiSelect){var d=[];b.rows.forEach(function(e){e.visible?e.isSelected||!1===e.enableSelection||!1===b.options.isRowSelectable(e)||(e.setSelected(!0),a.decideRaiseSelectionEvent(b,e,d,c)):e.isSelected&&(e.setSelected(!1),a.decideRaiseSelectionEvent(b,e,d,c))}),b.selection.selectAll=!0,a.decideRaiseSelectionBatchEvent(b,d,c)}},clearSelectedRows:function(c){a.clearSelectedRows(b,c)},getSelectedRows:function(){return a.getSelectedRows(b).map(function(a){return a.entity}).filter(function(a){return a.hasOwnProperty("$$hashKey")||!angular.isObject(a)})},getSelectedGridRows:function(){return a.getSelectedRows(b)},getSelectedCount:function(){return b.selection.selectedCount},setMultiSelect:function(a){b.options.multiSelect=a},setModifierKeysToMultiSelect:function(a){b.options.modifierKeysToMultiSelect=a},getSelectAllState:function(){return b.selection.selectAll}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableRowSelection=!1!==a.enableRowSelection,a.multiSelect=!1!==a.multiSelect,a.noUnselect=!0===a.noUnselect,a.modifierKeysToMultiSelect=!0===a.modifierKeysToMultiSelect,a.enableRowHeaderSelection=!1!==a.enableRowHeaderSelection,void 0===a.enableFullRowSelection&&(a.enableFullRowSelection=!a.enableRowHeaderSelection),a.enableFocusRowOnRowHeaderClick=!1!==a.enableFocusRowOnRowHeaderClick||!a.enableRowHeaderSelection,a.enableSelectRowOnFocus=!1!==a.enableSelectRowOnFocus,a.enableSelectAll=!1!==a.enableSelectAll,a.enableSelectionBatchEvent=!1!==a.enableSelectionBatchEvent,a.selectionRowHeaderWidth=angular.isDefined(a.selectionRowHeaderWidth)?a.selectionRowHeaderWidth:30,a.enableFooterTotalSelected=!1!==a.enableFooterTotalSelected,a.isRowSelectable=angular.isDefined(a.isRowSelectable)?a.isRowSelectable:angular.noop},toggleRowSelection:function(b,c,d,e,f){if(!1!==c.enableSelection){var g,h=c.isSelected;e||(h?(g=a.getSelectedRows(b),g.length>1&&(h=!1,a.clearSelectedRows(b,d))):a.clearSelectedRows(b,d)),h&&f||(c.setSelected(!h),!0===c.isSelected&&(b.selection.lastSelectedRow=c),g=a.getSelectedRows(b),b.selection.selectAll=b.rows.length===g.length,b.api.selection.raise.rowSelectionChanged(c,d))}},shiftSelect:function(b,c,d,e){if(e){var f=a.getSelectedRows(b),g=f.length>0?b.renderContainers.body.visibleRowCache.indexOf(b.selection.lastSelectedRow):0,h=b.renderContainers.body.visibleRowCache.indexOf(c);if(g>h){var i=g;g=h,h=i}for(var j=[],k=g;k<=h;k++){var l=b.renderContainers.body.visibleRowCache[k];l&&(l.isSelected||!1===l.enableSelection||(l.setSelected(!0),b.selection.lastSelectedRow=l,a.decideRaiseSelectionEvent(b,l,j,d)))}a.decideRaiseSelectionBatchEvent(b,j,d)}},getSelectedRows:function(a){return a.rows.filter(function(a){return a.isSelected})},clearSelectedRows:function(b,c){var d=[];a.getSelectedRows(b).forEach(function(e){e.isSelected&&(e.setSelected(!1),a.decideRaiseSelectionEvent(b,e,d,c))}),b.selection.selectAll=!1,b.selection.selectedCount=0,a.decideRaiseSelectionBatchEvent(b,d,c)},decideRaiseSelectionEvent:function(a,b,c,d){a.options.enableSelectionBatchEvent?c.push(b):a.api.selection.raise.rowSelectionChanged(b,d)},decideRaiseSelectionBatchEvent:function(a,b,c){b.length>0&&a.api.selection.raise.rowSelectionChangedBatch(b,c)}};return a}),a.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","uiGridConstants",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(d,e,f,g){if(b.initializeGrid(g.grid),g.grid.options.enableRowHeaderSelection){var h={name:a.selectionRowHeaderColName,displayName:"",width:g.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};g.grid.addRowHeaderColumn(h,0)}var i=!1,j=function(a){return a.forEach(function(a){a.enableSelection=g.grid.options.isRowSelectable(a)}),a},k=function(){g.grid.options.isRowSelectable!==angular.noop&&!0!==i&&(g.grid.registerRowsProcessor(j,500),i=!0)};k();var l=g.grid.registerDataChangeCallback(k,[c.dataChange.OPTIONS]);d.$on("$destroy",l)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(a,b,c){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,d,e,f){function g(a,b){32===b.keyCode&&(b.preventDefault(),h(a,b))}function h(a,c){if(c.stopPropagation(),c.shiftKey)b.shiftSelect(j,a,c,j.options.multiSelect);else if(c.ctrlKey||c.metaKey)b.toggleRowSelection(j,a,c,j.options.multiSelect,j.options.noUnselect);else if(a.groupHeader){b.toggleRowSelection(j,a,c,j.options.multiSelect,j.options.noUnselect);for(var d=0;d<a.treeNode.children.length;d++)b.toggleRowSelection(j,a.treeNode.children[d].row,c,j.options.multiSelect,j.options.noUnselect)}else b.toggleRowSelection(j,a,c,j.options.multiSelect&&!j.options.modifierKeysToMultiSelect,j.options.noUnselect);j.options.enableFocusRowOnRowHeaderClick&&a.setFocused(!a.isFocused)&&j.api.selection.raise.rowFocusChanged(a,c)}function i(a){(a.ctrlKey||a.shiftKey)&&(a.target.onselectstart=function(){return!1},window.setTimeout(function(){a.target.onselectstart=null},0))}var j=f.grid;a.selectButtonClick=h,a.selectButtonKeyDown=g,"ie"===c.detectBrowser()&&d.on("mousedown",i),a.$on("$destroy",function(){d.off()})}}}]),a.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(a){var c=a.col.grid;a.headerButtonKeyDown=function(b){32!==b.keyCode&&13!==b.keyCode||(b.preventDefault(),a.headerButtonClick(b))},a.headerButtonClick=function(a){c.selection.selectAll?(b.clearSelectedRows(c,a),c.options.noUnselect&&c.api.selection.selectRowByVisibleIndex(0,a),c.selection.selectAll=!1):c.options.multiSelect&&(c.api.selection.selectAllVisibleRows(a),c.selection.selectAll=!0)}}}}]),a.directive("uiGridViewport",function(){return{priority:-200,scope:!1,compile:function(a){var b=angular.element(a[0].querySelector(".ui-grid-canvas:not(.ui-grid-empty-base-layer-container)").children[0]),c="'ui-grid-row-selected': row.isSelected, 'ui-grid-row-focused': row.isFocused}",d=b.attr("ng-class");return c=d?d.slice(0,-1)+","+c:"{"+c,b.attr("ng-class",c),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}),a.directive("uiGridCell",["uiGridConstants","uiGridSelectionService",function(a,b){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(c,d,e,f){function g(){c.grid.options.enableRowSelection&&c.grid.options.enableFullRowSelection&&"selectionRowHeaderCol"!==c.col.colDef.name&&(d.addClass("ui-grid-disable-selection"),d.on("touchstart",l),d.on("touchend",m),d.on("click",k),c.registered=!0)}function h(){c.registered&&(d.removeClass("ui-grid-disable-selection"),d.off("touchstart",l),d.off("touchend",m),d.off("click",k),c.registered=!1)}var i=0,j=300;f.grid.api.cellNav&&f.grid.api.cellNav.on.viewPortKeyDown(c,function(d,e){null!==e&&e.row===c.row&&e.col===c.col&&d.keyCode===a.keymap.SPACE&&"selectionRowHeaderCol"===c.col.colDef.name&&(d.preventDefault(),b.toggleRowSelection(c.grid,c.row,d,c.grid.options.multiSelect&&!c.grid.options.modifierKeysToMultiSelect,c.grid.options.noUnselect),c.$apply())});var k=function(a){"ui-grid-icon-minus-squared"!==a.target.className&&"ui-grid-icon-plus-squared"!==a.target.className&&(d.off("touchend",m),a.shiftKey?b.shiftSelect(c.grid,c.row,a,c.grid.options.multiSelect):a.ctrlKey||a.metaKey?b.toggleRowSelection(c.grid,c.row,a,c.grid.options.multiSelect,c.grid.options.noUnselect):c.grid.options.enableSelectRowOnFocus&&b.toggleRowSelection(c.grid,c.row,a,c.grid.options.multiSelect&&!c.grid.options.modifierKeysToMultiSelect,c.grid.options.noUnselect),c.row.setFocused(!c.row.isFocused),c.grid.api.selection.raise.rowFocusChanged(c.row,a),c.$apply(),window.setTimeout(function(){d.on("touchend",m)},j))},l=function(){i=(new Date).getTime(),d.off("click",k)},m=function(a){(new Date).getTime()-i<j&&k(a),window.setTimeout(function(){d.on("click",k)},j)};g();var n=c.grid.registerDataChangeCallback(function(){c.grid.options.enableRowSelection&&c.grid.options.enableFullRowSelection&&!c.registered?g():c.grid.options.enableRowSelection&&c.grid.options.enableFullRowSelection||!c.registered||h()},[a.dataChange.OPTIONS]);d.on("$destroy",n)}}}]),a.directive("uiGridGridFooter",["$compile","gridUtil",function(a,b){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(){return{pre:function(c,d,e,f){f.grid.options.showGridFooter&&b.getTemplate("ui-grid/gridFooterSelectedItems").then(function(b){var e=angular.element(b),f=a(e)(c);angular.element(d[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){var a=angular.module("ui.grid.treeBase",["ui.grid"]);a.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a){a.treeBase={},a.treeBase.numberLevels=0,a.treeBase.expandAll=!1,a.treeBase.tree=[],i.defaultGridOptions(a.options),a.registerRowsProcessor(i.treeRows,410),a.registerColumnBuilder(i.treeBaseColumnBuilder),i.createRowHeader(a);var b={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){i.expandAllRows(a)},collapseAllRows:function(){i.collapseAllRows(a)},toggleRowTreeState:function(b){i.toggleRowTreeState(a,b)},expandRow:function(b,c){i.expandRow(a,b,c)},expandRowChildren:function(b){i.expandRowChildren(a,b)},collapseRow:function(b){i.collapseRow(a,b)},collapseRowChildren:function(b){i.collapseRowChildren(a,b)},getTreeExpandedState:function(){return{expandedState:i.getTreeState(a)}},setTreeState:function(b){i.setTreeState(a,b)},getRowChildren:function(a){return a.treeNode.children.map(function(a){return a.row})}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.treeRowHeaderBaseWidth=a.treeRowHeaderBaseWidth||30,a.treeIndent=null!=a.treeIndent?a.treeIndent:10,a.showTreeRowHeader=!1!==a.showTreeRowHeader,a.showTreeExpandNoChildren=!1!==a.showTreeExpandNoChildren,a.treeRowHeaderAlwaysVisible=!1!==a.treeRowHeaderAlwaysVisible,a.treeCustomAggregations=a.treeCustomAggregations||{},a.enableExpandAll=!1!==a.enableExpandAll},treeBaseColumnBuilder:function(a,b,c){void 0!==a.customTreeAggregationFn&&(b.treeAggregationFn=a.customTreeAggregationFn),void 0!==a.treeAggregationType&&(b.treeAggregation={type:a.treeAggregationType},void 0!==c.treeCustomAggregations[a.treeAggregationType]?(b.treeAggregationFn=c.treeCustomAggregations[a.treeAggregationType].aggregationFn,b.treeAggregationFinalizerFn=c.treeCustomAggregations[a.treeAggregationType].finalizerFn,b.treeAggregation.label=c.treeCustomAggregations[a.treeAggregationType].label):void 0!==i.nativeAggregations()[a.treeAggregationType]&&(b.treeAggregationFn=i.nativeAggregations()[a.treeAggregationType].aggregationFn,b.treeAggregation.label=i.nativeAggregations()[a.treeAggregationType].label)),void 0!==a.treeAggregationLabel&&(void 0===b.treeAggregation&&(b.treeAggregation={}),b.treeAggregation.label=a.treeAggregationLabel),b.treeAggregationUpdateEntity=!1!==a.treeAggregationUpdateEntity,void 0===b.customTreeAggregationFinalizerFn&&(b.customTreeAggregationFinalizerFn=a.customTreeAggregationFinalizerFn)},createRowHeader:function(a){var c={name:b.rowHeaderColName,displayName:"",width:a.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};c.visible=a.options.treeRowHeaderAlwaysVisible,a.addRowHeaderColumn(c,-100)},expandAllRows:function(a){a.treeBase.tree.forEach(function(c){i.setAllNodes(a,c,b.EXPANDED)}),a.treeBase.expandAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.treeBase.tree.forEach(function(c){i.setAllNodes(a,c,b.COLLAPSED)}),a.treeBase.expandAll=!1,a.queueGridRefresh()},setAllNodes:function(a,c,d){void 0!==c.state&&c.state!==d&&(c.state=d,d===b.EXPANDED?a.api.treeBase.raise.rowExpanded(c.row):a.api.treeBase.raise.rowCollapsed(c.row)),c.children&&c.children.forEach(function(b){i.setAllNodes(a,b,d)})},toggleRowTreeState:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||(c.treeNode.state===b.EXPANDED?i.collapseRow(a,c):i.expandRow(a,c,!1),a.queueGridRefresh())},expandRow:function(a,c,d){if(d){for(var e=[];c&&void 0!==c.treeLevel&&null!==c.treeLevel&&c.treeLevel>=0&&c.treeNode.state!==b.EXPANDED;)e.push(c),c=c.treeNode.parentRow;if(e.length>0){for(c=e.pop();c;)c.treeNode.state=b.EXPANDED,a.api.treeBase.raise.rowExpanded(c),c=e.pop();a.treeBase.expandAll=i.allExpanded(a.treeBase.tree),a.queueGridRefresh()}}else{if(void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0)return;c.treeNode.state!==b.EXPANDED&&(c.treeNode.state=b.EXPANDED,a.api.treeBase.raise.rowExpanded(c),a.treeBase.expandAll=i.allExpanded(a.treeBase.tree),a.queueGridRefresh())}},expandRowChildren:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||(i.setAllNodes(a,c.treeNode,b.EXPANDED),a.treeBase.expandAll=i.allExpanded(a.treeBase.tree),a.queueGridRefresh())},collapseRow:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||c.treeNode.state!==b.COLLAPSED&&(c.treeNode.state=b.COLLAPSED,a.treeBase.expandAll=!1,a.api.treeBase.raise.rowCollapsed(c),a.queueGridRefresh())},collapseRowChildren:function(a,c){void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0||(i.setAllNodes(a,c.treeNode,b.COLLAPSED),a.treeBase.expandAll=!1,a.queueGridRefresh())},allExpanded:function(a){var b=!0;return a.forEach(function(a){i.allExpandedInternal(a)||(b=!1)}),b},allExpandedInternal:function(a){if(a.children&&a.children.length>0){if(a.state===b.COLLAPSED)return!1;var c=!0;return a.children.forEach(function(a){i.allExpandedInternal(a)||(c=!1)}),c}return!0},treeRows:function(a){var b=this;return 0===a.length?(i.updateRowHeaderWidth(b),a):(b.treeBase.tree=i.createTree(b,a),i.updateRowHeaderWidth(b),i.sortTree(b),i.fixFilter(b),i.renderTree(b.treeBase.tree))},updateRowHeaderWidth:function(a){var c=a.getColumn(b.rowHeaderColName),d=a.options.treeRowHeaderBaseWidth+a.options.treeIndent*Math.max(a.treeBase.numberLevels-1,0);c&&d!==c.width&&(c.width=d,a.queueRefresh());var e=!0;!1===a.options.showTreeRowHeader&&(e=!1),!1===a.options.treeRowHeaderAlwaysVisible&&a.treeBase.numberLevels<=0&&(e=!1),c&&c.visible!==e&&(c.visible=e,c.colDef.visible=e,a.queueGridRefresh())},renderTree:function(a){var c=[];return a.forEach(function(a){a.row.visible&&c.push(a.row),a.state===b.EXPANDED&&a.children&&a.children.length>0&&(c=c.concat(i.renderTree(a.children)))}),c},createTree:function(a,c){function d(c){if(void 0!==c.entity.$$treeLevel&&c.treeLevel!==c.entity.$$treeLevel&&(c.treeLevel=c.entity.$$treeLevel),c.treeLevel<=f){for(;c.treeLevel<=f;){var d=g.pop();i.finaliseAggregations(d),f--}e=g.length>0?i.setCurrentState(g):b.EXPANDED}(void 0===c.treeLevel||null===c.treeLevel||c.treeLevel<0)&&c.visible&&i.aggregate(a,c,g),i.addOrUseNode(a,c,g,h),void 0!==c.treeLevel&&null!==c.treeLevel&&c.treeLevel>=0&&(g.push(c),f++,e=i.setCurrentState(g)),a.treeBase.numberLevels<c.treeLevel+1&&(a.treeBase.numberLevels=c.treeLevel+1)}var e,f=-1,g=[];a.treeBase.tree=[],a.treeBase.numberLevels=0;var h=i.getAggregations(a);for(c.forEach(d);g.length>0;){var j=g.pop();i.finaliseAggregations(j)}return a.treeBase.tree},addOrUseNode:function(a,c,d,e){var f=[];e.forEach(function(a){f.push(i.buildAggregationObject(a.col))});var g={state:b.COLLAPSED,row:c,parentRow:null,aggregations:f,children:[]};c.treeNode&&(g.state=c.treeNode.state),d.length>0&&(g.parentRow=d[d.length-1]),c.treeNode=g,0===d.length?a.treeBase.tree.push(g):d[d.length-1].treeNode.children.push(g)},setCurrentState:function(a){var c=b.EXPANDED
;return a.forEach(function(a){a.treeNode.state===b.COLLAPSED&&(c=b.COLLAPSED)}),c},sortTree:function(a){a.columns.forEach(function(a){a.sort&&a.sort.ignoreSort&&delete a.sort.ignoreSort}),a.treeBase.tree=i.sortInternal(a,a.treeBase.tree)},sortInternal:function(a,c){var d=c.map(function(a){return a.row});d=h.sort(a,d,a.columns);var e=d.map(function(a){return a.treeNode});return e.forEach(function(c){c.state===b.EXPANDED&&c.children&&c.children.length>0&&(c.children=i.sortInternal(a,c.children))}),e},fixFilter:function(a){var b;a.treeBase.tree.forEach(function(a){a.children&&a.children.length>0&&(b=a.row.visible,i.fixFilterInternal(a.children,b))})},fixFilterInternal:function(a,b){return a.forEach(function(a){a.row.visible&&!b&&(i.setParentsVisible(a),b=!0),a.children&&a.children.length>0&&i.fixFilterInternal(a.children,b&&a.row.visible)&&(b=!0)}),b},setParentsVisible:function(a){for(;a.parentRow;)a.parentRow.visible=!0,a=a.parentRow.treeNode},buildAggregationObject:function(a){var b={col:a};return a.treeAggregation&&a.treeAggregation.type&&(b.type=a.treeAggregation.type),a.treeAggregation&&a.treeAggregation.label&&(b.label=a.treeAggregation.label),b},getAggregations:function(a){var b=[];return a.columns.forEach(function(c){void 0!==c.treeAggregationFn&&(b.push(i.buildAggregationObject(c)),a.options.showColumnFooter&&void 0===c.colDef.aggregationType&&c.treeAggregation&&(c.treeFooterAggregation=i.buildAggregationObject(c),c.aggregationType=i.treeFooterAggregationType))}),b},aggregate:function(a,b,c){0===c.length&&b.treeNode&&b.treeNode.aggregations&&b.treeNode.aggregations.forEach(function(c){if(void 0!==c.col.treeFooterAggregation){var d=a.getCellValue(b,c.col),e=Number(d);c.col.treeAggregationFn?c.col.treeAggregationFn(c.col.treeFooterAggregation,d,e,b):c.col.treeFooterAggregation.value=void 0}}),c.forEach(function(c,d){c.treeNode.aggregations&&c.treeNode.aggregations.forEach(function(c){var e=a.getCellValue(b,c.col),f=Number(e);c.col.treeAggregationFn(c,e,f,b),0===d&&void 0!==c.col.treeFooterAggregation&&(c.col.treeAggregationFn?c.col.treeAggregationFn(c.col.treeFooterAggregation,e,f,b):c.col.treeFooterAggregation.value=void 0)})})},nativeAggregations:function(){return{count:{label:f.get().aggregation.count,menuTitle:f.get().grouping.aggregate_count,aggregationFn:function(a,b,c){void 0===a.value?a.value=1:a.value++}},sum:{label:f.get().aggregation.sum,menuTitle:f.get().grouping.aggregate_sum,aggregationFn:function(a,b,c){isNaN(c)||(void 0===a.value?a.value=c:a.value+=c)}},min:{label:f.get().aggregation.min,menuTitle:f.get().grouping.aggregate_min,aggregationFn:function(a,b,c){void 0===a.value?a.value=b:void 0!==b&&null!==b&&(b<a.value||null===a.value)&&(a.value=b)}},max:{label:f.get().aggregation.max,menuTitle:f.get().grouping.aggregate_max,aggregationFn:function(a,b,c){void 0===a.value?a.value=b:void 0!==b&&null!==b&&(b>a.value||null===a.value)&&(a.value=b)}},avg:{label:f.get().aggregation.avg,menuTitle:f.get().grouping.aggregate_avg,aggregationFn:function(a,b,c){void 0===a.count?a.count=1:a.count++,isNaN(c)||(void 0===a.value||void 0===a.sum?(a.value=c,a.sum=c):(a.sum+=c,a.value=a.sum/a.count))}}}},finaliseAggregation:function(a,b){b.col.treeAggregationUpdateEntity&&void 0!==a&&void 0!==a.entity["$$"+b.col.uid]&&angular.extend(b,a.entity["$$"+b.col.uid]),"function"==typeof b.col.treeAggregationFinalizerFn&&b.col.treeAggregationFinalizerFn(b),"function"==typeof b.col.customTreeAggregationFinalizerFn&&b.col.customTreeAggregationFinalizerFn(b),void 0===b.rendered&&(b.rendered=b.label?b.label+b.value:b.value)},finaliseAggregations:function(a){null!=a&&void 0!==a.treeNode.aggregations&&a.treeNode.aggregations.forEach(function(b){if(i.finaliseAggregation(a,b),b.col.treeAggregationUpdateEntity){var c={};angular.forEach(b,function(a,d){b.hasOwnProperty(d)&&"col"!==d&&(c[d]=a)}),a.entity["$$"+b.col.uid]=c}})},treeFooterAggregationType:function(a,b){return i.finaliseAggregation(void 0,b.treeFooterAggregation),void 0===b.treeFooterAggregation.value||null===b.treeFooterAggregation.rendered?"":b.treeFooterAggregation.rendered}};return i}]),a.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.treeButtonClass=function(a){if(f.options.showTreeExpandNoChildren&&a.treeLevel>-1||a.treeNode.children&&a.treeNode.children.length>0){if("expanded"===a.treeNode.state)return"ui-grid-icon-minus-squared";if("collapsed"===a.treeNode.state)return"ui-grid-icon-plus-squared"}},a.treeButtonClick=function(a,c){c.stopPropagation(),b.toggleRowTreeState(f,a,c)}}}}]),a.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function(a){var c=a.col.grid;a.headerButtonClass=function(){return c.treeBase.numberLevels>0&&c.treeBase.expandAll?"ui-grid-icon-minus-squared":c.treeBase.numberLevels>0&&!c.treeBase.expandAll?"ui-grid-icon-plus-squared":void 0},a.headerButtonClick=function(a,d){c.treeBase.expandAll?b.collapseAllRows(c,d):b.expandAllRows(c,d)}}}}]),a.directive("uiGridViewport",function(){return{priority:-200,scope:!1,compile:function(a){var b=angular.element(a.children().children()[0]),c=b.attr("ng-class"),d="";return d=c?c.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",b.attr("ng-class",d),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}})}(),function(){var a=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);a.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),a.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(a,b,c,d,e,f,g,h,i){var j={initializeGrid:function(a,b){d.initializeGrid(a,b),a.treeView={},a.registerRowsProcessor(j.adjustSorting,60);var c={events:{treeView:{}},methods:{treeView:{}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableTreeView=!1!==a.enableTreeView},adjustSorting:function(a){return this.columns.forEach(function(a){a.sort&&(a.sort.ignoreSort=!0)}),a}};return j}]),a.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){!1!==e.grid.options.enableTreeView&&b.initializeGrid(e.grid,a)},post:function(a,b,c,d){}}}}}])}(),function(){var a=angular.module("ui.grid.validate",["ui.grid"]);a.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function(a,b,c,d,e){var f={validatorFactories:{},setExternalFactoryFunction:function(a){f.externalFactoryFunction=a},clearExternalFactory:function(){delete f.externalFactoryFunction},getValidatorFromExternalFactory:function(a,b){return f.externalFactoryFunction(a,b).validatorFactory(b)},getMessageFromExternalFactory:function(a,b){return f.externalFactoryFunction(a,b).messageFunction(b)},setValidator:function(a,b,c){f.validatorFactories[a]={validatorFactory:b,messageFunction:c}},getValidator:function(a,b){if(f.externalFactoryFunction){var c=f.getValidatorFromExternalFactory(a,b);if(c)return c}if(!f.validatorFactories[a])throw"Invalid validator name: "+a;return f.validatorFactories[a].validatorFactory(b)},getMessage:function(a,b){if(f.externalFactoryFunction){var c=f.getMessageFromExternalFactory(a,b);if(c)return c}return f.validatorFactories[a].messageFunction(b)},isInvalid:function(a,b){return a["$$invalid"+b.name]},setInvalid:function(a,b){a["$$invalid"+b.name]=!0},setValid:function(a,b){delete a["$$invalid"+b.name]},setError:function(a,b,c){a["$$errors"+b.name]||(a["$$errors"+b.name]={}),a["$$errors"+b.name][c]=!0},clearError:function(a,b,c){a["$$errors"+b.name]&&c in a["$$errors"+b.name]&&delete a["$$errors"+b.name][c]},getErrorMessages:function(a,b){var c=[];return a["$$errors"+b.name]&&0!==Object.keys(a["$$errors"+b.name]).length?(Object.keys(a["$$errors"+b.name]).sort().forEach(function(a){c.push(f.getMessage(a,b.validators[a]))}),c):c},getFormattedErrors:function(b,c){var e="",g=f.getErrorMessages(b,c);if(g.length)return g.forEach(function(a){e+=a+"<br/>"}),a.trustAsHtml("<p><b>"+d.getSafeText("validate.error")+"</b></p>"+e)},getTitleFormattedErrors:function(b,c){var e="\n",g="",h=f.getErrorMessages(b,c);if(h.length)return h.forEach(function(a){g+=a+e}),a.trustAsHtml(d.getSafeText("validate.error")+e+g)},runValidators:function(a,c,d,e,g){if(d!==e){if(void 0===c.name||!c.name)throw new Error("colDef.name is required to perform validation");f.setValid(a,c);var h=function(a,b,c){return function(h){h||(f.setInvalid(a,b),f.setError(a,b,c),g&&g.api.validate.raise.validationFailed(a,b,d,e))}},i=[];for(var j in c.validators){f.clearError(a,c,j);var k=f.getValidator(j,c.validators[j]),l=b.when(k(e,d,a,c)).then(h(a,c,j));i.push(l)}return b.all(i)}},createDefaultValidators:function(){f.setValidator("minLength",function(a){return function(b,c){return void 0===c||null===c||""===c||c.length>=a}},function(a){return d.getSafeText("validate.minLength").replace("THRESHOLD",a)}),f.setValidator("maxLength",function(a){return function(b,c){return void 0===c||null===c||""===c||c.length<=a}},function(a){return d.getSafeText("validate.maxLength").replace("THRESHOLD",a)}),f.setValidator("required",function(a){return function(b,c){return!a||!(void 0===c||null===c||""===c)}},function(){return d.getSafeText("validate.required")})},initializeGrid:function(a,b){b.validate={isInvalid:f.isInvalid,getErrorMessages:f.getErrorMessages,getFormattedErrors:f.getFormattedErrors,getTitleFormattedErrors:f.getTitleFormattedErrors,runValidators:f.runValidators};var c={events:{validate:{validationFailed:function(a,b,c,d){}}},methods:{validate:{isInvalid:function(a,c){return b.validate.isInvalid(a,c)},getErrorMessages:function(a,c){return b.validate.getErrorMessages(a,c)},getFormattedErrors:function(a,c){return b.validate.getFormattedErrors(a,c)},getTitleFormattedErrors:function(a,c){return b.validate.getTitleFormattedErrors(a,c)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.edit&&b.api.edit.on.afterCellEdit(a,function(a,c,d,e){b.validate.runValidators(a,c,d,e,b)}),f.createDefaultValidators()}};return f}]),a.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(a,b){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(a,b,c,d){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(a){a.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-style="col.extraStyle" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-show="colFilter.selectOptions.length > 0" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),a.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row">\x3c!-- tfooter --\x3e<div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),a.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header">\x3c!-- theader --\x3e<div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),a.put("ui-grid/ui-grid-menu-header-item",'<li role="menuitem"><div class="ui-grid-menu-item" role="heading" aria-level="2" ng-show="itemShown()"><i aria-hidden="true">&nbsp; </i><span ng-bind="label()"></span></div></li>'),a.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),a.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),a.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid">\x3c!-- TODO (c0bra): add "scoped" attr here, eventually? --\x3e<style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ (((grid.getVisibleRowCount() * grid.options.rowHeight) < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper" role="grid"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),a.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems">\x3c!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --\x3e</div></div>'),a.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),a.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable, \'ui-grid-header-cell-last-col\': isLastCol }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" ng-keydown="handleKeyDown($event)" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-keydown="headerCellArrowKeyDown($event)" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),a.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-show="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner" ng-if="shown"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),a.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp; </i>{{ label() }}</button>'),a.put("ui-grid/uiGridRenderContainer","<div role=\"presentation\" ui-grid-one-bind-id-grid=\"containerId + '-grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\">\x3c!-- All of these dom elements are replaced in place --\x3e<div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height: colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),a.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()">\x3c!-- tbody --\x3e<div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),a.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),a.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/emptyBaseLayerContainer",'<div class="ui-grid-empty-base-layer-container ui-grid-canvas"><div class="ui-grid-row" ng-repeat="(rowRenderIndex, row) in grid.baseLayer.emptyRows track by $index" ng-style="Viewport.rowStyle(rowRenderIndex)"><div><div><div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell {{ col.getColClass(false) }}"></div></div></div></div></div>'),a.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),a.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i class="clickable" ng-if="!(row.groupHeader==true || row.entity.subGridOptions.disableRowExpandable)" ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity, $event)"></i></div></div>'),a.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller: true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\">&nbsp;</div>"),a.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><span class="ui-grid-cell-empty" ng-if="!grid.options.showExpandAllButton"></span> <button type="button" class="ui-grid-icon-button clickable" ng-if="grid.options.showExpandAllButton" ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></button></div></div>'),a.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),a.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),a.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),a.put("ui-grid/pagination",'<div class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div class="ui-grid-pager-control"><button type="button" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" step="1" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/ </abbr>{{ paginationApi.getTotalPages() }} </span><button type="button" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1 && !grid.options.useCustomPagination"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{ 1 + paginationApi.getFirstRowIndex() }} <abbr ui-grid-one-bind-title="paginationThrough">- </abbr>{{ 1 + paginationApi.getLastRowIndex() }} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),a.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),a.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),a.put("ui-grid/selectionHeaderCell",'<div>\x3c!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --\x3e<div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll" role="checkbox" ng-model="grid.selection.selectAll"></ui-grid-selection-select-all-buttons></div></div>'),a.put("ui-grid/selectionRowHeader",'<div class="ui-grid-cell-contents ui-grid-disable-selection clickable"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div>'),a.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok clickable" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)" ng-keydown="selectButtonKeyDown(row, $event)" role="checkbox" ng-model="row.isSelected">&nbsp;</div>'),a.put("ui-grid/selectionSelectAllButtons",'<div role="button" class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)" ng-keydown="headerButtonKeyDown($event)"></div>'),a.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="headerButtonClass()" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),a.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),a.put("ui-grid/treeBaseRowHeaderButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-tree-base-header\': row.treeLevel > -1 }" ng-click="treeButtonClick(row, $event)"><i ng-class="treeButtonClass(row)" ng-style="{\'padding-left\': grid.options.treeIndent * row.treeLevel + \'px\'}"></i> &nbsp;</div>'),a.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}]),angular.module("angular-input-stars",[]).directive("inputStars",[function(){function a(a){return Number(a)===a&&a%1!=0}function b(b,c,d,e){function f(a,b){return a.pageX<b.getBoundingClientRect().left+b.offsetWidth/2}var g={get allowHalf(){return"string"==typeof d.allowHalf&&"false"!==d.allowHalf},get readonly(){return"false"!==d.readonly&&(d.readonly||""===d.readonly)},get fullIcon(){return d.iconFull||"fa-star"},get halfIcon(){return d.iconHalf||"fa-star-half-o"},get emptyIcon(){return d.iconEmpty||"fa-star-o"},get iconBase(){return d.iconBase||"fa fa-fw"},get iconHover(){return d.iconHover||"angular-input-stars-hover"}};b.items=new Array(+d.max),b.listClass=d.listClass||"angular-input-stars",e.$render=function(){a(e.$viewValue)?b.lastValue=Math.round(2*e.$viewValue)/2:b.lastValue=e.$viewValue||0},b.getClass=function(a){var c;if(a>=b.lastValue)c=g.iconBase+" "+g.emptyIcon;else{var d=a+.5
;c=g.allowHalf&&d===b.lastValue?g.iconBase+" "+g.halfIcon+" active ":g.iconBase+" "+g.fullIcon+" active "}return g.readonly?c+" readonly":c},b.unpaintStars=function(a,c){b.paintStars(b.lastValue-1,c)},b.paintStars=function(a,b,d){if(!g.readonly){for(var e=c.find("li").find("i"),f=0;f<e.length;f++){var h,i,j=angular.element(e[f]);a>=f?(h=[g.emptyIcon,g.halfIcon],i=[g.iconHover,g.fullIcon,"active"]):(h=[g.fullIcon,g.iconHover,g.halfIcon,"active"],i=g.allowHalf&&a+.5===f?[g.halfIcon,"active"]:[g.emptyIcon]),j.removeClass(h.join(" ")),j.addClass(i.join(" "))}b||e.removeClass(g.iconHover)}},b.setValue=function(a,c){if(!g.readonly){var h,i=c.target;if(h=g.allowHalf&&f(c,i)?a+.5:a+1,h===b.lastValue&&(h=0),b.lastValue=h,e.$setViewValue(h),e.$render(),d.onStarClick)try{b.$parent.$eval(d.onStarClick,{$event:c})}catch(c){console.error(c)}}}}return{restrict:"EA",replace:!0,template:'<ul ng-class="listClass"><li ng-touch="paintStars($index)" ng-mouseenter="paintStars($index, true, $event)" ng-mouseleave="unpaintStars($index, false)" ng-repeat="item in items track by $index"><i  ng-class="getClass($index)" ng-click="setValue($index, $event)"></i></li></ul>',require:"ngModel",scope:{bindModel:"=ngModel"},link:b}}]),window.FontAwesomeCdnConfig={autoA11y:{enabled:!0},asyncLoading:{enabled:!0},reporting:{enabled:!0,domains:"localhost, *.dev"},useUrl:"use.fontawesome.com",faCdnUrl:"https://cdn.fontawesome.com:443",code:"367380d7cf",webFontLoaderVersion:"1.6.24"},function(){function a(a){var b,c=[],d=document,e=d.documentElement.doScroll,f="DOMContentLoaded",g=(e?/^loaded|^c/:/^loaded|^i|^c/).test(d.readyState);g||d.addEventListener(f,b=function(){for(d.removeEventListener(f,b),g=1;b=c.shift();)b()}),g?setTimeout(a,0):c.push(a)}function b(a,b){var c=!1;return a.split(",").forEach(function(a){var d=new RegExp(a.trim().replace(".","\\.").replace("*","(.*)"));b.match(d)&&(c=!0)}),c}function c(a){"undefined"!=typeof MutationObserver&&new MutationObserver(a).observe(document,{childList:!0,subtree:!0})}function d(a){var b,c,d,e;a=a||"fa",b=document.querySelectorAll("."+a),Array.prototype.forEach.call(b,function(a){c=a.getAttribute("title"),a.setAttribute("aria-hidden","true"),d=!a.nextElementSibling||!a.nextElementSibling.classList.contains("sr-only"),c&&d&&(e=document.createElement("span"),e.innerHTML=c,e.classList.add("sr-only"),a.parentNode.insertBefore(e,a.nextSibling))})}!function(){function a(a){this.el=a;for(var b=a.className.replace(/^\s+|\s+$/g,"").split(/\s+/),c=0;c<b.length;c++)d.call(this,b[c])}function b(a,b,c){Object.defineProperty?Object.defineProperty(a,b,{get:c}):a.__defineGetter__(b,c)}if(!(void 0===window.Element||"classList"in document.documentElement)){var c=Array.prototype,d=c.push,e=c.splice,f=c.join;a.prototype={add:function(a){this.contains(a)||(d.call(this,a),this.el.className=this.toString())},contains:function(a){return-1!=this.el.className.indexOf(a)},item:function(a){return this[a]||null},remove:function(a){if(this.contains(a)){for(var b=0;b<this.length&&this[b]!=a;b++);e.call(this,b,1),this.el.className=this.toString()}},toString:function(){return f.call(this," ")},toggle:function(a){return this.contains(a)?this.remove(a):this.add(a),this.contains(a)}},window.DOMTokenList=a,b(Element.prototype,"classList",function(){return new a(this)})}}();var e,f,g,h,i,j,k,l,m,n,o={isIE:function(a,b){var c,d="IE",e=document.createElement("B"),f=document.documentElement;return a&&(d+=" "+a,b&&(d=b+" "+d)),e.innerHTML="\x3c!--[if "+d+']><b id="fitest"></b><![endif]--\x3e',f.appendChild(e),c=!!document.getElementById("fitest"),f.removeChild(e),c}},p={load:function(a){var b=document.createElement("link");b.href=a,b.media="all",b.rel="stylesheet",document.getElementsByTagName("head")[0].appendChild(b)},loadAsync:function(a,b,c,d){var e,f=document.createElement("script"),g={},h=function(){},i=document.scripts[0];window.WebFontConfig||(window.WebFontConfig={}),g=window.WebFontConfig,g.custom||(g.custom={}),g.custom.families||(g.custom.families=[]),g.custom.urls||(g.custom.urls=[]),g.custom.testStrings||(g.custom.testStrings={}),g.custom.families.push(b),g.custom.urls.push(a),g.custom.testStrings[b]=c,e=g.fontactive||h,g.fontactive=function(a,c){var d=(window.FontAwesomeHooks||{}).loaded||h;e(a,c),b===a&&"n4"===c&&d()},f.src=d,i.parentNode.insertBefore(f,i)}},q={load:function(a){var b=document.createElement("script"),c=document.scripts[0];b.src=a,c.parentNode.appendChild(b)}};if(window.FontAwesomeCdnConfig&&(e=window.FontAwesomeCdnConfig,f=e.useUrl,g=e.faCdnUrl,h=e.code,i="FontAwesome",j="fa",k="",l=e.webFontLoaderVersion,e.autoA11y.enabled&&(a(d.bind(d,"fa")),c(d.bind(d,"fa"))),e.reporting.enabled&&b(e.reporting.domains,location.host)&&q.load(g+"/js/stats.js"),n="https://"+f+"/"+h+".css",m="https://"+f+"/webfontloader/"+l+"/webfontloader.js",e.asyncLoading.enabled?p.loadAsync(n,i,k,m):p.load(n)),window.FortAwesomeConfig){var r;e=window.FortAwesomeConfig,f=e.useUrl,h=e.code,i=e.familyName,j=e.prefix,k=e.testString,l=e.webFontLoaderVersion,e.autoA11y.enabled&&(a(d.bind(d,j)),c(d.bind(d,j))),r=o.isIE(8,"lte")?h+"-sd":h,n="https://"+f+"/"+r+".css",m="https://use.fonticons.com/webfontloader/"+l+"/webfontloader.js",e.asyncLoading.enabled?p.loadAsync(n,i,k,m):p.load(n)}}(),function(){function E(){return function(a){return a}}function F(){return function(){}}function G(a){return function(){return this[a]}}function P(a,b){if(a.$==K.Promise.P.wa)if(a.da){var c=a.da;if(c.Na){for(var d=0,e=null,f=null,g=c.Na;g&&(g.dc||(d++,g.Xa==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.$==K.Promise.P.wa&&1==d?P(c,b):(f?(d=f,d.next==c.ob&&(c.ob=d),d.next=d.next.next):Q(c),R(c,e,K.Promise.P.ka,b)))}a.da=null}else O(a,K.Promise.P.ka,b)}function S(a,b){a.Na||a.$!=K.Promise.P.Ja&&a.$!=K.Promise.P.ka||T(a),a.ob?a.ob.next=b:a.Na=b,a.ob=b}function ba(a,b,c,d){var e=K.Promise.Lf(null,null,null);return e.Xa=new K.Promise(function(a,f){e.Tb=b?function(c){try{var e=b.call(d,c);a(e)}catch(a){f(a)}}:a,e.wb=c?function(b){try{var e=c.call(d,b);!K.R(e)&&b instanceof K.Promise.kb?f(b):a(e)}catch(a){f(a)}}:f}),e.Xa.da=a,S(a,e),e.Xa}function O(a,b,c){a.$==K.Promise.P.wa&&(a===c&&(b=K.Promise.P.ka,c=new TypeError("Promise cannot resolve to itself")),a.$=K.Promise.P.Jh,K.Promise.Ug(c,a.Dl,a.El,a)||(a.ia=c,a.$=b,a.da=null,T(a),b!=K.Promise.P.ka||c instanceof K.Promise.kb||K.Promise.Ii(a,c)))}function T(a){a.ld||(a.ld=!0,K.async.M(a.vj,a))}function Q(a){var b=null;return a.Na&&(b=a.Na,a.Na=b.next,b.next=null),a.Na||(a.ob=null),b}function R(a,b,c,d){if(c==K.Promise.P.ka&&b.wb&&!b.dc)if(0<K.Promise.Wa)for(;a&&a.Oc;a=a.da)K.global.clearTimeout(a.Oc),a.Oc=0;else if(0==K.Promise.Wa)for(;a&&a.rc;a=a.da)a.rc=!1;if(b.Xa)b.Xa.da=null,K.Promise.xg(b,c,d);else try{b.dc?b.Tb.call(b.context):K.Promise.xg(b,c,d)}catch(a){K.Promise.sc.call(null,a)}K.Promise.Yk(b)}function N(a,b){if(K.Promise.Aa&&K.L(b.stack)){var c=b.stack.split("\n",4)[3];b=b.message,b+=Array(11-b.length).join(" "),a.ee.push(b+c)}}function U(a,b){if(K.Promise.Aa&&b&&K.L(b.stack)&&a.ee.length){for(var c=["Promise trace:"],d=a;d;d=d.da){for(var e=a.vf;0<=e;e--)c.push(d.ee[e]);c.push("Value: ["+(d.$==K.Promise.P.ka?"REJECTED":"FULFILLED")+"] <"+String(d.ia)+">")}b.stack+="\n\n"+c.join("\n")}}function V(a,b,c){a.qb=!0,a.ia=c,a.ub=!b,W(a)}function X(a){if(a.qb){if(!a.be)throw new K.async.w.Wb(a);a.be=!1}}function da(a,b){K.async.w.Aa&&a.ed&&K.ha(b)&&b.stack&&/^[^\n]+(\n   [^\n]+)+/.test(b.stack)&&(b.stack=b.stack+"\nDEFERRED OPERATION:\n"+a.ed)}function Y(a,b,c){return Z(a,b,null,c)}function ea(a,b){Z(a,null,b,void 0)}function Z(a,b,c,d){return a.Ic.push([b,c,d]),a.qb&&W(a),a}function fa(a){return K.j.some(a.Ic,function(a){return K.ya(a[1])})}function W(a){a.Nc&&a.qb&&fa(a)&&(K.async.w.Il(a.Nc),a.Nc=0),a.da&&(a.da.ec--,delete a.da);for(var b=a.ia,c=!1,d=!1;a.Ic.length&&!a.bd;){var e=a.Ic.shift(),f=e[0],g=e[1];if(e=e[2],f=a.ub?g:f)try{var h=f.call(e||a.wf,b);K.R(h)&&(a.ub=a.ub&&(h==b||h instanceof Error),a.ia=b=h),(K.Thenable.Dg(b)||typeof K.global.Promise===u&&b instanceof K.global.Promise)&&(d=!0,a.bd=!0)}catch(d){b=d,a.ub=!0,da(a,b),fa(a)||(c=!0)}}a.ia=b,d?(d=K.bind(a.rf,a,!0),h=K.bind(a.rf,a,!1),b instanceof K.async.w?(Z(b,d,h),b.Ti=!0):b.then(d,h)):K.async.w.vi&&b instanceof Error&&!(b instanceof K.async.w.jb)&&(c=a.ub=!0),c&&(a.Nc=K.async.w.kl(b))}var a="\n//# sourceURL=",k="' of type ",n='<script type="text/javascript" src="',p="SCRIPT",r="array",t="complete",u="function",v="google.charts.load",w="hasOwnProperty",x="number",y="object",z="pre-45",A="propertyIsEnumerable",B="string",C="text/javascript",D="toLocaleString",I,J=J||{};J.scope={},J.Up=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""},J.Gh=!1,J.fm=!1,J.gm=!1,J.defineProperty=J.Gh||typeof Object.defineProperties==u?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},J.Ij=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a},J.global=J.Ij(this),J.Sk=function(a){if(a){for(var b=J.global,c=["Promise"],d=0;d<c.length-1;d++){var e=c[d];e in b||(b[e]={}),b=b[e]}c=c[c.length-1],d=b[c],a=a(d),a!=d&&null!=a&&J.defineProperty(b,c,{configurable:!0,writable:!0,value:a})}},J.Fq=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{Zj:e,Ll:f}}return{Zj:-1,Ll:void 0}},J.yi="jscomp_symbol_",J.rg=function(){J.rg=F(),J.global.Symbol||(J.global.Symbol=J.Symbol)},J.Symbol=function(){var a=0;return function(b){return J.yi+(b||"")+a++}}(),J.Fd=function(){J.rg();var a=J.global.Symbol.iterator;a||(a=J.global.Symbol.iterator=J.global.Symbol("iterator")),typeof Array.prototype[a]!=u&&J.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return J.df(this)}}),J.Fd=F()},J.df=function(a){var b=0;return J.uk(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})},J.uk=function(a){return J.Fd(),a={next:a},a[J.global.Symbol.iterator]=function(){return this},a},J.Qg=function(a){J.Fd();var b=a[Symbol.iterator];return b?b.call(a):J.df(a)},J.Yh=!1,J.Sk(function(a){function b(a){this.$=f.wa,this.ia=void 0,this.Ub=[];var b=this.gd();try{a(b.resolve,b.reject)}catch(a){b.reject(a)}}function c(){this.Ma=null}function d(a){return a instanceof b?a:new b(function(b){b(a)})}if(a&&!J.Yh)return a;c.prototype.ef=function(a){null==this.Ma&&(this.Ma=[],this.Ni()),this.Ma.push(a)},c.prototype.Ni=function(){var a=this;this.ff(function(){a.uj()})};var e=J.global.setTimeout;c.prototype.ff=function(a){e(a,0)},c.prototype.uj=function(){for(;this.Ma&&this.Ma.length;){var a=this.Ma;this.Ma=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(a){this.Oi(a)}}}this.Ma=null},c.prototype.Oi=function(a){this.ff(function(){throw a})};var f={wa:0,Ja:1,ka:2};b.prototype.gd=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.Xk),reject:a(this.Yd)}},b.prototype.Xk=function(a){if(a===this)this.Yd(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.pl(a);else{a:switch(typeof a){case y:var c=null!=a;break a;case u:c=!0;break a;default:c=!1}c?this.Wk(a):this.If(a)}},b.prototype.Wk=function(a){var b=void 0;try{b=a.then}catch(a){return void this.Yd(a)}typeof b==u?this.ql(b,a):this.If(a)},b.prototype.Yd=function(a){this.mh(f.ka,a)},b.prototype.If=function(a){this.mh(f.Ja,a)},b.prototype.mh=function(a,b){if(this.$!=f.wa)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.$);this.$=a,this.ia=b,this.wj()},b.prototype.wj=function(){if(null!=this.Ub){for(var a=this.Ub,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.Ub=null}};var g=new c;return b.prototype.pl=function(a){var b=this.gd();a.fc(b.resolve,b.reject)},b.prototype.ql=function(a,b){var c=this.gd();try{a.call(b,c.resolve,c.reject)}catch(a){c.reject(a)}},b.prototype.then=function(a,c){function d(a,b){return typeof a==u?function(b){try{e(a(b))}catch(a){f(a)}}:b}var e,f,g=new b(function(a,b){e=a,f=b});return this.fc(d(a,e),d(c,f)),g},b.prototype.catch=function(a){return this.then(void 0,a)},b.prototype.fc=function(a,b){function c(){switch(d.$){case f.Ja:a(d.ia);break;case f.ka:b(d.ia);break;default:throw Error("Unexpected state: "+d.$)}}var d=this;null==this.Ub?g.ef(c):this.Ub.push(function(){g.ef(c)})},b.resolve=d,b.reject=function(a){return new b(function(b,c){c(a)})},b.race=function(a){return new b(function(b,c){for(var e=J.Qg(a),f=e.next();!f.done;f=e.next())d(f.value).fc(b,c)})},b.all=function(a){var c=J.Qg(a),e=c.next();return e.done?d([]):new b(function(a,b){function f(b){return function(c){g[b]=c,0==--h&&a(g)}}var g=[],h=0;do{g.push(void 0),h++,d(e.value).fc(f(g.length-1),b),e=c.next()}while(!e.done)})},b});var K=K||{};K.global=this,K.R=function(a){return void 0!==a},K.L=function(a){return typeof a==B},K.ck=function(a){return"boolean"==typeof a},K.Rb=function(a){return typeof a==x},K.md=function(a,b,c){a=a.split("."),c=c||K.global,a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&K.R(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}},K.define=function(a,b){K.md(a,b)},K.ea=!0,K.ba="en",K.$c=!0,K.wi=!1,K.Uh=!K.ea,K.De=!1,K.Es=function(a){if(K.Kd())throw Error("goog.provide can not be used within a goog.module.");K.qf(a)},K.qf=function(a,b){K.md(a,b)},K.Di=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,K.Td=function(a){if(!K.L(a)||!a||-1==a.search(K.Di))throw Error("Invalid module identifier");if(!K.Kd())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(K.na.Ud)throw Error("goog.module may only be called once per module.");K.na.Ud=a},K.Td.get=function(){return null},K.Td.$q=function(){return null},K.na=null,K.Kd=function(){return null!=K.na},K.Td.jd=function(){K.na.jd=!0},K.rt=function(a){if(K.Uh)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."))},K.Lq=F(),K.rb=function(a){a=a.split(".");for(var b=K.global,c=0;c<a.length;c++)if(b=b[a[c]],!K.cb(b))return null;return b},K.kr=function(a,b){b=b||K.global;for(var c in a)b[c]=a[c]},K.hp=function(a,b,c,d){if(K.Ae){var e;a=a.replace(/\\/g,"/");var f=K.la;d&&"boolean"!=typeof d||(d=d?{module:"goog"}:{});for(var g=0;e=b[g];g++)f.Sb[e]=a,f.Od[a]=d;for(d=0;b=c[d];d++)a in f.gb||(f.gb[a]={}),f.gb[a][b]=!0}},K.Ut=!1,K.Xm=!0,K.Ek=function(a){K.global.console&&K.global.console.error(a)},K.Qs=F(),K.La="",K.eb=F(),K.gp=function(){throw Error("unimplemented abstract method")},K.ip=function(a){a.Gd=void 0,a.Zq=function(){return a.Gd?a.Gd:(K.ea&&(K.wg[K.wg.length]=a),a.Gd=new a)}},K.wg=[],K.fi=!0,K.ti=K.ea,K.Ck={},K.Ae=!1,K.Ve="detect",K.zi="transpile.js",K.Ae&&(K.la={Od:{},Sb:{},gb:{},zh:{},je:{},pb:{}},K.qg=function(){var a=K.global.document;return null!=a&&"write"in a},K.xj=function(){if(K.R(K.global.ye)&&K.L(K.global.ye))K.La=K.global.ye;else if(K.qg()){var a=K.global.document,b=a.currentScript;for(a=b?[b]:a.getElementsByTagName(p),b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?");if(d=-1==d?c.length:d,"base.js"==c.substr(d-7,7)){K.La=c.substr(0,d-7);break}}}},K.Ed=function(a,b){(K.global.zm||K.Tl)(a,b)&&(K.la.je[a]=!0)},K.di=!(K.global.atob||!K.global.document||!K.global.document.all),K.$g=!1,K.ak=function(a,b,c){K.Ed("",'goog.retrieveAndExec_("'+a+'", '+b+", "+c+");")},K.Wd=[],K.Yt=function(b,c){return K.fi&&K.R(K.global.JSON)?"goog.loadModule("+K.global.JSON.stringify(c+a+b+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+c+"\n;return exports});\n//# sourceURL="+b+"\n"},K.Ak=function(){var a=K.Wd.length;if(0<a){var b=K.Wd;K.Wd=[];for(var c=0;c<a;c++)K.Tg(b[c])}K.$g=!1},K.ks=function(a){K.Bg(a)&&K.Ji(a)&&K.Tg(K.La+K.zd(a))},K.Bg=function(a){var b=(a=K.zd(a))&&K.la.Od[a]||{},c=b.lang||"es3";return!(!a||"goog"!=b.module&&!K.Xg(c))&&K.La+a in K.la.pb},K.Ji=function(a){if((a=K.zd(a))&&a in K.la.gb)for(var b in K.la.gb[a])if(!K.mk(b)&&!K.Bg(b))return!1;return!0},K.Tg=function(a){if(a in K.la.pb){var b=K.la.pb[a];delete K.la.pb[a],K.Tj(b)}},K.es=F(),K.Sl=function(a){K.global.document.write(n+a+'"><\/script>')},K.Ki=function(a){var b=K.global.document,c=b.createElement("script");c.type=C,c.src=a,c.defer=!1,c.async=!1,b.head.appendChild(c)},K.Tl=function(a,b){if(K.qg()){var c=K.global.document;if(!K.De&&c.readyState==t){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load')}return void 0===b?K.di?(K.$g=!0,b=" onreadystatechange='goog.onScriptLoad_(this, "+ ++K.Pg+")' ",c.write(n+a+'"'+b+"><\/script>")):K.De?K.Ki(a):K.Sl(a):c.write('<script type="text/javascript">'+K.Tk(b)+"<\/script>"),!0}return!1},K.Tk=function(a){return a.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},K.Xg=function(a){if("always"==K.Ve)return!0;if("never"==K.Ve)return!1;if(K.Dc||(K.Dc=K.ej()),a in K.Dc)return K.Dc[a];throw Error("Unknown language mode: "+a)},K.Dc=null,K.Pg=0,K.ys=function(a,b){return a.readyState==t&&K.Pg==b&&K.Ak(),!0},K.Zt=function(a){function b(a){if(!(a in e.je||a in e.zh)){if(e.zh[a]=!0,a in e.gb)for(var f in e.gb[a])if(!K.mk(f)){if(!(f in e.Sb))throw Error("Undefined nameToPath for "+f);b(e.Sb[f])}a in d||(d[a]=!0,c.push(a))}}var c=[],d={},e=K.la;for(b(a),a=0;a<c.length;a++){var f=c[a];K.la.je[f]=!0}var g=K.na;for(K.na=null,a=0;a<c.length;a++){if(!(f=c[a]))throw K.na=g,Error("Undefined script input");var h=e.Od[f]||{},i=K.Xg(h.lang||"es3");"goog"==h.module||i?K.ak(K.La+f,"goog"==h.module,i):K.Ed(K.La+f)}K.na=g},K.zd=function(a){return a in K.la.Sb?K.la.Sb[a]:null},K.xj(),K.global.Am||K.Ed(K.La+"deps.js")),K.Cd=null,K.Jl=function(){if(null==K.Cd){try{var b=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(a){b=!1}K.Cd=b}return K.Cd},K.Ql=function(a){return"(function(){"+a+"\n;})();\n"},K.ds=function(a){var b=K.na;try{if(K.na={Ud:void 0,jd:!1},K.ya(a))var c=a.call(void 0,{});else{if(!K.L(a))throw Error("Invalid module definition");K.Jl()&&(a=K.Ql(a)),c=K.zk.call(void 0,a)}var d=K.na.Ud;if(!K.L(d)||!d)throw Error('Invalid module name "'+d+'"');K.na.jd?K.qf(d,c):K.ti&&Object.seal&&typeof c==y&&null!=c&&Object.seal(c),K.Ck[d]=c}finally{K.na=b}},K.zk=function(b){return eval(b),{}},K.rs=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")},K.xk=function(a){if(K.global.Ph)return K.global.Ph(a);try{var b=new K.global.XMLHttpRequest;return b.open("get",a,!1),b.send(),0==b.status||200==b.status?b.responseText:null}catch(a){return null}},K.Ss=F(),K.Lt=function(b,c){var d=K.global.$jscomp;d||(K.global.$jscomp=d={});var e=d.he;if(!e){var f=K.La+K.zi,g=K.xk(f);if(g){if(eval(g+a+f),K.global.$gwtExport&&K.global.$gwtExport.$jscomp&&!K.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(K.global.$gwtExport));K.global.$jscomp.he=K.global.$gwtExport.$jscomp.transpile,d=K.global.$jscomp,e=d.he}}if(!e){var h=" requires transpilation but no transpiler was found.";h+=' Please add "//javascript/closure:transpiler" as a data dependency to ensure it is included.',e=d.he=function(a,b){return K.Ek(b+h),a}}return e(b,c)},K.aa=function(a){var b=typeof a;if(b==y){if(!a)return"null";if(a instanceof Array)return r;if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return y;if("[object Array]"==c||typeof a.length==x&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return r;if("[object Function]"==c||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return u}else if(b==u&&void 0===a.call)return y;return b},K.Pr=function(a){return null===a},K.cb=function(a){return null!=a},K.isArray=function(a){return K.aa(a)==r},K.Nb=function(a){var b=K.aa(a);return b==r||b==y&&typeof a.length==x},K.Br=function(a){return K.ha(a)&&typeof a.getFullYear==u},K.ya=function(a){return K.aa(a)==u},K.ha=function(a){var b=typeof a;return b==y&&null!=a||b==u},K.kg=function(a){return a[K.Va]||(a[K.Va]=++K.Cl)},K.nr=function(a){return!!a[K.Va]},K.Uk=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(K.Va);try{delete a[K.Va]}catch(a){}},K.Va="closure_uid_"+(1e9*Math.random()>>>0),K.Cl=0,K.Yq=K.kg,K.Ms=K.Uk,K.aj=function(a){var b=K.aa(a);if(b==y||b==r){if(a.clone)return a.clone();b=b==r?[]:{};for(var c in a)b[c]=K.aj(a[c]);return b}return a},K.Si=function(a,b,c){return a.call.apply(a.bind,arguments)},K.Ri=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}},K.bind=function(a,b,c){return K.bind=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?K.Si:K.Ri,K.bind.apply(null,arguments)},K.fb=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();return b.push.apply(b,arguments),a.apply(this,b)}},K.ms=function(a,b){for(var c in b)a[c]=b[c]},K.now=K.$c&&Date.now||function(){return+new Date},K.Tj=function(a){if(K.global.execScript)K.global.execScript(a,"JavaScript");else{if(!K.global.eval)throw Error("goog.globalEval not available");if(null==K.lc)if(K.global.eval("var _evalTest_ = 1;"),void 0!==K.global._evalTest_){try{delete K.global._evalTest_}catch(a){}K.lc=!0}else K.lc=!1;if(K.lc)K.global.eval(a);else{var b=K.global.document,c=b.createElement(p);c.type=C,c.defer=!1,c.appendChild(b.createTextNode(a)),b.body.appendChild(c),b.body.removeChild(c)}}},K.lc=null,K.Wq=function(a,b){function c(a){a=a.split("-");for(var b=[],c=0;c<a.length;c++)b.push(d(a[c]));return b.join("-")}function d(a){return K.uf[a]||a}if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var e=K.uf?"BY_WHOLE"==K.kj?d:c:E();return a=b?a+"-"+e(b):e(a),K.global.Oh?K.global.Oh(a):a},K.bt=function(a,b){K.uf=a,K.kj=b},K.ar=function(a,b){return b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,c){return null!=b&&c in b?b[c]:a})),a},K.cr=E(),K.zf=function(a,b){K.md(a,b,void 0)},K.Eq=function(a,b,c){a[b]=c},K.ab=function(a,b){function c(){}c.prototype=b.prototype,a.Lc=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.Qi=function(a,c,d){for(var e=Array(arguments.length-2),f=2;f<arguments.length;f++)e[f-2]=arguments[f];return b.prototype[c].apply(a,e)}},K.Qi=function(a,b,c){var d=arguments.callee.caller;if(K.wi||K.ea&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.Lc){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.Lc.constructor.apply(a,e)}for(e=Array(arguments.length-2),f=2;f<arguments.length;f++)e[f-2]=arguments[f];f=!1;for(var g=a.constructor;g;g=g.Lc&&g.Lc.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name")},K.scope=function(a){if(K.Kd())throw Error("goog.scope is not supported within a goog.module.");a.call(K.global)},K.oa=function(a,b){var c=b.constructor,d=b.ul;return c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),c=K.oa.fj(c,a),a&&K.ab(c,a),delete b.constructor,delete b.ul,K.oa.cf(c.prototype,b),null!=d&&(d instanceof Function?d(c):K.oa.cf(c,d)),c},K.oa.si=K.ea,K.oa.fj=function(a,b){function c(){var b=a.apply(this,arguments)||this;return b[K.Va]=b[K.Va],this.constructor===c&&d&&Object.seal instanceof Function&&Object.seal(b),b}if(!K.oa.si)return a;var d=!K.oa.qk(b);return c},K.oa.qk=function(a){return a&&a.prototype&&a.prototype[K.Bi]},K.oa.Me=["constructor",w,"isPrototypeOf",A,D,"toString","valueOf"],K.oa.cf=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<K.oa.Me.length;d++)c=K.oa.Me[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])},K.Et=F(),K.Bi="goog_defineClass_legacy_unsealable",K.ej=function(){function b(a,b){e?d[a]=!0:b()?d[a]=!1:e=d[a]=!0}function c(b){try{return!!eval(b)}catch(a){return!1}}var d={es3:!1},e=!1,f=K.global.navigator&&K.global.navigator.userAgent?K.global.navigator.userAgent:"";return b("es5",function(){return c("[1,].length==1")}),b("es6",function(){var a=f.match(/Edge\/(\d+)(\.\d)*/i);return!(a&&15>Number(a[1]))&&c('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),b("es6-impl",function(){return!0}),b("es7",function(){return c("2 ** 2 == 4")}),b("es8",function(){return c("async () => 1, true")}),d},K.debug={},K.debug.Error=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,K.debug.Error);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))},K.ab(K.debug.Error,Error),K.debug.Error.prototype.name="CustomError",K.a={},K.a.fa={Ia:1,hm:2,cc:3,wm:4,Zm:5,Ym:6,oo:7,Fm:8,Xc:9,Rm:10,Vh:11,bo:12},K.f={},K.f.Wc=!1,K.f.Xh=!1,K.f.Ye={Ke:""},K.f.startsWith=function(a,b){return 0==a.lastIndexOf(b,0)},K.f.endsWith=function(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c},K.f.Zi=function(a){return 0==K.f.jf("tel:",a.substr(0,4))},K.f.Sp=function(a,b){return 0==K.f.jf(b,a.substr(a.length-b.length,b.length))},K.f.Tp=function(a,b){return a.toLowerCase()==b.toLowerCase()},K.f.wl=function(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")},K.f.Zp=function(a){return a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},K.f.Id=function(a){return/^[\s\xa0]*$/.test(a)},K.f.Er=function(a){return 0==a.length},K.f.Qb=K.f.Id,K.f.ek=function(a){return K.f.Id(K.f.Jk(a))},K.f.Dr=K.f.ek,K.f.zr=function(a){return!/[^\t\n\r ]/.test(a)},K.f.wr=function(a){return!/[^a-zA-Z]/.test(a)},K.f.Qr=function(a){return!/[^0-9]/.test(a)},K.f.xr=function(a){return!/[^a-zA-Z0-9]/.test(a)},K.f.Wr=function(a){return" "==a},K.f.Xr=function(a){return 1==a.length&&" "<=a&&"~">=a||""<=a&&"">=a},K.f.Ct=function(a){return a.replace(/(\r\n|\r|\n)+/g," ")},K.f.Yi=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")},K.f.ts=function(a){return a.replace(/\xa0|\s/g," ")},K.f.ss=function(a){return a.replace(/\xa0|[ \t]+/g," ")},K.f.Yp=function(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},K.f.trim=K.$c&&String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},K.f.trimLeft=function(a){return a.replace(/^[\s\xa0]+/,"")},K.f.trimRight=function(a){return a.replace(/[\s\xa0]+$/,"")},K.f.jf=function(a,b){return a=String(a).toLowerCase(),b=String(b).toLowerCase(),a<b?-1:a==b?0:1},K.f.Zg=function(a,b,c){if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var d=a.toLowerCase().match(c),e=b.toLowerCase().match(c),f=Math.min(d.length,e.length),g=0;g<f;g++){c=d[g];var h=e[g];if(c!=h)return a=parseInt(c,10),!isNaN(a)&&(b=parseInt(h,10),!isNaN(b)&&a-b)?a-b:c<h?-1:1}return d.length!=e.length?d.length-e.length:a<b?-1:1},K.f.ur=function(a,b){return K.f.Zg(a,b,/\d+|\D+/g)},K.f.Aj=function(a,b){return K.f.Zg(a,b,/\d+|\.\d+|\D+/g)},K.f.ws=K.f.Aj,K.f.Tt=function(a){return encodeURIComponent(String(a))},K.f.St=function(a){return decodeURIComponent(a.replace(/\+/g," "))},K.f.Yg=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")},K.f.ta=function(a,b){if(b)a=a.replace(K.f.ke,"&amp;").replace(K.f.Je,"&lt;").replace(K.f.Ge,"&gt;").replace(K.f.Qe,"&quot;").replace(K.f.Te,"&#39;").replace(K.f.Le,"&#0;"),K.f.Wc&&(a=a.replace(K.f.Ee,"&#101;"));else{if(!K.f.Eh.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(K.f.ke,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(K.f.Je,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(K.f.Ge,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(K.f.Qe,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(K.f.Te,"&#39;")),-1!=a.indexOf("\0")&&(a=a.replace(K.f.Le,"&#0;")),K.f.Wc&&-1!=a.indexOf("e")&&(a=a.replace(K.f.Ee,"&#101;"))}return a},K.f.ke=/&/g,K.f.Je=/</g,K.f.Ge=/>/g,K.f.Qe=/"/g,K.f.Te=/'/g,K.f.Le=/\x00/g,K.f.Ee=/e/g,K.f.Eh=K.f.Wc?/[\x00&<>"'e]/:/[\x00&<>"']/,K.f.vh=function(a){return K.f.contains(a,"&")?!K.f.Xh&&"document"in K.global?K.f.wh(a):K.f.Fl(a):a},K.f.Pt=function(a,b){return K.f.contains(a,"&")?K.f.wh(a,b):a},K.f.wh=function(a,b){var c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},d=b?b.createElement("div"):K.global.document.createElement("div");return a.replace(K.f.bi,function(a,b){var e=c[a];return e||("#"==b.charAt(0)&&(b=Number("0"+b.substr(1)),isNaN(b)||(e=String.fromCharCode(b))),e||(d.innerHTML=a+" ",e=d.firstChild.nodeValue.slice(0,-1)),c[a]=e)})},K.f.Fl=function(a){return a.replace(/&([^;]+);/g,function(a,b){switch(b){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return"#"!=b.charAt(0)||(b=Number("0"+b.substr(1)),isNaN(b))?a:String.fromCharCode(b)}})},K.f.bi=/&([^;\s<&]+);?/g,K.f.Ol=function(a){return K.f.Yg(a.replace(/  /g," &#160;"),void 0)},K.f.Ds=function(a){return a.replace(/(^|[\n ]) /g,"$1"+K.f.Ye.Ke)},K.f.Dt=function(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a},K.f.truncate=function(a,b,c){return c&&(a=K.f.vh(a)),a.length>b&&(a=a.substring(0,b-3)+"..."),c&&(a=K.f.ta(a)),a},K.f.Nt=function(a,b,c,d){return c&&(a=K.f.vh(a)),d&&a.length>b?(d>b&&(d=b),a=a.substring(0,b-d)+"..."+a.substring(a.length-d)):a.length>b&&(d=Math.floor(b/2),a=a.substring(0,d+b%2)+"..."+a.substring(a.length-d)),c&&(a=K.f.ta(a)),a},K.f.de={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"<"},K.f.vc={"'":"\\'"},K.f.quote=function(a){a=String(a);for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0);b[c+1]=K.f.de[d]||(31<e&&127>e?d:K.f.xf(d))}return b.push('"'),b.join("")},K.f.Dq=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=K.f.xf(a.charAt(c));return b.join("")},K.f.xf=function(a){if(a in K.f.vc)return K.f.vc[a];if(a in K.f.de)return K.f.vc[a]=K.f.de[a];var b=a.charCodeAt(0);if(31<b&&127>b)var c=a;else 256>b?(c="\\x",(16>b||256<b)&&(c+="0")):(c="\\u",4096>b&&(c+="0")),c+=b.toString(16).toUpperCase();return K.f.vc[a]=c},K.f.contains=function(a,b){return-1!=a.indexOf(b)},K.f.kf=function(a,b){return K.f.contains(a.toLowerCase(),b.toLowerCase())},K.f.gq=function(a,b){return a&&b?a.split(b).length-1:0},K.f.yb=function(a,b,c){var d=a;return 0<=b&&b<a.length&&0<c&&(d=a.substr(0,b)+a.substr(b+c,a.length-b-c)),d},K.f.remove=function(a,b){return a.replace(b,"")},K.f.Js=function(a,b){return b=new RegExp(K.f.Xd(b),"g"),a.replace(b,"")},K.f.Ps=function(a,b,c){return b=new RegExp(K.f.Xd(b),"g"),a.replace(b,c.replace(/\$/g,"$$$$"))},K.f.Xd=function(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},K.f.repeat=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)},K.f.Bs=function(a,b,c){return a=K.R(c)?a.toFixed(c):String(a),c=a.indexOf("."),-1==c&&(c=a.length),K.f.repeat("0",Math.max(0,b-c))+a},K.f.Jk=function(a){return null==a?"":String(a)},K.f.Np=function(a){
return Array.prototype.join.call(arguments,"")},K.f.fr=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^K.now()).toString(36)},K.f.Eb=function(a,b){var c=0;a=K.f.trim(String(a)).split("."),b=K.f.trim(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",g=b[e]||"";do{if(f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==f[0].length&&0==g[0].length)break;c=K.f.dd(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||K.f.dd(0==f[2].length,0==g[2].length)||K.f.dd(f[2],g[2]),f=f[3],g=g[3]}while(0==c)}return c},K.f.dd=function(a,b){return a<b?-1:a>b?1:0},K.f.or=function(a){for(var b=0,c=0;c<a.length;++c)b=31*b+a.charCodeAt(c)>>>0;return b},K.f.Gl=2147483648*Math.random()|0,K.f.pq=function(){return"goog_"+K.f.Gl++},K.f.Ht=function(a){var b=Number(a);return 0==b&&K.f.Id(a)?NaN:b},K.f.Jr=function(a){return/^[a-z]+([A-Z][a-z]*)*$/.test(a)},K.f.Yr=function(a){return/^([A-Z][a-z]*)+$/.test(a)},K.f.Gt=function(a){return String(a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})},K.f.Jt=function(a){return String(a).replace(/([A-Z])/g,"-$1").toLowerCase()},K.f.Kt=function(a,b){return b=K.L(b)?K.f.Xd(b):"\\s",a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()})},K.f.Rp=function(a){return String(a.charAt(0)).toUpperCase()+String(a.substr(1)).toLowerCase()},K.f.parseInt=function(a){return isFinite(a)&&(a=String(a)),K.L(a)?/^\s*-?0x/i.test(a)?parseInt(a,16):parseInt(a,10):NaN},K.f.xt=function(a,b,c){a=a.split(b);for(var d=[];0<c&&a.length;)d.push(a.shift()),c--;return a.length&&d.push(a.join(b)),d},K.f.as=function(a,b){if(!b)return a;typeof b==B&&(b=[b]);for(var c=-1,d=0;d<b.length;d++)if(""!=b[d]){var e=a.lastIndexOf(b[d]);e>c&&(c=e)}return-1==c?a:a.slice(c+1)},K.f.xq=function(a,b){var c=[],d=[];if(a==b)return 0;if(!a.length||!b.length)return Math.max(a.length,b.length);for(var e=0;e<b.length+1;e++)c[e]=e;for(e=0;e<a.length;e++){d[0]=e+1;for(var f=0;f<b.length;f++)d[f+1]=Math.min(d[f]+1,c[f+1]+1,c[f]+Number(a[e]!=b[f]));for(f=0;f<c.length;f++)c[f]=d[f]}return d[b.length]},K.m={},K.m.ja=K.ea,K.m.Xb=function(a,b){b.unshift(a),K.debug.Error.call(this,K.f.wl.apply(null,b)),b.shift()},K.ab(K.m.Xb,K.debug.Error),K.m.Xb.prototype.name="AssertionError",K.m.Sh=function(a){throw a},K.m.kd=K.m.Sh,K.m.xa=function(a,b,c,d){var e="Assertion failed";if(c){e+=": "+c;var f=d}else a&&(e+=": "+a,f=b);a=new K.m.Xb(""+e,f||[]),K.m.kd(a)},K.m.ft=function(a){K.m.ja&&(K.m.kd=a)};K.m.assert=function(a,b,c){return K.m.ja&&!a&&K.m.xa("",null,b,Array.prototype.slice.call(arguments,2)),a},K.m.ma=function(a,b){K.m.ja&&K.m.kd(new K.m.Xb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))},K.m.Ep=function(a,b,c){return K.m.ja&&!K.Rb(a)&&K.m.xa("Expected number but got %s: %s.",[K.aa(a),a],b,Array.prototype.slice.call(arguments,2)),a},K.m.Hp=function(a,b,c){return K.m.ja&&!K.L(a)&&K.m.xa("Expected string but got %s: %s.",[K.aa(a),a],b,Array.prototype.slice.call(arguments,2)),a},K.m.sp=function(a,b,c){return K.m.ja&&!K.ya(a)&&K.m.xa("Expected function but got %s: %s.",[K.aa(a),a],b,Array.prototype.slice.call(arguments,2)),a},K.m.Fp=function(a,b,c){return K.m.ja&&!K.ha(a)&&K.m.xa("Expected object but got %s: %s.",[K.aa(a),a],b,Array.prototype.slice.call(arguments,2)),a},K.m.op=function(a,b,c){return K.m.ja&&!K.isArray(a)&&K.m.xa("Expected array but got %s: %s.",[K.aa(a),a],b,Array.prototype.slice.call(arguments,2)),a},K.m.pp=function(a,b,c){return K.m.ja&&!K.ck(a)&&K.m.xa("Expected boolean but got %s: %s.",[K.aa(a),a],b,Array.prototype.slice.call(arguments,2)),a},K.m.qp=function(a,b,c){return!K.m.ja||K.ha(a)&&a.nodeType==K.a.fa.Ia||K.m.xa("Expected Element but got %s: %s.",[K.aa(a),a],b,Array.prototype.slice.call(arguments,2)),a},K.m.tp=function(a,b,c,d){return!K.m.ja||a instanceof b||K.m.xa("Expected instanceof %s but got %s.",[K.m.jg(b),K.m.jg(a)],c,Array.prototype.slice.call(arguments,3)),a},K.m.rp=function(a,b,c){return!K.m.ja||typeof a==x&&isFinite(a)||K.m.xa("Expected %s to be a finite number but it is not.",[a],b,Array.prototype.slice.call(arguments,2)),a},K.m.Gp=function(){for(var a in Object.prototype)K.m.ma(a+" should not be enumerable in Object.prototype.")},K.m.jg=function(a){return a instanceof Function?a.displayName||a.name||"unknown type name":a instanceof Object?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):null===a?"null":typeof a},K.f.Yo=F(),K.f.I=function(){this.Kc="",this.xi=K.f.I.We},K.f.I.prototype.ua=!0,K.f.I.prototype.ga=G("Kc"),K.f.I.prototype.toString=function(){return"Const{"+this.Kc+"}"},K.f.I.u=function(a){return a instanceof K.f.I&&a.constructor===K.f.I&&a.xi===K.f.I.We?a.Kc:(K.m.ma("expected object of type Const, got '"+a+"'"),"type_error:Const")},K.f.I.from=function(a){return K.f.I.jj(a)},K.f.I.We={},K.f.I.jj=function(a){var b=new K.f.I;return b.Kc=a,b},K.f.I.EMPTY=K.f.I.from(""),K.j={},K.Ca=K.$c,K.j.za=!1,K.j.Rk=function(a){return a[a.length-1]},K.j.$r=K.j.Rk,K.j.indexOf=K.Ca&&(K.j.za||Array.prototype.indexOf)?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){if(c=null==c?0:0>c?Math.max(0,a.length+c):c,K.L(a))return K.L(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},K.j.lastIndexOf=K.Ca&&(K.j.za||Array.prototype.lastIndexOf)?function(a,b,c){return Array.prototype.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){if(c=null==c?a.length-1:c,0>c&&(c=Math.max(0,a.length+c)),K.L(a))return K.L(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;return-1},K.j.forEach=K.Ca&&(K.j.za||Array.prototype.forEach)?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=K.L(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},K.j.Gf=function(a,b){for(var c=K.L(a)?a.split(""):a,d=a.length-1;0<=d;--d)d in c&&b.call(void 0,c[d],d,a)},K.j.filter=K.Ca&&(K.j.za||Array.prototype.filter)?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=K.L(a)?a.split(""):a,h=0;h<d;h++)if(h in g){var i=g[h];b.call(c,i,h,a)&&(e[f++]=i)}return e},K.j.map=K.Ca&&(K.j.za||Array.prototype.map)?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=K.L(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},K.j.reduce=K.Ca&&(K.j.za||Array.prototype.reduce)?function(a,b,c,d){return d&&(b=K.bind(b,d)),Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;return K.j.forEach(a,function(c,f){e=b.call(d,e,c,f,a)}),e},K.j.reduceRight=K.Ca&&(K.j.za||Array.prototype.reduceRight)?function(a,b,c,d){return d&&(b=K.bind(b,d)),Array.prototype.reduceRight.call(a,b,c)}:function(a,b,c,d){var e=c;return K.j.Gf(a,function(c,f){e=b.call(d,e,c,f,a)}),e},K.j.some=K.Ca&&(K.j.za||Array.prototype.some)?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=K.L(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},K.j.every=K.Ca&&(K.j.za||Array.prototype.every)?function(a,b,c){return Array.prototype.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=K.L(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0},K.j.count=function(a,b,c){var d=0;return K.j.forEach(a,function(a,e,f){b.call(c,a,e,f)&&++d},c),d},K.j.find=function(a,b,c){return b=K.j.findIndex(a,b,c),0>b?null:K.L(a)?a.charAt(b):a[b]},K.j.findIndex=function(a,b,c){for(var d=a.length,e=K.L(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1},K.j.Gq=function(a,b,c){return b=K.j.yj(a,b,c),0>b?null:K.L(a)?a.charAt(b):a[b]},K.j.yj=function(a,b,c){for(var d=K.L(a)?a.split(""):a,e=a.length-1;0<=e;e--)if(e in d&&b.call(c,d[e],e,a))return e;return-1},K.j.contains=function(a,b){return 0<=K.j.indexOf(a,b)},K.j.Qb=function(a){return 0==a.length},K.j.clear=function(a){if(!K.isArray(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0},K.j.rr=function(a,b){K.j.contains(a,b)||a.push(b)},K.j.sg=function(a,b,c){K.j.splice(a,c,0,b)},K.j.tr=function(a,b,c){K.fb(K.j.splice,a,c,0).apply(null,b)},K.j.insertBefore=function(a,b,c){var d;2==arguments.length||0>(d=K.j.indexOf(a,c))?a.push(b):K.j.sg(a,b,d)},K.j.remove=function(a,b){b=K.j.indexOf(a,b);var c;return(c=0<=b)&&K.j.yb(a,b),c},K.j.Os=function(a,b){return 0<=(b=K.j.lastIndexOf(a,b))&&(K.j.yb(a,b),!0)},K.j.yb=function(a,b){return 1==Array.prototype.splice.call(a,b,1).length},K.j.Ns=function(a,b,c){return 0<=(b=K.j.findIndex(a,b,c))&&(K.j.yb(a,b),!0)},K.j.Ks=function(a,b,c){var d=0;return K.j.Gf(a,function(e,f){b.call(c,e,f,a)&&K.j.yb(a,f)&&d++}),d},K.j.concat=function(a){return Array.prototype.concat.apply([],arguments)},K.j.join=function(a){return Array.prototype.concat.apply([],arguments)},K.j.th=function(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]},K.j.clone=K.j.th,K.j.extend=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(K.Nb(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var g=0;g<f;g++)a[e+g]=d[g]}else a.push(d)}},K.j.splice=function(a,b,c,d){return Array.prototype.splice.apply(a,K.j.slice(arguments,1))},K.j.slice=function(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)},K.j.Ls=function(a,b,c){function d(a){return K.ha(a)?"o"+K.kg(a):(typeof a).charAt(0)+a}b=b||a,c=c||d;for(var e={},f=0,g=0;g<a.length;){var h=a[g++],i=c(h);Object.prototype.hasOwnProperty.call(e,i)||(e[i]=!0,b[f++]=h)}b.length=f},K.j.gf=function(a,b,c){return K.j.hf(a,c||K.j.Pa,!1,b)},K.j.Kp=function(a,b,c){return K.j.hf(a,b,!0,void 0,c)},K.j.hf=function(a,b,c,d,e){for(var f,g=0,h=a.length;g<h;){var i=g+h>>1,j=c?b.call(e,a[i],i,a):b(d,a[i]);0<j?g=i+1:(h=i,f=!j)}return f?g:~g},K.j.sort=function(a,b){a.sort(b||K.j.Pa)},K.j.zt=function(a,b){for(var c=Array(a.length),d=0;d<a.length;d++)c[d]={index:d,value:a[d]};var e=b||K.j.Pa;for(K.j.sort(c,function(a,b){return e(a.value,b.value)||a.index-b.index}),d=0;d<a.length;d++)a[d]=c[d].value},K.j.sl=function(a,b,c){var d=c||K.j.Pa;K.j.sort(a,function(a,c){return d(b(a),b(c))})},K.j.wt=function(a,b,c){K.j.sl(a,function(a){return a[b]},c)},K.j.Vr=function(a,b,c){b=b||K.j.Pa;for(var d=1;d<a.length;d++){var e=b(a[d-1],a[d]);if(0<e||0==e&&c)return!1}return!0},K.j.Ib=function(a,b,c){if(!K.Nb(a)||!K.Nb(b)||a.length!=b.length)return!1;var d=a.length;c=c||K.j.lj;for(var e=0;e<d;e++)if(!c(a[e],b[e]))return!1;return!0},K.j.$p=function(a,b,c){c=c||K.j.Pa;for(var d=Math.min(a.length,b.length),e=0;e<d;e++){var f=c(a[e],b[e]);if(0!=f)return f}return K.j.Pa(a.length,b.length)},K.j.Pa=function(a,b){return a>b?1:a<b?-1:0},K.j.vr=function(a,b){return-K.j.Pa(a,b)},K.j.lj=function(a,b){return a===b},K.j.Ip=function(a,b,c){return 0>(c=K.j.gf(a,b,c))&&(K.j.sg(a,b,-(c+1)),!0)},K.j.Jp=function(a,b,c){return 0<=(b=K.j.gf(a,b,c))&&K.j.yb(a,b)},K.j.Mp=function(a,b,c){for(var d={},e=0;e<a.length;e++){var f=a[e],g=b.call(c,f,e,a);K.R(g)&&(d[g]||(d[g]=[])).push(f)}return d},K.j.It=function(a,b,c){var d={};return K.j.forEach(a,function(e,f){d[b.call(c,e,f,a)]=e}),d},K.j.Gs=function(a,b,c){var d=[],e=0,f=a;if(c=c||1,void 0!==b&&(e=a,f=b),0>c*(f-e))return[];if(0<c)for(a=e;a<f;a+=c)d.push(a);else for(a=e;a>f;a+=c)d.push(a);return d},K.j.repeat=function(a,b){for(var c=[],d=0;d<b;d++)c[d]=a;return c},K.j.flatten=function(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if(K.isArray(d))for(var e=0;e<d.length;e+=8192)for(var f=K.j.flatten.apply(null,K.j.slice(d,e,e+8192)),g=0;g<f.length;g++)b.push(f[g]);else b.push(d)}return b},K.j.rotate=function(a,b){return a.length&&(b%=a.length,0<b?Array.prototype.unshift.apply(a,a.splice(-b,b)):0>b&&Array.prototype.push.apply(a,a.splice(0,-b))),a},K.j.os=function(a,b,c){b=Array.prototype.splice.call(a,b,1),Array.prototype.splice.call(a,c,0,b[0])},K.j.$t=function(a){if(!arguments.length)return[];for(var b=[],c=arguments[0].length,d=1;d<arguments.length;d++)arguments[d].length<c&&(c=arguments[d].length);for(d=0;d<c;d++){for(var e=[],f=0;f<arguments.length;f++)e.push(arguments[f][d]);b.push(e)}return b},K.j.vt=function(a,b){b=b||Math.random;for(var c=a.length-1;0<c;c--){var d=Math.floor(b()*(c+1)),e=a[c];a[c]=a[d],a[d]=e}},K.j.fq=function(a,b){var c=[];return K.j.forEach(b,function(b){c.push(a[b])}),c},K.j.bq=function(a,b,c){return K.j.concat.apply([],K.j.map(a,b,c))},K.h={},K.h.i={},K.h.i.Zh=!1,K.h.i.Ie=K.h.i.Zh||("ar"==K.ba.substring(0,2).toLowerCase()||"fa"==K.ba.substring(0,2).toLowerCase()||"he"==K.ba.substring(0,2).toLowerCase()||"iw"==K.ba.substring(0,2).toLowerCase()||"ps"==K.ba.substring(0,2).toLowerCase()||"sd"==K.ba.substring(0,2).toLowerCase()||"ug"==K.ba.substring(0,2).toLowerCase()||"ur"==K.ba.substring(0,2).toLowerCase()||"yi"==K.ba.substring(0,2).toLowerCase())&&(2==K.ba.length||"-"==K.ba.substring(2,3)||"_"==K.ba.substring(2,3))||3<=K.ba.length&&"ckb"==K.ba.substring(0,3).toLowerCase()&&(3==K.ba.length||"-"==K.ba.substring(3,4)||"_"==K.ba.substring(3,4)),K.h.i.mb={gi:"",ji:"",Oe:"",hi:"",ki:""},K.h.i.O={Ta:1,Ua:-1,qa:0},K.h.i.bc="right",K.h.i.$b="left",K.h.i.yn=K.h.i.Ie?K.h.i.$b:K.h.i.bc,K.h.i.xn=K.h.i.Ie?K.h.i.bc:K.h.i.$b,K.h.i.Al=function(a){return typeof a==x?0<a?K.h.i.O.Ta:0>a?K.h.i.O.Ua:K.h.i.O.qa:null==a?null:a?K.h.i.O.Ua:K.h.i.O.Ta},K.h.i.vb="A-Za-z--------",K.h.i.zb="----",K.h.i.Yj=/<[^>]*>|&[^;]+;/g,K.h.i.Sa=function(a,b){return b?a.replace(K.h.i.Yj,""):a},K.h.i.$k=new RegExp("["+K.h.i.zb+"]"),K.h.i.Fk=new RegExp("["+K.h.i.vb+"]"),K.h.i.Bd=function(a,b){return K.h.i.$k.test(K.h.i.Sa(a,b))},K.h.i.mr=K.h.i.Bd,K.h.i.og=function(a){return K.h.i.Fk.test(K.h.i.Sa(a,void 0))},K.h.i.Ik=new RegExp("^["+K.h.i.vb+"]"),K.h.i.el=new RegExp("^["+K.h.i.zb+"]"),K.h.i.nk=function(a){return K.h.i.el.test(a)},K.h.i.jk=function(a){return K.h.i.Ik.test(a)},K.h.i.Nr=function(a){return!K.h.i.jk(a)&&!K.h.i.nk(a)},K.h.i.Gk=new RegExp("^[^"+K.h.i.zb+"]*["+K.h.i.vb+"]"),K.h.i.bl=new RegExp("^[^"+K.h.i.vb+"]*["+K.h.i.zb+"]"),K.h.i.nh=function(a,b){return K.h.i.bl.test(K.h.i.Sa(a,b))},K.h.i.Tr=K.h.i.nh,K.h.i.tl=function(a,b){return K.h.i.Gk.test(K.h.i.Sa(a,b))},K.h.i.Lr=K.h.i.tl,K.h.i.Jg=/^http:\/\/.*/,K.h.i.Or=function(a,b){return a=K.h.i.Sa(a,b),K.h.i.Jg.test(a)||!K.h.i.og(a)&&!K.h.i.Bd(a)},K.h.i.Hk=new RegExp("["+K.h.i.vb+"][^"+K.h.i.zb+"]*$"),K.h.i.cl=new RegExp("["+K.h.i.zb+"][^"+K.h.i.vb+"]*$"),K.h.i.rj=function(a,b){return K.h.i.Hk.test(K.h.i.Sa(a,b))},K.h.i.Kr=K.h.i.rj,K.h.i.sj=function(a,b){return K.h.i.cl.test(K.h.i.Sa(a,b))},K.h.i.Rr=K.h.i.sj,K.h.i.dl=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,K.h.i.Sr=function(a){return K.h.i.dl.test(a)},K.h.i.Ui=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,K.h.i.lr=function(a,b){return b=(void 0===b?K.h.i.Bd(a):b)?K.h.i.mb.ki:K.h.i.mb.hi,a.replace(K.h.i.Ui,b+"$&"+b)},K.h.i.Aq=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+a+"</span>"},K.h.i.Bq=function(a){return K.h.i.mb.ji+a+K.h.i.mb.Oe},K.h.i.yq=function(a){return"<"==a.charAt(0)?a.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+a+"</span>"},K.h.i.zq=function(a){return K.h.i.mb.gi+a+K.h.i.mb.Oe},K.h.i.pj=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,K.h.i.vk=/left/gi,K.h.i.Zk=/right/gi,K.h.i.yl=/%%%%/g,K.h.i.ls=function(a){return a.replace(K.h.i.pj,":$1 $4 $3 $2").replace(K.h.i.vk,"%%%%").replace(K.h.i.Zk,K.h.i.$b).replace(K.h.i.yl,K.h.i.bc)},K.h.i.qj=/([\u0591-\u05f2])"/g,K.h.i.rl=/([\u0591-\u05f2])'/g,K.h.i.qs=function(a){return a.replace(K.h.i.qj,"$1").replace(K.h.i.rl,"$1")},K.h.i.Pl=/\s+/,K.h.i.Xj=/[\d\u06f0-\u06f9]/,K.h.i.al=.4,K.h.i.yf=function(a,b){var c=0,d=0,e=!1;for(a=K.h.i.Sa(a,b).split(K.h.i.Pl),b=0;b<a.length;b++){var f=a[b];K.h.i.nh(f)?(c++,d++):K.h.i.Jg.test(f)?e=!0:K.h.i.og(f)?d++:K.h.i.Xj.test(f)&&(e=!0)}return 0==d?e?K.h.i.O.Ta:K.h.i.O.qa:c/d>K.h.i.al?K.h.i.O.Ua:K.h.i.O.Ta},K.h.i.tq=function(a,b){return K.h.i.yf(a,b)==K.h.i.O.Ua},K.h.i.ct=function(a,b){a&&(b=K.h.i.Al(b))&&(a.style.textAlign=b==K.h.i.O.Ua?K.h.i.bc:K.h.i.$b,a.dir=b==K.h.i.O.Ua?"rtl":"ltr")},K.h.i.dt=function(a,b){switch(K.h.i.yf(b)){case K.h.i.O.Ta:a.dir="ltr";break;case K.h.i.O.Ua:a.dir="rtl";break;default:a.removeAttribute("dir")}},K.h.i.Tm=F(),K.b={},K.b.C=function(){this.Bc="",this.Ai=K.b.C.ca},K.b.C.prototype.ua=!0,K.b.C.prototype.ga=G("Bc"),K.b.C.prototype.Dd=!0,K.b.C.prototype.$a=function(){return K.h.i.O.Ta},K.ea&&(K.b.C.prototype.toString=function(){return"TrustedResourceUrl{"+this.Bc+"}"}),K.b.C.u=function(a){return a instanceof K.b.C&&a.constructor===K.b.C&&a.Ai===K.b.C.ca?a.Bc:(K.m.ma("expected object of type TrustedResourceUrl, got '"+a+k+K.aa(a)),"type_error:TrustedResourceUrl")},K.b.C.format=function(a,b){return a=K.b.C.Hf(a,b),K.b.C.Hb(a)},K.b.C.Hf=function(a,b){var c=K.f.I.u(a);if(!K.b.C.Ih.test(c))throw Error("Invalid TrustedResourceUrl format: "+c);return c.replace(K.b.C.$h,function(a,d){if(!Object.prototype.hasOwnProperty.call(b,d))throw Error('Found marker, "'+d+'", in format string, "'+c+'", but no valid label mapping found in args: '+JSON.stringify(b));return a=b[d],a instanceof K.f.I?K.f.I.u(a):encodeURIComponent(String(a))})},K.b.C.$h=/%{(\w+)}/g,K.b.C.Ih=/^(?:https:)?\/\/[0-9a-z.:[\]-]+\/|^\/[^\/\\]|^about:blank(#|$)/i,K.b.C.Kq=function(a,b,c){a=K.b.C.Hf(a,b),b=/\?/.test(a)?"&":"?";for(var d in c)for(var e=K.isArray(c[d])?c[d]:[c[d]],f=0;f<e.length;f++)null!=e[f]&&(a+=b+encodeURIComponent(d)+"="+encodeURIComponent(String(e[f])),b="&");return K.b.C.Hb(a)},K.b.C.mc=function(a){return K.b.C.Hb(K.f.I.u(a))},K.b.C.Nq=function(a){for(var b="",c=0;c<a.length;c++)b+=K.f.I.u(a[c]);return K.b.C.Hb(b)},K.b.C.ca={},K.b.C.Hb=function(a){var b=new K.b.C;return b.Bc=a,b},K.async={},K.async.Zb=function(a,b,c){this.wk=c,this.ij=a,this.Vk=b,this.xc=0,this.tc=null},K.async.Zb.prototype.get=function(){if(0<this.xc){this.xc--;var a=this.tc;this.tc=a.next,a.next=null}else a=this.ij();return a},K.async.Zb.prototype.put=function(a){this.Vk(a),this.xc<this.wk&&(this.xc++,a.next=this.tc,this.tc=a)},K.debug.Z={},K.debug.$m=F(),K.debug.Z.xb=[],K.debug.Z.Vd=[],K.debug.Z.Wg=!1,K.debug.Z.register=function(a){if(K.debug.Z.xb[K.debug.Z.xb.length]=a,K.debug.Z.Wg)for(var b=K.debug.Z.Vd,c=0;c<b.length;c++)a(K.bind(b[c].Rl,b[c]))},K.debug.Z.ns=function(a){K.debug.Z.Wg=!0;for(var b=K.bind(a.Rl,a),c=0;c<K.debug.Z.xb.length;c++)K.debug.Z.xb[c](b);K.debug.Z.Vd.push(a)},K.debug.Z.Rt=function(a){var b=K.debug.Z.Vd;a=K.bind(a.u,a);for(var c=0;c<K.debug.Z.xb.length;c++)K.debug.Z.xb[c](a);b.length--},K.a.vn=F(),K.a.c=function(a){this.xl=a},K.a.c.prototype.toString=G("xl"),K.a.c.Ul=new K.a.c("A"),K.a.c.Vl=new K.a.c("ABBR"),K.a.c.Xl=new K.a.c("ACRONYM"),K.a.c.Yl=new K.a.c("ADDRESS"),K.a.c.bm=new K.a.c("APPLET"),K.a.c.cm=new K.a.c("AREA"),K.a.c.dm=new K.a.c("ARTICLE"),K.a.c.em=new K.a.c("ASIDE"),K.a.c.im=new K.a.c("AUDIO"),K.a.c.jm=new K.a.c("B"),K.a.c.km=new K.a.c("BASE"),K.a.c.lm=new K.a.c("BASEFONT"),K.a.c.mm=new K.a.c("BDI"),K.a.c.nm=new K.a.c("BDO"),K.a.c.qm=new K.a.c("BIG"),K.a.c.rm=new K.a.c("BLOCKQUOTE");K.a.c.sm=new K.a.c("BODY"),K.a.c.we=new K.a.c("BR"),K.a.c.tm=new K.a.c("BUTTON"),K.a.c.um=new K.a.c("CANVAS"),K.a.c.vm=new K.a.c("CAPTION"),K.a.c.xm=new K.a.c("CENTER"),K.a.c.ym=new K.a.c("CITE"),K.a.c.Bm=new K.a.c("CODE"),K.a.c.Cm=new K.a.c("COL"),K.a.c.Dm=new K.a.c("COLGROUP"),K.a.c.Em=new K.a.c("COMMAND"),K.a.c.Gm=new K.a.c("DATA"),K.a.c.Hm=new K.a.c("DATALIST"),K.a.c.Im=new K.a.c("DD"),K.a.c.Jm=new K.a.c("DEL"),K.a.c.Km=new K.a.c("DETAILS"),K.a.c.Lm=new K.a.c("DFN"),K.a.c.Mm=new K.a.c("DIALOG"),K.a.c.Nm=new K.a.c("DIR"),K.a.c.Om=new K.a.c("DIV"),K.a.c.Pm=new K.a.c("DL"),K.a.c.Sm=new K.a.c("DT"),K.a.c.Vm=new K.a.c("EM"),K.a.c.Wm=new K.a.c("EMBED"),K.a.c.bn=new K.a.c("FIELDSET"),K.a.c.cn=new K.a.c("FIGCAPTION"),K.a.c.dn=new K.a.c("FIGURE"),K.a.c.en=new K.a.c("FONT"),K.a.c.fn=new K.a.c("FOOTER"),K.a.c.gn=new K.a.c("FORM"),K.a.c.hn=new K.a.c("FRAME"),K.a.c.jn=new K.a.c("FRAMESET"),K.a.c.kn=new K.a.c("H1"),K.a.c.ln=new K.a.c("H2"),K.a.c.mn=new K.a.c("H3"),K.a.c.nn=new K.a.c("H4"),K.a.c.on=new K.a.c("H5"),K.a.c.pn=new K.a.c("H6"),K.a.c.qn=new K.a.c("HEAD"),K.a.c.rn=new K.a.c("HEADER"),K.a.c.sn=new K.a.c("HGROUP"),K.a.c.tn=new K.a.c("HR"),K.a.c.un=new K.a.c("HTML"),K.a.c.wn=new K.a.c("I"),K.a.c.zn=new K.a.c("IFRAME"),K.a.c.An=new K.a.c("IMG"),K.a.c.Bn=new K.a.c("INPUT"),K.a.c.Cn=new K.a.c("INS"),K.a.c.Hn=new K.a.c("ISINDEX"),K.a.c.Jn=new K.a.c("KBD"),K.a.c.Kn=new K.a.c("KEYGEN"),K.a.c.Ln=new K.a.c("LABEL"),K.a.c.Nn=new K.a.c("LEGEND"),K.a.c.On=new K.a.c("LI"),K.a.c.Pn=new K.a.c("LINK"),K.a.c.Sn=new K.a.c("MAP"),K.a.c.Tn=new K.a.c("MARK"),K.a.c.Un=new K.a.c("MATH"),K.a.c.Vn=new K.a.c("MENU"),K.a.c.Wn=new K.a.c("META"),K.a.c.Xn=new K.a.c("METER"),K.a.c.Zn=new K.a.c("NAV"),K.a.c.$n=new K.a.c("NOFRAMES"),K.a.c.ao=new K.a.c("NOSCRIPT"),K.a.c.eo=new K.a.c("OBJECT"),K.a.c.fo=new K.a.c("OL"),K.a.c.ho=new K.a.c("OPTGROUP"),K.a.c.io=new K.a.c("OPTION"),K.a.c.jo=new K.a.c("OUTPUT"),K.a.c.ko=new K.a.c("P"),K.a.c.lo=new K.a.c("PARAM"),K.a.c.no=new K.a.c("PRE"),K.a.c.po=new K.a.c("PROGRESS"),K.a.c.Q=new K.a.c("Q"),K.a.c.qo=new K.a.c("RP"),K.a.c.ro=new K.a.c("RT"),K.a.c.so=new K.a.c("RUBY"),K.a.c.uo=new K.a.c("S"),K.a.c.wo=new K.a.c("SAMP"),K.a.c.xo=new K.a.c(p),K.a.c.yo=new K.a.c("SECTION"),K.a.c.zo=new K.a.c("SELECT"),K.a.c.Ao=new K.a.c("SMALL"),K.a.c.Bo=new K.a.c("SOURCE"),K.a.c.Co=new K.a.c("SPAN"),K.a.c.Do=new K.a.c("STRIKE"),K.a.c.Eo=new K.a.c("STRONG"),K.a.c.Fo=new K.a.c("STYLE"),K.a.c.Go=new K.a.c("SUB"),K.a.c.Ho=new K.a.c("SUMMARY"),K.a.c.Io=new K.a.c("SUP"),K.a.c.Jo=new K.a.c("SVG"),K.a.c.Ko=new K.a.c("TABLE"),K.a.c.Lo=new K.a.c("TBODY"),K.a.c.Mo=new K.a.c("TD"),K.a.c.No=new K.a.c("TEMPLATE"),K.a.c.Oo=new K.a.c("TEXTAREA"),K.a.c.Po=new K.a.c("TFOOT"),K.a.c.Qo=new K.a.c("TH"),K.a.c.Ro=new K.a.c("THEAD"),K.a.c.So=new K.a.c("TIME"),K.a.c.To=new K.a.c("TITLE"),K.a.c.Uo=new K.a.c("TR"),K.a.c.Vo=new K.a.c("TRACK"),K.a.c.Xo=new K.a.c("TT"),K.a.c.Zo=new K.a.c("U"),K.a.c.$o=new K.a.c("UL"),K.a.c.ap=new K.a.c("VAR"),K.a.c.bp=new K.a.c("VIDEO"),K.a.c.cp=new K.a.c("WBR"),K.J={},K.J.ic=function(a){return function(){return a}},K.J.an=K.J.ic(!1),K.J.Wo=K.J.ic(!0),K.J.co=K.J.ic(null),K.J.$j=E(),K.J.error=function(a){return function(){throw Error(a)}},K.J.ma=function(a){return function(){throw a}},K.J.lock=function(a,b){return b=b||0,function(){return a.apply(this,Array.prototype.slice.call(arguments,0,b))}},K.J.vs=function(a){return function(){return arguments[a]}},K.J.Cs=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);return b.push.apply(b,c),a.apply(this,b)}},K.J.Xt=function(a,b){return K.J.ll(a,K.J.ic(b))},K.J.Cq=function(a,b){return function(c){return b?a==c:a===c}},K.J.aq=function(a,b){var c=arguments,d=c.length;return function(){var a;d&&(a=c[d-1].apply(this,arguments));for(var b=d-2;0<=b;b--)a=c[b].call(this,a);return a}},K.J.ll=function(a){var b=arguments,c=b.length;return function(){for(var a,d=0;d<c;d++)a=b[d].apply(this,arguments);return a}},K.J.kp=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}},K.J.As=function(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(b[a].apply(this,arguments))return!0;return!1}},K.J.us=function(a){return function(){return!a.apply(this,arguments)}},K.J.create=function(a,b){function c(){}c.prototype=a.prototype;var d=new c;return a.apply(d,Array.prototype.slice.call(arguments,1)),d},K.J.Kh=!0,K.J.Op=function(a){var b,c=!1;return function(){return K.J.Kh?(c||(b=a(),c=!0),b):a()}},K.J.once=function(a){var b=a;return function(){if(b){var a=b;b=null,a()}}},K.J.rq=function(a,b,c){var d=0;return function(e){K.global.clearTimeout(d);var f=arguments;d=K.global.setTimeout(function(){a.apply(c,f)},b)}},K.J.Ft=function(a,b,c){function d(){f=K.global.setTimeout(e,b),a.apply(c,h)}function e(){f=0,g&&(g=!1,d())}var f=0,g=!1,h=[];return function(a){h=arguments,f?g=!0:d()}},K.J.Hs=function(a,b,c){function d(){e=0}var e=0;return function(f){e||(e=K.global.setTimeout(d,b),a.apply(c,arguments))}},K.g={},K.g.userAgent={},K.g.userAgent.A={},K.g.userAgent.A.Xf=function(){var a=K.g.userAgent.A.Kj();return a&&(a=a.userAgent)?a:""},K.g.userAgent.A.Kj=function(){return K.global.navigator},K.g.userAgent.A.xh=K.g.userAgent.A.Xf(),K.g.userAgent.A.tt=function(a){K.g.userAgent.A.xh=a||K.g.userAgent.A.Xf()},K.g.userAgent.A.sb=function(){return K.g.userAgent.A.xh},K.g.userAgent.A.K=function(a){return K.f.contains(K.g.userAgent.A.sb(),a)},K.g.userAgent.A.Pk=function(){return K.f.kf(K.g.userAgent.A.sb(),"WebKit")},K.g.userAgent.A.Af=function(a){for(var b,c=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,d=[];b=c.exec(a);)d.push([b[1],b[2],b[3]||void 0]);return d},K.object={},K.object.is=function(a,b){return a===b?0!==a||1/a==1/b:a!==a&&b!==b},K.object.forEach=function(a,b,c){for(var d in a)b.call(c,a[d],d,a)},K.object.filter=function(a,b,c){var d,e={};for(d in a)b.call(c,a[d],d,a)&&(e[d]=a[d]);return e},K.object.map=function(a,b,c){var d,e={};for(d in a)e[d]=b.call(c,a[d],d,a);return e},K.object.some=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return!0;return!1},K.object.every=function(a,b,c){for(var d in a)if(!b.call(c,a[d],d,a))return!1;return!0},K.object.Vq=function(a){var b,c=0;for(b in a)c++;return c},K.object.Tq=function(a){for(var b in a)return b},K.object.Uq=function(a){for(var b in a)return a[b]},K.object.contains=function(a,b){return K.object.cj(a,b)},K.object.jr=function(a){var b,c=[],d=0;for(b in a)c[d++]=a[b];return c},K.object.Vf=function(a){var b,c=[],d=0;for(b in a)c[d++]=b;return c},K.object.ir=function(a,b){var c=K.Nb(b),d=c?b:arguments;for(c=c?0:1;c<d.length;c++){if(null==a)return;a=a[d[c]]}return a},K.object.bj=function(a,b){return null!==a&&b in a},K.object.cj=function(a,b){for(var c in a)if(a[c]==b)return!0;return!1},K.object.zj=function(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d},K.object.Hq=function(a,b,c){return(b=K.object.zj(a,b,c))&&a[b]},K.object.Qb=function(a){for(var b in a)return!1;return!0},K.object.clear=function(a){for(var b in a)delete a[b]},K.object.remove=function(a,b){var c;return(c=b in a)&&delete a[b],c},K.object.add=function(a,b,c){if(null!==a&&b in a)throw Error('The object already contains the key "'+b+'"');K.object.set(a,b,c)},K.object.get=function(a,b,c){return null!==a&&b in a?a[b]:c},K.object.set=function(a,b,c){a[b]=c},K.object.ht=function(a,b,c){return b in a?a[b]:a[b]=c},K.object.ut=function(a,b,c){return b in a?a[b]:(c=c(),a[b]=c)},K.object.Ib=function(a,b){for(var c in a)if(!(c in b)||a[c]!==b[c])return!1;for(c in b)if(!(c in a))return!1;return!0},K.object.clone=function(a){var b,c={};for(b in a)c[b]=a[b];return c},K.object.Hl=function(a){var b=K.aa(a);if(b==y||b==r){if(K.ya(a.clone))return a.clone();b=b==r?[]:{};for(var c in a)b[c]=K.object.Hl(a[c]);return b}return a},K.object.Mt=function(a){var b,c={};for(b in a)c[a[b]]=b;return c},K.object.Pe=["constructor",w,"isPrototypeOf",A,D,"toString","valueOf"],K.object.extend=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<K.object.Pe.length;f++)c=K.object.Pe[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}},K.object.create=function(a){var b=arguments.length;if(1==b&&K.isArray(arguments[0]))return K.object.create.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c},K.object.gj=function(a){var b=arguments.length;if(1==b&&K.isArray(arguments[0]))return K.object.gj.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c},K.object.iq=function(a){var b=a;return Object.isFrozen&&!Object.isFrozen(a)&&(b=Object.create(a),Object.freeze(b)),b},K.object.Gr=function(a){return!!Object.isFrozen&&Object.isFrozen(a)},K.object.Sq=function(a,b,c){if(!a)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return K.object.Vf(a);for(var d={};a&&(a!==Object.prototype||b)&&(a!==Function.prototype||c);){for(var e=Object.getOwnPropertyNames(a),f=0;f<e.length;f++)d[e[f]]=!0;a=Object.getPrototypeOf(a)}return K.object.Vf(d)},K.g.userAgent.v={},K.g.userAgent.v.Rg=function(){return K.g.userAgent.A.K("Opera")},K.g.userAgent.v.Nk=function(){return K.g.userAgent.A.K("Trident")||K.g.userAgent.A.K("MSIE")},K.g.userAgent.v.Sd=function(){return K.g.userAgent.A.K("Edge")},K.g.userAgent.v.Mk=function(){return K.g.userAgent.A.K("Firefox")},K.g.userAgent.v.Sg=function(){return K.g.userAgent.A.K("Safari")&&!(K.g.userAgent.v.Qd()||K.g.userAgent.v.Rd()||K.g.userAgent.v.Rg()||K.g.userAgent.v.Sd()||K.g.userAgent.v.Kg()||K.g.userAgent.A.K("Android"))},K.g.userAgent.v.Rd=function(){return K.g.userAgent.A.K("Coast")},K.g.userAgent.v.Ok=function(){return(K.g.userAgent.A.K("iPad")||K.g.userAgent.A.K("iPhone"))&&!K.g.userAgent.v.Sg()&&!K.g.userAgent.v.Qd()&&!K.g.userAgent.v.Rd()&&K.g.userAgent.A.K("AppleWebKit")},K.g.userAgent.v.Qd=function(){return(K.g.userAgent.A.K("Chrome")||K.g.userAgent.A.K("CriOS"))&&!K.g.userAgent.v.Sd()},K.g.userAgent.v.Lk=function(){return K.g.userAgent.A.K("Android")&&!(K.g.userAgent.v.zg()||K.g.userAgent.v.fk()||K.g.userAgent.v.Nd()||K.g.userAgent.v.Kg())},K.g.userAgent.v.Nd=K.g.userAgent.v.Rg,K.g.userAgent.v.uc=K.g.userAgent.v.Nk,K.g.userAgent.v.Ra=K.g.userAgent.v.Sd,K.g.userAgent.v.fk=K.g.userAgent.v.Mk,K.g.userAgent.v.Ur=K.g.userAgent.v.Sg,K.g.userAgent.v.Ar=K.g.userAgent.v.Rd,K.g.userAgent.v.Ir=K.g.userAgent.v.Ok;K.g.userAgent.v.zg=K.g.userAgent.v.Qd,K.g.userAgent.v.yr=K.g.userAgent.v.Lk,K.g.userAgent.v.Kg=function(){return K.g.userAgent.A.K("Silk")},K.g.userAgent.v.Lb=function(){function a(a){return a=K.j.find(a,d),c[a]||""}var b=K.g.userAgent.A.sb();if(K.g.userAgent.v.uc())return K.g.userAgent.v.Jj(b);b=K.g.userAgent.A.Af(b);var c={};K.j.forEach(b,function(a){c[a[0]]=a[1]});var d=K.fb(K.object.bj,c);return K.g.userAgent.v.Nd()?a(["Version","Opera"]):K.g.userAgent.v.Ra()?a(["Edge"]):K.g.userAgent.v.zg()?a(["Chrome","CriOS"]):(b=b[2])&&b[1]||""},K.g.userAgent.v.va=function(a){return 0<=K.f.Eb(K.g.userAgent.v.Lb(),a)},K.g.userAgent.v.Jj=function(a){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])return b[1];b="";var c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case"4.0":b="8.0";break;case"5.0":b="9.0";break;case"6.0":b="10.0";break;case"7.0":b="11.0"}else b="7.0";else b=c[1];return b},K.g.userAgent.U={},K.g.userAgent.U.lk=function(){return K.g.userAgent.A.K("Presto")},K.g.userAgent.U.pk=function(){return K.g.userAgent.A.K("Trident")||K.g.userAgent.A.K("MSIE")},K.g.userAgent.U.Ra=function(){return K.g.userAgent.A.K("Edge")},K.g.userAgent.U.Mg=function(){return K.g.userAgent.A.Pk()&&!K.g.userAgent.U.Ra()},K.g.userAgent.U.gk=function(){return K.g.userAgent.A.K("Gecko")&&!K.g.userAgent.U.Mg()&&!K.g.userAgent.U.pk()&&!K.g.userAgent.U.Ra()},K.g.userAgent.U.Lb=function(){var a=K.g.userAgent.A.sb();if(a){a=K.g.userAgent.A.Af(a);var b=K.g.userAgent.U.Hj(a);if(b)return"Gecko"==b[0]?K.g.userAgent.U.Rj(a):b[1];a=a[0];var c;if(a&&(c=a[2])&&(c=/Trident\/([^\s;]+)/.exec(c)))return c[1]}return""},K.g.userAgent.U.Hj=function(a){if(!K.g.userAgent.U.Ra())return a[1];for(var b=0;b<a.length;b++){var c=a[b];if("Edge"==c[0])return c}},K.g.userAgent.U.va=function(a){return 0<=K.f.Eb(K.g.userAgent.U.Lb(),a)},K.g.userAgent.U.Rj=function(a){return(a=K.j.find(a,function(a){return"Firefox"==a[0]}))&&a[1]||""},K.async.qh=function(a){K.global.setTimeout(function(){throw a},0)},K.async.pa=function(a,b,c){var d=a;b&&(d=K.bind(a,b)),d=K.async.pa.Ah(d),K.ya(K.global.setImmediate)&&(c||K.async.pa.Kl())?K.global.setImmediate(d):(K.async.pa.kh||(K.async.pa.kh=K.async.pa.Nj()),K.async.pa.kh(d))},K.async.pa.Kl=function(){
return!(K.global.Window&&K.global.Window.prototype&&!K.g.userAgent.v.Ra()&&K.global.Window.prototype.setImmediate==K.global.setImmediate)},K.async.pa.Nj=function(){var a=K.global.MessageChannel;if(void 0===a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!K.g.userAgent.U.lk()&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none",a.src="",document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document,a.open(),a.write(""),a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=K.bind(function(a){"*"!=d&&a.origin!=d||a.data!=c||this.port1.onmessage()},this),b.addEventListener("message",a,!1),this.port1={},this.port2={postMessage:function(){b.postMessage(c,d)}}}),void 0!==a&&!K.g.userAgent.v.uc()){var b=new a,c={},d=c;return b.port1.onmessage=function(){if(K.R(c.next)){c=c.next;var a=c.lf;c.lf=null,a()}},function(a){d.next={lf:a},d=d.next,b.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement(p)?function(a){var b=document.createElement(p);b.onreadystatechange=function(){b.onreadystatechange=null,b.parentNode.removeChild(b),b=null,a(),a=null},document.documentElement.appendChild(b)}:function(a){K.global.setTimeout(a,0)}},K.async.pa.Ah=K.J.$j,K.debug.Z.register(function(a){K.async.pa.Ah=a}),K.async.Ea=function(){this.Qc=this.Ab=null},K.async.Ea.Vc=100,K.async.Ea.Kb=new K.async.Zb(function(){return new K.async.ad},function(a){a.reset()},K.async.Ea.Vc),K.async.Ea.prototype.add=function(a,b){var c=K.async.Ea.Kb.get();c.set(a,b),this.Qc?this.Qc.next=c:this.Ab=c,this.Qc=c},K.async.Ea.prototype.remove=function(){var a=null;return this.Ab&&(a=this.Ab,this.Ab=this.Ab.next,this.Ab||(this.Qc=null),a.next=null),a},K.async.ad=function(){this.next=this.scope=this.od=null},K.async.ad.prototype.set=function(a,b){this.od=a,this.scope=b,this.next=null},K.async.ad.prototype.reset=function(){this.next=this.scope=this.od=null},K.async.M=function(a,b){K.async.M.Hc||K.async.M.bk(),K.async.M.Pc||(K.async.M.Hc(),K.async.M.Pc=!0),K.async.M.ie.add(a,b)},K.async.M.bk=function(){if(-1!=String(K.global.Promise).indexOf("[native code]")){var a=K.global.Promise.resolve(void 0);K.async.M.Hc=function(){a.then(K.async.M.Cc)}}else K.async.M.Hc=function(){K.async.pa(K.async.M.Cc)}},K.async.M.Jq=function(a){K.async.M.Hc=function(){K.async.pa(K.async.M.Cc),a&&a(K.async.M.Cc)}},K.async.M.Pc=!1,K.async.M.ie=new K.async.Ea,K.ea&&(K.async.M.Rs=function(){K.async.M.Pc=!1,K.async.M.ie=new K.async.Ea}),K.async.M.Cc=function(){for(var a;a=K.async.M.ie.remove();){try{a.od.call(a.scope)}catch(a){K.async.qh(a)}K.async.Ea.Kb.put(a)}K.async.M.Pc=!1},K.a.m={},K.a.m.Cp=F(),K.a.m.up=F(),K.a.m.zp=F(),K.a.m.yp=F(),K.a.m.vp=F(),K.a.m.wp=F(),K.a.m.xp=F(),K.a.m.Ap=F(),K.a.m.Bp=F(),K.a.m.sq=function(a){return K.ha(a)?a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a):void 0===a?"undefined":null===a?"null":typeof a},K.a.m.qc=function(a){return(a=a&&a.ownerDocument)&&(a.defaultView||a.parentWindow)||K.global},K.g.userAgent.platform={},K.g.userAgent.platform.yg=function(){return K.g.userAgent.A.K("Android")},K.g.userAgent.platform.Hg=function(){return K.g.userAgent.A.K("iPod")},K.g.userAgent.platform.Gg=function(){return K.g.userAgent.A.K("iPhone")&&!K.g.userAgent.A.K("iPod")&&!K.g.userAgent.A.K("iPad")},K.g.userAgent.platform.Fg=function(){return K.g.userAgent.A.K("iPad")},K.g.userAgent.platform.Eg=function(){return K.g.userAgent.platform.Gg()||K.g.userAgent.platform.Fg()||K.g.userAgent.platform.Hg()},K.g.userAgent.platform.Ig=function(){return K.g.userAgent.A.K("Macintosh")},K.g.userAgent.platform.ik=function(){return K.g.userAgent.A.K("Linux")},K.g.userAgent.platform.Og=function(){return K.g.userAgent.A.K("Windows")},K.g.userAgent.platform.Ag=function(){return K.g.userAgent.A.K("CrOS")},K.g.userAgent.platform.Lb=function(){var a=K.g.userAgent.A.sb(),b="";return K.g.userAgent.platform.Og()?(b=/Windows (?:NT|Phone) ([0-9.]+)/,b=(a=b.exec(a))?a[1]:"0.0"):K.g.userAgent.platform.Eg()?(b=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/,b=(a=b.exec(a))&&a[1].replace(/_/g,".")):K.g.userAgent.platform.Ig()?(b=/Mac OS X ([0-9_.]+)/,b=(a=b.exec(a))?a[1].replace(/_/g,"."):"10"):K.g.userAgent.platform.yg()?(b=/Android\s+([^\);]+)(\)|;)/,b=(a=b.exec(a))&&a[1]):K.g.userAgent.platform.Ag()&&(b=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/,b=(a=b.exec(a))&&a[1]),b||""},K.g.userAgent.platform.va=function(a){return 0<=K.f.Eb(K.g.userAgent.platform.Lb(),a)},K.Ha={},K.Ha.object=function(a,b){return b},K.Ha.ce=function(a){return K.Ha.ce[" "](a),a},K.Ha.ce[" "]=K.eb,K.Ha.Pp=function(a,b){try{return K.Ha.ce(a[b]),!0}catch(a){}return!1},K.Ha.cache=function(a,b,c,d){return d=d?d(b):b,Object.prototype.hasOwnProperty.call(a,d)?a[d]:a[d]=c(b)},K.userAgent={},K.userAgent.oe=!1,K.userAgent.me=!1,K.userAgent.ne=!1,K.userAgent.te=!1,K.userAgent.Uc=!1,K.userAgent.re=!1,K.userAgent.Fh=!1,K.userAgent.Bb=K.userAgent.oe||K.userAgent.me||K.userAgent.ne||K.userAgent.Uc||K.userAgent.te||K.userAgent.re,K.userAgent.Qj=function(){return K.g.userAgent.A.sb()},K.userAgent.Yf=function(){return K.global.navigator||null},K.userAgent.Ne=K.userAgent.Bb?K.userAgent.re:K.g.userAgent.v.Nd(),K.userAgent.Y=K.userAgent.Bb?K.userAgent.oe:K.g.userAgent.v.uc(),K.userAgent.Ce=K.userAgent.Bb?K.userAgent.me:K.g.userAgent.U.Ra(),K.userAgent.Um=K.userAgent.Ce||K.userAgent.Y,K.userAgent.Yc=K.userAgent.Bb?K.userAgent.ne:K.g.userAgent.U.gk(),K.userAgent.Cb=K.userAgent.Bb?K.userAgent.te||K.userAgent.Uc:K.g.userAgent.U.Mg(),K.userAgent.kk=function(){return K.userAgent.Cb&&K.g.userAgent.A.K("Mobile")},K.userAgent.Yn=K.userAgent.Uc||K.userAgent.kk(),K.userAgent.vo=K.userAgent.Cb,K.userAgent.nj=function(){var a=K.userAgent.Yf();return a&&a.platform||""},K.userAgent.mo=K.userAgent.nj(),K.userAgent.qe=!1,K.userAgent.ue=!1,K.userAgent.pe=!1,K.userAgent.ve=!1,K.userAgent.le=!1,K.userAgent.Sc=!1,K.userAgent.Rc=!1,K.userAgent.Tc=!1,K.userAgent.Da=K.userAgent.qe||K.userAgent.ue||K.userAgent.pe||K.userAgent.ve||K.userAgent.le||K.userAgent.Sc||K.userAgent.Rc||K.userAgent.Tc,K.userAgent.Rn=K.userAgent.Da?K.userAgent.qe:K.g.userAgent.platform.Ig(),K.userAgent.ep=K.userAgent.Da?K.userAgent.ue:K.g.userAgent.platform.Og(),K.userAgent.hk=function(){return K.g.userAgent.platform.ik()||K.g.userAgent.platform.Ag()},K.userAgent.Qn=K.userAgent.Da?K.userAgent.pe:K.userAgent.hk(),K.userAgent.tk=function(){var a=K.userAgent.Yf();return!!a&&K.f.contains(a.appVersion||"","X11")},K.userAgent.fp=K.userAgent.Da?K.userAgent.ve:K.userAgent.tk(),K.userAgent.am=K.userAgent.Da?K.userAgent.le:K.g.userAgent.platform.yg(),K.userAgent.Fn=K.userAgent.Da?K.userAgent.Sc:K.g.userAgent.platform.Gg(),K.userAgent.En=K.userAgent.Da?K.userAgent.Rc:K.g.userAgent.platform.Fg(),K.userAgent.Gn=K.userAgent.Da?K.userAgent.Tc:K.g.userAgent.platform.Hg(),K.userAgent.Dn=K.userAgent.Da?K.userAgent.Sc||K.userAgent.Rc||K.userAgent.Tc:K.g.userAgent.platform.Eg(),K.userAgent.oj=function(){var a="",b=K.userAgent.Sj();return b&&(a=b?b[1]:""),K.userAgent.Y&&null!=(b=K.userAgent.Of())&&b>parseFloat(a)?String(b):a},K.userAgent.Sj=function(){var a=K.userAgent.Qj();return K.userAgent.Yc?/rv\:([^\);]+)(\)|;)/.exec(a):K.userAgent.Ce?/Edge\/([\d\.]+)/.exec(a):K.userAgent.Y?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a):K.userAgent.Cb?/WebKit\/(\S+)/.exec(a):K.userAgent.Ne?/(?:Version)[ \/]?(\S+)/.exec(a):void 0},K.userAgent.Of=function(){var a=K.global.document;return a?a.documentMode:void 0},K.userAgent.VERSION=K.userAgent.oj(),K.userAgent.compare=function(a,b){return K.f.Eb(a,b)},K.userAgent.rk={},K.userAgent.va=function(a){return K.userAgent.Fh||K.Ha.cache(K.userAgent.rk,a,function(){return 0<=K.f.Eb(K.userAgent.VERSION,a)})},K.userAgent.Zr=K.userAgent.va,K.userAgent.Pb=function(a){return Number(K.userAgent.Wh)>=a},K.userAgent.Cr=K.userAgent.Pb;var L,M=K.global.document,aa=K.userAgent.Of();L=M&&K.userAgent.Y?aa||("CSS1Compat"==M.compatMode?parseInt(K.userAgent.VERSION,10):5):void 0,K.userAgent.Wh=L,K.a.ib={Lh:!K.userAgent.Y||K.userAgent.Pb(9),Mh:!K.userAgent.Yc&&!K.userAgent.Y||K.userAgent.Y&&K.userAgent.Pb(9)||K.userAgent.Yc&&K.userAgent.va("1.9.1"),xe:K.userAgent.Y&&!K.userAgent.va("9"),Nh:K.userAgent.Y||K.userAgent.Ne||K.userAgent.Cb,ci:K.userAgent.Y,Mn:K.userAgent.Y&&!K.userAgent.Pb(9)},K.a.Mc={},K.a.Mc.Hi={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},K.a.Mc.sk=function(a){return!0===K.a.Mc.Hi[a]},K.b.V=function(){this.yc="",this.ni=K.b.V.ca},K.b.V.prototype.ua=!0,K.b.V.ca={},K.b.V.mc=function(a){return a=K.f.I.u(a),0===a.length?K.b.V.EMPTY:K.b.V.hd(a)},K.b.V.prototype.ga=G("yc"),K.ea&&(K.b.V.prototype.toString=function(){return"SafeScript{"+this.yc+"}"}),K.b.V.u=function(a){return a instanceof K.b.V&&a.constructor===K.b.V&&a.ni===K.b.V.ca?a.yc:(K.m.ma("expected object of type SafeScript, got '"+a+k+K.aa(a)),"type_error:SafeScript")},K.b.V.hd=function(a){return(new K.b.V).bb(a)},K.b.V.prototype.bb=function(a){return this.yc=a,this},K.b.V.EMPTY=K.b.V.hd(""),K.sa={},K.sa.url={},K.sa.url.dj=function(a){return K.sa.url.lg().createObjectURL(a)},K.sa.url.Ts=function(a){K.sa.url.lg().revokeObjectURL(a)},K.sa.url.lg=function(){var a=K.sa.url.Ef();if(null!=a)return a;throw Error("This browser doesn't seem to support blob URLs")},K.sa.url.Ef=function(){return K.R(K.global.URL)&&K.R(K.global.URL.createObjectURL)?K.global.URL:K.R(K.global.webkitURL)&&K.R(K.global.webkitURL.createObjectURL)?K.global.webkitURL:K.R(K.global.createObjectURL)?K.global:null},K.sa.url.Lp=function(){return null!=K.sa.url.Ef()},K.b.o=function(){this.Ga="",this.ri=K.b.o.ca},K.b.o.Ka="about:invalid#zClosurez",K.b.o.prototype.ua=!0,K.b.o.prototype.ga=G("Ga"),K.b.o.prototype.Dd=!0,K.b.o.prototype.$a=function(){return K.h.i.O.Ta},K.ea&&(K.b.o.prototype.toString=function(){return"SafeUrl{"+this.Ga+"}"}),K.b.o.u=function(a){return a instanceof K.b.o&&a.constructor===K.b.o&&a.ri===K.b.o.ca?a.Ga:(K.m.ma("expected object of type SafeUrl, got '"+a+k+K.aa(a)),"type_error:SafeUrl")},K.b.o.mc=function(a){return K.b.o.Fa(K.f.I.u(a))},K.b.Re=/^(?:audio\/(?:3gpp|3gpp2|aac|midi|mp4|mpeg|ogg|x-m4a|x-wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|text\/csv|video\/(?:mpeg|mp4|ogg|webm))$/i,K.b.o.Mq=function(a){return a=K.b.Re.test(a.type)?K.sa.url.dj(a):K.b.o.Ka,K.b.o.Fa(a)},K.b.Rh=/^data:([^;,]*);base64,[a-z0-9+\/]+=*$/i,K.b.o.Oq=function(a){var b=a.match(K.b.Rh);return b=b&&K.b.Re.test(b[1]),K.b.o.Fa(b?a:K.b.o.Ka)},K.b.o.Qq=function(a){return K.f.Zi(a)||(a=K.b.o.Ka),K.b.o.Fa(a)},K.b.o.Rq=function(a){return K.b.o.Fa(K.b.C.u(a))},K.b.Se=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i,K.b.o.Gc=function(a){return a instanceof K.b.o?a:(a=a.ua?a.ga():String(a),K.b.Se.test(a)||(a=K.b.o.Ka),K.b.o.Fa(a))},K.b.o.Vb=function(a){return a instanceof K.b.o?a:(a=a.ua?a.ga():String(a),K.b.Se.test(a)||(a=K.b.o.Ka),K.b.o.Fa(a))},K.b.o.ca={},K.b.o.Fa=function(a){var b=new K.b.o;return b.Ga=a,b},K.b.o.Wl=K.b.o.Fa("about:blank"),K.b.B=function(){this.Ac="",this.pi=K.b.B.ca},K.b.B.prototype.ua=!0,K.b.B.ca={},K.b.B.mc=function(a){return a=K.f.I.u(a),0===a.length?K.b.B.EMPTY:K.b.B.Fb(a)},K.b.B.Vp=F(),K.b.B.prototype.ga=G("Ac"),K.ea&&(K.b.B.prototype.toString=function(){return"SafeStyle{"+this.Ac+"}"}),K.b.B.u=function(a){return a instanceof K.b.B&&a.constructor===K.b.B&&a.pi===K.b.B.ca?a.Ac:(K.m.ma("expected object of type SafeStyle, got '"+a+k+K.aa(a)),"type_error:SafeStyle")},K.b.B.Fb=function(a){return(new K.b.B).bb(a)},K.b.B.prototype.bb=function(a){return this.Ac=a,this},K.b.B.EMPTY=K.b.B.Fb(""),K.b.B.Ka="zClosurez",K.b.B.create=function(a){var b,c="";for(b in a){if(!/^[-_a-zA-Z0-9]+$/.test(b))throw Error("Name allows only [-_a-zA-Z0-9], got: "+b);var d=a[b];null!=d&&(d=K.isArray(d)?K.j.map(d,K.b.B.gh).join(" "):K.b.B.gh(d),c+=b+":"+d+";")}return c?K.b.B.Fb(c):K.b.B.EMPTY},K.b.B.gh=function(a){return a instanceof K.b.o?'url("'+K.b.o.u(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")':a instanceof K.f.I?K.f.I.u(a):K.b.B.il(String(a))},K.b.B.il=function(a){var b=a.replace(K.b.o.ai,"$1").replace(K.b.o.Xe,"url");return K.b.B.Ei.test(b)?K.b.B.Vj(a)?K.b.B.jl(a):(K.m.ma("String value requires balanced quotes, got: "+a),K.b.B.Ka):(K.m.ma("String value allows only "+K.b.B.$e+" and simple functions, got: "+a),K.b.B.Ka)},K.b.B.Vj=function(a){for(var b=!0,c=!0,d=0;d<a.length;d++){var e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}return b&&c},K.b.B.$e="[-,.\"'%_!# a-zA-Z0-9]",K.b.B.Ei=new RegExp("^"+K.b.B.$e+"+$"),K.b.o.Xe=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,K.b.o.ai=/\b(hsl|hsla|rgb|rgba|(rotate|scale|translate)(X|Y|Z|3d)?)\([-0-9a-z.%, ]+\)/g,K.b.B.jl=function(a){return a.replace(K.b.o.Xe,function(a,b,c,d){var e="";return c=c.replace(/^(['"])(.*)\1$/,function(a,b,c){return e=b,c}),a=K.b.o.Gc(c).ga(),b+e+a+e+d})},K.b.B.concat=function(a){function b(a){K.isArray(a)?K.j.forEach(a,b):c+=K.b.B.u(a)}var c="";return K.j.forEach(arguments,b),c?K.b.B.Fb(c):K.b.B.EMPTY},K.b.N=function(){this.zc="",this.oi=K.b.N.ca},K.b.N.prototype.ua=!0,K.b.N.ca={},K.b.N.kq=function(a,b){if(K.f.contains(a,"<"))throw Error("Selector does not allow '<', got: "+a);var c=a.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(c))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+a);if(!K.b.N.Uj(c))throw Error("() and [] in selector must be balanced, got: "+a);return b instanceof K.b.B||(b=K.b.B.create(b)),a=a+"{"+K.b.B.u(b)+"}",K.b.N.Gb(a)},K.b.N.Uj=function(a){for(var b={"(":")","[":"]"},c=[],d=0;d<a.length;d++){var e=a[d];if(b[e])c.push(b[e]);else if(K.object.contains(b,e)&&c.pop()!=e)return!1}return 0==c.length},K.b.N.concat=function(a){function b(a){K.isArray(a)?K.j.forEach(a,b):c+=K.b.N.u(a)}var c="";return K.j.forEach(arguments,b),K.b.N.Gb(c)},K.b.N.mc=function(a){return a=K.f.I.u(a),0===a.length?K.b.N.EMPTY:K.b.N.Gb(a)},K.b.N.prototype.ga=G("zc"),K.ea&&(K.b.N.prototype.toString=function(){return"SafeStyleSheet{"+this.zc+"}"}),K.b.N.u=function(a){return a instanceof K.b.N&&a.constructor===K.b.N&&a.oi===K.b.N.ca?a.zc:(K.m.ma("expected object of type SafeStyleSheet, got '"+a+k+K.aa(a)),"type_error:SafeStyleSheet")},K.b.N.Gb=function(a){return(new K.b.N).bb(a)},K.b.N.prototype.bb=function(a){return this.zc=a,this},K.b.N.EMPTY=K.b.N.Gb(""),K.b.l=function(){this.Ga="",this.mi=K.b.l.ca,this.kc=null},K.b.l.prototype.Dd=!0,K.b.l.prototype.$a=G("kc"),K.b.l.prototype.ua=!0,K.b.l.prototype.ga=G("Ga"),K.ea&&(K.b.l.prototype.toString=function(){return"SafeHtml{"+this.Ga+"}"}),K.b.l.u=function(a){return a instanceof K.b.l&&a.constructor===K.b.l&&a.mi===K.b.l.ca?a.Ga:(K.m.ma("expected object of type SafeHtml, got '"+a+k+K.aa(a)),"type_error:SafeHtml")},K.b.l.ta=function(a){if(a instanceof K.b.l)return a;var b=null;return a.Dd&&(b=a.$a()),K.b.l.ra(K.f.ta(a.ua?a.ga():String(a)),b)},K.b.l.pr=function(a){return a instanceof K.b.l?a:(a=K.b.l.ta(a),K.b.l.ra(K.f.Yg(K.b.l.u(a)),a.$a()))},K.b.l.qr=function(a){return a instanceof K.b.l?a:(a=K.b.l.ta(a),K.b.l.ra(K.f.Ol(K.b.l.u(a)),a.$a()))},K.b.l.from=K.b.l.ta,K.b.l.Ze=/^[a-zA-Z0-9-]+$/,K.b.l.Ci={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},K.b.l.ii={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},K.b.l.create=function(a,b,c){return K.b.l.Ml(String(a)),K.b.l.Ya(String(a),b,c)},K.b.l.Ml=function(a){if(!K.b.l.Ze.test(a))throw Error("Invalid tag name <"+a+">.");if(a.toUpperCase()in K.b.l.ii)throw Error("Tag name <"+a+"> is not allowed for SafeHtml.")},K.b.l.hq=function(a,b,c,d){a&&K.b.C.u(a);var e={};return e.src=a||null,e.srcdoc=b&&K.b.l.u(b),a=K.b.l.hc(e,{sandbox:""},c),K.b.l.Ya("iframe",a,d)},K.b.l.lq=function(a,b,c,d){if(!K.b.l.Wi())throw Error("The browser does not support sandboxed iframes.");var e={};return e.src=a?K.b.o.u(K.b.o.Gc(a)):null,e.srcdoc=b||null,e.sandbox="",a=K.b.l.hc(e,{},c),K.b.l.Ya("iframe",a,d)},K.b.l.Wi=function(){return K.global.HTMLIFrameElement&&"sandbox"in K.global.HTMLIFrameElement.prototype},K.b.l.nq=function(a,b){return K.b.C.u(a),a=K.b.l.hc({src:a},{},b),K.b.l.Ya("script",a)},K.b.l.mq=function(a,b){for(var c in b){var d=c.toLowerCase();if("language"==d||"src"==d||"text"==d||"type"==d)throw Error('Cannot set "'+d+'" attribute')}for(c="",a=K.j.concat(a),d=0;d<a.length;d++)c+=K.b.V.u(a[d]);return a=K.b.l.ra(c,K.h.i.O.qa),K.b.l.Ya("script",b,a)},K.b.l.oq=function(a,b){b=K.b.l.hc({type:"text/css"},{},b);var c="";a=K.j.concat(a);for(var d=0;d<a.length;d++)c+=K.b.N.u(a[d]);return a=K.b.l.ra(c,K.h.i.O.qa),K.b.l.Ya("style",b,a)},K.b.l.jq=function(a,b){return a=K.b.o.u(K.b.o.Gc(a)),(K.g.userAgent.v.uc()||K.g.userAgent.v.Ra())&&K.f.contains(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),K.b.l.Ya("meta",{"http-equiv":"refresh",content:(b||0)+"; url="+a})},K.b.l.Cj=function(a,b,c){if(c instanceof K.f.I)c=K.f.I.u(c);else if("style"==b.toLowerCase())c=K.b.l.Oj(c);else{if(/^on/i.test(b))throw Error('Attribute "'+b+'" requires goog.string.Const value, "'+c+'" given.');if(b.toLowerCase()in K.b.l.Ci)if(c instanceof K.b.C)c=K.b.C.u(c);else if(c instanceof K.b.o)c=K.b.o.u(c);else{if(!K.L(c))throw Error('Attribute "'+b+'" on tag "'+a+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+c+'" given.');c=K.b.o.Gc(c).ga()}}return c.ua&&(c=c.ga()),b+'="'+K.f.ta(String(c))+'"'},K.b.l.Oj=function(a){if(!K.ha(a))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof a+" given: "+a);return a instanceof K.b.B||(a=K.b.B.create(a)),K.b.B.u(a)},K.b.l.qq=function(a,b,c,d){return b=K.b.l.create(b,c,d),b.kc=a,b},K.b.l.concat=function(a){function b(a){K.isArray(a)?K.j.forEach(a,b):(a=K.b.l.ta(a),d+=K.b.l.u(a),a=a.$a(),c==K.h.i.O.qa?c=a:a!=K.h.i.O.qa&&c!=a&&(c=null))}var c=K.h.i.O.qa,d="";return K.j.forEach(arguments,b),K.b.l.ra(d,c)},K.b.l.cq=function(a,b){var c=K.b.l.concat(K.j.slice(arguments,1));return c.kc=a,c},K.b.l.ca={},K.b.l.ra=function(a,b){return(new K.b.l).bb(a,b)},K.b.l.prototype.bb=function(a,b){return this.Ga=a,this.kc=b,this},K.b.l.Ya=function(a,b,c){var d=null,e="<"+a+K.b.l.vl(a,b);return K.cb(c)?K.isArray(c)||(c=[c]):c=[],K.a.Mc.sk(a.toLowerCase())?e+=">":(d=K.b.l.concat(c),e+=">"+K.b.l.u(d)+"</"+a+">",d=d.$a()),(a=b&&b.dir)&&(d=/^(ltr|rtl|auto)$/i.test(a)?K.h.i.O.qa:null),K.b.l.ra(e,d)},K.b.l.vl=function(a,b){var c="";if(b)for(var d in b){if(!K.b.l.Ze.test(d))throw Error('Invalid attribute name "'+d+'".');var e=b[d];K.cb(e)&&(c+=" "+K.b.l.Cj(a,d,e))}return c},K.b.l.hc=function(a,b,c){var d,e={};for(d in a)e[d]=a[d];for(d in b)e[d]=b[d];for(d in c){var f=d.toLowerCase();if(f in a)throw Error('Cannot override "'+f+'" attribute, got "'+d+'" with value "'+c[d]+'"');f in b&&delete e[f],e[d]=c[d]}return e},K.b.l.Qm=K.b.l.ra("<!DOCTYPE html>",K.h.i.O.qa),K.b.l.EMPTY=K.b.l.ra("",K.h.i.O.qa),K.b.l.we=K.b.l.ra("<br>",K.h.i.O.qa),K.a.S={},K.a.S.In={Zl:"afterbegin",$l:"afterend",om:"beforebegin",pm:"beforeend"},K.a.S.sr=function(a,b,c){a.insertAdjacentHTML(b,K.b.l.u(c))},K.a.S.ui={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},K.a.S.lh=function(a,b){if(K.m.ja&&K.a.S.ui[a.tagName.toUpperCase()])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+a.tagName+".");a.innerHTML=K.b.l.u(b)},K.a.S.ot=function(a,b){a.outerHTML=K.b.l.u(b)},K.a.S.qt=function(a,b){a.style.cssText=K.b.B.u(b)},K.a.S.wq=function(a,b){a.write(K.b.l.u(b))},K.a.S.at=function(a,b){b=b instanceof K.b.o?b:K.b.o.Vb(b),a.href=K.b.o.u(b)},K.a.S.kt=function(a,b){b=b instanceof K.b.o?b:K.b.o.Vb(b),a.src=K.b.o.u(b)},K.a.S.et=function(a,b){a.src=K.b.C.u(b)},K.a.S.gt=function(a,b){a.src=K.b.C.u(b)},K.a.S.it=function(a,b){a.src=K.b.C.u(b)},K.a.S.jt=function(a,b){a.srcdoc=K.b.l.u(b)},K.a.S.lt=function(a,b,c){a.rel=c,K.f.kf(c,"stylesheet")?a.href=K.b.C.u(b):a.href=b instanceof K.b.C?K.b.C.u(b):b instanceof K.b.o?K.b.o.u(b):K.b.o.Vb(b).ga()},K.a.S.nt=function(a,b){a.data=K.b.C.u(b)},K.a.S.ol=function(a,b){a.src=K.b.C.u(b)},K.a.S.pt=function(a,b){a.text=K.b.V.u(b)},K.a.S.mt=function(a,b){b=b instanceof K.b.o?b:K.b.o.Vb(b),a.href=K.b.o.u(b)},K.a.S.zs=function(a,b,c,d,e){return a=a instanceof K.b.o?a:K.b.o.Vb(a),(b||window).open(K.b.o.u(a),c?K.f.I.u(c):"",d,e)},K.b.hb={},K.b.hb.fl=function(a,b){return K.b.l.ra(b,null)},K.b.hb.Xs=function(a,b){return K.b.V.hd(b)},K.b.hb.Ys=function(a,b){return K.b.B.Fb(b)},K.b.hb.Zs=function(a,b){return K.b.N.Gb(b)},K.b.hb.$s=function(a,b){return K.b.o.Fa(b)},K.b.hb.Ot=function(a,b){return K.b.C.Hb(b)},K.s={},K.s.Fs=function(a){return Math.floor(Math.random()*a)},K.s.Qt=function(a,b){return a+Math.random()*(b-a)},K.s.Wp=function(a,b,c){return Math.min(Math.max(a,b),c)},K.s.Vg=function(a,b){return a%=b,0>a*b?a+b:a},K.s.bs=function(a,b,c){return a+c*(b-a)},K.s.ps=function(a,b,c){return Math.abs(a-b)<=(c||1e-6)},K.s.fe=function(a){return K.s.Vg(a,360)},K.s.At=function(a){return K.s.Vg(a,2*Math.PI)},K.s.uh=function(a){return a*Math.PI/180},K.s.zl=function(a){return 180*a/Math.PI},K.s.mp=function(a,b){return b*Math.cos(K.s.uh(a))},K.s.np=function(a,b){return b*Math.sin(K.s.uh(a))},K.s.angle=function(a,b,c,d){return K.s.fe(K.s.zl(Math.atan2(d-b,c-a)))},K.s.lp=function(a,b){return a=K.s.fe(b)-K.s.fe(a),180<a?a-=360:-180>=a&&(a=360+a),a},K.s.sign=function(a){return 0<a?1:0>a?-1:a},K.s.gs=function(a,b,c,d){c=c||function(a,b){return a==b},d=d||function(b){return a[b]};for(var e=a.length,f=b.length,g=[],h=0;h<e+1;h++)g[h]=[],g[h][0]=0;for(var i=0;i<f+1;i++)g[0][i]=0;for(h=1;h<=e;h++)for(i=1;i<=f;i++)c(a[h-1],b[i-1])?g[h][i]=g[h-1][i-1]+1:g[h][i]=Math.max(g[h-1][i],g[h][i-1]);var j=[];for(h=e,i=f;0<h&&0<i;)c(a[h-1],b[i-1])?(j.unshift(d(h-1,i-1)),h--,i--):g[h-1][i]>g[h][i-1]?h--:i--;return j},K.s.ge=function(a){return K.j.reduce(arguments,function(a,b){return a+b},0)},K.s.Pi=function(a){return K.s.ge.apply(null,arguments)/arguments.length},K.s.hl=function(a){var b=arguments.length;if(2>b)return 0;var c=K.s.Pi.apply(null,arguments);return K.s.ge.apply(null,K.j.map(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)},K.s.Bt=function(a){return Math.sqrt(K.s.hl.apply(null,arguments))},K.s.Hr=function(a){return isFinite(a)&&0==a%1},K.s.Fr=function(a){return isFinite(a)},K.s.Mr=function(a){return 0==a&&0>1/a},K.s.fs=function(a){if(0<a){var b=Math.round(Math.log(a)*Math.LOG10E);return b-(parseFloat("1e"+b)>a?1:0)}return 0==a?-1/0:NaN},K.s.Vs=function(a,b){return Math.floor(a+(b||2e-15))},K.s.Us=function(a,b){return Math.ceil(a-(b||2e-15))},K.s.W=function(a,b){this.x=K.R(a)?a:0,this.y=K.R(b)?b:0},K.s.W.prototype.clone=function(){return new K.s.W(this.x,this.y)},K.ea&&(K.s.W.prototype.toString=function(){return"("+this.x+", "+this.y+")"}),K.s.W.prototype.Ib=function(a){return a instanceof K.s.W&&K.s.W.Ib(this,a)},K.s.W.Ib=function(a,b){return a==b||!(!a||!b)&&(a.x==b.x&&a.y==b.y)},K.s.W.vq=function(a,b){var c=a.x-b.x;return a=a.y-b.y,Math.sqrt(c*c+a*a)},K.s.W.hs=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},K.s.W.azimuth=function(a){return K.s.angle(0,0,a.x,a.y)},K.s.W.yt=function(a,b){var c=a.x-b.x;return a=a.y-b.y,c*c+a*a},K.s.W.uq=function(a,b){return new K.s.W(a.x-b.x,a.y-b.y)},K.s.W.ge=function(a,b){return new K.s.W(a.x+b.x,a.y+b.y)},I=K.s.W.prototype,I.ceil=function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},I.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},I.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},I.translate=function(a,b){return a instanceof K.s.W?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),K.Rb(b)&&(this.y+=b)),this},I.scale=function(a,b){return b=K.Rb(b)?b:a,this.x*=a,this.y*=b,this},K.s.nb=function(a,b){this.width=a,this.height=b},K.s.nb.Ib=function(a,b){return a==b||!(!a||!b)&&(a.width==b.width&&a.height==b.height)},K.s.nb.prototype.clone=function(){return new K.s.nb(this.width,this.height)},K.ea&&(K.s.nb.prototype.toString=function(){return"("+this.width+" x "+this.height+")"}),I=K.s.nb.prototype,I.Li=function(){return this.width*this.height},I.aspectRatio=function(){return this.width/this.height},I.Qb=function(){return!this.Li()},I.ceil=function(){return this.width=Math.ceil(this.width),this.height=Math.ceil(this.height),this},I.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},I.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this},I.scale=function(a,b){return b=K.Rb(b)?b:a,this.width*=a,this.height*=b,this},K.a.Hh=!1;K.a.se=!1,K.a.Qh=K.a.Hh||K.a.se,K.a.td=function(a){return a?new K.a.lb(K.a.Qa(a)):K.a.mj||(K.a.mj=new K.a.lb)},K.a.Dj=function(){return document},K.a.ud=function(a){return K.a.xd(document,a)},K.a.xd=function(a,b){return K.L(b)?a.getElementById(b):b},K.a.Lj=function(a){return K.a.ig(document,a)},K.a.ig=function(a,b){return K.a.xd(a,b)},K.a.Bh=K.a.ud,K.a.getElementsByTagName=function(a,b){return(b||document).getElementsByTagName(String(a))},K.a.yd=function(a,b,c){return K.a.nc(document,a,b,c)},K.a.Gj=function(a,b,c){return K.a.wd(document,a,b,c)},K.a.Rf=function(a,b){var c=b||document;return K.a.cd(c)?c.querySelectorAll("."+a):K.a.nc(document,"*",a,b)},K.a.vd=function(a,b){var c=b||document;return(c.getElementsByClassName?c.getElementsByClassName(a)[0]:K.a.wd(document,"*",a,b))||null},K.a.hg=function(a,b){return K.a.vd(a,b)},K.a.cd=function(a){return!(!a.querySelectorAll||!a.querySelector)},K.a.nc=function(a,b,c,d){if(a=d||a,b=b&&"*"!=b?String(b).toUpperCase():"",K.a.cd(a)&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){if(a=a.getElementsByClassName(c),b){d={};for(var e,f=0,g=0;e=a[g];g++)b==e.nodeName&&(d[f++]=e);return d.length=f,d}return a}if(a=a.getElementsByTagName(b||"*"),c){for(d={},g=f=0;e=a[g];g++)b=e.className,typeof b.split==u&&K.j.contains(b.split(/\s+/),c)&&(d[f++]=e);return d.length=f,d}return a},K.a.wd=function(a,b,c,d){var e=d||a,f=b&&"*"!=b?String(b).toUpperCase():"";return K.a.cd(e)&&(f||c)?e.querySelector(f+(c?"."+c:"")):K.a.nc(a,b,c,d)[0]||null},K.a.Ch=K.a.yd,K.a.Jc=function(a,b){K.object.forEach(b,function(b,c){b&&b.ua&&(b=b.ga()),"style"==c?a.style.cssText=b:"class"==c?a.className=b:"for"==c?a.htmlFor=b:K.a.Be.hasOwnProperty(c)?a.setAttribute(K.a.Be[c],b):K.f.startsWith(c,"aria-")||K.f.startsWith(c,"data-")?a.setAttribute(c,b):a[c]=b})},K.a.Be={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},K.a.mg=function(a){return K.a.ng(a||window)},K.a.ng=function(a){return a=a.document,a=K.a.Ob(a)?a.documentElement:a.body,new K.s.nb(a.clientWidth,a.clientHeight)},K.a.Ej=function(){return K.a.rd(window)},K.a.Xq=function(a){return K.a.rd(a)},K.a.rd=function(a){var b=a.document,c=0;if(b){c=b.body;var d=b.documentElement;if(!d||!c)return 0;if(a=K.a.ng(a).height,K.a.Ob(b)&&d.scrollHeight)c=d.scrollHeight!=a?d.scrollHeight:d.offsetHeight;else{b=d.scrollHeight;var e=d.offsetHeight;d.clientHeight!=e&&(b=c.scrollHeight,e=c.offsetHeight),c=b>a?b>e?b:e:b<e?b:e}}return c},K.a.dr=function(a){return K.a.td((a||K.global||window).document).Pf()},K.a.Pf=function(){return K.a.Qf(document)},K.a.Qf=function(a){var b=K.a.sd(a);return a=K.a.qc(a),K.userAgent.Y&&K.userAgent.va("10")&&a.pageYOffset!=b.scrollTop?new K.s.W(b.scrollLeft,b.scrollTop):new K.s.W(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)},K.a.Fj=function(){return K.a.sd(document)},K.a.sd=function(a){return a.scrollingElement?a.scrollingElement:!K.userAgent.Cb&&K.a.Ob(a)?a.documentElement:a.body||a.documentElement},K.a.tb=function(a){return a?K.a.qc(a):window},K.a.qc=function(a){return a.parentWindow||a.defaultView},K.a.fd=function(a,b,c){return K.a.sf(document,arguments)},K.a.sf=function(a,b){var c=String(b[0]),d=b[1];if(!K.a.ib.Lh&&d&&(d.name||d.type)){if(c=["<",c],d.name&&c.push(' name="',K.f.ta(d.name),'"'),d.type){c.push(' type="',K.f.ta(d.type),'"');var e={};K.object.extend(e,d),delete e.type,d=e}c.push(">"),c=c.join("")}return c=a.createElement(c),d&&(K.L(d)?c.className=d:K.isArray(d)?c.className=d.join(" "):K.a.Jc(c,d)),2<b.length&&K.a.bf(a,c,b,2),c},K.a.bf=function(a,b,c,d){function e(c){c&&b.appendChild(K.L(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];K.Nb(f)&&!K.a.Ld(f)?K.j.forEach(K.a.Md(f)?K.j.th(f):f,e):e(f)}},K.a.Dh=K.a.fd,K.a.createElement=function(a){return K.a.Oa(document,a)},K.a.Oa=function(a,b){return a.createElement(String(b))},K.a.createTextNode=function(a){return document.createTextNode(String(a))},K.a.hj=function(a,b,c){return K.a.tf(document,a,b,!!c)},K.a.tf=function(a,b,c,d){for(var e=K.a.Oa(a,"TABLE"),f=e.appendChild(K.a.Oa(a,"TBODY")),g=0;g<b;g++){for(var h=K.a.Oa(a,"TR"),i=0;i<c;i++){var j=K.a.Oa(a,"TD");d&&K.a.ae(j,K.f.Ye.Ke),h.appendChild(j)}f.appendChild(h)}return e},K.a.eq=function(a){var b=K.j.map(arguments,K.f.I.u);return b=K.b.hb.fl(K.f.I.from("Constant HTML string, that gets turned into a Node later, so it will be automatically balanced."),b.join("")),K.a.eh(b)},K.a.eh=function(a){return K.a.fh(document,a)},K.a.fh=function(a,b){var c=K.a.Oa(a,"DIV");return K.a.ib.ci?(K.a.S.lh(c,K.b.l.concat(K.b.l.we,b)),c.removeChild(c.firstChild)):K.a.S.lh(c,b),K.a.$i(a,c)},K.a.$i=function(a,b){if(1==b.childNodes.length)return b.removeChild(b.firstChild);for(a=a.createDocumentFragment();b.firstChild;)a.appendChild(b.firstChild);return a},K.a.dk=function(){return K.a.Ob(document)},K.a.Ob=function(a){return K.a.Qh?K.a.se:"CSS1Compat"==a.compatMode},K.a.canHaveChildren=function(a){if(a.nodeType!=K.a.fa.Ia)return!1;switch(a.tagName){case"APPLET":case"AREA":case"BASE":case"BR":case"COL":case"COMMAND":case"EMBED":case"FRAME":case"HR":case"IMG":case"INPUT":case"IFRAME":case"ISINDEX":case"KEYGEN":case"LINK":case"NOFRAMES":case"NOSCRIPT":case"META":case"OBJECT":case"PARAM":case p:case"SOURCE":case"STYLE":case"TRACK":case"WBR":return!1}return!0},K.a.appendChild=function(a,b){a.appendChild(b)},K.a.append=function(a,b){K.a.bf(K.a.Qa(a),a,arguments,1)},K.a.Zd=function(a){for(var b;b=a.firstChild;)a.removeChild(b)},K.a.vg=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)},K.a.ug=function(a,b){b.parentNode&&b.parentNode.insertBefore(a,b.nextSibling)},K.a.tg=function(a,b,c){a.insertBefore(b,a.childNodes[c]||null)},K.a.removeNode=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null},K.a.dh=function(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)},K.a.Ff=function(a){var b,c=a.parentNode;if(c&&c.nodeType!=K.a.fa.Vh){if(a.removeNode)return a.removeNode(!1);for(;b=a.firstChild;)c.insertBefore(b,a);return K.a.removeNode(a)}},K.a.Nf=function(a){return K.a.ib.Mh&&void 0!=a.children?a.children:K.j.filter(a.childNodes,function(a){return a.nodeType==K.a.fa.Ia})},K.a.Sf=function(a){return K.R(a.firstElementChild)?a.firstElementChild:K.a.oc(a.firstChild,!0)},K.a.Wf=function(a){return K.R(a.lastElementChild)?a.lastElementChild:K.a.oc(a.lastChild,!1)},K.a.Zf=function(a){return K.R(a.nextElementSibling)?a.nextElementSibling:K.a.oc(a.nextSibling,!0)},K.a.fg=function(a){return K.R(a.previousElementSibling)?a.previousElementSibling:K.a.oc(a.previousSibling,!1)},K.a.oc=function(a,b){for(;a&&a.nodeType!=K.a.fa.Ia;)a=b?a.nextSibling:a.previousSibling;return a},K.a.$f=function(a){if(!a)return null;if(a.firstChild)return a.firstChild;for(;a&&!a.nextSibling;)a=a.parentNode;return a?a.nextSibling:null},K.a.gg=function(a){if(!a)return null;if(!a.previousSibling)return a.parentNode;for(a=a.previousSibling;a&&a.lastChild;)a=a.lastChild;return a},K.a.Ld=function(a){return K.ha(a)&&0<a.nodeType},K.a.Hd=function(a){return K.ha(a)&&a.nodeType==K.a.fa.Ia},K.a.Ng=function(a){return K.ha(a)&&a.window==a},K.a.eg=function(a){var b;return!K.a.ib.Nh||K.userAgent.Y&&K.userAgent.va("9")&&!K.userAgent.va("10")&&K.global.SVGElement&&a instanceof K.global.SVGElement||!(b=a.parentElement)?(b=a.parentNode,K.a.Hd(b)?b:null):b},
K.a.contains=function(a,b){if(!a||!b)return!1;if(a.contains&&b.nodeType==K.a.fa.Ia)return a==b||a.contains(b);if(void 0!==a.compareDocumentPosition)return a==b||!!(16&a.compareDocumentPosition(b));for(;b&&a!=b;)b=b.parentNode;return b==a},K.a.mf=function(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return 2&a.compareDocumentPosition(b)?1:-1;if(K.userAgent.Y&&!K.userAgent.Pb(9)){if(a.nodeType==K.a.fa.Xc)return-1;if(b.nodeType==K.a.fa.Xc)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=a.nodeType==K.a.fa.Ia,d=b.nodeType==K.a.fa.Ia;if(c&&d)return a.sourceIndex-b.sourceIndex;var e=a.parentNode,f=b.parentNode;return e==f?K.a.pf(a,b):!c&&K.a.contains(e,b)?-1*K.a.nf(a,b):!d&&K.a.contains(f,a)?K.a.nf(b,a):(c?a.sourceIndex:e.sourceIndex)-(d?b.sourceIndex:f.sourceIndex)}return d=K.a.Qa(a),c=d.createRange(),c.selectNode(a),c.collapse(!0),a=d.createRange(),a.selectNode(b),a.collapse(!0),c.compareBoundaryPoints(K.global.Range.START_TO_END,a)},K.a.nf=function(a,b){var c=a.parentNode;if(c==b)return-1;for(;b.parentNode!=c;)b=b.parentNode;return K.a.pf(b,a)},K.a.pf=function(a,b){for(;b=b.previousSibling;)if(b==a)return-1;return 1},K.a.Bf=function(a){var b,c=arguments.length;if(!c)return null;if(1==c)return arguments[0];var d=[],e=1/0;for(b=0;b<c;b++){for(var f=[],g=arguments[b];g;)f.unshift(g),g=g.parentNode;d.push(f),e=Math.min(e,f.length)}for(f=null,b=0;b<e;b++){g=d[0][b];for(var h=1;h<c;h++)if(g!=d[h][b])return f;f=g}return f},K.a.Qa=function(a){return a.nodeType==K.a.fa.Xc?a:a.ownerDocument||a.document},K.a.Tf=function(a){return a.contentDocument||a.contentWindow.document},K.a.Uf=function(a){try{return a.contentWindow||(a.contentDocument?K.a.tb(a.contentDocument):null)}catch(a){}return null},K.a.ae=function(a,b){if("textContent"in a)a.textContent=b;else if(a.nodeType==K.a.fa.cc)a.data=String(b);else if(a.firstChild&&a.firstChild.nodeType==K.a.fa.cc){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else{K.a.Zd(a);var c=K.a.Qa(a);a.appendChild(c.createTextNode(String(b)))}},K.a.dg=function(a){if("outerHTML"in a)return a.outerHTML;var b=K.a.Qa(a);return b=K.a.Oa(b,"DIV"),b.appendChild(a.cloneNode(!0)),b.innerHTML},K.a.Cf=function(a,b){var c=[];return K.a.nd(a,b,c,!0)?c[0]:void 0},K.a.Df=function(a,b){var c=[];return K.a.nd(a,b,c,!1),c},K.a.nd=function(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||K.a.nd(a,b,c,d))return!0;a=a.nextSibling}return!1},K.a.Ue={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},K.a.ac={IMG:" ",BR:"\n"},K.a.Jd=function(a){return K.a.pg(a)&&K.a.Lg(a)},K.a.jh=function(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))},K.a.Cg=function(a){var b;return(b=K.a.Qk(a)?!a.disabled&&(!K.a.pg(a)||K.a.Lg(a)):K.a.Jd(a))&&K.userAgent.Y?K.a.Wj(a):b},K.a.pg=function(a){return K.userAgent.Y&&!K.userAgent.va("9")?(a=a.getAttributeNode("tabindex"),K.cb(a)&&a.specified):a.hasAttribute("tabindex")},K.a.Lg=function(a){return a=a.tabIndex,K.Rb(a)&&0<=a&&32768>a},K.a.Qk=function(a){return"A"==a.tagName||"INPUT"==a.tagName||"TEXTAREA"==a.tagName||"SELECT"==a.tagName||"BUTTON"==a.tagName},K.a.Wj=function(a){return a=!K.ya(a.getBoundingClientRect)||K.userAgent.Y&&null==a.parentElement?{height:a.offsetHeight,width:a.offsetWidth}:a.getBoundingClientRect(),K.cb(a)&&0<a.height&&0<a.width},K.a.pc=function(a){if(K.a.ib.xe&&null!==a&&"innerText"in a)a=K.f.Yi(a.innerText);else{var b=[];K.a.Ad(a,b,!0),a=b.join("")}return a=a.replace(/ \xAD /g," ").replace(/\xAD/g,""),a=a.replace(/\u200B/g,""),K.a.ib.xe||(a=a.replace(/ +/g," "))," "!=a&&(a=a.replace(/^\s*/,"")),a},K.a.gr=function(a){var b=[];return K.a.Ad(a,b,!1),b.join("")},K.a.Ad=function(a,b,c){if(!(a.nodeName in K.a.Ue))if(a.nodeType==K.a.fa.cc)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in K.a.ac)b.push(K.a.ac[a.nodeName]);else for(a=a.firstChild;a;)K.a.Ad(a,b,c),a=a.nextSibling},K.a.bg=function(a){return K.a.pc(a).length},K.a.cg=function(a,b){b=b||K.a.Qa(a).body;for(var c=[];a&&a!=b;){for(var d=a;d=d.previousSibling;)c.unshift(K.a.pc(d));a=a.parentNode}return K.f.trimLeft(c.join("")).replace(/ +/g," ").length},K.a.ag=function(a,b,c){a=[a];for(var d=0,e=null;0<a.length&&d<b;)if(e=a.pop(),!(e.nodeName in K.a.Ue))if(e.nodeType==K.a.fa.cc){var f=e.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");d+=f.length}else if(e.nodeName in K.a.ac)d+=K.a.ac[e.nodeName].length;else for(f=e.childNodes.length-1;0<=f;f--)a.push(e.childNodes[f]);return K.ha(c)&&(c.Is=e?e.nodeValue.length+b-d-1:0,c.node=e),e},K.a.Md=function(a){if(a&&typeof a.length==x){if(K.ha(a))return typeof a.item==u||typeof a.item==B;if(K.ya(a))return typeof a.item==u}return!1},K.a.qd=function(a,b,c,d){if(!b&&!c)return null;var e=b?String(b).toUpperCase():null;return K.a.pd(a,function(a){return(!e||a.nodeName==e)&&(!c||K.L(a.className)&&K.j.contains(a.className.split(/\s+/),c))},!0,d)},K.a.Kf=function(a,b,c){return K.a.qd(a,null,b,c)},K.a.pd=function(a,b,c,d){for(a&&!c&&(a=a.parentNode),c=0;a&&(null==d||c<=d);){if(b(a))return a;a=a.parentNode,c++}return null},K.a.Jf=function(a){try{return a&&a.activeElement}catch(a){}return null},K.a.er=function(){var a=K.a.tb();return K.R(a.devicePixelRatio)?a.devicePixelRatio:a.matchMedia?K.a.wc(3)||K.a.wc(2)||K.a.wc(1.5)||K.a.wc(1)||.75:1},K.a.wc=function(a){return K.a.tb().matchMedia("(min-resolution: "+a+"dppx),(min--moz-device-pixel-ratio: "+a+"),(min-resolution: "+96*a+"dpi)").matches?a:0},K.a.Mf=function(a){return a.getContext("2d")},K.a.lb=function(a){this.X=a||K.global.document||document},I=K.a.lb.prototype,I.td=K.a.td,I.Dj=G("X"),I.ud=function(a){return K.a.xd(this.X,a)},I.Lj=function(a){return K.a.ig(this.X,a)},I.Bh=K.a.lb.prototype.ud,I.getElementsByTagName=function(a,b){return(b||this.X).getElementsByTagName(String(a))},I.yd=function(a,b,c){return K.a.nc(this.X,a,b,c)},I.Gj=function(a,b,c){return K.a.wd(this.X,a,b,c)},I.Rf=function(a,b){return K.a.Rf(a,b||this.X)},I.vd=function(a,b){return K.a.vd(a,b||this.X)},I.hg=function(a,b){return K.a.hg(a,b||this.X)},I.Ch=K.a.lb.prototype.yd,I.Jc=K.a.Jc,I.mg=function(a){return K.a.mg(a||this.tb())},I.Ej=function(){return K.a.rd(this.tb())},I.fd=function(a,b,c){return K.a.sf(this.X,arguments)},I.Dh=K.a.lb.prototype.fd,I.createElement=function(a){return K.a.Oa(this.X,a)},I.createTextNode=function(a){return this.X.createTextNode(String(a))},I.hj=function(a,b,c){return K.a.tf(this.X,a,b,!!c)},I.eh=function(a){return K.a.fh(this.X,a)},I.dk=function(){return K.a.Ob(this.X)},I.tb=function(){return K.a.qc(this.X)},I.Fj=function(){return K.a.sd(this.X)},I.Pf=function(){return K.a.Qf(this.X)},I.Jf=function(a){return K.a.Jf(a||this.X)},I.appendChild=K.a.appendChild,I.append=K.a.append,I.canHaveChildren=K.a.canHaveChildren,I.Zd=K.a.Zd,I.vg=K.a.vg,I.ug=K.a.ug,I.tg=K.a.tg,I.removeNode=K.a.removeNode,I.dh=K.a.dh,I.Ff=K.a.Ff,I.Nf=K.a.Nf,I.Sf=K.a.Sf,I.Wf=K.a.Wf,I.Zf=K.a.Zf,I.fg=K.a.fg,I.$f=K.a.$f,I.gg=K.a.gg,I.Ld=K.a.Ld,I.Hd=K.a.Hd,I.Ng=K.a.Ng,I.eg=K.a.eg,I.contains=K.a.contains,I.mf=K.a.mf,I.Bf=K.a.Bf,I.Qa=K.a.Qa,I.Tf=K.a.Tf,I.Uf=K.a.Uf,I.ae=K.a.ae,I.dg=K.a.dg,I.Cf=K.a.Cf,I.Df=K.a.Df,I.Jd=K.a.Jd,I.jh=K.a.jh,I.Cg=K.a.Cg,I.pc=K.a.pc,I.bg=K.a.bg,I.cg=K.a.cg,I.ag=K.a.ag,I.Md=K.a.Md,I.qd=K.a.qd,I.Kf=K.a.Kf,I.pd=K.a.pd,I.Mf=K.a.Mf,K.bh={},K.bh.to=F(),K.Thenable=F(),K.Thenable.prototype.then=F(),K.Thenable.He="$goog_Thenable",K.Thenable.af=function(a){a.prototype.then=a.prototype.then,a.prototype[K.Thenable.He]=!0},K.Thenable.Dg=function(a){if(!a)return!1;try{return!!a[K.Thenable.He]}catch(a){return!1}},K.Promise=function(a,b){if(this.$=K.Promise.P.wa,this.ia=void 0,this.ob=this.Na=this.da=null,this.ld=!1,0<K.Promise.Wa?this.Oc=0:0==K.Promise.Wa&&(this.rc=!1),K.Promise.Aa&&(this.ee=[],N(this,Error("created")),this.vf=0),a!=K.eb)try{var c=this;a.call(b,function(a){O(c,K.Promise.P.Ja,a)},function(a){if(K.ea&&!(a instanceof K.Promise.kb))try{if(a instanceof Error)throw a;throw Error("Promise rejected.")}catch(a){}O(c,K.Promise.P.ka,a)})}catch(a){O(this,K.Promise.P.ka,a)}},K.Promise.Aa=!1,K.Promise.Wa=0,K.Promise.P={wa:0,Jh:1,Ja:2,ka:3},K.Promise.ze=function(){this.next=this.context=this.wb=this.Tb=this.Xa=null,this.dc=!1},K.Promise.ze.prototype.reset=function(){this.context=this.wb=this.Tb=this.Xa=null,this.dc=!1},K.Promise.Vc=100,K.Promise.Kb=new K.async.Zb(function(){return new K.Promise.ze},function(a){a.reset()},K.Promise.Vc),K.Promise.Lf=function(a,b,c){var d=K.Promise.Kb.get();return d.Tb=a,d.wb=b,d.context=c,d},K.Promise.Yk=function(a){K.Promise.Kb.put(a)},K.Promise.resolve=function(a){if(a instanceof K.Promise)return a;var b=new K.Promise(K.eb);return O(b,K.Promise.P.Ja,a),b},K.Promise.reject=function(a){return new K.Promise(function(b,c){c(a)})},K.Promise.Ec=function(a,b,c){K.Promise.Ug(a,b,c,null)||K.async.M(K.fb(b,a))},K.Promise.race=function(a){return new K.Promise(function(b,c){a.length||b(void 0);for(var d,e=0;e<a.length;e++)d=a[e],K.Promise.Ec(d,b,c)})},K.Promise.all=function(a){return new K.Promise(function(b,c){var d=a.length,e=[];if(d)for(var f,g=function(a,c){d--,e[a]=c,0==d&&b(e)},h=function(a){c(a)},i=0;i<a.length;i++)f=a[i],K.Promise.Ec(f,K.fb(g,i),h);else b(e)})},K.Promise.jp=function(a){return new K.Promise(function(b){var c=a.length,d=[];if(c)for(var e,f=function(a,e,f){c--,d[a]=e?{Bj:!0,value:f}:{Bj:!1,reason:f},0==c&&b(d)},g=0;g<a.length;g++)e=a[g],K.Promise.Ec(e,K.fb(f,g,!0),K.fb(f,g,!1));else b(d)})};K.Promise.Iq=function(a){return new K.Promise(function(b,c){var d=a.length,e=[];if(d)for(var f,g=function(a){b(a)},h=function(a,b){d--,e[a]=b,0==d&&c(e)},i=0;i<a.length;i++)f=a[i],K.Promise.Ec(f,g,K.fb(h,i));else b(void 0)})},K.Promise.Wt=function(){var a,b,c=new K.Promise(function(c,d){a=c,b=d});return new K.Promise.li(c,a,b)},K.Promise.prototype.then=function(a,b,c){return K.Promise.Aa&&N(this,Error("then")),ba(this,K.ya(a)?a:null,K.ya(b)?b:null,c)},K.Thenable.af(K.Promise),K.Promise.prototype.cancel=function(a){this.$==K.Promise.P.wa&&K.async.M(function(){P(this,new K.Promise.kb(a))},this)},K.Promise.prototype.Dl=function(a){this.$=K.Promise.P.wa,O(this,K.Promise.P.Ja,a)},K.Promise.prototype.El=function(a){this.$=K.Promise.P.wa,O(this,K.Promise.P.ka,a)},K.Promise.Ug=function(a,b,c,d){if(a instanceof K.Promise)return K.Promise.Aa&&N(a,Error("then")),S(a,K.Promise.Lf(b||K.eb,c||null,d)),!0;if(K.Thenable.Dg(a))return a.then(b,c,d),!0;if(K.ha(a))try{var e=a.then;if(K.ya(e))return K.Promise.Bl(a,e,b,c,d),!0}catch(a){return c.call(d,a),!0}return!1},K.Promise.Bl=function(a,b,c,d,e){function f(a){h||(h=!0,d.call(e,a))}function g(a){h||(h=!0,c.call(e,a))}var h=!1;try{b.call(a,g,f)}catch(a){f(a)}},K.Promise.prototype.vj=function(){for(var a;a=Q(this);)K.Promise.Aa&&this.vf++,R(this,a,this.$,this.ia);this.ld=!1},K.Promise.xg=function(a,b,c){b==K.Promise.P.Ja?a.Tb.call(a.context,c):a.wb&&a.wb.call(a.context,c)},K.Promise.Ii=function(a,b){0<K.Promise.Wa?a.Oc=K.global.setTimeout(function(){U(a,b),K.Promise.sc.call(null,b)},K.Promise.Wa):0==K.Promise.Wa&&(a.rc=!0,K.async.M(function(){a.rc&&(U(a,b),K.Promise.sc.call(null,b))}))},K.Promise.sc=K.async.qh,K.Promise.st=function(a){K.Promise.sc=a},K.Promise.kb=function(a){K.debug.Error.call(this,a)},K.ab(K.Promise.kb,K.debug.Error),K.Promise.kb.prototype.name="cancel",K.Promise.li=function(a,b,c){this.bh=a,this.resolve=b,this.reject=c},K.async.w=function(a,b){this.Ic=[],this.ah=a,this.wf=b||null,this.ub=this.qb=!1,this.ia=void 0,this.be=this.Ti=this.bd=!1,this.Nc=0,this.da=null,this.ec=0,K.async.w.Aa&&(this.ed=null,Error.captureStackTrace&&(a={stack:""},Error.captureStackTrace(a,K.async.w),typeof a.stack==B&&(this.ed=a.stack.replace(/^[^\n]*\n/,""))))},K.async.w.vi=!1,K.async.w.Aa=!1,I=K.async.w.prototype,I.cancel=function(a){if(this.qb)this.ia instanceof K.async.w&&this.ia.cancel();else{if(this.da){var b=this.da;delete this.da,a?b.cancel(a):0>=--b.ec&&b.cancel()}this.ah?this.ah.call(this.wf,this):this.be=!0,this.qb||this.Za(new K.async.w.jb(this))}},I.rf=function(a,b){this.bd=!1,V(this,a,b)},I.Db=function(a){X(this),V(this,!0,a)},I.Za=function(a){X(this),da(this,a),V(this,!1,a)},I.then=function(a,b,c){var d,e,f=new K.Promise(function(a,b){d=a,e=b});return Z(this,d,function(a){a instanceof K.async.w.jb?f.cancel():e(a)}),f.then(a,b,c)},K.Thenable.af(K.async.w),K.async.w.prototype.Vi=function(){var a=new K.async.w;return Z(this,a.Db,a.Za,a),a.da=this,this.ec++,a},K.async.w.oh=function(a){var b=new K.async.w;return b.Db(a),b},K.async.w.Pq=function(a){var b=new K.async.w;return b.Db(),Y(b,function(){return a}),b},K.async.w.ma=function(a){var b=new K.async.w;return b.Za(a),b},K.async.w.Qp=function(){var a=new K.async.w;return a.cancel(),a},K.async.w.Vt=function(a,b,c){return a instanceof K.async.w?Y(a.Vi(),b,c):Y(K.async.w.oh(a),b,c)},K.async.w.Wb=function(a){K.debug.Error.call(this),this.pb=a},K.ab(K.async.w.Wb,K.debug.Error),K.async.w.Wb.prototype.message="Deferred has already fired",K.async.w.Wb.prototype.name="AlreadyCalledError",K.async.w.jb=function(a){K.debug.Error.call(this),this.pb=a},K.ab(K.async.w.jb,K.debug.Error),K.async.w.jb.prototype.message="Deferred was canceled",K.async.w.jb.prototype.name="CanceledError",K.async.w.Fe=function(a){this.Mb=K.global.setTimeout(K.bind(this.ph,this),0),this.tj=a},K.async.w.Fe.prototype.ph=function(){throw delete K.async.w.Jb[this.Mb],this.tj},K.async.w.Jb={},K.async.w.kl=function(a){return a=new K.async.w.Fe(a),K.async.w.Jb[a.Mb]=a,a.Mb},K.async.w.Il=function(a){var b=K.async.w.Jb[a];b&&(K.global.clearTimeout(b.Mb),delete K.async.w.Jb[a])},K.async.w.Dp=function(){var a,b=K.async.w.Jb;for(a in b){var c=b[a];K.global.clearTimeout(c.Mb),c.ph()}},K.D={},K.D.F={},K.D.F.Zc="closure_verification",K.D.F.Th=5e3,K.D.F.$d=[],K.D.F.gl=function(a,b){function c(){var d=a.shift();return d=K.D.F.Fc(d,b),a.length&&Z(d,c,c,void 0),d}if(!a.length)return K.async.w.oh(null);var d=K.D.F.$d.length;return K.j.extend(K.D.F.$d,a),d?K.D.F.hh:(a=K.D.F.$d,K.D.F.hh=c(),K.D.F.hh)},K.D.F.Fc=function(a,b){var c=b||{};b=c.document||document;var d=K.b.C.u(a),e=K.a.createElement(p),f={ih:e,sh:void 0},g=new K.async.w(K.D.F.Xi,f),h=null,i=K.cb(c.timeout)?c.timeout:K.D.F.Th;return 0<i&&(h=window.setTimeout(function(){K.D.F.gc(e,!0),g.Za(new K.D.F.Error(K.D.F.Yb.TIMEOUT,"Timeout reached for loading script "+d))},i),f.sh=h),e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&e.readyState!=t||(K.D.F.gc(e,c.Xp||!1,h),g.Db(null))},e.onerror=function(){K.D.F.gc(e,!0,h),g.Za(new K.D.F.Error(K.D.F.Yb.ei,"Error while loading script "+d))},f=c.attributes||{},K.object.extend(f,{type:C,charset:"UTF-8"}),K.a.Jc(e,f),K.a.S.ol(e,a),K.D.F.Mj(b).appendChild(e),g},K.D.F.Ws=function(a,b,c){K.global[K.D.F.Zc]||(K.global[K.D.F.Zc]={});var d=K.global[K.D.F.Zc],e=K.b.C.u(a);if(K.R(d[b]))return K.async.w.ma(new K.D.F.Error(K.D.F.Yb.Gi,"Verification object "+b+" already defined."));a=K.D.F.Fc(a,c);var f=new K.async.w(K.bind(a.cancel,a));return Y(a,function(){var a=d[b];K.R(a)?(f.Db(a),delete d[b]):f.Za(new K.D.F.Error(K.D.F.Yb.Fi,"Script "+e+" loaded, but verification object "+b+" was not defined."))}),ea(a,function(a){K.R(d[b])&&delete d[b],f.Za(a)}),f},K.D.F.Mj=function(a){var b=K.a.getElementsByTagName("HEAD",a);return!b||K.j.Qb(b)?a.documentElement:b[0]},K.D.F.Xi=function(){if(this&&this.ih){var a=this.ih;a&&a.tagName==p&&K.D.F.gc(a,!0,this.sh)}},K.D.F.gc=function(a,b,c){K.cb(c)&&K.global.clearTimeout(c),a.onload=K.eb,a.onerror=K.eb,a.onreadystatechange=K.eb,b&&window.setTimeout(function(){K.a.removeNode(a)},0)},K.D.F.Yb={ei:0,TIMEOUT:1,Fi:2,Gi:3},K.D.F.Error=function(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b),K.debug.Error.call(this,c),this.code=a},K.ab(K.D.F.Error,K.debug.Error);var google={G:{}};if(google.G.H={},google.G.H.Ba={},google.G.H.Ba.rh=3e4,google.G.H.Ba.js=function(a,b){return{format:a,Mi:b}},google.G.H.Ba.Pj=function(a){return K.b.C.format(a.format,a.Mi)},google.G.H.Ba.load=function(a,b){a=K.b.C.format(a,b);var c=K.D.F.Fc(a,{timeout:google.G.H.Ba.rh,attributes:{async:!1,defer:!1}});return new Promise(function(a){Y(c,a)})},google.G.H.Ba.cs=function(a){if(a=K.j.map(a,google.G.H.Ba.Pj),K.j.Qb(a))return Promise.resolve();var b={timeout:google.G.H.Ba.rh,attributes:{async:!1,defer:!1}},c=[];return!K.userAgent.Y||K.userAgent.va(11)?K.j.forEach(a,function(a){c.push(K.D.F.Fc(a,b))}):c.push(K.D.F.gl(a,b)),Promise.all(K.j.map(c,function(a){return new Promise(function(b){return Y(a,b)})}))},google.G.H.T={},K.rb(v))throw Error("Google Charts loader.js can only be loaded once.");google.G.H.T.Nl={41:z,42:z,43:z,44:z,1:"1.0","1.0":"current",1.1:"upcoming",current:"45.2",upcoming:"46"},google.G.H.T.Kk=function(a){var b=a,c=a.match(/^testing-/);c&&(b=b.replace(/^testing-/,"")),a=b;do{var d=google.G.H.T.Nl[b];d&&(b=d)}while(d);return c=(c?"testing-":"")+b,{version:b==z?a:c,Dk:c}},google.G.H.T.yh=null,google.G.H.T.Bk=function(a){var b=google.G.H.T.Kk(a),c=K.f.I.from("https://www.gstatic.com/charts/%{version}/loader.js");return google.G.H.Ba.load(c,{version:b.Dk}).then(function(){var c=K.rb("google.charts.loader.VersionSpecific.load")||K.rb("google.charts.loader.publicLoad")||K.rb("google.charts.versionSpecific.load");if(!c)throw Error("Bad version: "+a);google.G.H.T.yh=function(a){if(null==(a=c(b.version,a))||null==a.then){var d=K.rb("google.charts.loader.publicSetOnLoadCallback")||K.rb("google.charts.versionSpecific.setOnLoadCallback");a=new Promise(function(a){d(a)}),a.then=d}return a}})},google.G.H.T.Pd=null,google.G.H.T.jc=null,google.G.H.T.yk=function(a,b){return google.G.H.T.Pd||(google.G.H.T.Pd=google.G.H.T.Bk(a)),google.G.H.T.jc=google.G.H.T.Pd.then(function(){return google.G.H.T.yh(b)})},google.G.H.T.nl=function(a){if(!google.G.H.T.jc)throw Error("Must call google.charts.load before google.charts.setOnLoadCallback");return a?google.G.H.T.jc.then(a):google.G.H.T.jc},google.G.load=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c-0]=arguments[c];c=0,"visualization"===b[c]&&c++;var d="current";K.L(b[c])&&(d=b[c],c++);var e={};return K.ha(b[c])&&(e=b[c]),google.G.H.T.yk(d,e)},K.zf(v,google.G.load),google.G.ml=google.G.H.T.nl,K.zf("google.charts.setOnLoadCallback",google.G.ml)}.call(this),function(a,b,c){b.module("ngIdle",["ngIdle.keepalive","ngIdle.idle","ngIdle.countdown","ngIdle.title","ngIdle.localStorage"]),b.module("ngIdle.keepalive",[]).provider("Keepalive",function(){var a={http:null,interval:600};this.http=function(c){if(!c)throw new Error("Argument must be a string containing a URL, or an object containing the HTTP request configuration.");b.isString(c)&&(c={url:c,method:"GET"}),c.cache=!1,a.http=c};var c=this.interval=function(b){if(b=parseInt(b),isNaN(b)||0>=b)throw new Error("Interval must be expressed in seconds and be greater than 0.");a.interval=b};this.$get=["$rootScope","$log","$interval","$http",function(d,e,f,g){function h(a){d.$broadcast("KeepaliveResponse",a.data,a.status)}function i(){d.$broadcast("Keepalive"),b.isObject(a.http)&&g(a.http).then(h).catch(h)}var j={ping:null};return{_options:function(){return a},setInterval:c,start:function(){return f.cancel(j.ping),j.ping=f(i,1e3*a.interval),j.ping},stop:function(){f.cancel(j.ping)},ping:function(){i()}}}]}),b.module("ngIdle.idle",["ngIdle.keepalive","ngIdle.localStorage"]).provider("Idle",function(){var a={idle:1200,timeout:30,autoResume:"idle",interrupt:"mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove scroll",windowInterrupt:null,keepalive:!0},c=this.timeout=function(c){if(!1===c)a.timeout=0;else{if(!(b.isNumber(c)&&c>=0))throw new Error("Timeout must be zero or false to disable the feature, or a positive integer (in seconds) to enable it.");a.timeout=c}};this.interrupt=function(b){a.interrupt=b},this.windowInterrupt=function(b){a.windowInterrupt=b};var d=this.idle=function(b){if(0>=b)throw new Error("Idle must be a value in seconds, greater than 0.");a.idle=b};this.autoResume=function(b){a.autoResume=!0===b?"idle":!1===b?"off":b},this.keepalive=function(b){a.keepalive=!0===b},this.$get=["$interval","$log","$rootScope","$document","Keepalive","IdleLocalStorage","$window",function(e,f,g,h,i,j,k){function l(){a.keepalive&&(u.running&&i.ping(),i.start())}function m(){a.keepalive&&i.stop()}function n(){u.idling=!u.idling;var b=u.idling?"IdleStart":"IdleEnd";u.idling?(g.$broadcast(b),m(),a.timeout&&(u.countdown=a.timeout,o(),u.timeout=e(o,1e3,a.timeout,!1))):(l(),g.$broadcast(b)),e.cancel(u.idle)}function o(){if(u.idling){if(u.countdown<=0)return void q();g.$broadcast("IdleWarn",u.countdown),u.countdown--}}function p(a){g.$broadcast("IdleInterrupt",a)}function q(){m(),e.cancel(u.idle),e.cancel(u.timeout),u.idling=!0,u.running=!1,u.countdown=0,g.$broadcast("IdleTimeout")}function r(a,b,c){var d=a.running();a.unwatch(),b(c),d&&a.watch()}function s(){var a=j.get("expiry");return a&&a.time?new Date(a.time):null}function t(a){a?j.set("expiry",{id:v,time:a}):j.remove("expiry")}var u={idle:null,timeout:null,idling:!1,running:!1,countdown:null},v=(new Date).getTime(),w={_options:function(){return a},_getNow:function(){return new Date},getIdle:function(){return a.idle},getTimeout:function(){return a.timeout},setIdle:function(a){r(this,d,a)},setTimeout:function(a){r(this,c,a)},isExpired:function(){var a=s();return null!==a&&a<=this._getNow()},running:function(){return u.running},idling:function(){return u.idling},watch:function(b){e.cancel(u.idle),e.cancel(u.timeout);var c=a.timeout?a.timeout:0;b||t(new Date((new Date).getTime()+1e3*(a.idle+c))),u.idling?n():u.running||l(),u.running=!0,u.idle=e(n,1e3*a.idle,0,!1)},unwatch:function(){e.cancel(u.idle),e.cancel(u.timeout),u.idling=!1,u.running=!1,t(null),m()},interrupt:function(b){if(u.running){if(a.timeout&&this.isExpired())return void q();p(b),(b||"idle"===a.autoResume||"notIdle"===a.autoResume&&!u.idling)&&this.watch(b)}}},x={clientX:null,clientY:null,swap:function(a){var b={clientX:this.clientX,clientY:this.clientY};return this.clientX=a.clientX,this.clientY=a.clientY,b},hasMoved:function(a){var b=this.swap(a);return!(null!==this.clientX&&!a.movementX&&!a.movementY)||(b.clientX!=a.clientX||b.clientY!=a.clientY)}};if(h.find("html").on(a.interrupt,function(a){"mousemove"===a.type&&a.originalEvent&&0===a.originalEvent.movementX&&0===a.originalEvent.movementY||("mousemove"!==a.type||x.hasMoved(a))&&w.interrupt()}),a.windowInterrupt)for(var y=a.windowInterrupt.split(" "),z=function(){w.interrupt()},A=0;A<y.length;A++)k.addEventListener?(k.addEventListener(y[A],z,!1),g.$on("$destroy",function(){k.removeEventListener(y[A],z,!1)})):(k.attachEvent(y[A],z),g.$on("$destroy",function(){k.detachEvent(y[A],z)}));var B=function(a){if("ngIdle.expiry"===a.key&&a.newValue&&a.newValue!==a.oldValue){if(b.fromJson(a.newValue).id===v)return;w.interrupt(!0)}};return k.addEventListener?(k.addEventListener("storage",B,!1),g.$on("$destroy",function(){k.removeEventListener("storage",B,!1)})):k.attachEvent&&(k.attachEvent("onstorage",B),g.$on("$destroy",function(){k.detachEvent("onstorage",B)})),w}]}),b.module("ngIdle.countdown",["ngIdle.idle"]).directive("idleCountdown",["Idle",function(a){return{restrict:"A",scope:{value:"=idleCountdown"},link:function(b){b.value=a.getTimeout(),b.$on("IdleWarn",function(a,c){b.$evalAsync(function(){b.value=c})}),b.$on("IdleTimeout",function(){b.$evalAsync(function(){b.value=0})})}}}]),b.module("ngIdle.title",[]).provider("Title",function(){function a(a,b,c){return new Array(b-String(a).length+1).join(c||"0")+a}var c={enabled:!0},d=this.enabled=function(a){c.enabled=!0===a};this.$get=["$document","$interpolate",function(e,f){var g={original:null,idle:"{{minutes}}:{{seconds}} until your session times out!",timedout:"Your session has expired."};return{setEnabled:d,isEnabled:function(){return c.enabled},original:function(a){return b.isUndefined(a)?g.original:void(g.original=a)},store:function(a){(a||!g.original)&&(g.original=this.value())},value:function(a){return b.isUndefined(a)?e[0].title:void(e[0].title=a)},idleMessage:function(a){return b.isUndefined(a)?g.idle:void(g.idle=a)},timedOutMessage:function(a){return b.isUndefined(a)?g.timedout:void(g.timedout=a)},setAsIdle:function(b){this.store();var c={totalSeconds:b};c.minutes=Math.floor(b/60),c.seconds=a(b-60*c.minutes,2),this.value(f(this.idleMessage())(c))},setAsTimedOut:function(){this.store(),this.value(this.timedOutMessage())},restore:function(){this.original()&&this.value(this.original())}}}]}).directive("title",["Title",function(a){return{restrict:"E",link:function(b,c,d){a.isEnabled()&&!d.idleDisabled&&(a.store(!0),b.$on("IdleStart",function(){a.original(c[0].innerText)}),b.$on("IdleWarn",function(b,c){a.setAsIdle(c)}),b.$on("IdleEnd",function(){a.restore()}),b.$on("IdleTimeout",function(){a.setAsTimedOut()}))}}}]),b.module("ngIdle.localStorage",[]).service("IdleStorageAccessor",["$window",function(a){return{get:function(){return a.localStorage}}}]).service("IdleLocalStorage",["IdleStorageAccessor",function(a){function d(){var a={};this.setItem=function(b,c){a[b]=c},this.getItem=function(b){return void 0!==a[b]?a[b]:null},this.removeItem=function(b){a[b]=c}}function e(){try{var b=a.get();return b.setItem("ngIdleStorage",""),b.removeItem("ngIdleStorage"),b}catch(a){return new d}}var f=e();return{set:function(a,c){f.setItem("ngIdle."+a,b.toJson(c))},get:function(a){return b.fromJson(f.getItem("ngIdle."+a))},remove:function(a){f.removeItem("ngIdle."+a)},_wrapped:function(){return f}}}])}(window,window.angular),function(exports,global){function renderDocument(a,b,c,d){return createWindowClone(a,a,c,d,b).then(function(e){log("Document cloned");var f="["+html2canvasNodeAttribute+"='true']";a.querySelector(f).removeAttribute(html2canvasNodeAttribute);var g=e.contentWindow,h=g.document.querySelector(f);return("function"==typeof b.onclone?Promise.resolve(b.onclone(g.document)):Promise.resolve(!0)).then(function(){return renderWindow(h,e,b,c,d)})})}function renderWindow(a,b,c,d,e){var f=b.contentWindow,g=new Support(f.document),h=new ImageLoader(c,g),i=getBounds(a),j="view"===c.type?d:documentWidth(f.document),k="view"===c.type?e:documentHeight(f.document),l=new CanvasRenderer(j,k,h,c,document);return new NodeParser(a,l,g,h,c).ready.then(function(){log("Finished rendering");var d;return d="view"===c.type?crop(l.canvas,{width:l.canvas.width,height:l.canvas.height,top:0,left:0,x:0,y:0}):a===f.document.body||a===f.document.documentElement||null!=c.canvas?l.canvas:crop(l.canvas,{width:null!=c.width?c.width:i.width,height:null!=c.height?c.height:i.height,top:i.top,left:i.left,x:f.pageXOffset,y:f.pageYOffset}),cleanupContainer(b,c),d})}function cleanupContainer(a,b){b.removeContainer&&(a.parentNode.removeChild(a),log("Cleaned up container"))}function crop(a,b){var c=document.createElement("canvas"),d=Math.min(a.width-1,Math.max(0,b.left)),e=Math.min(a.width,Math.max(1,b.left+b.width)),f=Math.min(a.height-1,Math.max(0,b.top)),g=Math.min(a.height,Math.max(1,b.top+b.height));return c.width=b.width,c.height=b.height,log("Cropping canvas at:","left:",b.left,"top:",b.top,"width:",e-d,"height:",g-f),log("Resulting crop with width",b.width,"and height",b.height," with x",d,"and y",f),c.getContext("2d").drawImage(a,d,f,e-d,g-f,b.x,b.y,e-d,g-f),c}function documentWidth(a){return Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))}function documentHeight(a){return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}function smallImage(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}function createWindowClone(a,b,c,d,e){labelCanvasElements(a);var f=a.documentElement.cloneNode(!0),g=b.createElement("iframe");return g.className="html2canvas-container",g.style.visibility="hidden",g.style.position="fixed",g.style.left="-10000px",g.style.top="0px",g.style.border="0",g.width=c,g.height=d,g.scrolling="no",b.body.appendChild(g),new Promise(function(b){var c=g.contentWindow.document;g.contentWindow.onload=g.onload=function(){var f=setInterval(function(){c.body.childNodes.length>0&&(cloneCanvasContents(a,c),clearInterval(f),"view"===e.type&&g.contentWindow.scrollTo(d,h),b(g))},50)};var d=a.defaultView.pageXOffset,h=a.defaultView.pageYOffset;c.open(),c.write("<!DOCTYPE html><html></html>"),restoreOwnerScroll(a,d,h),c.replaceChild(!0===e.javascriptEnabled?c.adoptNode(f):removeScriptNodes(c.adoptNode(f)),c.documentElement),c.close()})}function restoreOwnerScroll(a,b,c){b===a.defaultView.pageXOffset&&c===a.defaultView.pageYOffset||a.defaultView.scrollTo(b,c)}function loadUrlDocument(a,b,c,d,e,f){return new Proxy(a,b,window.document).then(documentFromHTML(a)).then(function(a){return createWindowClone(a,c,d,e,f)})}function documentFromHTML(a){return function(b){var c,d=new DOMParser;try{c=d.parseFromString(b,"text/html")}catch(a){log("DOMParser not supported, falling back to createHTMLDocument"),c=document.implementation.createHTMLDocument("");try{c.open(),c.write(b),c.close()}catch(a){log("createHTMLDocument write not supported, falling back to document.body.innerHTML"),c.body.innerHTML=b}}var e=c.querySelector("base");if(!e||!e.href.host){var f=c.createElement("base");f.href=a,c.head.insertBefore(f,c.head.firstChild)}return c}}function labelCanvasElements(a){[].slice.call(a.querySelectorAll("canvas"),0).forEach(function(a){a.setAttribute(html2canvasCanvasCloneAttribute,"canvas-"+html2canvasCanvasCloneIndex++)})}function cloneCanvasContents(a,b){[].slice.call(a.querySelectorAll("["+html2canvasCanvasCloneAttribute+"]"),0).forEach(function(a){try{var c=b.querySelector("["+html2canvasCanvasCloneAttribute+'="'+a.getAttribute(html2canvasCanvasCloneAttribute)+'"]');c&&(c.width=a.width,c.height=a.height,c.getContext("2d").putImageData(a.getContext("2d").getImageData(0,0,a.width,a.height),0,0))}catch(b){log("Unable to copy canvas content from",a,b)}a.removeAttribute(html2canvasCanvasCloneAttribute)})}function removeScriptNodes(a){return[].slice.call(a.childNodes,0).filter(isElementNode).forEach(function(b){"SCRIPT"===b.tagName?a.removeChild(b):removeScriptNodes(b)}),a}function isElementNode(a){return a.nodeType===Node.ELEMENT_NODE}function absoluteUrl(a){var b=document.createElement("a");return b.href=a,b.href=b.href,b}function DummyImageContainer(a){if(this.src=a,log("DummyImageContainer for",a),!this.promise||!this.image){log("Initiating DummyImageContainer"),DummyImageContainer.prototype.image=new Image;var b=this.image;DummyImageContainer.prototype.promise=new Promise(function(a,c){b.onload=a,b.onerror=c,b.src=smallImage(),!0===b.complete&&a(b)})}}function Font(a,b){var c,d,e=document.createElement("div"),f=document.createElement("img"),g=document.createElement("span"),h="Hidden Text";e.style.visibility="hidden",e.style.fontFamily=a,e.style.fontSize=b,e.style.margin=0,e.style.padding=0,document.body.appendChild(e),f.src=smallImage(),f.width=1,f.height=1,f.style.margin=0,f.style.padding=0,f.style.verticalAlign="baseline",g.style.fontFamily=a,g.style.fontSize=b,g.style.margin=0,g.style.padding=0,g.appendChild(document.createTextNode(h)),e.appendChild(g),e.appendChild(f),c=f.offsetTop-g.offsetTop+1,e.removeChild(g),e.appendChild(document.createTextNode(h)),e.style.lineHeight="normal",f.style.verticalAlign="super",d=f.offsetTop-e.offsetTop+1,document.body.removeChild(e),this.baseline=c,this.lineWidth=1,this.middle=d}function FontMetrics(){this.data={}}function FrameContainer(a,b,c){this.image=null,this.src=a;var d=this,e=getBounds(a);this.promise=(b?new Promise(function(b){"about:blank"===a.contentWindow.document.URL||null==a.contentWindow.document.documentElement?a.contentWindow.onload=a.onload=function(){b(a)}:b(a)}):this.proxyLoad(c.proxy,e,c)).then(function(a){return html2canvas(a.contentWindow.document.documentElement,{type:"view",width:a.width,height:a.height,proxy:c.proxy,javascriptEnabled:c.javascriptEnabled,
removeContainer:c.removeContainer,allowTaint:c.allowTaint,imageTimeout:c.imageTimeout/2})}).then(function(a){return d.image=a})}function GradientContainer(a){this.src=a.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}function ImageContainer(a,b){this.src=a,this.image=new Image;var c=this;this.tainted=null,this.promise=new Promise(function(d,e){c.image.onload=d,c.image.onerror=e,b&&(c.image.crossOrigin="anonymous"),c.image.src=a,!0===c.image.complete&&d(c.image)})}function ImageLoader(a,b){this.link=null,this.options=a,this.support=b,this.origin=this.getOrigin(window.location.href)}function LinearGradientContainer(a){GradientContainer.apply(this,arguments),this.type=this.TYPES.LINEAR;var b=null===a.args[0].match(this.stepRegExp);b?a.args[0].split(" ").reverse().forEach(function(a){switch(a){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var b=this.y0,c=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=c,this.y1=b}},this):(this.y0=0,this.y1=1),this.colorStops=a.args.slice(b?1:0).map(function(a){var b=a.match(this.stepRegExp);return{color:b[1],stop:"%"===b[3]?b[2]/100:null}},this),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(a,b){null===a.stop&&this.colorStops.slice(b).some(function(c,d){return null!==c.stop&&(a.stop=(c.stop-this.colorStops[b-1].stop)/(d+1)+this.colorStops[b-1].stop,!0)},this)},this)}function log(){window.html2canvas.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-window.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}function NodeContainer(a,b){this.node=a,this.parent=b,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function selectionValue(a){var b=a.options[a.selectedIndex||0];return b?b.text||"":""}function parseMatrix(a){return a&&"matrix"===a[1]?a[2].split(",").map(function(a){return parseFloat(a.trim())}):void 0}function isPercentage(a){return-1!==a.toString().indexOf("%")}function parseBackgrounds(a){var b,c,d,e,f,g,h,i=[],j=0,k=0,l=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&h.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),i.push({prefix:d,method:b.toLowerCase(),value:f,args:h,image:null})),h=[],b=d=c=f=""};return h=[],b=d=c=f="",a.split("").forEach(function(a){if(!(0===j&&" \r\n\t".indexOf(a)>-1)){switch(a){case'"':g?g===a&&(g=null):g=a;break;case"(":if(g)break;if(0===j)return j=1,void(f+=a);k++;break;case")":if(g)break;if(1===j){if(0===k)return j=0,f+=a,void l();k--}break;case",":if(g)break;if(0===j)return void l();if(1===j&&0===k&&!b.match(/^url$/i))return h.push(c),c="",void(f+=a)}f+=a,0===j?b+=a:c+=a}}),l(),i}function removePx(a){return a.replace("px","")}function asFloat(a){return parseFloat(a)}function getBounds(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=null==a.offsetWidth?b.width:a.offsetWidth;return{top:b.top,bottom:b.bottom||b.top+b.height,right:b.left+c,left:b.left,width:c,height:null==a.offsetHeight?b.height:a.offsetHeight}}return{}}function offsetBounds(a){var b=a.offsetParent?offsetBounds(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,right:a.offsetLeft+b.left+a.offsetWidth,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}}function NodeParser(a,b,c,d,e){log("Starting NodeParser"),this.renderer=b,this.options=e,this.range=null,this.support=c,this.renderQueue=[],this.stack=new StackingContext(!0,1,a.ownerDocument,null);var f=new NodeContainer(a,null);if(a===a.ownerDocument.documentElement){var g=new NodeContainer(this.renderer.isTransparent(f.css("backgroundColor"))?a.ownerDocument.body:a.ownerDocument.documentElement,null);b.rectangle(0,0,b.width,b.height,g.css("backgroundColor"))}f.visibile=f.isElementVisible(),this.createPseudoHideStyles(a.ownerDocument),this.disableAnimations(a.ownerDocument),this.nodes=flatten([f].concat(this.getChildren(f)).filter(function(a){return a.visible=a.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new FontMetrics,log("Fetched nodes, total:",this.nodes.length),log("Calculate overflow clips"),this.calculateOverflowClips(),log("Start fetching images"),this.images=d.fetch(this.nodes.filter(isElement)),this.ready=this.images.ready.then(bind(function(){return log("Images loaded, starting parsing"),log("Creating stacking contexts"),this.createStackingContexts(),log("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),log("Render queue created with "+this.renderQueue.length+" items"),new Promise(bind(function(a){e.async?"function"==typeof e.async?e.async.call(this,this.renderQueue,a):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,a)):a():(this.renderQueue.forEach(this.paint,this),a())},this))},this))}function hasParentClip(a){return a.parent&&a.parent.clip.length}function toCamelCase(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}function ClearTransform(){}function calculateBorders(a,b,c,d){return a.map(function(e,f){if(e.width>0){var g=b.left,h=b.top,i=b.width,j=b.height-a[2].width;switch(f){case 0:j=a[0].width,e.args=drawSide({c1:[g,h],c2:[g+i,h],c3:[g+i-a[1].width,h+j],c4:[g+a[3].width,h+j]},d[0],d[1],c.topLeftOuter,c.topLeftInner,c.topRightOuter,c.topRightInner);break;case 1:g=b.left+b.width-a[1].width,i=a[1].width,e.args=drawSide({c1:[g+i,h],c2:[g+i,h+j+a[2].width],c3:[g,h+j],c4:[g,h+a[0].width]},d[1],d[2],c.topRightOuter,c.topRightInner,c.bottomRightOuter,c.bottomRightInner);break;case 2:h=h+b.height-a[2].width,j=a[2].width,e.args=drawSide({c1:[g+i,h+j],c2:[g,h+j],c3:[g+a[3].width,h],c4:[g+i-a[3].width,h]},d[2],d[3],c.bottomRightOuter,c.bottomRightInner,c.bottomLeftOuter,c.bottomLeftInner);break;case 3:i=a[3].width,e.args=drawSide({c1:[g,h+j+a[2].width],c2:[g,h],c3:[g+i,h+a[0].width],c4:[g+i,h+j]},d[3],d[0],c.bottomLeftOuter,c.bottomLeftInner,c.topLeftOuter,c.topLeftInner)}}return e})}function getCurvePoints(a,b,c,d){var e=(Math.sqrt(2)-1)/3*4,f=c*e,g=d*e,h=a+c,i=b+d;return{topLeft:bezierCurve({x:a,y:i},{x:a,y:i-g},{x:h-f,y:b},{x:h,y:b}),topRight:bezierCurve({x:a,y:b},{x:a+f,y:b},{x:h,y:i-g},{x:h,y:i}),bottomRight:bezierCurve({x:h,y:b},{x:h,y:b+g},{x:a+f,y:i},{x:a,y:i}),bottomLeft:bezierCurve({x:h,y:i},{x:h-f,y:i},{x:a,y:b+g},{x:a,y:b})}}function calculateCurvePoints(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-m,r=f-l,s=g-o;return{topLeftOuter:getCurvePoints(d,e,h,i).topLeft.subdivide(.5),topLeftInner:getCurvePoints(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:getCurvePoints(d+p,e,j,k).topRight.subdivide(.5),topRightInner:getCurvePoints(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:getCurvePoints(d+r,e+q,l,m).bottomRight.subdivide(.5),bottomRightInner:getCurvePoints(d+Math.min(r,f-c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,l-c[1].width),m-c[2].width).bottomRight.subdivide(.5),bottomLeftOuter:getCurvePoints(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:getCurvePoints(d+c[3].width,e+s,Math.max(0,n-c[3].width),o-c[2].width).bottomLeft.subdivide(.5)}}function bezierCurve(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[bezierCurve(a,g,j,l),bezierCurve(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function drawSide(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function parseCorner(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function negativeZIndex(a){return a.cssInt("zIndex")<0}function positiveZIndex(a){return a.cssInt("zIndex")>0}function zIndex0(a){return 0===a.cssInt("zIndex")}function inlineLevel(a){return-1!==["inline","inline-block","inline-table"].indexOf(a.css("display"))}function isStackingContext(a){return a instanceof StackingContext}function hasText(a){return a.node.data.trim().length>0}function noLetterSpacing(a){return/^(normal|none|0px)$/.test(a.parent.css("letterSpacing"))}function getBorderRadiusData(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){var c=a.css("border"+b+"Radius"),d=c.split(" ");return d.length<=1&&(d[1]=d[0]),d.map(asInt)})}function renderableNode(a){return a.nodeType===Node.TEXT_NODE||a.nodeType===Node.ELEMENT_NODE}function isPositionedForStacking(a){return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(a.css("position"))?a.css("zIndex"):"auto")}function isPositioned(a){return"static"!==a.css("position")}function isFloating(a){return"none"!==a.css("float")}function isInlineBlock(a){return-1!==["inline-block","inline-table"].indexOf(a.css("display"))}function not(a){var b=this;return function(){return!a.apply(b,arguments)}}function isElement(a){return a.node.nodeType===Node.ELEMENT_NODE}function isPseudoElement(a){return!0===a.isPseudoElement}function isTextNode(a){return a.node.nodeType===Node.TEXT_NODE}function zIndexSort(a){return function(b,c){return b.cssInt("zIndex")+a.indexOf(b)/a.length-(c.cssInt("zIndex")+a.indexOf(c)/a.length)}}function hasOpacity(a){return a.getOpacity()<1}function bind(a,b){return function(){return a.apply(b,arguments)}}function asInt(a){return parseInt(a,10)}function getWidth(a){return a.width}function nonIgnoredElement(a){return a.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(a.node.nodeName)}function flatten(a){return[].concat.apply([],a)}function stripQuotes(a){var b=a.substr(0,1);return b===a.substr(a.length-1)&&b.match(/'|"/)?a.substr(1,a.length-2):a}function getWords(a){for(var b,c=[],d=0,e=!1;a.length;)isWordBoundary(a[d])===e?(b=a.splice(0,d),b.length&&c.push(window.html2canvas.punycode.ucs2.encode(b)),e=!e,d=0):d++,d>=a.length&&(b=a.splice(0,d),b.length&&c.push(window.html2canvas.punycode.ucs2.encode(b)));return c}function isWordBoundary(a){return-1!==[32,13,10,9,45].indexOf(a)}function hasUnicode(a){return/[^\u0000-\u00ff]/.test(a)}function Proxy(a,b,c){var d=createCallback(supportsCORS),e=createProxyUrl(b,a,d);return supportsCORS?XHR(e):jsonp(c,e,d).then(function(a){return decode64(a.content)})}function ProxyURL(a,b,c){var d=createCallback(supportsCORSImage),e=createProxyUrl(b,a,d);return supportsCORSImage?Promise.resolve(e):jsonp(c,e,d).then(function(a){return"data:"+a.type+";base64,"+a.content})}function jsonp(a,b,c){return new Promise(function(d,e){var f=a.createElement("script"),g=function(){delete window.html2canvas.proxy[c],a.body.removeChild(f)};window.html2canvas.proxy[c]=function(a){g(),d(a)},f.src=b,f.onerror=function(a){g(),e(a)},a.body.appendChild(f)})}function createCallback(a){return a?"":"html2canvas_"+Date.now()+"_"+ ++proxyCount+"_"+Math.round(1e5*Math.random())}function createProxyUrl(a,b,c){return a+"?url="+encodeURIComponent(b)+(c.length?"&callback=html2canvas.proxy."+c:"")}function ProxyImageContainer(a,b){var c=(document.createElement("script"),document.createElement("a"));c.href=a,a=c.href,this.src=a,this.image=new Image;var d=this;this.promise=new Promise(function(c,e){d.image.crossOrigin="Anonymous",d.image.onload=c,d.image.onerror=e,new ProxyURL(a,b,document).then(function(a){d.image.src=a}).catch(e)})}function PseudoElementContainer(a,b,c){NodeContainer.call(this,a,b),this.isPseudoElement=!0,this.before=":before"===c}function Renderer(a,b,c,d,e){this.width=a,this.height=b,this.images=c,this.options=d,this.document=e}function StackingContext(a,b,c,d){NodeContainer.call(this,c,d),this.ownStacking=a,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*b}function Support(a){this.rangeBounds=this.testRangeBounds(a),this.cors=this.testCORS(),this.svg=this.testSVG()}function SVGContainer(a){this.src=a,this.image=null;var b=this;this.promise=this.hasFabric().then(function(){return b.isInline(a)?Promise.resolve(b.inlineFormatting(a)):XHR(a)}).then(function(a){return new Promise(function(c){html2canvas.fabric.loadSVGFromString(a,b.createCanvas.call(b,c))})})}function decode64(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=a.length,l="";for(b=0;k>b;b+=4)c=j.indexOf(a[b]),d=j.indexOf(a[b+1]),e=j.indexOf(a[b+2]),f=j.indexOf(a[b+3]),g=c<<2|d>>4,h=(15&d)<<4|e>>2,i=(3&e)<<6|f,l+=64===e?String.fromCharCode(g):64===f||-1===f?String.fromCharCode(g,h):String.fromCharCode(g,h,i);return l}function SVGNodeContainer(a,b){this.src=a,this.image=null;var c=this;this.promise=b?new Promise(function(b,d){c.image=new Image,c.image.onload=b,c.image.onerror=d,c.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(a),!0===c.image.complete&&b(c.image)}):this.hasFabric().then(function(){return new Promise(function(b){html2canvas.fabric.parseSVGDocument(a,c.createCanvas.call(c,b))})})}function TextContainer(a,b){NodeContainer.call(this,a,b)}function capitalize(a,b,c){return a.length>0?b+c.toUpperCase():void 0}function WebkitGradientContainer(a){GradientContainer.apply(this,arguments),this.type="linear"===a.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}function XHR(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onload=function(){200===d.status?b(d.responseText):c(new Error(d.statusText))},d.onerror=function(){c(new Error("Network Error"))},d.send()})}function html2pdf(a,b,c){var d=b.canvas;if(!d)return void alert("jsPDF canvas plugin not installed");if(d.pdf=b,b.annotations={_nameMap:[],createAnnotation:function(a,c){var d,e=b.context2d._wrapX(c.left),f=b.context2d._wrapY(c.top),g=(b.context2d._page(c.top),a.indexOf("#"));d=g>=0?{name:a.substring(g+1)}:{url:a},b.link(e,f,c.right-c.left,c.bottom-c.top,d)},setName:function(a,c){var d=b.context2d._wrapX(c.left),e=b.context2d._wrapY(c.top),f=b.context2d._page(c.top);this._nameMap[a]={page:f,x:d,y:e}}},d.annotations=b.annotations,b.context2d._pageBreakAt=function(a){this.pageBreaks.push(a)},b.context2d._gotoPage=function(a){for(;b.internal.getNumberOfPages()<a;)b.addPage();b.setPage(a)},"string"==typeof a){a=a.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"");var e=document.createElement("iframe");document.body.appendChild(e);var f;f=e.contentDocument,void 0!=f&&null!=f||(f=e.contentWindow.document),f.open(),f.write(a),f.close(),html2canvas(f.body,{canvas:d,onrendered:function(a){c&&(e&&e.parentElement.removeChild(e),c(b))}})}else{var g=a;html2canvas(g,{canvas:d,onrendered:function(a){c&&(e&&e.parentElement.removeChild(e),c(b))}})}}var jsPDF=function(a){function b(b){var c={};this.subscribe=function(a,b,d){if("function"!=typeof b)return!1;c.hasOwnProperty(a)||(c[a]={});var e=Math.random().toString(35);return c[a][e]=[b,!!d],e},this.unsubscribe=function(a){for(var b in c)if(c[b][a])return delete c[b][a],!0;return!1},this.publish=function(d){if(c.hasOwnProperty(d)){var e=Array.prototype.slice.call(arguments,1),f=[];for(var g in c[d]){var h=c[d][g];try{h[0].apply(b,e)}catch(b){a.console&&console.error("jsPDF PubSub Error",b.message,b)}h[1]&&f.push(g)}f.length&&f.forEach(this.unsubscribe)}}}function c(f,g,h,j){var k={};"object"==typeof f&&(k=f,f=k.orientation,g=k.unit||g,h=k.format||h,j=k.compress||k.compressPdf||j),g=g||"mm",h=h||"a4",f=(""+(f||"P")).toLowerCase();var l,m,n,o,p,q,r,s,t,u=((""+h).toLowerCase(),!!j&&"function"==typeof Uint8Array),v=k.textColor||"0 g",w=k.drawColor||"0 G",x=k.fontSize||16,y=k.lineHeight||1.15,z=k.lineWidth||.200025,A=2,B=!1,C=[],D={},E={},F=0,G=[],H=[],I=[],J=[],K=[],L=0,M=0,N=0,O={title:"",subject:"",author:"",keywords:"",creator:""},P={},Q=new b(P),R=function(a){return a.toFixed(2)},S=function(a){return a.toFixed(3)},T=function(a){return("0"+parseInt(a)).slice(-2)},U=function(a){B?G[o].push(a):(N+=a.length+1,J.push(a))},V=function(){return A++,C[A]=N,U(A+" 0 obj"),A},W=function(){var a=2*G.length+1;a+=K.length;var b={objId:a,content:""};return K.push(b),b},X=function(){return A++,C[A]=function(){return N},A},Y=function(a){C[a]=N},Z=function(a){U("stream"),U(a),U("endstream")},$=function(){var b,d,e,f,g,h,i,j,k;for(i=a.adler32cs||c.adler32cs,u&&void 0===i&&(u=!1),b=1;F>=b;b++){if(V(),j=(p=I[b].width)*m,k=(q=I[b].height)*m,U("<</Type /Page"),U("/Parent 1 0 R"),U("/Resources 2 0 R"),U("/MediaBox [0 0 "+R(j)+" "+R(k)+"]"),Q.publish("putPage",{pageNumber:b,page:G[b]}),U("/Contents "+(A+1)+" 0 R"),U(">>"),U("endobj"),d=G[b].join("\n"),V(),u){for(e=[],f=d.length;f--;)e[f]=d.charCodeAt(f);h=i.from(d),g=new Deflater(6),g.append(new Uint8Array(e)),d=g.flush(),e=new Uint8Array(d.length+6),e.set(new Uint8Array([120,156])),e.set(d,2),e.set(new Uint8Array([255&h,h>>8&255,h>>16&255,h>>24&255]),d.length+2),d=String.fromCharCode.apply(null,e),U("<</Length "+d.length+" /Filter [/FlateDecode]>>")}else U("<</Length "+d.length+">>");Z(d),U("endobj")}C[1]=N,U("1 0 obj"),U("<</Type /Pages");var l="/Kids [";for(f=0;F>f;f++)l+=3+2*f+" 0 R ";U(l+"]"),U("/Count "+F),U(">>"),U("endobj"),Q.publish("postPutPages")},_=function(a){a.objectNumber=V(),U("<</BaseFont/"+a.PostScriptName+"/Type/Font"),"string"==typeof a.encoding&&U("/Encoding/"+a.encoding),U("/Subtype/Type1>>"),U("endobj")},aa=function(){for(var a in D)D.hasOwnProperty(a)&&_(D[a])},ba=function(){Q.publish("putXobjectDict")},ca=function(){U("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),U("/Font <<");for(var a in D)D.hasOwnProperty(a)&&U("/"+a+" "+D[a].objectNumber+" 0 R");U(">>"),U("/XObject <<"),ba(),U(">>")},da=function(){aa(),Q.publish("putResources"),C[2]=N,U("2 0 obj"),U("<<"),ca(),U(">>"),U("endobj"),Q.publish("postPutResources")},ea=function(){Q.publish("putAdditionalObjects");for(var a=0;a<K.length;a++){var b=K[a];C[b.objId]=N,U(b.objId+" 0 obj"),U(b.content),U("endobj")}A+=K.length,Q.publish("postPutAdditionalObjects")},fa=function(a,b,c){E.hasOwnProperty(b)||(E[b]={}),E[b][c]=a},ga=function(a,b,c,d){var e="F"+(Object.keys(D).length+1).toString(10),f=D[e]={id:e,PostScriptName:a,fontName:b,fontStyle:c,encoding:d,metadata:{}};return fa(e,b,c),Q.publish("addFont",f),e},ha=function(){for(var a="helvetica",b="times",c="courier",d="normal",e="bold",f="italic",g="bolditalic",h="StandardEncoding",i="zapfdingbats",j=[["Helvetica",a,d],["Helvetica-Bold",a,e],["Helvetica-Oblique",a,f],["Helvetica-BoldOblique",a,g],["Courier",c,d],["Courier-Bold",c,e],["Courier-Oblique",c,f],["Courier-BoldOblique",c,g],["Times-Roman",b,d],["Times-Bold",b,e],["Times-Italic",b,f],["Times-BoldItalic",b,g],["ZapfDingbats",i]],k=0,l=j.length;l>k;k++){var m=ga(j[k][0],j[k][1],j[k][2],h),n=j[k][0].split("-");fa(m,n[0],n[1]||"")}Q.publish("addFonts",{fonts:D,dictionary:E})},ia=function(b){return b.foo=function(){try{return b.apply(this,arguments)}catch(b){var c=b.stack||"";~c.indexOf(" at ")&&(c=c.split(" at ")[1]);var d="Error in function "+c.split("\n")[0].split("<")[0]+": "+b.message;if(!a.console)throw new Error(d);a.console.error(d,b),a.alert&&alert(d)}},b.foo.bar=b,b.foo},ja=function(a,b){var c,d,e,f,g,h,i,j,k;if(b=b||{},e=b.sourceEncoding||"Unicode",g=b.outputEncoding,(b.autoencode||g)&&D[l].metadata&&D[l].metadata[e]&&D[l].metadata[e].encoding&&(f=D[l].metadata[e].encoding,!g&&D[l].encoding&&(g=D[l].encoding),!g&&f.codePages&&(g=f.codePages[0]),"string"==typeof g&&(g=f[g]),g)){for(i=!1,h=[],c=0,d=a.length;d>c;c++)j=g[a.charCodeAt(c)],j?h.push(String.fromCharCode(j)):h.push(a[c]),h[c].charCodeAt(0)>>8&&(i=!0);a=h.join("")}for(c=a.length;void 0===i&&0!==c;)a.charCodeAt(c-1)>>8&&(i=!0),c--;if(!i)return a;for(h=b.noBOM?[]:[254,255],c=0,d=a.length;d>c;c++){if(j=a.charCodeAt(c),(k=j>>8)>>8)throw new Error("Character at position "+c+" of string '"+a+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");h.push(k),h.push(j-(k<<8))}return String.fromCharCode.apply(void 0,h)},ka=function(a,b){return ja(a,b).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},la=function(){U("/Producer (jsPDF "+c.version+")");for(var a in O)O.hasOwnProperty(a)&&O[a]&&U("/"+a.substr(0,1).toUpperCase()+a.substr(1)+" ("+ka(O[a])+")");var b=new Date,d=b.getTimezoneOffset(),e=0>d?"+":"-",f=Math.floor(Math.abs(d/60)),g=Math.abs(d%60),h=[e,T(f),"'",T(g),"'"].join("");U(["/CreationDate (D:",b.getFullYear(),T(b.getMonth()+1),T(b.getDate()),T(b.getHours()),T(b.getMinutes()),T(b.getSeconds()),h,")"].join(""))},ma=function(){switch(U("/Type /Catalog"),U("/Pages 1 0 R"),s||(s="fullwidth"),s){case"fullwidth":U("/OpenAction [3 0 R /FitH null]");break;case"fullheight":U("/OpenAction [3 0 R /FitV null]");break;case"fullpage":U("/OpenAction [3 0 R /Fit]");break;case"original":U("/OpenAction [3 0 R /XYZ null null 1]");break;default:var a=""+s;"%"===a.substr(a.length-1)&&(s=parseInt(s)/100),"number"==typeof s&&U("/OpenAction [3 0 R /XYZ null null "+R(s)+"]")}switch(t||(t="continuous"),t){case"continuous":U("/PageLayout /OneColumn");break;case"single":U("/PageLayout /SinglePage");break;case"two":case"twoleft":U("/PageLayout /TwoColumnLeft");break;case"tworight":U("/PageLayout /TwoColumnRight")}r&&U("/PageMode /"+r),Q.publish("putCatalog")},na=function(){U("/Size "+(A+1)),U("/Root "+A+" 0 R"),U("/Info "+(A-1)+" 0 R")},oa=function(a,b){var c="string"==typeof b&&b.toLowerCase();if("string"==typeof a){var d=a.toLowerCase();e.hasOwnProperty(d)&&(a=e[d][0]/m,b=e[d][1]/m)}if(Array.isArray(a)&&(b=a[1],a=a[0]),c){switch(c.substr(0,1)){case"l":b>a&&(c="s");break;case"p":a>b&&(c="s")}"s"===c&&(n=a,a=b,b=n)}B=!0,G[++F]=[],I[F]={width:Number(a)||p,height:Number(b)||q},H[F]={},ra(F)},pa=function(){oa.apply(this,arguments),U(R(z*m)+" w"),U(w),0!==L&&U(L+" J"),0!==M&&U(M+" j"),Q.publish("addPage",{pageNumber:F})},qa=function(a){a>0&&F>=a&&(G.splice(a,1),I.splice(a,1),F--,o>F&&(o=F),this.setPage(o))},ra=function(a){a>0&&F>=a&&(o=a,p=I[a].width,q=I[a].height)},sa=function(a,b){var c;switch(a=void 0!==a?a:D[l].fontName,b=void 0!==b?b:D[l].fontStyle,void 0!==a&&(a=a.toLowerCase()),a){case"sans-serif":case"verdana":case"arial":case"helvetica":a="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":a="courier";break;case"serif":case"cursive":case"fantasy":default:a="times"}try{c=E[a][b]}catch(a){}return c||null==(c=E.times[b])&&(c=E.times.normal),c},ta=function(){B=!1,A=2,J=[],C=[],K=[],Q.publish("buildDocument"),U("%PDF-"+d),$(),ea(),da(),V(),U("<<"),la(),U(">>"),U("endobj"),V(),U("<<"),ma(),U(">>"),U("endobj");var a,b=N,c="0000000000";for(U("xref"),U("0 "+(A+1)),U(c+" 65535 f "),a=1;A>=a;a++){var e=C[a];U("function"==typeof e?(c+C[a]()).slice(-10)+" 00000 n ":(c+C[a]).slice(-10)+" 00000 n ")}return U("trailer"),U("<<"),na(),U(">>"),U("startxref"),U(b),U("%%EOF"),B=!0,J.join("\n")},ua=function(a){var b="S";return"F"===a?b="f":"FD"===a||"DF"===a?b="B":"f"!==a&&"f*"!==a&&"B"!==a&&"B*"!==a||(b=a),b},va=function(){for(var a=ta(),b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c);b--;)d[b]=a.charCodeAt(b);return c},wa=function(){return new Blob([va()],{type:"application/pdf"})},xa=ia(function(b,c){var d="dataur"===(""+b).substr(0,6)?"data:application/pdf;base64,"+btoa(ta()):0;switch(b){case void 0:return ta();case"save":if(navigator.getUserMedia&&(void 0===a.URL||void 0===a.URL.createObjectURL))return P.output("dataurlnewwindow");saveAs(wa(),c),"function"==typeof saveAs.unload&&a.setTimeout&&setTimeout(saveAs.unload,911);break;case"arraybuffer":return va();case"blob":return wa();case"bloburi":case"bloburl":return a.URL&&a.URL.createObjectURL(wa())||void 0;case"datauristring":case"dataurlstring":return d;case"dataurlnewwindow":var e=a.open(d);if(e||"undefined"==typeof safari)return e;case"datauri":case"dataurl":return a.document.location.href=d;default:throw new Error('Output type "'+b+'" is not supported.')}});switch(g){case"pt":m=1;break;case"mm":m=72/25.4000508;break;case"cm":m=72/2.54000508;break;case"in":m=72;break;case"px":m=96/72;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+g}P.internal={pdfEscape:ka,getStyle:ua,getFont:function(){return D[sa.apply(P,arguments)]},getFontSize:function(){return x},getLineHeight:function(){return x*y},write:function(a){U(1===arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return R(a*m)},getVerticalCoordinateString:function(a){return R((q-a)*m)},collections:{},newObject:V,newAdditionalObject:W,newObjectDeferred:X,newObjectDeferredBegin:Y,putStream:Z,events:Q,scaleFactor:m,pageSize:{get width(){return p},get height(){return q}},output:function(a,b){return xa(a,b)},getNumberOfPages:function(){return G.length-1},pages:G,out:U,f2:R,getPageInfo:function(a){return{objId:2*(a-1)+3,pageNumber:a,pageContext:H[a]}},getCurrentPageInfo:function(){return{objId:2*(o-1)+3,pageNumber:o,pageContext:H[o]}},getPDFVersion:function(){return d}},P.addPage=function(){return pa.apply(this,arguments),this},P.setPage=function(){return ra.apply(this,arguments),this},P.insertPage=function(a){return this.addPage(),this.movePage(o,a),this},P.movePage=function(a,b){if(a>b){for(var c=G[a],d=I[a],e=H[a],f=a;f>b;f--)G[f]=G[f-1],I[f]=I[f-1],H[f]=H[f-1];G[b]=c,I[b]=d,H[b]=e,this.setPage(b)}else if(b>a){for(var c=G[a],d=I[a],e=H[a],f=a;b>f;f++)G[f]=G[f+1],I[f]=I[f+1],H[f]=H[f+1];G[b]=c,I[b]=d,H[b]=e,this.setPage(b)}return this},P.deletePage=function(){return qa.apply(this,arguments),this},P.setDisplayMode=function(a,b,c){return s=a,t=b,r=c,this},P.text=function(a,b,c,d,e,f){function g(a){return a=a.split("\t").join(Array(k.TabLen||9).join(" ")),ka(a,d)}"number"==typeof a&&(n=c,c=b,b=a,a=n),"string"==typeof a&&(a=a.match(/[\n\r]/)?a.split(/\r\n|\r|\n/g):[a]),"string"==typeof e&&(f=e,e=null),"string"==typeof d&&(f=d,d=null),"number"==typeof d&&(e=d,d=null);var h,j="",o="Td";if(e){e*=Math.PI/180;var p=Math.cos(e),r=Math.sin(e);j=[R(p),R(r),R(-1*r),R(p),""].join(" "),o="Tm"}d=d||{},"noBOM"in d||(d.noBOM=!0),"autoencode"in d||(d.autoencode=!0);var s="",t=this.internal.getCurrentPageInfo().pageContext;if(!0===d.stroke?!0!==t.lastTextWasStroke&&(s="1 Tr\n",t.lastTextWasStroke=!0):(t.lastTextWasStroke&&(s="0 Tr\n"),t.lastTextWasStroke=!1),void 0===this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof a)a=g(a);else{if("[object Array]"!==Object.prototype.toString.call(a))throw new Error('Type of text must be string or Array. "'+a+'" is not recognized.');for(var u=a.concat(),w=[],z=u.length;z--;)w.push(g(u.shift()));var A=Math.ceil((q-c-this._runningPageHeight)*m/(x*y));if(A>=0&&w.length,f){var B,C,D,E=x*y,F=a.map(function(a){return this.getStringUnitWidth(a)*x/m},this);if(D=Math.max.apply(Math,F),"center"===f)B=b-D/2,b-=F[0]/2;else{if("right"!==f)throw new Error('Unrecognized alignment option, use "center" or "right".');B=b-D,b-=F[0]}for(C=b,a=w[0]+") Tj\n",i=1,z=w.length;i<z;i++){var G=D-F[i];"center"===f&&(G/=2),a+=B-C+G+" -"+E+" Td ("+w[i],C=B+G,i<z-1&&(a+=") Tj\n")}}else a=w.join(") Tj\nT* (")}var H;return h||(H=R((q-c)*m)),U("BT\n/"+l+" "+x+" Tf\n"+x*y+" TL\n"+s+v+"\n"+j+R(b*m)+" "+H+" "+o+"\n("+a+") Tj\nET"),h&&this.text(h,b,c),this},P.lstext=function(a,b,c,d){for(var e=0,f=a.length;f>e;e++,b+=d)this.text(a[e],b,c)},P.line=function(a,b,c,d){return this.lines([[c-a,d-b]],a,b)},P.clip=function(){U("W"),U("S")},P.lines=function(a,b,c,d,e,f){var g,h,i,j,k,l,o,p,r,s,t;for("number"==typeof a&&(n=c,c=b,b=a,a=n),d=d||[1,1],U(S(b*m)+" "+S((q-c)*m)+" m "),g=d[0],h=d[1],j=a.length,s=b,t=c,i=0;j>i;i++)k=a[i],2===k.length?(s=k[0]*g+s,t=k[1]*h+t,U(S(s*m)+" "+S((q-t)*m)+" l")):(l=k[0]*g+s,o=k[1]*h+t,p=k[2]*g+s,r=k[3]*h+t,s=k[4]*g+s,t=k[5]*h+t,U(S(l*m)+" "+S((q-o)*m)+" "+S(p*m)+" "+S((q-r)*m)+" "+S(s*m)+" "+S((q-t)*m)+" c"));return f&&U(" h"),null!==e&&U(ua(e)),this},P.rect=function(a,b,c,d,e){return ua(e),U([R(a*m),R((q-b)*m),R(c*m),R(-d*m),"re"].join(" ")),null!==e&&U(ua(e)),this},P.triangle=function(a,b,c,d,e,f,g){return this.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],g,!0),this},P.roundedRect=function(a,b,c,d,e,f,g){var h=4/3*(Math.SQRT2-1);return this.lines([[c-2*e,0],[e*h,0,e,f-f*h,e,f],[0,d-2*f],[0,f*h,-e*h,f,-e,f],[2*e-c,0],[-e*h,0,-e,-f*h,-e,-f],[0,2*f-d],[0,-f*h,e*h,-f,e,-f]],a+e,b,[1,1],g),this},P.ellipse=function(a,b,c,d,e){var f=4/3*(Math.SQRT2-1)*c,g=4/3*(Math.SQRT2-1)*d;return U([R((a+c)*m),R((q-b)*m),"m",R((a+c)*m),R((q-(b-g))*m),R((a+f)*m),R((q-(b-d))*m),R(a*m),R((q-(b-d))*m),"c"].join(" ")),U([R((a-f)*m),R((q-(b-d))*m),R((a-c)*m),R((q-(b-g))*m),R((a-c)*m),R((q-b)*m),"c"].join(" ")),U([R((a-c)*m),R((q-(b+g))*m),R((a-f)*m),R((q-(b+d))*m),R(a*m),R((q-(b+d))*m),"c"].join(" ")),U([R((a+f)*m),R((q-(b+d))*m),R((a+c)*m),R((q-(b+g))*m),R((a+c)*m),R((q-b)*m),"c"].join(" ")),null!==e&&U(ua(e)),this},P.circle=function(a,b,c,d){return this.ellipse(a,b,c,c,d)},P.setProperties=function(a){for(var b in O)O.hasOwnProperty(b)&&a[b]&&(O[b]=a[b]);return this},P.setFontSize=function(a){return x=a,this},P.setFont=function(a,b){return l=sa(a,b),this},P.setFontStyle=P.setFontType=function(a){return l=sa(void 0,a),this},P.getFontList=function(){var a,b,c,d={};for(a in E)if(E.hasOwnProperty(a)){d[a]=c=[];for(b in E[a])E[a].hasOwnProperty(b)&&c.push(b)}return d},P.addFont=function(a,b,c){ga(a,b,c,"StandardEncoding")},P.setLineWidth=function(a){return U((a*m).toFixed(2)+" w"),this},P.setDrawColor=function(a,b,c,d){var e;return e=void 0===b||void 0===d&&a===b===c?"string"==typeof a?a+" G":R(a/255)+" G":void 0===d?"string"==typeof a?[a,b,c,"RG"].join(" "):[R(a/255),R(b/255),R(c/255),"RG"].join(" "):"string"==typeof a?[a,b,c,d,"K"].join(" "):[R(a),R(b),R(c),R(d),"K"].join(" "),U(e),this},P.setFillColor=function(a,b,c,d){var e;return void 0===b||void 0===d&&a===b===c?e="string"==typeof a?a+" g":R(a/255)+" g":void 0===d||"object"==typeof d?(e="string"==typeof a?[a,b,c,"rg"].join(" "):[R(a/255),R(b/255),R(c/255),"rg"].join(" "),d&&0===d.a&&(e=["255","255","255","rg"].join(" "))):e="string"==typeof a?[a,b,c,d,"k"].join(" "):[R(a),R(b),R(c),R(d),"k"].join(" "),U(e),this},P.setTextColor=function(a,b,c){if("string"==typeof a&&/^#[0-9A-Fa-f]{6}$/.test(a)){var d=parseInt(a.substr(1),16);a=d>>16&255,b=d>>8&255,c=255&d}return v=0===a&&0===b&&0===c||void 0===b?S(a/255)+" g":[S(a/255),S(b/255),S(c/255),"rg"].join(" "),this},P.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},P.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw new Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return L=b,U(b+" J"),this},P.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw new Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return M=b,U(b+" j"),this},P.output=xa,P.save=function(a){P.output("save",a)}
;for(var ya in c.API)c.API.hasOwnProperty(ya)&&("events"===ya&&c.API.events.length?function(a,b){var c,d,e;for(e=b.length-1;-1!==e;e--)c=b[e][0],d=b[e][1],a.subscribe.apply(a,[c].concat("function"==typeof d?[d]:d))}(Q,c.API.events):P[ya]=c.API[ya]);return ha(),l="F1",pa(h,f),Q.publish("initialized"),P}var d="1.3",e={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return c.API={events:[]},c.version="1.2.61-git 2016-03-01T16:15:jameshall","function"==typeof define&&define.amd?define("jsPDF",function(){return c}):"undefined"!=typeof module&&module.exports?module.exports=c:a.jsPDF=c,c}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);(AcroForm=function(a){AcroForm.scale=function(a){return a*(b.internal.scaleFactor/1)},AcroForm.antiScale=function(a){return 1/b.internal.scaleFactor*a};var b={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null};jsPDF.API.acroformPlugin=b;var c=function(){for(var a in this.acroformPlugin.acroFormDictionaryRoot.Fields){var b=this.acroformPlugin.acroFormDictionaryRoot.Fields[a];b.hasAnnotation&&e.call(this,b)}},d=function(){if(this.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");this.acroformPlugin.acroFormDictionaryRoot=new AcroForm.AcroFormDictionary,this.acroformPlugin.internal=this.internal,this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",h),this.internal.events.subscribe("buildDocument",c),this.internal.events.subscribe("putCatalog",g),this.internal.events.subscribe("postPutPages",i)},e=function(a){var b={type:"reference",object:a};jsPDF.API.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(b)},f=function(a){this.acroformPlugin.printedOut&&(this.acroformPlugin.printedOut=!1,this.acroformPlugin.acroFormDictionaryRoot=null),this.acroformPlugin.acroFormDictionaryRoot||d.call(this),this.acroformPlugin.acroFormDictionaryRoot.Fields.push(a)},g=function(){void 0!==this.acroformPlugin.acroFormDictionaryRoot?this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R"):console.log("Root missing...")},h=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID),delete this.acroformPlugin.acroFormDictionaryRoot._eventID,this.acroformPlugin.printedOut=!0},i=function(a){var b=!a;a||(this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId),this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString()));var a=a||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var c in a){var d=a[c],e=d.Rect;d.Rect&&(d.Rect=AcroForm.internal.calculateCoordinates.call(this,d.Rect)),this.internal.newObjectDeferredBegin(d.objId);var f="";if(f+=d.objId+" 0 obj\n",f+="<<\n"+d.getContent(),d.Rect=e,d.hasAppearanceStream&&!d.appearanceStreamContent){var g=AcroForm.internal.calculateAppearanceStream.call(this,d);f+="/AP << /N "+g+" >>\n",this.acroformPlugin.xForms.push(g)}if(d.appearanceStreamContent){f+="/AP << ";for(var h in d.appearanceStreamContent){var i=d.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<< ",Object.keys(i).length>=1||Array.isArray(i))for(var c in i){var k=i[c];"function"==typeof k&&(k=k.call(this,d)),f+="/"+c+" "+k+" ",this.acroformPlugin.xForms.indexOf(k)>=0||this.acroformPlugin.xForms.push(k)}else{var k=i;"function"==typeof k&&(k=k.call(this,d)),f+="/"+c+" "+k+" \n",this.acroformPlugin.xForms.indexOf(k)>=0||this.acroformPlugin.xForms.push(k)}f+=" >>\n"}f+=">>\n"}f+=">>\nendobj\n",this.internal.out(f)}b&&j.call(this,this.acroformPlugin.xForms)},j=function(a){for(var b in a){var c=b,d=a[b];this.internal.newObjectDeferredBegin(d.objId);var e="";e+=d.getString(),this.internal.out(e),delete a[c]}};a.addField=function(a){return a instanceof AcroForm.TextField?l.call(this,a):a instanceof AcroForm.ChoiceField?m.call(this,a):a instanceof AcroForm.Button?k.call(this,a):a instanceof AcroForm.ChildClass?f.call(this,a):a&&f.call(this,a),this};var k=function(a){var a=a||new AcroForm.Field;a.FT="/Btn";var b=a.Ff||0;a.pushbutton&&(b=AcroForm.internal.setBitPosition(b,17),delete a.pushbutton),a.radio&&(b=AcroForm.internal.setBitPosition(b,16),delete a.radio),a.noToggleToOff&&(b=AcroForm.internal.setBitPosition(b,15)),a.Ff=b,f.call(this,a)},l=function(a){var a=a||new AcroForm.Field;a.FT="/Tx";var b=a.Ff||0;a.multiline&&(b|=4096),a.password&&(b|=8192),a.fileSelect&&(b|=1<<20),a.doNotSpellCheck&&(b|=1<<22),a.doNotScroll&&(b|=1<<23),a.Ff=a.Ff||b,f.call(this,a)},m=function(a){var b=a||new AcroForm.Field;b.FT="/Ch";var c=b.Ff||0;b.combo&&(c=AcroForm.internal.setBitPosition(c,18),delete b.combo),b.edit&&(c=AcroForm.internal.setBitPosition(c,19),delete b.edit),b.sort&&(c=AcroForm.internal.setBitPosition(c,20),delete b.sort),b.multiSelect&&this.internal.getPDFVersion()>=1.4&&(c=AcroForm.internal.setBitPosition(c,22),delete b.multiSelect),b.doNotSpellCheck&&this.internal.getPDFVersion()>=1.4&&(c=AcroForm.internal.setBitPosition(c,23),delete b.doNotSpellCheck),b.Ff=c,f.call(this,b)}})(jsPDF.API),AcroForm.internal={},AcroForm.createFormXObject=function(a){var b=new AcroForm.FormXObject,c=AcroForm.Appearance.internal.getHeight(a)||0,d=AcroForm.Appearance.internal.getWidth(a)||0;return b.BBox=[0,0,d,c],b},AcroForm.Appearance={CheckBox:{createAppearanceStream:function(){return{N:{On:AcroForm.Appearance.CheckBox.YesNormal},D:{On:AcroForm.Appearance.CheckBox.YesPushDown,Off:AcroForm.Appearance.CheckBox.OffPushDown}}},createMK:function(){return"<< /CA (3)>>"},YesPushDown:function(a){var b=AcroForm.createFormXObject(a),c="";a.Q=1;var d=AcroForm.internal.calculateX(a,"3","ZapfDingbats",50);return c+="0.749023 g\n             0 0 "+AcroForm.Appearance.internal.getWidth(a)+" "+AcroForm.Appearance.internal.getHeight(a)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+d.fontSize+" Tf 0 g\n             BT\n",c+=d.text,c+="ET\n             Q\n             EMC\n",b.stream=c,b},YesNormal:function(a){var b=AcroForm.createFormXObject(a),c="";a.Q=1;var d=AcroForm.internal.calculateX(a,"3","ZapfDingbats",.9*AcroForm.Appearance.internal.getHeight(a));return c+="1 g\n0 0 "+AcroForm.Appearance.internal.getWidth(a)+" "+AcroForm.Appearance.internal.getHeight(a)+" re\nf\nq\n0 0 1 rg\n0 0 "+(AcroForm.Appearance.internal.getWidth(a)-1)+" "+(AcroForm.Appearance.internal.getHeight(a)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+d.fontSize+" Tf 0 g\n",c+=d.text,c+="ET\n             Q\n",b.stream=c,b},OffPushDown:function(a){var b=AcroForm.createFormXObject(a),c="";return c+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(a)+" "+AcroForm.Appearance.internal.getHeight(a)+" re\n            f\n",b.stream=c,b}},RadioButton:{Circle:{createAppearanceStream:function(a){var b={D:{Off:AcroForm.Appearance.RadioButton.Circle.OffPushDown},N:{}};return b.N[a]=AcroForm.Appearance.RadioButton.Circle.YesNormal,b.D[a]=AcroForm.Appearance.RadioButton.Circle.YesPushDown,b},createMK:function(){return"<< /CA (l)>>"},YesNormal:function(a){var b=AcroForm.createFormXObject(a),c="",d=AcroForm.Appearance.internal.getWidth(a)<=AcroForm.Appearance.internal.getHeight(a)?AcroForm.Appearance.internal.getWidth(a)/4:AcroForm.Appearance.internal.getHeight(a)/4;d*=.9;var e=AcroForm.Appearance.internal.Bezier_C;return c+="q\n1 0 0 1 "+AcroForm.Appearance.internal.getWidth(a)/2+" "+AcroForm.Appearance.internal.getHeight(a)/2+" cm\n"+d+" 0 m\n"+d+" "+d*e+" "+d*e+" "+d+" 0 "+d+" c\n-"+d*e+" "+d+" -"+d+" "+d*e+" -"+d+" 0 c\n-"+d+" -"+d*e+" -"+d*e+" -"+d+" 0 -"+d+" c\n"+d*e+" -"+d+" "+d+" -"+d*e+" "+d+" 0 c\nf\nQ\n",b.stream=c,b},YesPushDown:function(a){var b=AcroForm.createFormXObject(a),c="",d=AcroForm.Appearance.internal.getWidth(a)<=AcroForm.Appearance.internal.getHeight(a)?AcroForm.Appearance.internal.getWidth(a)/4:AcroForm.Appearance.internal.getHeight(a)/4;d*=.9;var e=AcroForm.Appearance.internal.Bezier_C;return c+="0.749023 g\n            q\n           1 0 0 1 "+AcroForm.Appearance.internal.getWidth(a)/2+" "+AcroForm.Appearance.internal.getHeight(a)/2+" cm\n"+2*d+" 0 m\n"+2*d+" "+2*d*e+" "+2*d*e+" "+2*d+" 0 "+2*d+" c\n-"+2*d*e+" "+2*d+" -"+2*d+" "+2*d*e+" -"+2*d+" 0 c\n-"+2*d+" -"+2*d*e+" -"+2*d*e+" -"+2*d+" 0 -"+2*d+" c\n"+2*d*e+" -"+2*d+" "+2*d+" -"+2*d*e+" "+2*d+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+AcroForm.Appearance.internal.getWidth(a)/2+" "+AcroForm.Appearance.internal.getHeight(a)/2+" cm\n"+d+" 0 m\n"+d+" "+d*e+" "+d*e+" "+d+" 0 "+d+" c\n-"+d*e+" "+d+" -"+d+" "+d*e+" -"+d+" 0 c\n-"+d+" -"+d*e+" -"+d*e+" -"+d+" 0 -"+d+" c\n"+d*e+" -"+d+" "+d+" -"+d*e+" "+d+" 0 c\n            f\n            Q\n",b.stream=c,b},OffPushDown:function(a){var b=AcroForm.createFormXObject(a),c="",d=AcroForm.Appearance.internal.getWidth(a)<=AcroForm.Appearance.internal.getHeight(a)?AcroForm.Appearance.internal.getWidth(a)/4:AcroForm.Appearance.internal.getHeight(a)/4;d*=.9;var e=AcroForm.Appearance.internal.Bezier_C;return c+="0.749023 g\n            q\n 1 0 0 1 "+AcroForm.Appearance.internal.getWidth(a)/2+" "+AcroForm.Appearance.internal.getHeight(a)/2+" cm\n"+2*d+" 0 m\n"+2*d+" "+2*d*e+" "+2*d*e+" "+2*d+" 0 "+2*d+" c\n-"+2*d*e+" "+2*d+" -"+2*d+" "+2*d*e+" -"+2*d+" 0 c\n-"+2*d+" -"+2*d*e+" -"+2*d*e+" -"+2*d+" 0 -"+2*d+" c\n"+2*d*e+" -"+2*d+" "+2*d+" -"+2*d*e+" "+2*d+" 0 c\n            f\n            Q\n",b.stream=c,b}},Cross:{createAppearanceStream:function(a){var b={D:{Off:AcroForm.Appearance.RadioButton.Cross.OffPushDown},N:{}};return b.N[a]=AcroForm.Appearance.RadioButton.Cross.YesNormal,b.D[a]=AcroForm.Appearance.RadioButton.Cross.YesPushDown,b},createMK:function(){return"<< /CA (8)>>"},YesNormal:function(a){var b=AcroForm.createFormXObject(a),c="",d=AcroForm.Appearance.internal.calculateCross(a);return c+="q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(a)-2)+" "+(AcroForm.Appearance.internal.getHeight(a)-2)+" re\n            W\n            n\n            "+d.x1.x+" "+d.x1.y+" m\n            "+d.x2.x+" "+d.x2.y+" l\n            "+d.x4.x+" "+d.x4.y+" m\n            "+d.x3.x+" "+d.x3.y+" l\n            s\n            Q\n",b.stream=c,b},YesPushDown:function(a){var b=AcroForm.createFormXObject(a),c=AcroForm.Appearance.internal.calculateCross(a),d="";return d+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(a)+" "+AcroForm.Appearance.internal.getHeight(a)+" re\n            f\n            q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(a)-2)+" "+(AcroForm.Appearance.internal.getHeight(a)-2)+" re\n            W\n            n\n            "+c.x1.x+" "+c.x1.y+" m\n            "+c.x2.x+" "+c.x2.y+" l\n            "+c.x4.x+" "+c.x4.y+" m\n            "+c.x3.x+" "+c.x3.y+" l\n            s\n            Q\n",b.stream=d,b},OffPushDown:function(a){var b=AcroForm.createFormXObject(a),c="";return c+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(a)+" "+AcroForm.Appearance.internal.getHeight(a)+" re\n            f\n",b.stream=c,b}}},createDefaultAppearanceStream:function(a){var b="";return b+="/Helv 12 Tf 0 g"}},AcroForm.Appearance.internal={Bezier_C:.551915024494,calculateCross:function(a){var b=function(a,b){return a>b?b:a},c=AcroForm.Appearance.internal.getWidth(a),d=AcroForm.Appearance.internal.getHeight(a),e=b(c,d);return{x1:{x:(c-e)/2,y:(d-e)/2+e},x2:{x:(c-e)/2+e,y:(d-e)/2},x3:{x:(c-e)/2,y:(d-e)/2},x4:{x:(c-e)/2+e,y:(d-e)/2+e}}}},AcroForm.Appearance.internal.getWidth=function(a){return a.Rect[2]},AcroForm.Appearance.internal.getHeight=function(a){return a.Rect[3]},AcroForm.internal.inherit=function(a,b){Object.create,a.prototype=Object.create(b.prototype),a.prototype.constructor=a},AcroForm.internal.arrayToPdfArray=function(a){if(Array.isArray(a)){var b=" [";for(var c in a){b+=a[c].toString(),b+=c<a.length-1?" ":""}return b+="]"}},AcroForm.internal.toPdfString=function(a){return a=a||"",0!==String.indexOf("(",0)&&(a="("+a),")"!=a.substring(a.length-1)&&(a+="("),a},AcroForm.PDFObject=function(){var a;Object.defineProperty(this,"objId",{get:function(){return a||(this.internal?a=this.internal.newObjectDeferred():jsPDF.API.acroformPlugin.internal&&(a=jsPDF.API.acroformPlugin.internal.newObjectDeferred())),a||console.log("Couldn't create Object ID"),a},configurable:!1})},AcroForm.PDFObject.prototype.toString=function(){return this.objId+" 0 R"},AcroForm.PDFObject.prototype.getString=function(){var a=this.objId+" 0 obj\n<<";return a+=this.getContent()+">>\n",this.stream&&(a+="stream\n",a+=this.stream,a+="endstream\n"),a+="endobj\n"},AcroForm.PDFObject.prototype.getContent=function(){var a=function(a){var b="",c=Object.keys(a).filter(function(a){return"content"!=a&&"appearanceStreamContent"!=a&&"_"!=a.substring(0,1)});for(var d in c){var e=c[d],f=a[e];f&&(b+=Array.isArray(f)?"/"+e+" "+AcroForm.internal.arrayToPdfArray(f)+"\n":f instanceof AcroForm.PDFObject?"/"+e+" "+f.objId+" 0 R\n":"/"+e+" "+f+"\n")}return b},b="";return b+=a(this)},AcroForm.FormXObject=function(){AcroForm.PDFObject.call(this),this.Type="/XObject",this.Subtype="/Form",this.FormType=1,this.BBox,this.Matrix,this.Resources="2 0 R",this.PieceInfo;var a;Object.defineProperty(this,"Length",{enumerable:!0,get:function(){return void 0!==a?a.length:0}}),Object.defineProperty(this,"stream",{enumerable:!1,set:function(b){a=b},get:function(){return a||null}})},AcroForm.internal.inherit(AcroForm.FormXObject,AcroForm.PDFObject),AcroForm.AcroFormDictionary=function(){AcroForm.PDFObject.call(this);var a=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!0,configurable:!0,get:function(){return a}}),this.DA},AcroForm.internal.inherit(AcroForm.AcroFormDictionary,AcroForm.PDFObject),AcroForm.Field=function(){AcroForm.PDFObject.call(this);var a;Object.defineProperty(this,"Rect",{enumerable:!0,configurable:!1,get:function(){if(a){return a}},set:function(b){a=b}});var b="";Object.defineProperty(this,"FT",{enumerable:!0,set:function(a){b=a},get:function(){return b}});var c;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,set:function(a){c=a},get:function(){if(!c||c.length<1){if(this instanceof AcroForm.ChildClass)return;return"(FieldObject"+AcroForm.Field.FieldNum+++")"}return"("==c.substring(0,1)&&c.substring(c.length-1)?c:"("+c+")"}});var d;Object.defineProperty(this,"DA",{enumerable:!0,get:function(){return d?"("+d+")":void 0},set:function(a){d=a}});var e;Object.defineProperty(this,"DV",{enumerable:!0,configurable:!0,get:function(){return e||void 0},set:function(a){e=a}}),Object.defineProperty(this,"Type",{enumerable:!0,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,get:function(){return this.hasAnnotation?"/Widget":null}}),this.BG,Object.defineProperty(this,"hasAnnotation",{enumerable:!1,get:function(){return!!(this.Rect||this.BC||this.BG)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,configurable:!0})},AcroForm.Field.FieldNum=0,AcroForm.internal.inherit(AcroForm.Field,AcroForm.PDFObject),AcroForm.ChoiceField=function(){AcroForm.Field.call(this),this.FT="/Ch",this.Opt=[],this.V="()",this.TI=0,this.combo=!1,Object.defineProperty(this,"edit",{enumerable:!0,set:function(a){1==a?(this._edit=!0,this.combo=!0):this._edit=!1},get:function(){return!!this._edit&&this._edit},configurable:!1}),this.hasAppearanceStream=!0,this.V.get=function(){AcroForm.internal.toPdfString()}},AcroForm.internal.inherit(AcroForm.ChoiceField,AcroForm.Field),window.ChoiceField=AcroForm.ChoiceField,AcroForm.ListBox=function(){AcroForm.ChoiceField.call(this)},AcroForm.internal.inherit(AcroForm.ListBox,AcroForm.ChoiceField),window.ListBox=AcroForm.ListBox,AcroForm.ComboBox=function(){AcroForm.ListBox.call(this),this.combo=!0},AcroForm.internal.inherit(AcroForm.ComboBox,AcroForm.ListBox),window.ComboBox=AcroForm.ComboBox,AcroForm.EditBox=function(){AcroForm.ComboBox.call(this),this.edit=!0},AcroForm.internal.inherit(AcroForm.EditBox,AcroForm.ComboBox),window.EditBox=AcroForm.EditBox,AcroForm.Button=function(){AcroForm.Field.call(this),this.FT="/Btn"},AcroForm.internal.inherit(AcroForm.Button,AcroForm.Field),window.Button=AcroForm.Button,AcroForm.PushButton=function(){AcroForm.Button.call(this),this.pushbutton=!0},AcroForm.internal.inherit(AcroForm.PushButton,AcroForm.Button),window.PushButton=AcroForm.PushButton,AcroForm.RadioButton=function(){AcroForm.Button.call(this),this.radio=!0;var a=[];Object.defineProperty(this,"Kids",{enumerable:!0,get:function(){return a.length>0?a:void 0}}),Object.defineProperty(this,"__Kids",{get:function(){return a}});var b;Object.defineProperty(this,"noToggleToOff",{enumerable:!1,get:function(){return b},set:function(a){b=a}})},AcroForm.internal.inherit(AcroForm.RadioButton,AcroForm.Button),window.RadioButton=AcroForm.RadioButton,AcroForm.ChildClass=function(a,b){AcroForm.Field.call(this),this.Parent=a,this._AppearanceType=AcroForm.Appearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(b),this.F=AcroForm.internal.setBitPosition(this.F,3,1),this.MK=this._AppearanceType.createMK(),this.AS="/Off",this._Name=b},AcroForm.internal.inherit(AcroForm.ChildClass,AcroForm.Field),AcroForm.RadioButton.prototype.setAppearance=function(a){if(!("createAppearanceStream"in a&&"createMK"in a))return void console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var b in this.__Kids){var c=this.__Kids[b];c.appearanceStreamContent=a.createAppearanceStream(c._Name),c.MK=a.createMK()}},AcroForm.RadioButton.prototype.createOption=function(a){var b=this,c=(this.__Kids.length,new AcroForm.ChildClass(b,a));return this.__Kids.push(c),jsPDF.API.addField(c),c},AcroForm.CheckBox=function(){Button.call(this),this.appearanceStreamContent=AcroForm.Appearance.CheckBox.createAppearanceStream(),this.MK=AcroForm.Appearance.CheckBox.createMK(),this.AS="/On",this.V="/On"},AcroForm.internal.inherit(AcroForm.CheckBox,AcroForm.Button),window.CheckBox=AcroForm.CheckBox,AcroForm.TextField=function(){AcroForm.Field.call(this);var a;Object.defineProperty(this,"V",{get:function(){return a?"("+a+")":a},enumerable:!0,set:function(b){a=b}});var b;Object.defineProperty(this,"DV",{get:function(){return b?"("+b+")":b},enumerable:!0,set:function(a){b=a}});var c=!1;Object.defineProperty(this,"multiline",{enumerable:!1,get:function(){return c},set:function(a){c=a}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,get:function(){return this.V||this.DV}})},AcroForm.internal.inherit(AcroForm.TextField,AcroForm.Field),window.TextField=AcroForm.TextField,AcroForm.PasswordField=function(){TextField.call(this),Object.defineProperty(this,"password",{value:!0,enumerable:!1,configurable:!1,writable:!1})},AcroForm.internal.inherit(AcroForm.PasswordField,AcroForm.TextField),window.PasswordField=AcroForm.PasswordField,AcroForm.internal.calculateFontSpace=function(a,b,c){var c=c||"helvetica",d=AcroForm.internal.calculateFontSpace.canvas||(AcroForm.internal.calculateFontSpace.canvas=document.createElement("canvas")),e=d.getContext("2d");e.save();var f=b+" "+c;e.font=f;var g=e.measureText(a);e.fontcolor="black";var e=d.getContext("2d");return g.height=1.5*e.measureText("3").width,e.restore(),g.width,g},AcroForm.internal.calculateX=function(a,b,c,d){var d=d||12,c=c||"helvetica",e={text:"",fontSize:""};b="("==b.substr(0,1)?b.substr(1):b,b=")"==b.substr(b.length-1)?b.substr(0,b.length-1):b;var f=b.split(" "),g=d,h=2,i=2,j=AcroForm.Appearance.internal.getHeight(a)||0;j=0>j?-j:j;var k=AcroForm.Appearance.internal.getWidth(a)||0;k=0>k?-k:k;var l=function(a,b,d){if(a+1<f.length){var e=b+" "+f[a+1],g=AcroForm.internal.calculateFontSpace(e,d+"px",c).width;return k-2*i>=g}return!1};g++;a:for(;;){var b="";g--;var m=AcroForm.internal.calculateFontSpace("3",g+"px",c).height,n=a.multiline?j-g:(j-m)/2;n+=h;var o=-i,p=n,q=0,r=0,s=0;if(0==g){g=12,b="(...) Tj\n",b+="% Width of Text: "+AcroForm.internal.calculateFontSpace(b,"1px").width+", FieldWidth:"+k+"\n";break}s=AcroForm.internal.calculateFontSpace(f[0]+" ",g+"px",c).width;var t="",u=0;for(var v in f){t+=f[v]+" ",t=" "==t.substr(t.length-1)?t.substr(0,t.length-1):t;var w=parseInt(v);s=AcroForm.internal.calculateFontSpace(t+" ",g+"px",c).width;var x=l(w,t,g),y=v>=f.length-1;if(!x||y){if(x||y){if(y)r=w;else if(a.multiline&&(m+h)*(u+2)+h>j)continue a}else{if(!a.multiline)continue a;if((m+h)*(u+2)+h>j)continue a;r=w}for(var z="",A=q;r>=A;A++)z+=f[A]+" ";switch(z=" "==z.substr(z.length-1)?z.substr(0,z.length-1):z,s=AcroForm.internal.calculateFontSpace(z,g+"px",c).width,a.Q){case 2:o=k-s-i;break;case 1:o=(k-s)/2;break;case 0:default:o=i}b+=o+" "+p+" Td\n",b+="("+z+") Tj\n",b+=-o+" 0 Td\n",p=-(g+h),o,s=0,q=r+1,u++,t=""}else t+=" "}break}return e.text=b,e.fontSize=g,e},AcroForm.internal.calculateAppearanceStream=function(a){if(a.appearanceStreamContent)return a.appearanceStreamContent;if(a.V||a.DV){var b="",c=a.V||a.DV,d=AcroForm.internal.calculateX(a,c);b+="/Tx BMC\nq\n/F1 "+d.fontSize+" Tf\n1 0 0 1 0 0 Tm\n",b+="BT\n",b+=d.text,b+="ET\n",b+="Q\nEMC\n";var e=new AcroForm.createFormXObject(a);return e.stream=b,e}},AcroForm.internal.calculateCoordinates=function(a,b,c,d){function e(a){return a*this.internal.scaleFactor}var f={};return this.internal?Array.isArray(a)?(a[0]=AcroForm.scale(a[0]),a[1]=AcroForm.scale(a[1]),a[2]=AcroForm.scale(a[2]),a[3]=AcroForm.scale(a[3]),f.lowerLeft_X=0|a[0],f.lowerLeft_Y=e.call(this,this.internal.pageSize.height)-a[3]-a[1]|0,f.upperRight_X=a[0]+a[2]|0,f.upperRight_Y=e.call(this,this.internal.pageSize.height)-a[1]|0):(a=AcroForm.scale(a),b=AcroForm.scale(b),c=AcroForm.scale(c),d=AcroForm.scale(d),f.lowerLeft_X=0|a,f.lowerLeft_Y=this.internal.pageSize.height-b|0,f.upperRight_X=a+c|0,f.upperRight_Y=this.internal.pageSize.height-b+d|0):Array.isArray(a)?(f.lowerLeft_X=0|a[0],f.lowerLeft_Y=0|a[1],f.upperRight_X=a[0]+a[2]|0,f.upperRight_Y=a[1]+a[3]|0):(f.lowerLeft_X=0|a,f.lowerLeft_Y=0|b,f.upperRight_X=a+c|0,f.upperRight_Y=b+d|0),[f.lowerLeft_X,f.lowerLeft_Y,f.upperRight_X,f.upperRight_Y]},AcroForm.internal.calculateColor=function(a,b,c){var d=new Array(3);return d.r=0|a,d.g=0|b,d.b=0|c,d},AcroForm.internal.getBitPosition=function(a,b){a=a||0;var c=1;return c<<=b-1,a|c},AcroForm.internal.setBitPosition=function(a,b,c){a=a||0,c=c||1;var d=1;if(d<<=b-1,1==c)var a=a|d;else var a=a&~d;return a},function(a){a.addHTML=function(a,b,c,d,e){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof b&&(d=b,e=c),"function"==typeof d&&(e=d,d=null);var f=this.internal,g=f.scaleFactor,h=f.pageSize.width,i=f.pageSize.height;if(d=d||{},d.onrendered=function(a){b=parseInt(b)||0,c=parseInt(c)||0;var f=d.dim||{},j=f.h||0,k=f.w||Math.min(h,a.width/g)-b,l="JPEG";if(d.format&&(l=d.format),a.height>i&&d.pagesplit){var m=function(){for(var d=0;;){var f=document.createElement("canvas");f.width=Math.min(h*g,a.width),f.height=Math.min(i*g,a.height-d);f.getContext("2d").drawImage(a,0,d,a.width,f.height,0,0,f.width,f.height);var j=[f,b,d?0:c,f.width/g,f.height/g,l,null,"SLOW"];if(this.addImage.apply(this,j),(d+=f.height)>=a.height)break;this.addPage()}e(k,d,null,j)}.bind(this);if("CANVAS"===a.nodeName){var n=new Image;n.onload=m,n.src=a.toDataURL("image/png"),a=n}else m()}else{var o=Math.random().toString(35),p=[a,b,c,k,j,l,o,"SLOW"];this.addImage.apply(this,p),e(k,j,o,p)}}.bind(this),"undefined"!=typeof html2canvas&&!d.rstz)return html2canvas(a,d);if("undefined"!=typeof rasterizeHTML){var j="drawDocument";return"string"==typeof a&&(j=/^http/.test(a)?"drawURL":"drawHTML"),d.width=d.width||h*g,rasterizeHTML[j](a,void 0,d).then(function(a){d.onrendered(a.image)},function(a){e(null,a)})}return null}}(jsPDF.API),function(a){var b="addImage_",c=["jpeg","jpg","png"],d=function(a){var b=this.internal.newObject(),c=this.internal.write,e=this.internal.putStream;if(a.n=b,c("<</Type /XObject"),c("/Subtype /Image"),c("/Width "+a.w),c("/Height "+a.h),a.cs===this.color_spaces.INDEXED?c("/ColorSpace [/Indexed /DeviceRGB "+(a.pal.length/3-1)+" "+("smask"in a?b+2:b+1)+" 0 R]"):(c("/ColorSpace /"+a.cs),a.cs===this.color_spaces.DEVICE_CMYK&&c("/Decode [1 0 1 0 1 0 1 0]")),c("/BitsPerComponent "+a.bpc),"f"in a&&c("/Filter /"+a.f),"dp"in a&&c("/DecodeParms <<"+a.dp+">>"),"trns"in a&&a.trns.constructor==Array){for(var f="",g=0,h=a.trns.length;h>g;g++)f+=a.trns[g]+" "+a.trns[g]+" ";c("/Mask ["+f+"]")}if("smask"in a&&c("/SMask "+(b+1)+" 0 R"),c("/Length "+a.data.length+">>"),e(a.data),c("endobj"),"smask"in a){var i="/Predictor 15 /Colors 1 /BitsPerComponent "+a.bpc+" /Columns "+a.w,j={w:a.w,h:a.h,cs:"DeviceGray",bpc:a.bpc,dp:i,data:a.smask};"f"in a&&(j.f=a.f),d.call(this,j)}a.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),c("<< /Length "+a.pal.length+">>"),e(this.arrayBufferToBinaryString(new Uint8Array(a.pal))),c("endobj"))},e=function(){var a=this.internal.collections[b+"images"];for(var c in a)d.call(this,a[c])},f=function(){var a,c=this.internal.collections[b+"images"],d=this.internal.write;for(var e in c)a=c[e],d("/I"+a.i,a.n,"0","R")},g=function(b){return b&&"string"==typeof b&&(b=b.toUpperCase()),b in a.image_compression?b:a.image_compression.NONE},h=function(){var a=this.internal.collections[b+"images"];return a||(this.internal.collections[b+"images"]=a={},this.internal.events.subscribe("putResources",e),this.internal.events.subscribe("putXobjectDict",f)),a},i=function(a){var b=0;return a&&(b=Object.keys?Object.keys(a).length:function(a){var b=0;for(var c in a)a.hasOwnProperty(c)&&b++;return b}(a)),b},j=function(a){return void 0===a||null===a},k=function(b){return"string"==typeof b&&a.sHashCode(b)},l=function(a){return-1===c.indexOf(a)},m=function(b){return"function"!=typeof a["process"+b.toUpperCase()]},n=function(a){return"object"==typeof a&&1===a.nodeType},o=function(a,b,c){if("IMG"===a.nodeName&&a.hasAttribute("src")){var d=""+a.getAttribute("src");if(!c&&0===d.indexOf("data:image/"))return d;!b&&/\.png(?:[?#].*)?$/i.test(d)&&(b="png")}if("CANVAS"===a.nodeName)var e=a;else{var e=document.createElement("canvas");e.width=a.clientWidth||a.width,e.height=a.clientHeight||a.height;var f=e.getContext("2d");if(!f)throw"addImage requires canvas to be supported by browser.";if(c){var g,h,i,j,k,l,m,n,o=Math.PI/180;"object"==typeof c&&(g=c.x,h=c.y,i=c.bg,c=c.angle),n=c*o,j=Math.abs(Math.cos(n)),k=Math.abs(Math.sin(n)),l=e.width,m=e.height,e.width=m*k+l*j,e.height=m*j+l*k,isNaN(g)&&(g=e.width/2),isNaN(h)&&(h=e.height/2),f.clearRect(0,0,e.width,e.height),f.fillStyle=i||"white",f.fillRect(0,0,e.width,e.height),f.save(),f.translate(g,h),f.rotate(n),f.drawImage(a,-l/2,-m/2),f.rotate(-n),f.translate(-g,-h),f.restore()}else f.drawImage(a,0,0,e.width,e.height)}return e.toDataURL("png"==(""+b).toLowerCase()?"image/png":"image/jpeg")},p=function(a,b){var c;if(b)for(var d in b)if(a===b[d].alias){c=b[d];break}return c},q=function(a,b,c){return a||b||(a=-96,b=-96),0>a&&(a=-1*c.w*72/a/this.internal.scaleFactor),0>b&&(b=-1*c.h*72/b/this.internal.scaleFactor),0===a&&(a=b*c.w/c.h),0===b&&(b=a*c.h/c.w),[a,b]},r=function(a,b,c,d,e,f,g){var h=q.call(this,c,d,e),i=this.internal.getCoordinateString,j=this.internal.getVerticalCoordinateString;c=h[0],d=h[1],g[f]=e,this.internal.write("q",i(c),"0 0",i(d),i(a),j(b+d),"cm /I"+e.i,"Do Q")};a.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"},a.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},a.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},a.sHashCode=function(a){return Array.prototype.reduce&&a.split("").reduce(function(a,b){return(a=(a<<5)-a+b.charCodeAt(0))&a},0)},a.isString=function(a){return"string"==typeof a},a.extractInfoFromBase64DataURI=function(a){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(a)},a.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},a.isArrayBuffer=function(a){return!!this.supportsArrayBuffer()&&a instanceof ArrayBuffer},a.isArrayBufferView=function(a){return!!this.supportsArrayBuffer()&&("undefined"!=typeof Uint32Array&&(a instanceof Int8Array||a instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array))},a.binaryStringToUint8Array=function(a){for(var b=a.length,c=new Uint8Array(b),d=0;b>d;d++)c[d]=a.charCodeAt(d);return c},a.arrayBufferToBinaryString=function(a){if("TextDecoder"in window){return new TextDecoder("ascii").decode(a)}this.isArrayBuffer(a)&&(a=new Uint8Array(a));for(var b="",c=a.byteLength,d=0;c>d;d++)b+=String.fromCharCode(a[d]);return b},a.arrayBufferToBase64=function(a){for(var b,c,d,e,f,g="",h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(a),j=i.byteLength,k=j%3,l=j-k,m=0;l>m;m+=3)f=i[m]<<16|i[m+1]<<8|i[m+2],b=(16515072&f)>>18,c=(258048&f)>>12,d=(4032&f)>>6,e=63&f,g+=h[b]+h[c]+h[d]+h[e];return 1==k?(f=i[l],b=(252&f)>>2,c=(3&f)<<4,g+=h[b]+h[c]+"=="):2==k&&(f=i[l]<<8|i[l+1],b=(64512&f)>>10,c=(1008&f)>>4,d=(15&f)<<2,g+=h[b]+h[c]+h[d]+"="),g},a.createImageInfo=function(a,b,c,d,e,f,g,h,i,j,k,l){var m={alias:h,w:b,h:c,cs:d,bpc:e,i:g,data:a};return f&&(m.f=f),i&&(m.dp=i),j&&(m.trns=j),k&&(m.pal=k),l&&(m.smask=l),m},a.addImage=function(a,b,d,e,f,q,s,t,u){if("string"!=typeof b){var v=q;q=f,f=e,e=d,d=b,b=v}if("object"==typeof a&&!n(a)&&"imageData"in a){var w=a;a=w.imageData,b=w.format||b,d=w.x||d||0,e=w.y||e||0,f=w.w||f,q=w.h||q,s=w.alias||s,t=w.compression||t,u=w.rotation||w.angle||u}if(isNaN(d)||isNaN(e))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var x,y=h.call(this);if(!(x=p(a,y))){var z;if(n(a)&&(a=o(a,b,u)),j(s)&&(s=k(a)),!(x=p(s,y))){if(this.isString(a)){var A=this.extractInfoFromBase64DataURI(a);A?(b=A[2],a=atob(A[3])):137===a.charCodeAt(0)&&80===a.charCodeAt(1)&&78===a.charCodeAt(2)&&71===a.charCodeAt(3)&&(b="png")}if(b=(b||"JPEG").toLowerCase(),l(b))throw new Error("addImage currently only supports formats "+c+", not '"+b+"'");if(m(b))throw new Error("please ensure that the plugin for '"+b+"' support is added");if(this.supportsArrayBuffer()&&(a instanceof Uint8Array||(z=a,a=this.binaryStringToUint8Array(a))),!(x=this["process"+b.toUpperCase()](a,i(y),s,g(t),z)))throw new Error("An unkwown error occurred whilst processing the image")}}return r.call(this,d,e,f,q,x,x.i,y),this};var s=function(a){var b,c,d
;if(255===!a.charCodeAt(0)||216===!a.charCodeAt(1)||255===!a.charCodeAt(2)||224===!a.charCodeAt(3)||!a.charCodeAt(6)==="J".charCodeAt(0)||!a.charCodeAt(7)==="F".charCodeAt(0)||!a.charCodeAt(8)==="I".charCodeAt(0)||!a.charCodeAt(9)==="F".charCodeAt(0)||0===!a.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var e=256*a.charCodeAt(4)+a.charCodeAt(5),f=4,g=a.length;g>f;){if(f+=e,255!==a.charCodeAt(f))throw new Error("getJpegSize could not find the size of the image");if(192===a.charCodeAt(f+1)||193===a.charCodeAt(f+1)||194===a.charCodeAt(f+1)||195===a.charCodeAt(f+1)||196===a.charCodeAt(f+1)||197===a.charCodeAt(f+1)||198===a.charCodeAt(f+1)||199===a.charCodeAt(f+1))return c=256*a.charCodeAt(f+5)+a.charCodeAt(f+6),b=256*a.charCodeAt(f+7)+a.charCodeAt(f+8),d=a.charCodeAt(f+9),[b,c,d];f+=2,e=256*a.charCodeAt(f)+a.charCodeAt(f+1)}},t=function(a){if(65496!=(a[0]<<8|a[1]))throw new Error("Supplied data is not a JPEG");for(var b,c,d,e,f=a.length,g=(a[4]<<8)+a[5],h=4;f>h;){if(h+=g,b=u(a,h),g=(b[2]<<8)+b[3],(192===b[1]||194===b[1])&&255===b[0]&&g>7)return b=u(a,h+5),c=(b[2]<<8)+b[3],d=(b[0]<<8)+b[1],e=b[4],{width:c,height:d,numcomponents:e};h+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")},u=function(a,b){return a.subarray(b,b+5)};a.processJPEG=function(a,b,c,d,e){var f,g=this.color_spaces.DEVICE_RGB,h=this.decode.DCT_DECODE,i=8;return this.isString(a)?(f=s(a),this.createImageInfo(a,f[0],f[1],1==f[3]?this.color_spaces.DEVICE_GRAY:g,i,h,b,c)):(this.isArrayBuffer(a)&&(a=new Uint8Array(a)),this.isArrayBufferView(a)?(f=t(a),a=e||this.arrayBufferToBinaryString(a),this.createImageInfo(a,f.width,f.height,1==f.numcomponents?this.color_spaces.DEVICE_GRAY:g,i,h,b,c)):null)},a.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(jsPDF.API),function(a){var b={annotations:[],f2:function(a){return a.toFixed(2)},notEmpty:function(a){return void 0!==a&&""!=a||void 0}};jsPDF.API.annotationPlugin=b,jsPDF.API.events.push(["addPage",function(a){this.annotationPlugin.annotations[a.pageNumber]=[]}]),a.events.push(["putPage",function(a){for(var c=this.annotationPlugin.annotations[a.pageNumber],d=!1,e=0;e<c.length&&!d;e++){var f=c[e];switch(f.type){case"link":if(b.notEmpty(f.options.url)||b.notEmpty(f.options.pageNumber)){d=!0;break}case"reference":case"text":case"freetext":d=!0}}if(0!=d){this.internal.write("/Annots [");for(var g=this.annotationPlugin.f2,h=this.internal.scaleFactor,i=this.internal.pageSize.height,j=this.internal.getPageInfo(a.pageNumber),e=0;e<c.length;e++){var f=c[e];switch(f.type){case"reference":this.internal.write(" "+f.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),l=this.internal.newAdditionalObject(),m=f.title||"Note",n="/Rect ["+g(f.bounds.x*h)+" "+g(i-(f.bounds.y+f.bounds.h)*h)+" "+g((f.bounds.x+f.bounds.w)*h)+" "+g((i-f.bounds.y)*h)+"] ";s="<</Type /Annot /Subtype /Text "+n+"/Contents ("+f.contents+")",s+=" /Popup "+l.objId+" 0 R",s+=" /P "+j.objId+" 0 R",s+=" /T ("+m+") >>",k.content=s;var o=k.objId+" 0 R",p=30,n="/Rect ["+g((f.bounds.x+p)*h)+" "+g(i-(f.bounds.y+f.bounds.h)*h)+" "+g((f.bounds.x+f.bounds.w+p)*h)+" "+g((i-f.bounds.y)*h)+"] ";s="<</Type /Annot /Subtype /Popup "+n+" /Parent "+o,f.open&&(s+=" /Open true"),s+=" >>",l.content=s,this.internal.write(k.objId,"0 R",l.objId,"0 R");break;case"freetext":var n="/Rect ["+g(f.bounds.x*h)+" "+g((i-f.bounds.y)*h)+" "+g(f.bounds.x+f.bounds.w*h)+" "+g(i-(f.bounds.y+f.bounds.h)*h)+"] ",q=f.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+f.contents+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+q+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(f.options.name){var r=this.annotations._nameMap[f.options.name];f.options.pageNumber=r.page,f.options.top=r.y}else f.options.top||(f.options.top=0);var n="/Rect ["+g(f.x*h)+" "+g((i-f.y)*h)+" "+g(f.x+f.w*h)+" "+g(i-(f.y+f.h)*h)+"] ",s="";if(f.options.url)s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+f.options.url+") >>";else if(f.options.pageNumber){var a=this.internal.getPageInfo(f.options.pageNumber);switch(s="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+a.objId+" 0 R",f.options.magFactor=f.options.magFactor||"XYZ",f.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+f.options.top+"]";break;case"FitV":f.options.left=f.options.left||0,s+=" /FitV "+f.options.left+"]";break;case"XYZ":default:var t=g((i-f.options.top)*h);f.options.left=f.options.left||0,void 0===f.options.zoom&&(f.options.zoom=0),s+=" /XYZ "+f.options.left+" "+t+" "+f.options.zoom+"]"}}""!=s&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),a.createAnnotation=function(a){switch(a.type){case"link":this.link(a.bounds.x,a.bounds.y,a.bounds.w,a.bounds.h,a);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(a)}},a.link=function(a,b,c,d,e){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:a,y:b,w:c,h:d,options:e,type:"link"})},a.link=function(a,b,c,d,e){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:a,y:b,w:c,h:d,options:e,type:"link"})},a.textWithLink=function(a,b,c,d){var e=this.getTextWidth(a),f=this.internal.getLineHeight();return this.text(a,b,c),c+=.2*f,this.link(b,c-f,e,f,d),e},a.getTextWidth=function(a){var b=this.internal.getFontSize();return this.getStringUnitWidth(a)*b/this.internal.scaleFactor},a.getLineHeight=function(){return this.internal.getLineHeight()}}(jsPDF.API),function(a){a.autoPrint=function(){var a;return this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+a+" 0 R")}),this}}(jsPDF.API),function(a){a.events.push(["initialized",function(){this.canvas.pdf=this}]),a.canvas={getContext:function(a){return this.pdf.context2d},style:{}},Object.defineProperty(a.canvas,"width",{get:function(){return this._width},set:function(a){this._width=a,this.getContext("2d").pageWrapX=a+1}}),Object.defineProperty(a.canvas,"height",{get:function(){return this._height},set:function(a){this._height=a,this.getContext("2d").pageWrapY=a+1}})}(jsPDF.API),function(a){var b,c,d,e,f=3,g=13,h={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},i=1,j=function(a,b,c,d,e){h={x:a,y:b,w:c,h:d,ln:e}},k=function(){return h},l={left:0,top:0,bottom:0};a.setHeaderFunction=function(a){e=a},a.getTextDimensions=function(a){b=this.internal.getFont().fontName,c=this.table_font_size||this.internal.getFontSize(),d=this.internal.getFont().fontStyle;var e,f,g=19.049976/25.4;f=document.createElement("font"),f.id="jsPDFCell";try{f.style.fontStyle=d}catch(a){f.style.fontWeight=d}f.style.fontName=b,f.style.fontSize=c+"pt";try{f.textContent=a}catch(b){f.innerText=a}return document.body.appendChild(f),e={w:(f.offsetWidth+1)*g,h:(f.offsetHeight+1)*g},document.body.removeChild(f),e},a.cellAddPage=function(){var a=this.margins||l;this.addPage(),j(a.left,a.top,void 0,void 0),i+=1},a.cellInitialize=function(){h={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},i=1},a.cell=function(a,b,c,d,e,h,i){var m=k(),n=!1;if(void 0!==m.ln)if(m.ln===h)a=m.x+m.w,b=m.y;else{var o=this.margins||l;m.y+m.h+d+g>=this.internal.pageSize.height-o.bottom&&(this.cellAddPage(),n=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(h,!0)),b=k().y+k().h,n&&(b=g+10)}if(void 0!==e[0])if(this.printingHeaderRow?this.rect(a,b,c,d,"FD"):this.rect(a,b,c,d),"right"===i){e instanceof Array||(e=[e]);for(var p=0;p<e.length;p++){var q=e[p],r=this.getStringUnitWidth(q)*this.internal.getFontSize();this.text(q,a+c-r-f,b+this.internal.getLineHeight()*(p+1))}}else this.text(e,a+f,b+this.internal.getLineHeight());return j(a,b,c,d,h),this},a.arrayMax=function(a,b){var c,d,e,f=a[0];for(c=0,d=a.length;d>c;c+=1)e=a[c],b?-1===b(f,e)&&(f=e):e>f&&(f=e);return f},a.table=function(b,c,d,e,f){if(!d)throw"No data for PDF table";var g,j,k,m,n,o,p,q,r,s,t=[],u=[],v={},w={},x=[],y=[],z=!1,A=!0,B=12,C=l;if(C.width=this.internal.pageSize.width,f&&(!0===f.autoSize&&(z=!0),!1===f.printHeaders&&(A=!1),f.fontSize&&(B=f.fontSize),f.css["font-size"]&&(B=16*f.css["font-size"]),f.margins&&(C=f.margins)),this.lnMod=0,h={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},i=1,this.printHeaders=A,this.margins=C,this.setFontSize(B),this.table_font_size=B,void 0===e||null===e)t=Object.keys(d[0]);else if(e[0]&&"string"!=typeof e[0]){var D=19.049976/25.4;for(j=0,k=e.length;k>j;j+=1)g=e[j],t.push(g.name),u.push(g.prompt),w[g.name]=g.width*D}else t=e;if(z)for(s=function(a){return a[g]},j=0,k=t.length;k>j;j+=1){for(g=t[j],v[g]=d.map(s),x.push(this.getTextDimensions(u[j]||g).w),o=v[g],p=0,m=o.length;m>p;p+=1)n=o[p],x.push(this.getTextDimensions(n).w);w[g]=a.arrayMax(x),x=[]}if(A){var E=this.calculateLineHeight(t,w,u.length?u:t);for(j=0,k=t.length;k>j;j+=1)g=t[j],y.push([b,c,w[g],E,String(u.length?u[j]:g)]);this.setTableHeaderRow(y),this.printHeaderRow(1,!1)}for(j=0,k=d.length;k>j;j+=1){var E;for(q=d[j],E=this.calculateLineHeight(t,w,q),p=0,r=t.length;r>p;p+=1)g=t[p],this.cell(b,c,w[g],E,q[g],j+2,g.align)}return this.lastCellPos=h,this.table_x=b,this.table_y=c,this},a.calculateLineHeight=function(a,b,c){for(var d,e=0,g=0;g<a.length;g++){d=a[g],c[d]=this.splitTextToSize(String(c[d]),b[d]-f);var h=this.internal.getLineHeight()*c[d].length+f;h>e&&(e=h)}return e},a.setTableHeaderRow=function(a){this.tableHeaderRow=a},a.printHeaderRow=function(a,b){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var c,d,f,h;if(this.printingHeaderRow=!0,void 0!==e){var k=e(this,i);j(k[0],k[1],k[2],k[3],-1)}this.setFontStyle("bold");var l=[];for(f=0,h=this.tableHeaderRow.length;h>f;f+=1)this.setFillColor(200,200,200),c=this.tableHeaderRow[f],b&&(this.margins.top=g,c[1]=this.margins&&this.margins.top||0,l.push(c)),d=[].concat(c),this.cell.apply(this,d.concat(a));l.length>0&&this.setTableHeaderRow(l),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(jsPDF.API),function(a){function b(){this.fillStyle="#000000",this.strokeStyle="#000000",this.font="12pt times",this.textBaseline="alphabetic",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this._translate={x:0,y:0},this.copy=function(a){this.fillStyle=a.fillStyle,this.strokeStyle=a.strokeStyle,this.font=a.font,this.lineWidth=a.lineWidth,this.lineJoin=a.lineJoin,this.lineCap=a.lineCap,this.textBaseline=a.textBaseline,this._fontSize=a._fontSize,this._translate={x:a._translate.x,y:a._translate.y}}}a.events.push(["initialized",function(){this.context2d.pdf=this,this.context2d.internal.pdf=this,this.context2d.ctx=new b,this.context2d.ctxStack=[],this.context2d.path=[]}]),a.context2d={pageWrapXEnabled:!1,pageWrapYEnabled:!0,pageWrapX:9999999,pageWrapY:9999999,f2:function(a){return a.toFixed(2)},fillRect:function(a,b,c,d){a=this._wrapX(a),b=this._wrapY(b),this.pdf.rect(a,b,c,d,"f")},strokeRect:function(a,b,c,d){a=this._wrapX(a),b=this._wrapY(b),this.pdf.rect(a,b,c,d,"s")},clearRect:function(a,b,c,d){a=this._wrapX(a),b=this._wrapY(b),this.save(),this.setFillStyle("#ffffff"),this.pdf.rect(a,b,c,d,"f"),this.restore()},save:function(){this.ctx._fontSize=this.pdf.internal.getFontSize();var a=new b;a.copy(this.ctx),this.ctxStack.push(this.ctx),this.ctx=a},restore:function(){this.ctx=this.ctxStack.pop(),this.setFillStyle(this.ctx.fillStyle),this.setStrokeStyle(this.ctx.strokeStyle),this.setFont(this.ctx.font),this.pdf.setFontSize(this.ctx._fontSize),this.setLineCap(this.ctx.lineCap),this.setLineWidth(this.ctx.lineWidth),this.setLineJoin(this.ctx.lineJoin)},beginPath:function(){this.path=[]},closePath:function(){this.path.push({type:"close"})},setFillStyle:function(a){var b,c,d,e,f=this.internal.rxRgb.exec(a);null!=f?(b=parseInt(f[1]),c=parseInt(f[2]),d=parseInt(f[3])):(f=this.internal.rxRgba.exec(a),null!=f?(b=parseInt(f[1]),c=parseInt(f[2]),d=parseInt(f[3]),e=parseInt(f[4])):("#"!=a.charAt(0)&&((a=CssColors.colorNameToHex(a))||(a="#000000")),this.ctx.fillStyle=a,4===a.length?(b=this.ctx.fillStyle.substring(1,2),b+=b,c=this.ctx.fillStyle.substring(2,3),c+=c,d=this.ctx.fillStyle.substring(3,4),d+=d):(b=this.ctx.fillStyle.substring(1,3),c=this.ctx.fillStyle.substring(3,5),d=this.ctx.fillStyle.substring(5,7)),b=parseInt(b,16),c=parseInt(c,16),d=parseInt(d,16))),this.pdf.setFillColor(b,c,d,{a:e}),this.pdf.setTextColor(b,c,d,{a:e})},setStrokeStyle:function(a){"#"!=a.charAt(0)&&((a=CssColors.colorNameToHex(a))||(a="#000000")),this.ctx.strokeStyle=a;var b=this.ctx.strokeStyle.substring(1,3);b=parseInt(b,16);var c=this.ctx.strokeStyle.substring(3,5);c=parseInt(c,16);var d=this.ctx.strokeStyle.substring(5,7);d=parseInt(d,16),this.pdf.setDrawColor(b,c,d)},fillText:function(a,b,c,d){b=this._wrapX(b),c=this._wrapY(c),this.pdf.text(a,b,this._getBaseline(c))},strokeText:function(a,b,c,d){b=this._wrapX(b),c=this._wrapY(c),this.pdf.text(a,b,this._getBaseline(c),{stroke:!0})},setFont:function(a){this.ctx.font=a;var b=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+["']?(\w+)['"]?/;if(null!=(i=b.exec(a))){var c=i[1],d=(i[2],i[3]),e=i[4],f=i[5],g=i[6];e="px"===f?Math.floor(parseFloat(e)):"em"===f?Math.floor(parseFloat(e)*this.pdf.getFontSize()):Math.floor(parseFloat(e)),this.pdf.setFontSize(e),"bold"===d||"700"===d?this.pdf.setFontStyle("bold"):"italic"===c?this.pdf.setFontStyle("italic"):this.pdf.setFontStyle("normal");var h=g;this.pdf.setFont(h,k)}else{var b=/(\d+)(pt|px|em)\s+(\w+)\s*(\w+)?/,i=b.exec(a);if(null!=i){var j=i[1],h=(i[2],i[3]),k=i[4];k||(k="normal"),j="em"===f?Math.floor(parseFloat(e)*this.pdf.getFontSize()):Math.floor(parseFloat(j)),this.pdf.setFontSize(j),this.pdf.setFont(h,k)}}},setTextBaseline:function(a){this.ctx.textBaseline=a},getTextBaseline:function(){return this.ctx.textBaseline},setLineWidth:function(a){this.ctx.lineWidth=a,this.pdf.setLineWidth(a)},setLineCap:function(a){this.ctx.lineCap=a,this.pdf.setLineCap(a)},setLineJoin:function(a){this.ctx.lineJon=a,this.pdf.setLineJoin(a)},moveTo:function(a,b){a=this._wrapX(a),b=this._wrapY(b);var c={type:"mt",x:a,y:b};this.path.push(c)},_wrapX:function(a){return this.pageWrapXEnabled?a%this.pageWrapX:a},_wrapY:function(a){return this.pageWrapYEnabled?(this._gotoPage(this._page(a)),(a-this.lastBreak)%this.pageWrapY):a},lastBreak:0,pageBreaks:[],_page:function(a){if(this.pageWrapYEnabled){this.lastBreak=0;for(var b=0,c=0,d=0;d<this.pageBreaks.length;d++)if(a>=this.pageBreaks[d]){b++,0===this.lastBreak&&c++;var e=this.pageBreaks[d]-this.lastBreak;this.lastBreak=this.pageBreaks[d];var f=Math.floor(e/this.pageWrapY);c+=f}if(0===this.lastBreak){var f=Math.floor(a/this.pageWrapY)+1;c+=f}return c+b}return this.pdf.internal.getCurrentPageInfo().pageNumber},_gotoPage:function(a){},lineTo:function(a,b){a=this._wrapX(a),b=this._wrapY(b);var c={type:"lt",x:a,y:b};this.path.push(c)},bezierCurveTo:function(a,b,c,d,e,f){a=this._wrapX(a),b=this._wrapY(b),c=this._wrapX(c),d=this._wrapY(d),e=this._wrapX(e),f=this._wrapY(f);var g={type:"bct",x1:a,y1:b,x2:c,y2:d,x:e,y:f};this.path.push(g)},quadraticCurveTo:function(a,b,c,d){a=this._wrapX(a),b=this._wrapY(b),c=this._wrapX(c),d=this._wrapY(d);var e={type:"qct",x1:a,y1:b,x:c,y:d};this.path.push(e)},arc:function(a,b,c,d,e,f){a=this._wrapX(a),b=this._wrapY(b);var g={type:"arc",x:a,y:b,radius:c,startAngle:d,endAngle:e,anticlockwise:f};this.path.push(g)},drawImage:function(a,b,c,d,e,f,g,h,i){void 0!==f&&(b=f,c=g,d=h,e=i),b=this._wrapX(b),c=this._wrapY(c);var j,k=/data:image\/(\w+).*/i,l=k.exec(a);j=null!=l?l[1]:"png",this.pdf.addImage(a,j,b,c,d,e)},stroke:function(){for(var a,b=[],c=!1,d=0;d<this.path.length;d++){var e=this.path[d];switch(e.type){case"mt":void 0!==(a=e)&&(this.pdf.lines(b,a.x,a.y,null,"s"),b=[]);break;case"lt":var f=[e.x-this.path[d-1].x,e.y-this.path[d-1].y];b.push(f);break;case"bct":var f=[e.x1-this.path[d-1].x,e.y1-this.path[d-1].y,e.x2-this.path[d-1].x,e.y2-this.path[d-1].y,e.x-this.path[d-1].x,e.y-this.path[d-1].y];b.push(f);break;case"qct":var g=this.path[d-1].x+2/3*(e.x1-this.path[d-1].x),h=this.path[d-1].y+2/3*(e.y1-this.path[d-1].y),i=e.x+2/3*(e.x1-e.x),j=e.y+2/3*(e.y1-e.y),k=e.x,l=e.y,f=[g-this.path[d-1].x,h-this.path[d-1].y,i-this.path[d-1].x,j-this.path[d-1].y,k-this.path[d-1].x,l-this.path[d-1].y];b.push(f);break;case"close":c=!0}}void 0!==a&&this.pdf.lines(b,a.x,a.y,null,"s",c);for(var d=0;d<this.path.length;d++){var e=this.path[d];switch(e.type){case"arc":var a=360*e.startAngle/(2*Math.PI),m=360*e.endAngle/(2*Math.PI);this.internal.arc(e.x,e.y,e.radius,a,m,e.anticlockwise,"s")}}this.path=[]},fill:function(){for(var a,b=[],c=0;c<this.path.length;c++){var d=this.path[c];switch(d.type){case"mt":void 0!==(a=d)&&(this.pdf.lines(b,a.x,a.y,null,"f"),b=[]);break;case"lt":var e=[d.x-this.path[c-1].x,d.y-this.path[c-1].y];b.push(e);break;case"bct":var e=[d.x1-this.path[c-1].x,d.y1-this.path[c-1].y,d.x2-this.path[c-1].x,d.y2-this.path[c-1].y,d.x-this.path[c-1].x,d.y-this.path[c-1].y];b.push(e);break;case"qct":var f=this.path[c-1].x+2/3*(d.x1-this.path[c-1].x),g=this.path[c-1].y+2/3*(d.y1-this.path[c-1].y),h=d.x+2/3*(d.x1-d.x),i=d.y+2/3*(d.y1-d.y),j=d.x,k=d.y,e=[f-this.path[c-1].x,g-this.path[c-1].y,h-this.path[c-1].x,i-this.path[c-1].y,j-this.path[c-1].x,k-this.path[c-1].y];b.push(e)}}void 0!==a&&this.pdf.lines(b,a.x,a.y,null,"f");for(var c=0;c<this.path.length;c++){var d=this.path[c];switch(d.type){case"arc":var a=360*d.startAngle/(2*Math.PI),l=360*d.endAngle/(2*Math.PI);this.internal.arc(d.x,d.y,d.radius,a,l,d.anticlockwise,"f");break;case"close":this.pdf.internal.out("h")}}this.path=[]},clip:function(){},translate:function(a,b){this.ctx._translate={x:a,y:b}},measureText:function(a){var b=this.pdf;return{getWidth:function(){var c=b.internal.getFontSize();return b.getStringUnitWidth(a)*c/b.internal.scaleFactor},get width(){return this.getWidth(a)}}},_getBaseline:function(a){var b=parseInt(this.pdf.internal.getFontSize()),c=.25*b;switch(this.ctx.textBaseline){case"bottom":return a-c;case"top":return a+b;case"hanging":return a+b-c;case"middle":return a+b/2-c;case"ideographic":return a;case"alphabetic":default:return a}}};var c=a.context2d;Object.defineProperty(c,"fillStyle",{set:function(a){this.setFillStyle(a)},get:function(){return this.ctx.fillStyle}}),Object.defineProperty(c,"textBaseline",{set:function(a){this.setTextBaseline(a)},get:function(){return this.getTextBaseline()}}),Object.defineProperty(c,"font",{set:function(a){this.setFont(a)},get:function(){return this.getFont()}}),c.internal={},c.internal.rxRgb=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/,c.internal.rxRgba=/rgba\s*\(\s*(\d+),\s*(\d+),\s*(\d+),\s*(\d+)\s*\)/,c.internal.arc=function(a,b,c,d,e,f,g){for(var h=this.pdf.internal.scaleFactor,i=this.pdf.internal.pageSize.height,j=this.pdf.internal.f2,k=d*(Math.PI/180),l=e*(Math.PI/180),m=this.createArc(c,k,l,f),n=0;n<m.length;n++){var o=m[n];0==n?this.pdf.internal.out([j((o.x1+a)*h),j((i-(o.y1+b))*h),"m",j((o.x2+a)*h),j((i-(o.y2+b))*h),j((o.x3+a)*h),j((i-(o.y3+b))*h),j((o.x4+a)*h),j((i-(o.y4+b))*h),"c"].join(" ")):this.pdf.internal.out([j((o.x2+a)*h),j((i-(o.y2+b))*h),j((o.x3+a)*h),j((i-(o.y3+b))*h),j((o.x4+a)*h),j((i-(o.y4+b))*h),"c"].join(" "))}null!==g&&this.pdf.internal.out(this.pdf.internal.getStyle(g))},c.internal.createArc=function(a,b,c,d){var e=1e-5,f=2*Math.PI,g=b;(f>g||g>f)&&(g%=f);var h=c;(f>h||h>f)&&(h%=f);for(var i=[],j=Math.PI/2,k=d?-1:1,l=b,m=Math.min(f,Math.abs(h-g));m>e;){var n=l+k*Math.min(m,j);i.push(this.createSmallArc(a,l,n)),m-=Math.abs(n-l),l=n}return i},c.internal.createSmallArc=function(a,b,c){var d=(c-b)/2,e=a*Math.cos(d),f=a*Math.sin(d),g=e,h=-f,i=g*g+h*h,j=i+g*e+h*f,k=4/3*(Math.sqrt(2*i*j)-j)/(g*f-h*e),l=g-k*h,m=h+k*g,n=l,o=-m,p=d+b,q=Math.cos(p),r=Math.sin(p);return{x1:a*Math.cos(b),y1:a*Math.sin(b),x2:l*q-m*r,y2:l*r+m*q,x3:n*q-o*r,y3:n*r+o*q,x4:a*Math.cos(c),y4:a*Math.sin(c)}}}(jsPDF.API),function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;b=function(){function a(){}return function(b){return a.prototype=b,new a}}(),j=function(a){var b,c,d,e,f,g,h;for(c=0,d=a.length,b=void 0,e=!1,g=!1;!e&&c!==d;)b=a[c]=a[c].trimLeft(),b&&(e=!0),c++;for(c=d-1;d&&!g&&-1!==c;)b=a[c]=a[c].trimRight(),b&&(g=!0),c--;for(f=/\s+$/g,h=!0,c=0;c!==d;)"\u2028"!=a[c]&&(b=a[c].replace(/\s+/g," "),h&&(b=b.trimLeft()),b&&(h=f.test(b)),a[c]=b),c++;return a},k=function(a,b,c,d){return this.pdf=a,this.x=b,this.y=c,this.settings=d,this.watchFunctions=[],this.init(),this},l=function(a){var b,c,e;for(b=void 0,e=a.split(","),c=e.shift();!b&&c;)b=d[c.trim().toLowerCase()],c=e.shift();return b},m=function(a){a="auto"===a?"0px":a,a.indexOf("em")>-1&&!isNaN(Number(a.replace("em","")))&&(a=18.719*Number(a.replace("em",""))+"px"),a.indexOf("pt")>-1&&!isNaN(Number(a.replace("pt","")))&&(a=1.333*Number(a.replace("pt",""))+"px");var b,c,d;return c=void 0,b=16,(d=n[a])?d:(d={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:a}],d!==c?n[a]=d/b:(d=parseFloat(a))?n[a]=d/b:(d=a.match(/([\d\.]+)(px)/),3===d.length?n[a]=parseFloat(d[1])/b:n[a]=1))},i=function(a){var b,c,d;return d=function(a){var b;return b=function(a){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle?a.currentStyle:a.style}(a),function(a){return a=a.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()}),b[a]}}(a),b={},c=void 0,b["font-family"]=l(d("font-family"))||"times",b["font-style"]=e[d("font-style")]||"normal",b["text-align"]=TextAlignMap[d("text-align")]||"left",c=f[d("font-weight")]||"normal","bold"===c&&("normal"===b["font-style"]?b["font-style"]=c:b["font-style"]=c+b["font-style"]),b["font-size"]=m(d("font-size"))||1,b["line-height"]=m(d("line-height"))||1,b.display="inline"===d("display")?"inline":"block",c="block"===b.display,b["margin-top"]=c&&m(d("margin-top"))||0,b["margin-bottom"]=c&&m(d("margin-bottom"))||0,b["padding-top"]=c&&m(d("padding-top"))||0,b["padding-bottom"]=c&&m(d("padding-bottom"))||0,b["margin-left"]=c&&m(d("margin-left"))||0,b["margin-right"]=c&&m(d("margin-right"))||0,b["padding-left"]=c&&m(d("padding-left"))||0,b["padding-right"]=c&&m(d("padding-right"))||0,b["page-break-before"]=d("page-break-before")||"auto",b.float=g[d("cssFloat")]||"none",b.clear=h[d("clear")]||"none",b.color=d("color"),b},o=function(a,b,c){var d,e,f,g;if(f=!1,e=void 0,g=void 0,void 0,d=c["#"+a.id])if("function"==typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&e!==g;)f=d[e](a,b),e++;if(d=c[a.nodeName],!f&&d)if("function"==typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&e!==g;)f=d[e](a,b),e++;return f},t=function(a,b){var c,d,e,f,g,h,i,j,k;for(c=[],d=[],e=0,k=a.rows[0].cells.length,i=a.clientWidth;k>e;)j=a.rows[0].cells[e],d[e]={name:j.textContent.toLowerCase().replace(/\s+/g,""),prompt:j.textContent.replace(/\r?\n/g,""),width:j.clientWidth/i*b.pdf.internal.pageSize.width},e++;for(e=1;e<a.rows.length;){for(h=a.rows[e],g={},f=0;f<h.cells.length;)g[d[f].name]=h.cells[f].textContent.replace(/\r?\n/g,""),f++;c.push(g),e++}return{rows:c,headers:d}};var u={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},v=1;c=function(a,d,e){var f,g,h,j,k,l,m,n;for(g=a.childNodes,f=void 0,h=i(a),k="block"===h.display,k&&(d.setBlockBoundary(),d.setBlockStyle(h)),19.049976/25.4,j=0,l=g.length;l>j;){if("object"==typeof(f=g[j])){if(d.executeWatchFunctions(f),1===f.nodeType&&"HEADER"===f.nodeName){var q=f,r=d.pdf.margins_doc.top;d.pdf.internal.events.subscribe("addPage",function(a){d.y=r,c(q,d,e),d.pdf.margins_doc.top=d.y+10,d.y+=10},!1)}if(8===f.nodeType&&"#comment"===f.nodeName)~f.textContent.indexOf("ADD_PAGE")&&(d.pdf.addPage(),d.y=d.pdf.margins_doc.top);else if(1!==f.nodeType||u[f.nodeName])if(3===f.nodeType){var s=f.nodeValue;if(f.nodeValue&&"LI"===f.parentNode.nodeName)if("OL"===f.parentNode.parentNode.nodeName)s=v+++". "+s;else{var w=h["font-size"];offsetX=(3-.75*w)*d.pdf.internal.scaleFactor,offsetY=.75*w*d.pdf.internal.scaleFactor,radius=1.74*w/d.pdf.internal.scaleFactor,n=function(a,b){this.pdf.circle(a+offsetX,b+offsetY,radius,"FD")}}f.ownerDocument.body.contains(f)&&d.addText(s,h)}else"string"==typeof f&&d.addText(f,h);else{var x;if("IMG"===f.nodeName){var y=f.getAttribute("src");x=p[d.pdf.sHashCode(y)||y]}if(x){d.pdf.internal.pageSize.height-d.pdf.margins_doc.bottom<d.y+f.height&&d.y>d.pdf.margins_doc.top&&(d.pdf.addPage(),d.y=d.pdf.margins_doc.top,d.executeWatchFunctions(f));var z=i(f),A=d.x,B=12/d.pdf.internal.scaleFactor,C=(z["margin-left"]+z["padding-left"])*B,D=(z["margin-right"]+z["padding-right"])*B,E=(z["margin-top"]+z["padding-top"])*B,F=(z["margin-bottom"]+z["padding-bottom"])*B;A+=void 0!==z.float&&"right"===z.float?d.settings.width-f.width-D:C,d.pdf.addImage(x,A,d.y+E,f.width,f.height),x=void 0,"right"===z.float||"left"===z.float?(d.watchFunctions.push(function(a,b,c,e){return d.y>=b?(d.x+=a,d.settings.width+=c,!0):!!(e&&1===e.nodeType&&!u[e.nodeName]&&d.x+e.width>d.pdf.margins_doc.left+d.pdf.margins_doc.width)&&(d.x+=a,d.y=b,d.settings.width+=c,!0)}.bind(this,"left"===z.float?-f.width-C-D:0,d.y+f.height+E+F,f.width)),d.watchFunctions.push(function(a,b,c){return!(d.y<a&&b===d.pdf.internal.getNumberOfPages())||1===c.nodeType&&"both"===i(c).clear&&(d.y=a,!0)}.bind(this,d.y+f.height,d.pdf.internal.getNumberOfPages())),d.settings.width-=f.width+C+D,"left"===z.float&&(d.x+=f.width+C+D)):d.y+=f.height+E+F}else if("TABLE"===f.nodeName)m=t(f,d),d.y+=10,d.pdf.table(d.x,d.y,m.rows,m.headers,{autoSize:!1,printHeaders:e.printHeaders,margins:d.pdf.margins_doc,css:i(f)}),d.y=d.pdf.lastCellPos.y+d.pdf.lastCellPos.h+20;else if("OL"===f.nodeName||"UL"===f.nodeName)v=1,o(f,d,e)||c(f,d,e),d.y+=10;else if("LI"===f.nodeName){var G=d.x;d.x+=20/d.pdf.internal.scaleFactor,d.y+=3,o(f,d,e)||c(f,d,e),d.x=G}else"BR"===f.nodeName?(d.y+=h["font-size"]*d.pdf.internal.scaleFactor,d.addText("\u2028",b(h))):o(f,d,e)||c(f,d,e)}}j++}return e.outY=d.y,k?d.setBlockBoundary(n):void 0},p={},q=function(a,b,c,d){function e(){b.pdf.internal.events.publish("imagesLoaded"),d(g)}function f(a,c,d){if(a){var f=new Image;g=++j,f.crossOrigin="",f.onerror=f.onload=function(){if(f.complete&&(0===f.src.indexOf("data:image/")&&(f.width=c||f.width||0,f.height=d||f.height||0),f.width+f.height)){var g=b.pdf.sHashCode(a)||a;p[g]=p[g]||f}--j||e()},f.src=a}}for(var g,h=a.getElementsByTagName("img"),i=h.length,j=0;i--;)f(h[i].getAttribute("src"),h[i].width,h[i].height);return j||e()},r=function(a,b,d){var e=a.getElementsByTagName("footer");if(e.length>0){e=e[0];var f=b.pdf.internal.write,g=b.y;b.pdf.internal.write=function(){},c(e,b,d);var h=Math.ceil(b.y-g)+5;b.y=g,b.pdf.internal.write=f,b.pdf.margins_doc.bottom+=h;for(var i=function(a){var f=void 0!==a?a.pageNumber:1,g=b.y;b.y=b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom,b.pdf.margins_doc.bottom-=h;for(var i=e.getElementsByTagName("span"),j=0;j<i.length;++j)(" "+i[j].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(i[j].innerHTML=f),(" "+i[j].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(i[j].innerHTML="###jsPDFVarTotalPages###");c(e,b,d),b.pdf.margins_doc.bottom+=h,b.y=g},j=e.getElementsByTagName("span"),k=0;k<j.length;++k)(" "+j[k].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&b.pdf.internal.events.subscribe("htmlRenderingFinished",b.pdf.putTotalPages.bind(b.pdf,"###jsPDFVarTotalPages###"),!0);b.pdf.internal.events.subscribe("addPage",i,!1),i(),u.FOOTER=1}},s=function(a,b,d,e,f,g){if(!b)return!1;"string"==typeof b||b.parentNode||(b=""+b.innerHTML),"string"==typeof b&&(b=function(a){var b,c,d,e;return d="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),e="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",c=document.createElement("div"),c.style.cssText=e,c.innerHTML='<iframe style="height:1px;width:1px" name="'+d+'" />',document.body.appendChild(c),b=window.frames[d],b.document.open(),b.document.writeln(a),b.document.close(),b.document.body}(b.replace(/<\/?script[^>]*?>/gi,"")));var h,i=new k(a,d,e,f);return q.call(this,b,i,f.elementHandlers,function(a){r(b,i,f.elementHandlers),c(b,i,f.elementHandlers),i.pdf.internal.events.publish("htmlRenderingFinished"),h=i.dispose(),"function"==typeof g?g(h):a&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),h||{x:i.x,y:i.y}},k.prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},k.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},k.prototype.executeWatchFunctions=function(a){var b=!1,c=[];if(this.watchFunctions.length>0){for(var d=0;d<this.watchFunctions.length;++d)!0===this.watchFunctions[d](a)?b=!0:c.push(this.watchFunctions[d]);this.watchFunctions=c}return b},k.prototype.splitFragmentsIntoLines=function(a,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;for(e=12,n=this.pdf.internal.scaleFactor,h={},f=void 0,m=void 0,g=void 0,i=void 0,r=void 0,l=void 0,k=void 0,j=void 0,o=[],p=[o],d=0,q=this.settings.width;a.length;)if(i=a.shift(),r=c.shift(),i)if(f=r["font-family"],m=r["font-style"],g=h[f+m],g||(g=this.pdf.internal.getFont(f,m).metadata.Unicode,h[f+m]=g),l={widths:g.widths,kerning:g.kerning,fontSize:r["font-size"]*e,textIndent:d},k=this.pdf.getStringUnitWidth(i,l)*l.fontSize/n,"\u2028"==i)o=[],p.push(o);else if(d+k>q){for(j=this.pdf.splitTextToSize(i,q,l),o.push([j.shift(),r]);j.length;)o=[[j.shift(),r]],p.push(o);d=this.pdf.getStringUnitWidth(o[0][0],l)*l.fontSize/n}else o.push([i,r]),d+=k;if(void 0!==r["text-align"]&&("center"===r["text-align"]||"right"===r["text-align"]||"justify"===r["text-align"]))for(var s=0;s<p.length;++s){var t=this.pdf.getStringUnitWidth(p[s][0][0],l)*l.fontSize/n;s>0&&(p[s][0][1]=b(p[s][0][1]));var u=q-t;if("right"===r["text-align"])p[s][0][1]["margin-left"]=u;else if("center"===r["text-align"])p[s][0][1]["margin-left"]=u/2;else if("justify"===r["text-align"]){var v=p[s][0][0].split(" ").length-1;p[s][0][1]["word-spacing"]=u/v,s===p.length-1&&(p[s][0][1]["word-spacing"]=0)}}return p},k.prototype.RenderTextFragment=function(a,b){var c,d,e;e=0,c=12,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),b.color,"Td"),e=Math.max(e,b["line-height"],b["font-size"]),this.pdf.internal.write(0,(-1*c*e).toFixed(2),"Td")),d=this.pdf.internal.getFont(b["font-family"],b["font-style"]);var f=this.getPdfColor(b.color);f!==this.lastTextColor&&(this.pdf.internal.write(f),this.lastTextColor=f),void 0!==b["word-spacing"]&&b["word-spacing"]>0&&this.pdf.internal.write(b["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+d.id,(c*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj"),void 0!==b["word-spacing"]&&this.pdf.internal.write(0,"Tw")},k.prototype.getPdfColor=function(a){var b,c,d,e=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/,f=e.exec(a);if(null!=f?(b=parseInt(f[1]),c=parseInt(f[2]),d=parseInt(f[3])):("#"!=a.charAt(0)&&((a=CssColors.colorNameToHex(a))||(a="#000000")),b=a.substring(1,3),b=parseInt(b,16),c=a.substring(3,5),c=parseInt(c,16),d=a.substring(5,7),d=parseInt(d,16)),"string"==typeof b&&/^#[0-9A-Fa-f]{6}$/.test(b)){var g=parseInt(b.substr(1),16);b=g>>16&255,c=g>>8&255,d=255&g}var h=this.f3;return 0===b&&0===c&&0===d||void 0===c?h(b/255)+" g":[h(b/255),h(c/255),h(d/255),"rg"].join(" ")},k.prototype.f3=function(a){return a.toFixed(3)},k.prototype.renderParagraph=function(a){var b,c,d,e,f,g,h,i,k,l,m,n,o,p;if(e=j(this.paragraph.text),o=this.paragraph.style,b=this.paragraph.blockstyle,
this.paragraph.priorblockstyle||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:b},e.join("").trim()){i=this.splitFragmentsIntoLines(e,o),h=void 0,k=void 0,c=12,d=c/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,n=(Math.max((b["margin-top"]||0)-this.priorMarginBottom,0)+(b["padding-top"]||0))*d,m=((b["margin-bottom"]||0)+(b["padding-bottom"]||0))*d,this.priorMarginBottom=b["margin-bottom"]||0,"always"===b["page-break-before"]&&(this.pdf.addPage(),this.y=0,n=((b["margin-top"]||0)+(b["padding-top"]||0))*d),l=this.pdf.internal.write,f=void 0,g=void 0,this.y+=n,l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var q=0;i.length;){for(h=i.shift(),k=0,f=0,g=h.length;f!==g;)h[f][0].trim()&&(k=Math.max(k,h[f][1]["line-height"],h[f][1]["font-size"]),p=7*h[f][1]["font-size"]),f++;var r=0,s=0;void 0!==h[0][1]["margin-left"]&&h[0][1]["margin-left"]>0&&(wantedIndent=this.pdf.internal.getCoordinateString(h[0][1]["margin-left"]),r=wantedIndent-q,q=wantedIndent);var s=Math.max(b["margin-left"]||0,0)*d;for(l(r+s,(-1*c*k).toFixed(2),"Td"),f=0,g=h.length;f!==g;)h[f][0]&&this.RenderTextFragment(h[f][0],h[f][1]),f++;if(this.y+=k*d,this.executeWatchFunctions(h[0][1])&&i.length>0){var t=[],u=[];i.forEach(function(a){for(var b=0,c=a.length;b!==c;)a[b][0]&&(t.push(a[b][0]+" "),u.push(a[b][1])),++b}),i=this.splitFragmentsIntoLines(j(t),u),l("ET","Q"),l("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return a&&"function"==typeof a&&a.call(this,this.x-9,this.y-p/2),l("ET","Q"),this.y+=m}},k.prototype.setBlockBoundary=function(a){return this.renderParagraph(a)},k.prototype.setBlockStyle=function(a){return this.paragraph.blockstyle=a},k.prototype.addText=function(a,b){return this.paragraph.text.push(a),this.paragraph.style.push(b)},d={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},f={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},e={normal:"normal",italic:"italic",oblique:"italic"},TextAlignMap={left:"left",right:"right",center:"center",justify:"justify"},g={none:"none",right:"right",left:"left"},h={none:"none",both:"both"},n={normal:1},a.fromHTML=function(a,b,c,d,e,f){return this.margins_doc=f||{top:0,bottom:0},d||(d={}),d.elementHandlers||(d.elementHandlers={}),s(this,a,isNaN(b)?4:b,isNaN(c)?4:c,d,e)}}(jsPDF.API),function(a){var b,c,d;a.addJS=function(a){return d=a,this.internal.events.subscribe("postPutResources",function(a){b=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(b+1)+" 0 R] >>","endobj"),c=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",d,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==b&&void 0!==c&&this.internal.write("/Names <</JavaScript "+b+" 0 R>>")}),this}}(jsPDF.API),function(a){a.events.push(["postPutResources",function(){var a=this,b=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var c=a.outline.render().split(/\r\n/),d=0;d<c.length;d++){var e=c[d],f=b.exec(e);if(null!=f){var g=f[1];a.internal.newObjectDeferredBegin(g)}a.internal.write(e)}if(this.outline.createNamedDestinations){for(var h=this.internal.pages.length,i=[],d=0;h>d;d++){var j=a.internal.newObject();i.push(j);var k=a.internal.getPageInfo(d+1);a.internal.write("<< /D["+k.objId+" 0 R /XYZ null null null]>> endobj")}var l=a.internal.newObject();a.internal.write("<< /Names [ ");for(var d=0;d<i.length;d++)a.internal.write("(page_"+(d+1)+")"+i[d]+" 0 R");a.internal.write(" ] >>","endobj"),a.internal.newObject(),a.internal.write("<< /Dests "+l+" 0 R"),a.internal.write(">>","endobj")}}]),a.events.push(["putCatalog",function(){var a=this;a.outline.root.children.length>0&&(a.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&a.internal.write("/Names "+namesOid+" 0 R"))}]),a.events.push(["initialized",function(){var a=this;a.outline={createNamedDestinations:!1,root:{children:[]}},a.outline.add=function(a,b,c){var d={title:b,options:c,children:[]};return null==a&&(a=this.root),a.children.push(d),d},a.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=a,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},a.outline.genIds_r=function(b){b.id=a.internal.newObjectDeferred();for(var c=0;c<b.children.length;c++)this.genIds_r(b.children[c])},a.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},a.outline.renderItems=function(b){for(var c=0;c<b.children.length;c++){var d=b.children[c];this.objStart(d),this.line("/Title "+this.makeString(d.title)),this.line("/Parent "+this.makeRef(b)),c>0&&this.line("/Prev "+this.makeRef(b.children[c-1])),c<b.children.length-1&&this.line("/Next "+this.makeRef(b.children[c+1])),d.children.length>0&&(this.line("/First "+this.makeRef(d.children[0])),this.line("/Last "+this.makeRef(d.children[d.children.length-1])));var e=this.count=this.count_r({count:0},d);if(e>0&&this.line("/Count "+e),d.options&&d.options.pageNumber){var f=a.internal.getPageInfo(d.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}this.objEnd()}for(var c=0;c<b.children.length;c++){var d=b.children[c];this.renderItems(d)}},a.outline.line=function(a){this.ctx.val+=a+"\r\n"},a.outline.makeRef=function(a){return a.id+" 0 R"},a.outline.makeString=function(b){return"("+a.internal.pdfEscape(b)+")"},a.outline.objStart=function(a){this.ctx.val+="\r\n"+a.id+" 0 obj\r\n<<\r\n"},a.outline.objEnd=function(a){this.ctx.val+=">> \r\nendobj\r\n"},a.outline.count_r=function(a,b){for(var c=0;c<b.children.length;c++)a.count++,this.count_r(a,b.children[c]);return a.count}}])}(jsPDF.API),function(a){var b=function(){return"function"!=typeof PNG||"function"!=typeof FlateStream},c=function(b){return b!==a.image_compression.NONE&&d()},d=function(){var a="function"==typeof Deflater;if(!a)throw new Error("requires deflate.js for compression");return a},e=function(b,c,d,e){var i=5,n=k;switch(e){case a.image_compression.FAST:i=3,n=j;break;case a.image_compression.MEDIUM:i=6,n=l;break;case a.image_compression.SLOW:i=9,n=m}b=h(b,c,d,n);var o=new Uint8Array(f(i)),p=g(b),q=new Deflater(i),r=q.append(b),s=q.flush(),t=o.length+r.length+s.length,u=new Uint8Array(t+4);return u.set(o),u.set(r,o.length),u.set(s,o.length+r.length),u[t++]=p>>>24&255,u[t++]=p>>>16&255,u[t++]=p>>>8&255,u[t++]=255&p,a.arrayBufferToBinaryString(u)},f=function(a,b){var c=8,d=Math.LOG2E*Math.log(32768)-8,e=d<<4|c,f=e<<8;return f|=Math.min(3,(b-1&255)>>1)<<6,f|=0,f+=31-f%31,[e,255&f]},g=function(a,b){for(var c,d=1,e=65535&d,f=d>>>16&65535,g=a.length,h=0;g>0;){c=g>b?b:g,g-=c;do{e+=a[h++],f+=e}while(--c);e%=65521,f%=65521}return(f<<16|e)>>>0},h=function(a,b,c,d){for(var e,f,g,h=a.length/b,i=new Uint8Array(a.length+h),j=o(),k=0;h>k;k++){if(g=k*b,e=a.subarray(g,g+b),d)i.set(d(e,c,f),g+k);else{for(var l=0,m=j.length,n=[];m>l;l++)n[l]=j[l](e,c,f);var q=p(n.concat());i.set(n[q],g+k)}f=e}return i},i=function(a,b,c){var d=Array.apply([],a);return d.unshift(0),d},j=function(a,b,c){var d,e=[],f=0,g=a.length;for(e[0]=1;g>f;f++)d=a[f-b]||0,e[f+1]=a[f]-d+256&255;return e},k=function(a,b,c){var d,e=[],f=0,g=a.length;for(e[0]=2;g>f;f++)d=c&&c[f]||0,e[f+1]=a[f]-d+256&255;return e},l=function(a,b,c){var d,e,f=[],g=0,h=a.length;for(f[0]=3;h>g;g++)d=a[g-b]||0,e=c&&c[g]||0,f[g+1]=a[g]+256-(d+e>>>1)&255;return f},m=function(a,b,c){var d,e,f,g,h=[],i=0,j=a.length;for(h[0]=4;j>i;i++)d=a[i-b]||0,e=c&&c[i]||0,f=c&&c[i-b]||0,g=n(d,e,f),h[i+1]=a[i]-g+256&255;return h},n=function(a,b,c){var d=a+b-c,e=Math.abs(d-a),f=Math.abs(d-b),g=Math.abs(d-c);return f>=e&&g>=e?a:g>=f?b:c},o=function(){return[i,j,k,l,m]},p=function(a){for(var b,c,d,e=0,f=a.length;f>e;)b=q(a[e].slice(1)),(c>b||!c)&&(c=b,d=e),e++;return d},q=function(a){for(var b=0,c=a.length,d=0;c>b;)d+=Math.abs(a[b++]);return d};a.processPNG=function(a,d,f,g,h){var i,j,k,l,m,n,o=this.color_spaces.DEVICE_RGB,p=this.decode.FLATE_DECODE,q=8;if(this.isArrayBuffer(a)&&(a=new Uint8Array(a)),this.isArrayBufferView(a)){if(b())throw new Error("PNG support requires png.js and zlib.js");if(i=new PNG(a),a=i.imgData,q=i.bits,o=i.colorSpace,l=i.colors,-1!==[4,6].indexOf(i.colorType)){if(8===i.bits)for(var r,s,t=32==i.pixelBitlength?new Uint32Array(i.decodePixels().buffer):16==i.pixelBitlength?new Uint16Array(i.decodePixels().buffer):new Uint8Array(i.decodePixels().buffer),u=t.length,v=new Uint8Array(u*i.colors),w=new Uint8Array(u),x=i.pixelBitlength-i.bits,y=0,z=0;u>y;y++){for(r=t[y],s=0;x>s;)v[z++]=r>>>s&255,s+=i.bits;w[y]=r>>>s&255}if(16===i.bits){for(var r,t=new Uint32Array(i.decodePixels().buffer),u=t.length,v=new Uint8Array(u*(32/i.pixelBitlength)*i.colors),w=new Uint8Array(u*(32/i.pixelBitlength)),A=i.colors>1,y=0,z=0,B=0;u>y;)r=t[y++],v[z++]=r>>>0&255,A&&(v[z++]=r>>>16&255,r=t[y++],v[z++]=r>>>0&255),w[B++]=r>>>16&255;q=8}c(g)?(a=e(v,i.width*i.colors,i.colors,g),n=e(w,i.width,1,g)):(a=v,n=w,p=null)}if(3===i.colorType&&(o=this.color_spaces.INDEXED,m=i.palette,i.transparency.indexed)){for(var C=i.transparency.indexed,D=0,y=0,u=C.length;u>y;++y)D+=C[y];if((D/=255)===u-1&&-1!==C.indexOf(0))k=[C.indexOf(0)];else if(D!==u){for(var t=i.decodePixels(),w=new Uint8Array(t.length),y=0,u=t.length;u>y;y++)w[y]=C[t[y]];n=e(w,i.width,1)}}return j=p===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+l+" /BitsPerComponent "+q+" /Columns "+i.width:"/Colors "+l+" /BitsPerComponent "+q+" /Columns "+i.width,(this.isArrayBuffer(a)||this.isArrayBufferView(a))&&(a=this.arrayBufferToBinaryString(a)),(n&&this.isArrayBuffer(n)||this.isArrayBufferView(n))&&(n=this.arrayBufferToBinaryString(n)),this.createImageInfo(a,i.width,i.height,o,q,p,d,f,j,k,m,n)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(jsPDF.API),function(a){a.autoPrint=function(){var a;return this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+a+" 0 R")}),this}}(jsPDF.API),function(a){var b=a.getCharWidthsArray=function(a,b){b||(b={});var c,d,e,f=b.widths?b.widths:this.internal.getFont().metadata.Unicode.widths,g=f.fof?f.fof:1,h=b.kerning?b.kerning:this.internal.getFont().metadata.Unicode.kerning,i=h.fof?h.fof:1,j=0,k=f[0]||g,l=[];for(c=0,d=a.length;d>c;c++)e=a.charCodeAt(c),l.push((f[e]||k)/g+(h[e]&&h[e][j]||0)/i),j=e;return l},c=function(a){for(var b=a.length,c=0;b;)b--,c+=a[b];return c},d=a.getStringUnitWidth=function(a,d){return c(b.call(this,a,d))},e=function(a,b,c,d){for(var e=[],f=0,g=a.length,h=0;f!==g&&h+b[f]<c;)h+=b[f],f++;e.push(a.slice(0,f));var i=f;for(h=0;f!==g;)h+b[f]>d&&(e.push(a.slice(i,f)),h=0,i=f),h+=b[f],f++;return i!==f&&e.push(a.slice(i,f)),e},f=function(a,f,g){g||(g={});var h,i,j,k,l,m,n=[],o=[n],p=g.textIndent||0,q=0,r=0,s=a.split(" "),t=b(" ",g)[0];if(m=-1===g.lineIndent?s[0].length+2:g.lineIndent||0){var u=Array(m).join(" "),v=[];s.map(function(a){a=a.split(/\s*\n/),a.length>1?v=v.concat(a.map(function(a,b){return(b&&a.length?"\n":"")+a})):v.push(a[0])}),s=v,m=d(u,g)}for(j=0,k=s.length;k>j;j++){var w=0;if(h=s[j],m&&"\n"==h[0]&&(h=h.substr(1),w=1),i=b(h,g),r=c(i),p+q+r>f||w){if(r>f){for(l=e(h,i,f-(p+q),f),n.push(l.shift()),n=[l.pop()];l.length;)o.push([l.shift()]);r=c(i.slice(h.length-n[0].length))}else n=[h];o.push(n),p=r+m,q=t}else n.push(h),p+=q+r,q=t}if(m)var x=function(a,b){return(b?u:"")+a.join(" ")};else var x=function(a){return a.join(" ")};return o.map(x)};a.splitTextToSize=function(a,b,c){c||(c={});var d,e=c.fontSize||this.internal.getFontSize(),g=function(a){var b={0:1},c={};if(a.widths&&a.kerning)return{widths:a.widths,kerning:a.kerning};var d=this.internal.getFont(a.fontName,a.fontStyle),e="Unicode";return d.metadata[e]?{widths:d.metadata[e].widths||b,kerning:d.metadata[e].kerning||c}:{widths:b,kerning:c}}.call(this,c);d=Array.isArray(a)?a:a.split(/\r?\n/);var h=1*this.internal.scaleFactor*b/e;g.textIndent=c.textIndent?1*c.textIndent*this.internal.scaleFactor/e:0,g.lineIndent=c.lineIndent;var i,j,k=[];for(i=0,j=d.length;j>i;i++)k=k.concat(f(d[i],h,g));return k}}(jsPDF.API),function(a){var b=function(a){for(var b="0123456789abcdef",c="klmnopqrstuvwxyz",d={},e=0;e<c.length;e++)d[c[e]]=b[e];var f,g,h,i,j,k={},l=1,m=k,n=[],o="",p="",q=a.length-1;for(e=1;e!=q;)j=a[e],e+=1,"'"==j?g?(i=g.join(""),g=f):g=[]:g?g.push(j):"{"==j?(n.push([m,i]),m={},i=f):"}"==j?(h=n.pop(),h[0][h[1]]=m,i=f,m=h[0]):"-"==j?l=-1:i===f?d.hasOwnProperty(j)?(o+=d[j],i=parseInt(o,16)*l,l=1,o=""):o+=j:d.hasOwnProperty(j)?(p+=d[j],m[i]=parseInt(p,16)*l,l=1,i=f,p=""):p+=j;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},e={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};a.events.push(["addFont",function(a){var b,c,f,g="Unicode";b=e[g][a.PostScriptName],b&&(c=a.metadata[g]?a.metadata[g]:a.metadata[g]={},c.widths=b.widths,c.kerning=b.kerning),(f=d[g][a.PostScriptName])&&(c=a.metadata[g]?a.metadata[g]:a.metadata[g]={},c.encoding=f,f.codePages&&f.codePages.length&&(a.encoding=f.codePages[0]))}])}(jsPDF.API),function(a){a.addSVG=function(a,b,c,d,e){function f(a,b){var c=b.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:c.appendChild(b.createTextNode(a)),b.getElementsByTagName("head")[0].appendChild(c)}function g(a){var b=a.createElement("iframe");return f(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",a),b.name="childframe",b.setAttribute("width",0),b.setAttribute("height",0),b.setAttribute("frameborder","0"),b.setAttribute("scrolling","no"),b.setAttribute("seamless","seamless"),b.setAttribute("class","jsPDF_sillysvg_iframe"),a.body.appendChild(b),b}function h(a,b){var c=(b.contentWindow||b.contentDocument).document;return c.write(a),c.close(),c.getElementsByTagName("svg")[0]}function i(a){for(var b=parseFloat(a[1]),c=parseFloat(a[2]),d=[],e=3,f=a.length;f>e;)"c"===a[e]?(d.push([parseFloat(a[e+1]),parseFloat(a[e+2]),parseFloat(a[e+3]),parseFloat(a[e+4]),parseFloat(a[e+5]),parseFloat(a[e+6])]),e+=7):"l"===a[e]?(d.push([parseFloat(a[e+1]),parseFloat(a[e+2])]),e+=3):e+=1;return[b,c,d]}var j;if(b===j||c===j)throw new Error("addSVG needs values for 'x' and 'y'");var k=g(document),l=h(a,k),m=[1,1],n=parseFloat(l.getAttribute("width")),o=parseFloat(l.getAttribute("height"));n&&o&&(d&&e?m=[d/n,e/o]:d?m=[d/n,d/n]:e&&(m=[e/o,e/o]));var p,q,r,s,t=l.childNodes;for(p=0,q=t.length;q>p;p++)r=t[p],r.tagName&&"PATH"===r.tagName.toUpperCase()&&(s=i(r.getAttribute("d").split(" ")),s[0]=s[0]*m[0]+b,s[1]=s[1]*m[1]+c,this.lines.call(this,s[2],s[0],s[1],m));return this}}(jsPDF.API),function(a){a.putTotalPages=function(a){for(var b=new RegExp(a,"g"),c=1;c<=this.internal.getNumberOfPages();c++)for(var d=0;d<this.internal.pages[c].length;d++)this.internal.pages[c][d]=this.internal.pages[c][d].replace(b,this.internal.getNumberOfPages());return this}}(jsPDF.API),function(a){if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return void new Blob}catch(a){}var b=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},d=function(a,b,c){this.data=a,this.size=a.length,this.type=b,this.encoding=c},e=c.prototype,f=d.prototype,g=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=a.URL||a.webkitURL||a,l=k.createObjectURL,m=k.revokeObjectURL,n=k,o=a.btoa,p=a.atob,q=a.ArrayBuffer,r=a.Uint8Array,s=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=a.URL=function(a){var b,c=document.createElementNS("http://www.w3.org/1999/xhtml","a");return c.href=a,"origin"in c||("data:"===c.protocol.toLowerCase()?c.origin=null:(b=a.match(s),c.origin=b&&b[1])),c}),n.createObjectURL=function(a){var b,c=a.type;return null===c&&(c="application/octet-stream"),a instanceof d?(b="data:"+c,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(a){var c=this.data;if(r&&(a instanceof q||a instanceof r)){for(var e="",f=new r(a),i=0,j=f.length;j>i;i++)e+=String.fromCharCode(f[i]);c.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!g)throw new h("NOT_READABLE_ERR");var k=new g;c.push(k.readAsBinaryString(a))
}else a instanceof d?"base64"===a.encoding&&p?c.push(p(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!=typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=arguments.length;return 3>e&&(c=null),new d(this.data.slice(a,e>1?b:this.data.length),c,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0,delete this.data},c}(a);a.Blob=function(a,c){var d=c?c.type||"":"",e=new b;if(a)for(var f=0,g=a.length;g>f;f++)Uint8Array&&a[f]instanceof Uint8Array?e.append(a[f].buffer):e.append(a[f]);var h=e.getBlob(d);return!h.slice&&h.webkitSlice&&(h.slice=h.webkitSlice),h};var c=Object.getPrototypeOf||function(a){return a.__proto__};a.Blob.prototype=c(new a.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||function(a){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),h=a.webkitRequestFileSystem,i=a.requestFileSystem||h||a.mozRequestFileSystem,j=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},k="application/octet-stream",l=0,m=500,n=function(b){var d=function(){"string"==typeof b?c().revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,m)},o=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){j(a)}}},p=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a},q=function(b,j,m){m||(b=p(b));var q,r,s,t=this,u=b.type,v=!1,w=function(){o(t,"writestart progress write writeend".split(" "))},x=function(){if(r&&g&&"undefined"!=typeof FileReader){var d=new FileReader;return d.onloadend=function(){var a=d.result;r.location.href="data:attachment/file"+a.slice(a.search(/[,;]/)),t.readyState=t.DONE,w()},d.readAsDataURL(b),void(t.readyState=t.INIT)}if(!v&&q||(q=c().createObjectURL(b)),r)r.location.href=q;else{void 0==a.open(q,"_blank")&&g&&(a.location.href=q)}t.readyState=t.DONE,w(),n(q)},y=function(a){return function(){return t.readyState!==t.DONE?a.apply(this,arguments):void 0}},z={create:!0,exclusive:!1};return t.readyState=t.INIT,j||(j="download"),e?(q=c().createObjectURL(b),void setTimeout(function(){d.href=q,d.download=j,f(d),w(),n(q),t.readyState=t.DONE})):(a.chrome&&u&&u!==k&&(s=b.slice||b.webkitSlice,b=s.call(b,0,b.size,k),v=!0),h&&"download"!==j&&(j+=".download"),(u===k||h)&&(r=a),i?(l+=b.size,void i(a.TEMPORARY,l,y(function(a){a.root.getDirectory("saved",z,y(function(a){var c=function(){a.getFile(j,z,y(function(a){a.createWriter(y(function(c){c.onwriteend=function(b){r.location.href=a.toURL(),t.readyState=t.DONE,o(t,"writeend",b),n(a)},c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=t["on"+a]}),c.write(b),t.abort=function(){c.abort(),t.readyState=t.DONE},t.readyState=t.WRITING}),x)}),x)};a.getFile(j,{create:!1},y(function(a){a.remove(),c()}),y(function(a){a.code===a.NOT_FOUND_ERR?c():x()}))}),x)}),x)):void x())},r=q.prototype,s=function(a,b,c){return new q(a,b,c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return c||(a=p(a)),navigator.msSaveOrOpenBlob(a,b||"download")}:(r.abort=function(){var a=this;a.readyState=a.DONE,o(a,"abort")},r.readyState=r.INIT=0,r.WRITING=1,r.DONE=2,r.error=r.onwritestart=r.onprogress=r.onwrite=r.onabort=r.onerror=r.onwriteend=null,s)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports&&(module.exports.saveAs=saveAs),function(a,b){"object"==typeof module?module.exports=b():a.adler32cs=b()}(jsPDF,function(){var a="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,b=null,c=function(){if(!a)return function(){return!1};try{var c=require("buffer");"function"==typeof c.Buffer&&(b=c.Buffer)}catch(a){}return function(a){return a instanceof ArrayBuffer||null!==b&&a instanceof b}}(),d=function(){return null!==b?function(a){return new b(a,"utf8").toString("binary")}:function(a){return unescape(encodeURIComponent(a))}}(),e=65521,f=function(a,b){for(var c=65535&a,d=a>>>16,f=0,g=b.length;g>f;f++)c=(c+(255&b.charCodeAt(f)))%e,d=(d+c)%e;return(d<<16|c)>>>0},g=function(a,b){for(var c=65535&a,d=a>>>16,f=0,g=b.length;g>f;f++)c=(c+b[f])%e,d=(d+c)%e;return(d<<16|c)>>>0},h={},i=h.Adler32=function(){var b=function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(a=null==a?1:+a))throw new Error("First arguments needs to be a finite number.");this.checksum=a>>>0},e=b.prototype={};return e.constructor=b,b.from=function(a){return a.prototype=e,a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw new Error("First argument needs to be a string.");this.checksum=f(1,a.toString())}),b.fromUtf8=function(a){return a.prototype=e,a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw new Error("First argument needs to be a string.");var c=d(a.toString());this.checksum=f(1,c)}),a&&(b.fromBuffer=function(a){return a.prototype=e,a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!c(a))throw new Error("First argument needs to be ArrayBuffer.");var d=new Uint8Array(a);return this.checksum=g(1,d)})),e.update=function(a){if(null==a)throw new Error("First argument needs to be a string.");return a=a.toString(),this.checksum=f(this.checksum,a)},e.updateUtf8=function(a){if(null==a)throw new Error("First argument needs to be a string.");var b=d(a.toString());return this.checksum=f(this.checksum,b)},a&&(e.updateBuffer=function(a){if(!c(a))throw new Error("First argument needs to be ArrayBuffer.");var b=new Uint8Array(a);return this.checksum=g(this.checksum,b)}),e.clone=function(){return new i(this.checksum)},b}();return h.from=function(a){if(null==a)throw new Error("First argument needs to be a string.");return f(1,a.toString())},h.fromUtf8=function(a){if(null==a)throw new Error("First argument needs to be a string.");var b=d(a.toString());return f(1,b)},a&&(h.fromBuffer=function(a){if(!c(a))throw new Error("First argument need to be ArrayBuffer.");var b=new Uint8Array(a);return g(1,b)}),h});var CssColors={};CssColors._colorsTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},CssColors.colorNameToHex=function(a){return a=a.toLowerCase(),void 0!==this._colorsTable[a]&&this._colorsTable[a]};var Deflater=function(a){function b(){function a(a){var b,c,e,f,g,i,j=d.dyn_tree,k=d.stat_desc.static_tree,l=d.stat_desc.extra_bits,m=d.stat_desc.extra_base,o=d.stat_desc.max_length,p=0;for(f=0;h>=f;f++)a.bl_count[f]=0;for(j[2*a.heap[a.heap_max]+1]=0,b=a.heap_max+1;n>b;b++)c=a.heap[b],f=j[2*j[2*c+1]+1]+1,f>o&&(f=o,p++),j[2*c+1]=f,c>d.max_code||(a.bl_count[f]++,g=0,c>=m&&(g=l[c-m]),i=j[2*c],a.opt_len+=i*(f+g),k&&(a.static_len+=i*(k[2*c+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0);for(f=o;0!==f;f--)for(c=a.bl_count[f];0!==c;)(e=a.heap[--b])>d.max_code||(j[2*e+1]!=f&&(a.opt_len+=(f-j[2*e+1])*j[2*e],j[2*e+1]=f),c--)}}function b(a,b){var c=0;do{c|=1&a,a>>>=1,c<<=1}while(--b>0);return c>>>1}function c(a,c,d){var e,f,g,i=[],j=0;for(e=1;h>=e;e++)i[e]=j=j+d[e-1]<<1;for(f=0;c>=f;f++)0!==(g=a[2*f+1])&&(a[2*f]=b(i[g]++,g))}var d=this;d.build_tree=function(b){var e,f,g,h=d.dyn_tree,i=d.stat_desc.static_tree,j=d.stat_desc.elems,k=-1;for(b.heap_len=0,b.heap_max=n,e=0;j>e;e++)0!==h[2*e]?(b.heap[++b.heap_len]=k=e,b.depth[e]=0):h[2*e+1]=0;for(;b.heap_len<2;)g=b.heap[++b.heap_len]=2>k?++k:0,h[2*g]=1,b.depth[g]=0,b.opt_len--,i&&(b.static_len-=i[2*g+1]);for(d.max_code=k,e=Math.floor(b.heap_len/2);e>=1;e--)b.pqdownheap(h,e);g=j;do{e=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(h,1),f=b.heap[1],b.heap[--b.heap_max]=e,b.heap[--b.heap_max]=f,h[2*g]=h[2*e]+h[2*f],b.depth[g]=Math.max(b.depth[e],b.depth[f])+1,h[2*e+1]=h[2*f+1]=g,b.heap[1]=g++,b.pqdownheap(h,1)}while(b.heap_len>=2);b.heap[--b.heap_max]=b.heap[1],a(b),c(h,d.max_code,b.bl_count)}}function c(a,b,c,d,e){var f=this;f.static_tree=a,f.extra_bits=b,f.extra_base=c,f.elems=d,f.max_length=e}function d(a,b,c,d,e){var f=this;f.good_length=a,f.max_lazy=b,f.nice_length=c,f.max_chain=d,f.func=e}function e(a,b,c,d){var e=a[2*b],f=a[2*c];return f>e||e==f&&d[b]<=d[c]}function f(){function a(){var a;for(Ea=2*Aa,Ga[Ia-1]=0,a=0;Ia-1>a;a++)Ga[a]=0;Va=N[Wa].max_lazy,Ya=N[Wa].good_length,Za=N[Wa].nice_length,Ua=N[Wa].max_chain,Qa=0,Ma=0,Sa=0,Na=Ta=_-1,Pa=0,Ha=0}function d(){var a;for(a=0;m>a;a++)$a[2*a]=0;for(a=0;i>a;a++)_a[2*a]=0;for(a=0;j>a;a++)ab[2*a]=0;$a[2*o]=1,bb.opt_len=bb.static_len=0,hb=jb=0}function f(){cb.dyn_tree=$a,cb.stat_desc=c.static_l_desc,db.dyn_tree=_a,db.stat_desc=c.static_d_desc,eb.dyn_tree=ab,eb.stat_desc=c.static_bl_desc,lb=0,mb=0,kb=8,d()}function g(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),a[2*(b+1)+1]=65535,c=0;b>=c;c++)d=f,f=a[2*(c+1)+1],++g<h&&d==f||(i>g?ab[2*d]+=g:0!==d?(d!=e&&ab[2*d]++,ab[2*p]++):10>=g?ab[2*q]++:ab[2*r]++,g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4))}function h(){var a;for(g($a,cb.max_code),g(_a,db.max_code),eb.build_tree(bb),a=j-1;a>=3&&0===ab[2*b.bl_order[a]+1];a--);return bb.opt_len+=3*(a+1)+5+5+4,a}function k(a){bb.pending_buf[bb.pending++]=a}function n(a){k(255&a),k(a>>>8&255)}function H(a){k(a>>8&255),k(255&a)}function ca(a,b){var c,d=b;mb>s-d?(c=a,lb|=c<<mb&65535,n(lb),lb=c>>>s-mb,mb+=d-s):(lb|=a<<mb&65535,mb+=d)}function da(a,b){var c=2*a;ca(65535&b[c],65535&b[c+1])}function ea(a,b){var c,d,e=-1,f=a[1],g=0,h=7,i=4;for(0===f&&(h=138,i=3),c=0;b>=c;c++)if(d=f,f=a[2*(c+1)+1],!(++g<h&&d==f)){if(i>g)do{da(d,ab)}while(0!=--g);else 0!==d?(d!=e&&(da(d,ab),g--),da(p,ab),ca(g-3,2)):10>=g?(da(q,ab),ca(g-3,3)):(da(r,ab),ca(g-11,7));g=0,e=d,0===f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4)}}function fa(a,c,d){var e;for(ca(a-257,5),ca(c-1,5),ca(d-4,4),e=0;d>e;e++)ca(ab[2*b.bl_order[e]+1],3);ea($a,a-1),ea(_a,c-1)}function ga(){16==mb?(n(lb),lb=0,mb=0):mb>=8&&(k(255&lb),lb>>>=8,mb-=8)}function ha(){ca(Z<<1,3),da(o,c.static_ltree),ga(),9>1+kb+10-mb&&(ca(Z<<1,3),da(o,c.static_ltree),ga()),kb=7}function ia(a,c){var d,e,f;if(bb.pending_buf[ib+2*hb]=a>>>8&255,bb.pending_buf[ib+2*hb+1]=255&a,bb.pending_buf[fb+hb]=255&c,hb++,0===a?$a[2*c]++:(jb++,a--,$a[2*(b._length_code[c]+l+1)]++,_a[2*b.d_code(a)]++),0==(8191&hb)&&Wa>2){for(d=8*hb,e=Qa-Ma,f=0;i>f;f++)d+=_a[2*f]*(5+b.extra_dbits[f]);if(d>>>=3,jb<Math.floor(hb/2)&&d<Math.floor(e/2))return!0}return hb==gb-1}function ja(a,c){var d,e,f,g,h=0;if(0!==hb)do{d=bb.pending_buf[ib+2*h]<<8&65280|255&bb.pending_buf[ib+2*h+1],e=255&bb.pending_buf[fb+h],h++,0===d?da(e,a):(f=b._length_code[e],da(f+l+1,a),g=b.extra_lbits[f],0!==g&&(e-=b.base_length[f],ca(e,g)),d--,f=b.d_code(d),da(f,c),0!==(g=b.extra_dbits[f])&&(d-=b.base_dist[f],ca(d,g)))}while(hb>h);da(o,a),kb=a[2*o+1]}function ka(){mb>8?n(lb):mb>0&&k(255&lb),lb=0,mb=0}function la(a,b,c){ka(),kb=8,c&&(n(b),n(~b)),bb.pending_buf.set(Da.subarray(a,a+b),bb.pending),bb.pending+=b}function ma(a,b,c){ca((Y<<1)+(c?1:0),3),la(a,b,!0)}function na(a,b,e){var f,g,i=0;Wa>0?(cb.build_tree(bb),db.build_tree(bb),i=h(),f=bb.opt_len+3+7>>>3,g=bb.static_len+3+7>>>3,f>=g&&(f=g)):f=g=b+5,f>=b+4&&-1!=a?ma(a,b,e):g==f?(ca((Z<<1)+(e?1:0),3),ja(c.static_ltree,c.static_dtree)):(ca(($<<1)+(e?1:0),3),fa(cb.max_code+1,db.max_code+1,i+1),ja($a,_a)),d(),e&&ka()}function oa(a){na(Ma>=0?Ma:-1,Qa-Ma,a),Ma=Qa,va.flush_pending()}function pa(){var a,b,c,d;do{if(0===(d=Ea-Sa-Qa)&&0===Qa&&0===Sa)d=Aa;else if(-1==d)d--;else if(Qa>=Aa+Aa-ba){Da.set(Da.subarray(Aa,Aa+Aa),0),Ra-=Aa,Qa-=Aa,Ma-=Aa,a=Ia,c=a;do{b=65535&Ga[--c],Ga[c]=b>=Aa?b-Aa:0}while(0!=--a);a=Aa,c=a;do{b=65535&Fa[--c],Fa[c]=b>=Aa?b-Aa:0}while(0!=--a);d+=Aa}if(0===va.avail_in)return;a=va.read_buf(Da,Qa+Sa,d),(Sa+=a)>=_&&(Ha=255&Da[Qa],Ha=(Ha<<La^255&Da[Qa+1])&Ka)}while(ba>Sa&&0!==va.avail_in)}function qa(a){var b,c=65535;for(c>xa-5&&(c=xa-5);;){if(1>=Sa){if(pa(),0===Sa&&a==x)return P;if(0===Sa)break}if(Qa+=Sa,Sa=0,b=Ma+c,(0===Qa||Qa>=b)&&(Sa=Qa-b,Qa=b,oa(!1),0===va.avail_out))return P;if(Qa-Ma>=Aa-ba&&(oa(!1),0===va.avail_out))return P}return oa(a==A),0===va.avail_out?a==A?R:P:a==A?S:Q}function ra(a){var b,c,d=Ua,e=Qa,f=Ta,g=Qa>Aa-ba?Qa-(Aa-ba):0,h=Za,i=Ca,j=Qa+aa,k=Da[e+f-1],l=Da[e+f];Ta>=Ya&&(d>>=2),h>Sa&&(h=Sa);do{if(b=a,Da[b+f]==l&&Da[b+f-1]==k&&Da[b]==Da[e]&&Da[++b]==Da[e+1]){e+=2,b++;do{}while(Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&Da[++e]==Da[++b]&&j>e);if(c=aa-(j-e),e=j-aa,c>f){if(Ra=a,f=c,c>=h)break;k=Da[e+f-1],l=Da[e+f]}}}while((a=65535&Fa[a&i])>g&&0!=--d);return Sa>=f?f:Sa}function sa(a){for(var b,c=0;;){if(ba>Sa){if(pa(),ba>Sa&&a==x)return P;if(0===Sa)break}if(Sa>=_&&(Ha=(Ha<<La^255&Da[Qa+(_-1)])&Ka,c=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa),0!==c&&Aa-ba>=(Qa-c&65535)&&Xa!=v&&(Na=ra(c)),Na>=_)if(b=ia(Qa-Ra,Na-_),Sa-=Na,Va>=Na&&Sa>=_){Na--;do{Qa++,Ha=(Ha<<La^255&Da[Qa+(_-1)])&Ka,c=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa}while(0!=--Na);Qa++}else Qa+=Na,Na=0,Ha=255&Da[Qa],Ha=(Ha<<La^255&Da[Qa+1])&Ka;else b=ia(0,255&Da[Qa]),Sa--,Qa++;if(b&&(oa(!1),0===va.avail_out))return P}return oa(a==A),0===va.avail_out?a==A?R:P:a==A?S:Q}function ta(a){for(var b,c,d=0;;){if(ba>Sa){if(pa(),ba>Sa&&a==x)return P;if(0===Sa)break}if(Sa>=_&&(Ha=(Ha<<La^255&Da[Qa+(_-1)])&Ka,d=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa),Ta=Na,Oa=Ra,Na=_-1,0!==d&&Va>Ta&&Aa-ba>=(Qa-d&65535)&&(Xa!=v&&(Na=ra(d)),5>=Na&&(Xa==u||Na==_&&Qa-Ra>4096)&&(Na=_-1)),Ta>=_&&Ta>=Na){c=Qa+Sa-_,b=ia(Qa-1-Oa,Ta-_),Sa-=Ta-1,Ta-=2;do{++Qa<=c&&(Ha=(Ha<<La^255&Da[Qa+(_-1)])&Ka,d=65535&Ga[Ha],Fa[Qa&Ca]=Ga[Ha],Ga[Ha]=Qa)}while(0!=--Ta);if(Pa=0,Na=_-1,Qa++,b&&(oa(!1),0===va.avail_out))return P}else if(0!==Pa){if(b=ia(0,255&Da[Qa-1]),b&&oa(!1),Qa++,Sa--,0===va.avail_out)return P}else Pa=1,Qa++,Sa--}return 0!==Pa&&(b=ia(0,255&Da[Qa-1]),Pa=0),oa(a==A),0===va.avail_out?a==A?R:P:a==A?S:Q}function ua(b){return b.total_in=b.total_out=0,b.msg=null,bb.pending=0,bb.pending_out=0,wa=V,za=x,f(),a(),B}var va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb=this,cb=new b,db=new b,eb=new b;bb.depth=[];var fb,gb,hb,ib,jb,kb,lb,mb;bb.bl_count=[],bb.heap=[],$a=[],_a=[],ab=[],bb.pqdownheap=function(a,b){for(var c=bb.heap,d=c[b],f=b<<1;f<=bb.heap_len&&(f<bb.heap_len&&e(a,c[f+1],c[f],bb.depth)&&f++,!e(a,d,c[f],bb.depth));)c[b]=c[f],b=f,f<<=1;c[b]=d},bb.deflateInit=function(a,b,c,d,e,f){return d||(d=X),e||(e=J),f||(f=w),a.msg=null,b==t&&(b=6),1>e||e>I||d!=X||9>c||c>15||0>b||b>9||0>f||f>v?E:(a.dstate=bb,Ba=c,Aa=1<<Ba,Ca=Aa-1,Ja=e+7,Ia=1<<Ja,Ka=Ia-1,La=Math.floor((Ja+_-1)/_),Da=new Uint8Array(2*Aa),Fa=[],Ga=[],gb=1<<e+6,bb.pending_buf=new Uint8Array(4*gb),xa=4*gb,ib=Math.floor(gb/2),fb=3*gb,Wa=b,Xa=f,ya=255&d,ua(a))},bb.deflateEnd=function(){return wa!=U&&wa!=V&&wa!=W?E:(bb.pending_buf=null,Ga=null,Fa=null,Da=null,bb.dstate=null,wa==V?F:B)},bb.deflateParams=function(a,b,c){var d=B;return b==t&&(b=6),0>b||b>9||0>c||c>v?E:(N[Wa].func!=N[b].func&&0!==a.total_in&&(d=a.deflate(y)),Wa!=b&&(Wa=b,Va=N[Wa].max_lazy,Ya=N[Wa].good_length,Za=N[Wa].nice_length,Ua=N[Wa].max_chain),Xa=c,d)},bb.deflateSetDictionary=function(a,b,c){var d,e=c,f=0;if(!b||wa!=U)return E;if(_>e)return B;for(e>Aa-ba&&(e=Aa-ba,f=c-e),Da.set(b.subarray(f,f+e),0),Qa=e,Ma=e,Ha=255&Da[0],Ha=(Ha<<La^255&Da[1])&Ka,d=0;e-_>=d;d++)Ha=(Ha<<La^255&Da[d+(_-1)])&Ka,Fa[d&Ca]=Ga[Ha],Ga[Ha]=d;return B},bb.deflate=function(a,b){var c,d,e,f,g;if(b>A||0>b)return E;if(!a.next_out||!a.next_in&&0!==a.avail_in||wa==W&&b!=A)return a.msg=O[D-E],E;if(0===a.avail_out)return a.msg=O[D-G],G;if(va=a,f=za,za=b,wa==U&&(d=X+(Ba-8<<4)<<8,e=(Wa-1&255)>>1,e>3&&(e=3),d|=e<<6,0!==Qa&&(d|=T),d+=31-d%31,wa=V,H(d)),0!==bb.pending){if(va.flush_pending(),0===va.avail_out)return za=-1,B}else if(0===va.avail_in&&f>=b&&b!=A)return va.msg=O[D-G],G;if(wa==W&&0!==va.avail_in)return a.msg=O[D-G],G;if(0!==va.avail_in||0!==Sa||b!=x&&wa!=W){switch(g=-1,N[Wa].func){case K:g=qa(b);break;case L:g=sa(b);break;case M:g=ta(b)}if(g!=R&&g!=S||(wa=W),g==P||g==R)return 0===va.avail_out&&(za=-1),B;if(g==Q){if(b==y)ha();else if(ma(0,0,!1),b==z)for(c=0;Ia>c;c++)Ga[c]=0;if(va.flush_pending(),0===va.avail_out)return za=-1,B}}return b!=A?B:C}}function g(){var a=this;a.next_in_index=0,a.next_out_index=0,a.avail_in=0,a.total_in=0,a.avail_out=0,a.total_out=0}var h=15,i=30,j=19,k=29,l=256,m=l+1+k,n=2*m+1,o=256,p=16,q=17,r=18,s=16,t=-1,u=1,v=2,w=0,x=0,y=1,z=3,A=4,B=0,C=1,D=2,E=-2,F=-3,G=-5,H=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];b._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],b.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],b.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],b.d_code=function(a){return 256>a?H[a]:H[256+(a>>>7)]},b.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],b.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],b.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],b.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],c.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],c.static_l_desc=new c(c.static_ltree,b.extra_lbits,l+1,m,h),c.static_d_desc=new c(c.static_dtree,b.extra_dbits,0,i,h),c.static_bl_desc=new c(null,b.extra_blbits,0,j,7);var I=9,J=8,K=0,L=1,M=2,N=[new d(0,0,0,0,K),new d(4,4,8,4,L),new d(4,5,16,8,L),new d(4,6,32,32,L),new d(4,4,16,16,M),new d(8,16,32,32,M),new d(8,16,128,128,M),new d(8,32,128,256,M),new d(32,128,258,1024,M),new d(32,258,258,4096,M)],O=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],P=0,Q=1,R=2,S=3,T=32,U=42,V=113,W=666,X=8,Y=0,Z=1,$=2,_=3,aa=258,ba=aa+_+1;return g.prototype={deflateInit:function(a,b){var c=this;return c.dstate=new f,b||(b=h),c.dstate.deflateInit(c,a,b)},deflate:function(a){var b=this;return b.dstate?b.dstate.deflate(b,a):E},deflateEnd:function(){var a=this;if(!a.dstate)return E;var b=a.dstate.deflateEnd();return a.dstate=null,b},deflateParams:function(a,b){var c=this;return c.dstate?c.dstate.deflateParams(c,a,b):E},deflateSetDictionary:function(a,b){var c=this;return c.dstate?c.dstate.deflateSetDictionary(c,a,b):E},read_buf:function(a,b,c){var d=this,e=d.avail_in;return e>c&&(e=c),0===e?0:(d.avail_in-=e,a.set(d.next_in.subarray(d.next_in_index,d.next_in_index+e),b),d.next_in_index+=e,d.total_in+=e,e)},flush_pending:function(){var a=this,b=a.dstate.pending;b>a.avail_out&&(b=a.avail_out),0!==b&&(a.next_out.set(a.dstate.pending_buf.subarray(a.dstate.pending_out,a.dstate.pending_out+b),a.next_out_index),a.next_out_index+=b,a.dstate.pending_out+=b,a.total_out+=b,a.avail_out-=b,a.dstate.pending-=b,0===a.dstate.pending&&(a.dstate.pending_out=0))}},function(a){var b=this,c=new g,d=512,e=x,f=new Uint8Array(d);void 0===a&&(a=t),c.deflateInit(a),c.next_out=f,b.append=function(a,b){var g,h=[],i=0,j=0,k=0;if(a.length){c.next_in_index=0,c.next_in=a,c.avail_in=a.length;do{if(c.next_out_index=0,c.avail_out=d,c.deflate(e)!=B)throw"deflating: "+c.msg;c.next_out_index&&(c.next_out_index==d?h.push(new Uint8Array(f)):h.push(new Uint8Array(f.subarray(0,c.next_out_index)))),k+=c.next_out_index,b&&c.next_in_index>0&&c.next_in_index!=i&&(b(c.next_in_index),i=c.next_in_index)}while(c.avail_in>0||0===c.avail_out);return g=new Uint8Array(k),h.forEach(function(a){g.set(a,j),j+=a.length}),g}},b.flush=function(){var a,b,e=[],g=0,h=0;do{if(c.next_out_index=0,c.avail_out=d,(a=c.deflate(A))!=C&&a!=B)throw"deflating: "+c.msg;d-c.avail_out>0&&e.push(new Uint8Array(f.subarray(0,c.next_out_index))),h+=c.next_out_index}while(c.avail_in>0||0===c.avail_out);return c.deflateEnd(),b=new Uint8Array(h),e.forEach(function(a){b.set(a,g),g+=a.length}),b}}}();(function(a,b,c,d,e,f,g){function h(a,b,c,d){return o(a,a,c,d,b).then(function(e){F("Document cloned");var f="["+Sa+"='true']";a.querySelector(f).removeAttribute(Sa);var g=e.contentWindow,h=g.document.querySelector(f);return("function"==typeof b.onclone?Promise.resolve(b.onclone(g.document)):Promise.resolve(!0)).then(function(){return i(h,e,b,c,d)})})}function i(a,c,d,e,f){var g=c.contentWindow,h=new Ia(g.document),i=new D(d,h),n=N(a),o="view"===d.type?e:l(g.document),p="view"===d.type?f:m(g.document),q=new Qa(o,p,i,d,b);return new P(a,q,h,i,d).ready.then(function(){F("Finished rendering");var b;return b="view"===d.type?k(q.canvas,{width:q.canvas.width,height:q.canvas.height,top:0,left:0,x:0,y:0}):a===g.document.body||a===g.document.documentElement||null!=d.canvas?q.canvas:k(q.canvas,{width:null!=d.width?d.width:n.width,height:null!=d.height?d.height:n.height,top:n.top,left:n.left,x:g.pageXOffset,y:g.pageYOffset}),j(c,d),b})}function j(a,b){b.removeContainer&&(a.parentNode.removeChild(a),F("Cleaned up container"))}function k(a,c){var d=b.createElement("canvas"),e=Math.min(a.width-1,Math.max(0,c.left)),f=Math.min(a.width,Math.max(1,c.left+c.width)),g=Math.min(a.height-1,Math.max(0,c.top)),h=Math.min(a.height,Math.max(1,c.top+c.height));return d.width=c.width,d.height=c.height,F("Cropping canvas at:","left:",c.left,"top:",c.top,"width:",f-e,"height:",h-g),F("Resulting crop with width",c.width,"and height",c.height," with x",e,"and y",g),d.getContext("2d").drawImage(a,e,g,f-e,h-g,c.x,c.y,f-e,h-g),d}function l(a){return Math.max(Math.max(a.body.scrollWidth,a.documentElement.scrollWidth),Math.max(a.body.offsetWidth,a.documentElement.offsetWidth),Math.max(a.body.clientWidth,a.documentElement.clientWidth))}function m(a){return Math.max(Math.max(a.body.scrollHeight,a.documentElement.scrollHeight),Math.max(a.body.offsetHeight,a.documentElement.offsetHeight),Math.max(a.body.clientHeight,a.documentElement.clientHeight))}function n(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}function o(a,b,c,d,e){s(a);var f=a.documentElement.cloneNode(!0),g=b.createElement("iframe");return g.className="html2canvas-container",g.style.visibility="hidden",g.style.position="fixed",g.style.left="-10000px",g.style.top="0px",g.style.border="0",g.width=c,g.height=d,g.scrolling="no",b.body.appendChild(g),new Promise(function(b){var c=g.contentWindow.document;g.contentWindow.onload=g.onload=function(){var f=setInterval(function(){c.body.childNodes.length>0&&(t(a,c),clearInterval(f),"view"===e.type&&g.contentWindow.scrollTo(d,h),b(g))},50)};var d=a.defaultView.pageXOffset,h=a.defaultView.pageYOffset;c.open(),c.write("<!DOCTYPE html><html></html>"),p(a,d,h),c.replaceChild(!0===e.javascriptEnabled?c.adoptNode(f):u(c.adoptNode(f)),c.documentElement),c.close()})}function p(a,b,c){b===a.defaultView.pageXOffset&&c===a.defaultView.pageYOffset||a.defaultView.scrollTo(b,c)}function q(b,c,d,e,f,g){return new za(b,c,a.document).then(r(b)).then(function(a){return o(a,d,e,f,g)})}function r(a){return function(c){var d,e=new DOMParser;try{d=e.parseFromString(c,"text/html")}catch(a){F("DOMParser not supported, falling back to createHTMLDocument"),d=b.implementation.createHTMLDocument("");try{d.open(),d.write(c),d.close()}catch(a){F("createHTMLDocument write not supported, falling back to document.body.innerHTML"),d.body.innerHTML=c}}var f=d.querySelector("base");if(!f||!f.href.host){var g=d.createElement("base");g.href=a,d.head.insertBefore(g,d.head.firstChild)}return d}}function s(a){[].slice.call(a.querySelectorAll("canvas"),0).forEach(function(a){a.setAttribute(Ta,"canvas-"+Ua++)})}function t(a,b){[].slice.call(a.querySelectorAll("["+Ta+"]"),0).forEach(function(a){try{var c=b.querySelector("["+Ta+'="'+a.getAttribute(Ta)+'"]');c&&(c.width=a.width,c.height=a.height,c.getContext("2d").putImageData(a.getContext("2d").getImageData(0,0,a.width,a.height),0,0))}catch(b){F("Unable to copy canvas content from",a,b)}a.removeAttribute(Ta)})}function u(a){return[].slice.call(a.childNodes,0).filter(v).forEach(function(b){"SCRIPT"===b.tagName?a.removeChild(b):u(b)}),a}function v(a){return a.nodeType===Node.ELEMENT_NODE}function w(a){var c=b.createElement("a");return c.href=a,c.href=c.href,c}function x(a){if(this.src=a,F("DummyImageContainer for",a),!this.promise||!this.image){F("Initiating DummyImageContainer"),x.prototype.image=new Image;var b=this.image;x.prototype.promise=new Promise(function(a,c){b.onload=a,b.onerror=c,b.src=n(),!0===b.complete&&a(b)})}}function y(a,c){var d,e,f=b.createElement("div"),g=b.createElement("img"),h=b.createElement("span"),i="Hidden Text";f.style.visibility="hidden",f.style.fontFamily=a,f.style.fontSize=c,f.style.margin=0,f.style.padding=0,b.body.appendChild(f),g.src=n(),g.width=1,g.height=1,g.style.margin=0,g.style.padding=0,g.style.verticalAlign="baseline",h.style.fontFamily=a,h.style.fontSize=c,h.style.margin=0,h.style.padding=0,
h.appendChild(b.createTextNode(i)),f.appendChild(h),f.appendChild(g),d=g.offsetTop-h.offsetTop+1,f.removeChild(h),f.appendChild(b.createTextNode(i)),f.style.lineHeight="normal",g.style.verticalAlign="super",e=g.offsetTop-f.offsetTop+1,b.body.removeChild(f),this.baseline=d,this.lineWidth=1,this.middle=e}function z(){this.data={}}function A(a,b,c){this.image=null,this.src=a;var d=this,e=N(a);this.promise=(b?new Promise(function(b){"about:blank"===a.contentWindow.document.URL||null==a.contentWindow.document.documentElement?a.contentWindow.onload=a.onload=function(){b(a)}:b(a)}):this.proxyLoad(c.proxy,e,c)).then(function(a){return html2canvas(a.contentWindow.document.documentElement,{type:"view",width:a.width,height:a.height,proxy:c.proxy,javascriptEnabled:c.javascriptEnabled,removeContainer:c.removeContainer,allowTaint:c.allowTaint,imageTimeout:c.imageTimeout/2})}).then(function(a){return d.image=a})}function B(a){this.src=a.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}function C(a,b){this.src=a,this.image=new Image;var c=this;this.tainted=null,this.promise=new Promise(function(d,e){c.image.onload=d,c.image.onerror=e,b&&(c.image.crossOrigin="anonymous"),c.image.src=a,!0===c.image.complete&&d(c.image)})}function D(b,c){this.link=null,this.options=b,this.support=c,this.origin=this.getOrigin(a.location.href)}function E(a){B.apply(this,arguments),this.type=this.TYPES.LINEAR;var b=null===a.args[0].match(this.stepRegExp);b?a.args[0].split(" ").reverse().forEach(function(a){switch(a){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var b=this.y0,c=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=c,this.y1=b}},this):(this.y0=0,this.y1=1),this.colorStops=a.args.slice(b?1:0).map(function(a){var b=a.match(this.stepRegExp);return{color:b[1],stop:"%"===b[3]?b[2]/100:null}},this),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(a,b){null===a.stop&&this.colorStops.slice(b).some(function(c,d){return null!==c.stop&&(a.stop=(c.stop-this.colorStops[b-1].stop)/(d+1)+this.colorStops[b-1].stop,!0)},this)},this)}function F(){a.html2canvas.logging&&a.console&&a.console.log&&Function.prototype.bind.call(a.console.log,a.console).apply(a.console,[Date.now()-a.html2canvas.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))}function G(a,b){this.node=a,this.parent=b,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function H(a){var b=a.options[a.selectedIndex||0];return b?b.text||"":""}function I(a){return a&&"matrix"===a[1]?a[2].split(",").map(function(a){return parseFloat(a.trim())}):void 0}function J(a){return-1!==a.toString().indexOf("%")}function K(a){var b,c,d,e,f,g,h,i=[],j=0,k=0,l=function(){b&&('"'===c.substr(0,1)&&(c=c.substr(1,c.length-2)),c&&h.push(c),"-"===b.substr(0,1)&&(e=b.indexOf("-",1)+1)>0&&(d=b.substr(0,e),b=b.substr(e)),i.push({prefix:d,method:b.toLowerCase(),value:f,args:h,image:null})),h=[],b=d=c=f=""};return h=[],b=d=c=f="",a.split("").forEach(function(a){if(!(0===j&&" \r\n\t".indexOf(a)>-1)){switch(a){case'"':g?g===a&&(g=null):g=a;break;case"(":if(g)break;if(0===j)return j=1,void(f+=a);k++;break;case")":if(g)break;if(1===j){if(0===k)return j=0,f+=a,void l();k--}break;case",":if(g)break;if(0===j)return void l();if(1===j&&0===k&&!b.match(/^url$/i))return h.push(c),c="",void(f+=a)}f+=a,0===j?b+=a:c+=a}}),l(),i}function L(a){return a.replace("px","")}function M(a){return parseFloat(a)}function N(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=null==a.offsetWidth?b.width:a.offsetWidth;return{top:b.top,bottom:b.bottom||b.top+b.height,right:b.left+c,left:b.left,width:c,height:null==a.offsetHeight?b.height:a.offsetHeight}}return{}}function O(a){var b=a.offsetParent?O(a.offsetParent):{top:0,left:0};return{top:a.offsetTop+b.top,bottom:a.offsetTop+a.offsetHeight+b.top,right:a.offsetLeft+b.left+a.offsetWidth,left:a.offsetLeft+b.left,width:a.offsetWidth,height:a.offsetHeight}}function P(a,b,c,d,e){F("Starting NodeParser"),this.renderer=b,this.options=e,this.range=null,this.support=c,this.renderQueue=[],this.stack=new Ha(!0,1,a.ownerDocument,null);var f=new G(a,null);if(a===a.ownerDocument.documentElement){var g=new G(this.renderer.isTransparent(f.css("backgroundColor"))?a.ownerDocument.body:a.ownerDocument.documentElement,null);b.rectangle(0,0,b.width,b.height,g.css("backgroundColor"))}f.visibile=f.isElementVisible(),this.createPseudoHideStyles(a.ownerDocument),this.disableAnimations(a.ownerDocument),this.nodes=ua([f].concat(this.getChildren(f)).filter(function(a){return a.visible=a.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new z,F("Fetched nodes, total:",this.nodes.length),F("Calculate overflow clips"),this.calculateOverflowClips(),F("Start fetching images"),this.images=d.fetch(this.nodes.filter(la)),this.ready=this.images.ready.then(qa(function(){return F("Images loaded, starting parsing"),F("Creating stacking contexts"),this.createStackingContexts(),F("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),F("Render queue created with "+this.renderQueue.length+" items"),new Promise(qa(function(a){e.async?"function"==typeof e.async?e.async.call(this,this.renderQueue,a):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,a)):a():(this.renderQueue.forEach(this.paint,this),a())},this))},this))}function Q(a){return a.parent&&a.parent.clip.length}function R(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}function S(){}function T(a,b,c,d){return a.map(function(e,f){if(e.width>0){var g=b.left,h=b.top,i=b.width,j=b.height-a[2].width;switch(f){case 0:j=a[0].width,e.args=X({c1:[g,h],c2:[g+i,h],c3:[g+i-a[1].width,h+j],c4:[g+a[3].width,h+j]},d[0],d[1],c.topLeftOuter,c.topLeftInner,c.topRightOuter,c.topRightInner);break;case 1:g=b.left+b.width-a[1].width,i=a[1].width,e.args=X({c1:[g+i,h],c2:[g+i,h+j+a[2].width],c3:[g,h+j],c4:[g,h+a[0].width]},d[1],d[2],c.topRightOuter,c.topRightInner,c.bottomRightOuter,c.bottomRightInner);break;case 2:h=h+b.height-a[2].width,j=a[2].width,e.args=X({c1:[g+i,h+j],c2:[g,h+j],c3:[g+a[3].width,h],c4:[g+i-a[3].width,h]},d[2],d[3],c.bottomRightOuter,c.bottomRightInner,c.bottomLeftOuter,c.bottomLeftInner);break;case 3:i=a[3].width,e.args=X({c1:[g,h+j+a[2].width],c2:[g,h],c3:[g+i,h+a[0].width],c4:[g+i,h+j]},d[3],d[0],c.bottomLeftOuter,c.bottomLeftInner,c.topLeftOuter,c.topLeftInner)}}return e})}function U(a,b,c,d){var e=(Math.sqrt(2)-1)/3*4,f=c*e,g=d*e,h=a+c,i=b+d;return{topLeft:W({x:a,y:i},{x:a,y:i-g},{x:h-f,y:b},{x:h,y:b}),topRight:W({x:a,y:b},{x:a+f,y:b},{x:h,y:i-g},{x:h,y:i}),bottomRight:W({x:h,y:b},{x:h,y:b+g},{x:a+f,y:i},{x:a,y:i}),bottomLeft:W({x:h,y:i},{x:h-f,y:i},{x:a,y:b+g},{x:a,y:b})}}function V(a,b,c){var d=a.left,e=a.top,f=a.width,g=a.height,h=b[0][0],i=b[0][1],j=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1],n=b[3][0],o=b[3][1],p=f-j,q=g-m,r=f-l,s=g-o;return{topLeftOuter:U(d,e,h,i).topLeft.subdivide(.5),topLeftInner:U(d+c[3].width,e+c[0].width,Math.max(0,h-c[3].width),Math.max(0,i-c[0].width)).topLeft.subdivide(.5),topRightOuter:U(d+p,e,j,k).topRight.subdivide(.5),topRightInner:U(d+Math.min(p,f+c[3].width),e+c[0].width,p>f+c[3].width?0:j-c[3].width,k-c[0].width).topRight.subdivide(.5),bottomRightOuter:U(d+r,e+q,l,m).bottomRight.subdivide(.5),bottomRightInner:U(d+Math.min(r,f-c[3].width),e+Math.min(q,g+c[0].width),Math.max(0,l-c[1].width),m-c[2].width).bottomRight.subdivide(.5),bottomLeftOuter:U(d,e+s,n,o).bottomLeft.subdivide(.5),bottomLeftInner:U(d+c[3].width,e+s,Math.max(0,n-c[3].width),o-c[2].width).bottomLeft.subdivide(.5)}}function W(a,b,c,d){var e=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};return{start:a,startControl:b,endControl:c,end:d,subdivide:function(f){var g=e(a,b,f),h=e(b,c,f),i=e(c,d,f),j=e(g,h,f),k=e(h,i,f),l=e(j,k,f);return[W(a,g,j,l),W(l,k,i,d)]},curveTo:function(a){a.push(["bezierCurve",b.x,b.y,c.x,c.y,d.x,d.y])},curveToReversed:function(d){d.push(["bezierCurve",c.x,c.y,b.x,b.y,a.x,a.y])}}}function X(a,b,c,d,e,f,g){var h=[];return b[0]>0||b[1]>0?(h.push(["line",d[1].start.x,d[1].start.y]),d[1].curveTo(h)):h.push(["line",a.c1[0],a.c1[1]]),c[0]>0||c[1]>0?(h.push(["line",f[0].start.x,f[0].start.y]),f[0].curveTo(h),h.push(["line",g[0].end.x,g[0].end.y]),g[0].curveToReversed(h)):(h.push(["line",a.c2[0],a.c2[1]]),h.push(["line",a.c3[0],a.c3[1]])),b[0]>0||b[1]>0?(h.push(["line",e[1].end.x,e[1].end.y]),e[1].curveToReversed(h)):h.push(["line",a.c4[0],a.c4[1]]),h}function Y(a,b,c,d,e,f,g){b[0]>0||b[1]>0?(a.push(["line",d[0].start.x,d[0].start.y]),d[0].curveTo(a),d[1].curveTo(a)):a.push(["line",f,g]),(c[0]>0||c[1]>0)&&a.push(["line",e[0].start.x,e[0].start.y])}function Z(a){return a.cssInt("zIndex")<0}function $(a){return a.cssInt("zIndex")>0}function _(a){return 0===a.cssInt("zIndex")}function aa(a){return-1!==["inline","inline-block","inline-table"].indexOf(a.css("display"))}function ba(a){return a instanceof Ha}function ca(a){return a.node.data.trim().length>0}function da(a){return/^(normal|none|0px)$/.test(a.parent.css("letterSpacing"))}function ea(a){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(b){var c=a.css("border"+b+"Radius"),d=c.split(" ");return d.length<=1&&(d[1]=d[0]),d.map(ra)})}function fa(a){return a.nodeType===Node.TEXT_NODE||a.nodeType===Node.ELEMENT_NODE}function ga(a){return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(a.css("position"))?a.css("zIndex"):"auto")}function ha(a){return"static"!==a.css("position")}function ia(a){return"none"!==a.css("float")}function ja(a){return-1!==["inline-block","inline-table"].indexOf(a.css("display"))}function ka(a){var b=this;return function(){return!a.apply(b,arguments)}}function la(a){return a.node.nodeType===Node.ELEMENT_NODE}function ma(a){return!0===a.isPseudoElement}function na(a){return a.node.nodeType===Node.TEXT_NODE}function oa(a){return function(b,c){return b.cssInt("zIndex")+a.indexOf(b)/a.length-(c.cssInt("zIndex")+a.indexOf(c)/a.length)}}function pa(a){return a.getOpacity()<1}function qa(a,b){return function(){return a.apply(b,arguments)}}function ra(a){return parseInt(a,10)}function sa(a){return a.width}function ta(a){return a.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(a.node.nodeName)}function ua(a){return[].concat.apply([],a)}function va(a){var b=a.substr(0,1);return b===a.substr(a.length-1)&&b.match(/'|"/)?a.substr(1,a.length-2):a}function wa(b){for(var c,d=[],e=0,f=!1;b.length;)xa(b[e])===f?(c=b.splice(0,e),c.length&&d.push(a.html2canvas.punycode.ucs2.encode(c)),f=!f,e=0):e++,e>=b.length&&(c=b.splice(0,e),c.length&&d.push(a.html2canvas.punycode.ucs2.encode(c)));return d}function xa(a){return-1!==[32,13,10,9,45].indexOf(a)}function ya(a){return/[^\u0000-\u00ff]/.test(a)}function za(a,b,c){var d=Ca(Wa),e=Da(b,a,d);return Wa?Pa(e):Ba(c,e,d).then(function(a){return Ka(a.content)})}function Aa(a,b,c){var d=Ca(Xa),e=Da(b,a,d);return Xa?Promise.resolve(e):Ba(c,e,d).then(function(a){return"data:"+a.type+";base64,"+a.content})}function Ba(b,c,d){return new Promise(function(e,f){var g=b.createElement("script"),h=function(){delete a.html2canvas.proxy[d],b.body.removeChild(g)};a.html2canvas.proxy[d]=function(a){h(),e(a)},g.src=c,g.onerror=function(a){h(),f(a)},b.body.appendChild(g)})}function Ca(a){return a?"":"html2canvas_"+Date.now()+"_"+ ++Va+"_"+Math.round(1e5*Math.random())}function Da(a,b,c){return a+"?url="+encodeURIComponent(b)+(c.length?"&callback=html2canvas.proxy."+c:"")}function Ea(a,c){var d=(b.createElement("script"),b.createElement("a"));d.href=a,a=d.href,this.src=a,this.image=new Image;var e=this;this.promise=new Promise(function(d,f){e.image.crossOrigin="Anonymous",e.image.onload=d,e.image.onerror=f,new Aa(a,c,b).then(function(a){e.image.src=a}).catch(f)})}function Fa(a,b,c){G.call(this,a,b),this.isPseudoElement=!0,this.before=":before"===c}function Ga(a,b,c,d,e){this.width=a,this.height=b,this.images=c,this.options=d,this.document=e}function Ha(a,b,c,d){G.call(this,c,d),this.ownStacking=a,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*b}function Ia(a){this.rangeBounds=this.testRangeBounds(a),this.cors=this.testCORS(),this.svg=this.testSVG()}function Ja(a){this.src=a,this.image=null;var b=this;this.promise=this.hasFabric().then(function(){return b.isInline(a)?Promise.resolve(b.inlineFormatting(a)):Pa(a)}).then(function(a){return new Promise(function(c){html2canvas.fabric.loadSVGFromString(a,b.createCanvas.call(b,c))})})}function Ka(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=a.length,l="";for(b=0;k>b;b+=4)c=j.indexOf(a[b]),d=j.indexOf(a[b+1]),e=j.indexOf(a[b+2]),f=j.indexOf(a[b+3]),g=c<<2|d>>4,h=(15&d)<<4|e>>2,i=(3&e)<<6|f,l+=64===e?String.fromCharCode(g):64===f||-1===f?String.fromCharCode(g,h):String.fromCharCode(g,h,i);return l}function La(a,b){this.src=a,this.image=null;var c=this;this.promise=b?new Promise(function(b,d){c.image=new Image,c.image.onload=b,c.image.onerror=d,c.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(a),!0===c.image.complete&&b(c.image)}):this.hasFabric().then(function(){return new Promise(function(b){html2canvas.fabric.parseSVGDocument(a,c.createCanvas.call(c,b))})})}function Ma(a,b){G.call(this,a,b)}function Na(a,b,c){return a.length>0?b+c.toUpperCase():void 0}function Oa(a){B.apply(this,arguments),this.type="linear"===a.args[0]?this.TYPES.LINEAR:this.TYPES.RADIAL}function Pa(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onload=function(){200===d.status?b(d.responseText):c(new Error(d.statusText))},d.onerror=function(){c(new Error("Network Error"))},d.send()})}function Qa(a,b){Ga.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=a,this.canvas.height=b),this.ctx=this.canvas.getContext("2d"),this.options.background&&this.rectangle(0,0,a,b,this.options.background),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},F("Initialized CanvasRenderer with size",a,"x",b)}function Ra(a){return a.length>0}if(function(){var c,d,f,g;!function(){var a={},b={};c=function(b,c,d){a[b]={deps:c,callback:d}},g=f=d=function(c){function e(a){if("."!==a.charAt(0))return a;for(var b=a.split("/"),d=c.split("/").slice(0,-1),e=0,f=b.length;f>e;e++){var g=b[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(g._eak_seen=a,b[c])return b[c];if(b[c]={},!a[c])throw new Error("Could not find module "+c);for(var f,h=a[c],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)"exports"===i[l]?k.push(f={}):k.push(d(e(i[l])));var n=j.apply(this,k);return b[c]=f||n}}(),c("promise/all",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to all.");return new b(function(b,c){function d(a){return function(b){f(a,b)}}function f(a,c){h[a]=c,0==--i&&b(h)}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++)g=a[j],g&&e(g.then)?g.then(d(j),c):f(j,g)})}var d=a.isArray,e=a.isFunction;b.all=c}),c("promise/asap",["exports"],function(c){function d(){return function(){process.nextTick(h)}}function f(){var a=0,c=new l(h),d=b.createTextNode("");return c.observe(d,{characterData:!0}),function(){d.data=a=++a%2}}function g(){return function(){m.setTimeout(h,1)}}function h(){for(var a=0;a<n.length;a++){var b=n[a];(0,b[0])(b[1])}n=[]}function i(a,b){1===n.push([a,b])&&j()}var j,k=void 0!==a?a:{},l=k.MutationObserver||k.WebKitMutationObserver,m=void 0!==e?e:this,n=[];j="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?d():l?f():g(),c.asap=i}),c("promise/cast",["exports"],function(a){function b(a){return a&&"object"==typeof a&&a.constructor===this?a:new this(function(b){b(a)})}a.cast=b}),c("promise/config",["exports"],function(a){function b(a,b){return 2!==arguments.length?c[a]:void(c[a]=b)}var c={instrument:!1};a.config=c,a.configure=b}),c("promise/polyfill",["./promise","./utils","exports"],function(b,c,d){function e(){"Promise"in a&&"cast"in a.Promise&&"resolve"in a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;return new a.Promise(function(a){b=a}),g(b)}()||(a.Promise=f)}var f=b.Promise,g=c.isFunction;d.polyfill=e}),c("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(a,b,c,d,e,f,g,h,i){function j(a){if(!w(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof j))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],k(a,this)}function k(a,b){function c(a){p(b,a)}function d(a){r(b,a)}try{a(c,d)}catch(a){d(a)}}function l(a,b,c,d){var e,f,g,h,i=w(c);if(i)try{e=c(d),g=!0}catch(a){h=!0,f=a}else e=d,g=!0;o(b,e)||(i&&g?p(b,e):h?r(b,f):a===F?p(b,e):a===G&&r(b,e))}function m(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+F]=c,e[f+G]=d}function n(a,b){for(var c,d,e=a._subscribers,f=a._detail,g=0;g<e.length;g+=3)c=e[g],d=e[g+b],l(b,c,d,f);a._subscribers=null}function o(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(v(b)&&(d=b.then,w(d)))return d.call(b,function(d){return!!c||(c=!0,void(b!==d?p(a,d):q(a,d)))},function(b){return!!c||(c=!0,void r(a,b))}),!0}catch(b){return!!c||(r(a,b),!0)}return!1}function p(a,b){a===b?q(a,b):o(a,b)||q(a,b)}function q(a,b){a._state===D&&(a._state=E,a._detail=b,u.async(s,a))}function r(a,b){a._state===D&&(a._state=E,a._detail=b,u.async(t,a))}function s(a){n(a,a._state=F)}function t(a){n(a,a._state=G)}var u=a.config,v=(a.configure,b.objectOrFunction),w=b.isFunction,x=(b.now,c.cast),y=d.all,z=e.race,A=f.resolve,B=g.reject,C=h.asap;u.async=C;var D=void 0,E=0,F=1,G=2;j.prototype={constructor:j,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;u.async(function(){l(c._state,d,e[c._state-1],c._detail)})}else m(this,d,a,b);return d},catch:function(a){return this.then(null,a)}},j.all=y,j.cast=x,j.race=z,j.resolve=A,j.reject=B,i.Promise=j}),c("promise/race",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to race.");return new b(function(b,c){for(var d,e=0;e<a.length;e++)d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d)})}var d=a.isArray;b.race=c}),c("promise/reject",["exports"],function(a){function b(a){return new this(function(b,c){c(a)})}a.reject=b}),c("promise/resolve",["exports"],function(a){function b(a){return new this(function(b){b(a)})}a.resolve=b}),c("promise/utils",["exports"],function(a){function b(a){return c(a)||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}var e=Date.now||function(){return(new Date).getTime()};a.objectOrFunction=b,a.isFunction=c,a.isArray=d,a.now=e}),d("promise/polyfill").polyfill()}(),"function"!=typeof Object.create||"function"!=typeof b.createElement("canvas").getContext)return void(a.html2canvas=function(){return Promise.reject("No canvas support")});!function(a){function b(a){throw RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),d+g(a.split(H),b).join(".")}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:x}function l(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var c,d,e,f,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(d=a.lastIndexOf(E),0>d&&(d=0),e=0;d>e;++e)a.charCodeAt(e)>=128&&b("not-basic"),p.push(a.charCodeAt(e));for(f=d>0?d+1:0;q>f;){for(g=r,h=1,i=x;f>=q&&b("invalid-input"),l=k(a.charCodeAt(f++)),(l>=x||l>K((w-r)/h))&&b("overflow"),r+=l*h,!((n=t>=i?y:i>=t+z?z:i-t)>l);i+=x)o=x-n,h>K(w/o)&&b("overflow"),h*=o;c=p.length+1,t=m(r-g,c,0==g),K(r/c)>w-s&&b("overflow"),s+=K(r/c),r%=c,p.splice(r++,0,s)}return j(p)}function o(a){var c,d,e,f,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,c=D,d=0,g=C,h=0;q>h;++h)128>(p=a[h])&&u.push(L(p));for(e=f=u.length,f&&u.push(E);q>e;){for(j=w,h=0;q>h;++h)(p=a[h])>=c&&j>p&&(j=p);for(r=e+1,j-c>K((w-d)/r)&&b("overflow"),d+=(j-c)*r,c=j,h=0;q>h;++h)if(p=a[h],c>p&&++d>w&&b("overflow"),p==c){for(k=d,n=x;!((o=g>=n?y:n>=g+z?z:n-g)>k);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(d,r,e==f),d=0,++e}++d,++c}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof e&&e;t.global!==t&&t.window!==t&&t.self!==t||(a=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.3.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof f&&"object"==typeof f.amd&&f.amd)f("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else a.punycode=u}(this);var Sa="data-html2canvas-node",Ta="data-html2canvas-canvas-clone",Ua=0;a.html2canvas=function(c,d){if(d=d||{},d.logging&&(a.html2canvas.logging=!0,a.html2canvas.start=Date.now()),d.async=void 0===d.async||d.async,d.allowTaint=void 0!==d.allowTaint&&d.allowTaint,d.removeContainer=void 0===d.removeContainer||d.removeContainer,d.javascriptEnabled=void 0!==d.javascriptEnabled&&d.javascriptEnabled,d.imageTimeout=void 0===d.imageTimeout?1e4:d.imageTimeout,"string"==typeof c)return"string"!=typeof d.proxy?Promise.reject("Proxy must be used when rendering url"):q(w(c),d.proxy,b,a.innerWidth,a.innerHeight,d).then(function(b){return i(b.contentWindow.document.documentElement,b,d,a.innerWidth,a.innerHeight)});var e=(c===g?[b.documentElement]:c.length?c:[c])[0];return e.setAttribute(Sa,"true"),h(e.ownerDocument,d,e.ownerDocument.defaultView.innerWidth,e.ownerDocument.defaultView.innerHeight).then(function(a){return"function"==typeof d.onrendered&&(F("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),d.onrendered(a)),a})},a.html2canvas.punycode=this.punycode,a.html2canvas.proxy={},z.prototype.getMetrics=function(a,b){return this.data[a+"-"+b]===g&&(this.data[a+"-"+b]=new y(a,b)),this.data[a+"-"+b]},A.prototype.proxyLoad=function(a,b,c){var d=this.src;return q(d.src,a,d.ownerDocument,b.width,b.height,c)},B.prototype.TYPES={LINEAR:1,RADIAL:2},D.prototype.findImages=function(a){var b=[];return a.reduce(function(a,b){switch(b.node.nodeName){case"IMG":return a.concat([{args:[b.node.src],method:"url"}]);case"svg":case"IFRAME":return a.concat([{args:[b.node],method:b.node.nodeName}])}return a},[]).forEach(this.addImage(b,this.loadImage),this),b},D.prototype.findBackgroundImage=function(a,b){return b.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(a,this.loadImage),this),a},D.prototype.addImage=function(a,b){return function(c){c.args.forEach(function(d){this.imageExists(a,d)||(a.splice(0,0,b.call(this,c)),F("Added image #"+a.length,"string"==typeof d?d.substring(0,100):d))},this)}},D.prototype.hasImageBackground=function(a){return"none"!==a.method},D.prototype.loadImage=function(a){if("url"===a.method){var b=a.args[0];return!this.isSVG(b)||this.support.svg||this.options.allowTaint?b.match(/data:image\/.*;base64,/i)?new C(b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(b)||!0===this.options.allowTaint||this.isSVG(b)?new C(b,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new C(b,!0):this.options.proxy?new Ea(b,this.options.proxy):new x(b):new Ja(b)}return"linear-gradient"===a.method?new E(a):"gradient"===a.method?new Oa(a):"svg"===a.method?new La(a.args[0],this.support.svg):"IFRAME"===a.method?new A(a.args[0],this.isSameOrigin(a.args[0].src),this.options):new x(a)},D.prototype.isSVG=function(a){return"svg"===a.substring(a.length-3).toLowerCase()||Ja.prototype.isInline(a)},D.prototype.imageExists=function(a,b){return a.some(function(a){return a.src===b})},D.prototype.isSameOrigin=function(a){return this.getOrigin(a)===this.origin},D.prototype.getOrigin=function(a){var c=this.link||(this.link=b.createElement("a"));return c.href=a,c.href=c.href,c.protocol+c.hostname+c.port},D.prototype.getPromise=function(a){return this.timeout(a,this.options.imageTimeout).catch(function(){return new x(a.src).promise.then(function(b){a.image=b})})},D.prototype.get=function(a){var b=null;return this.images.some(function(c){return(b=c).src===a})?b:null},D.prototype.fetch=function(a){return this.images=a.reduce(qa(this.findBackgroundImage,this),this.findImages(a)),this.images.forEach(function(a,b){a.promise.then(function(){F("Succesfully loaded image #"+(b+1),a)},function(c){F("Failed loading image #"+(b+1),a,c)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),F("Finished searching images"),this},D.prototype.timeout=function(a,b){var c;return Promise.race([a.promise,new Promise(function(d,e){c=setTimeout(function(){F("Timed out loading image",a),e(a)},b)})]).then(function(a){return clearTimeout(c),a})},E.prototype=Object.create(B.prototype),E.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/,G.prototype.cloneTo=function(a){a.visible=this.visible,a.borders=this.borders,a.bounds=this.bounds,a.clip=this.clip,a.backgroundClip=this.backgroundClip,a.computedStyles=this.computedStyles,a.styles=this.styles,a.backgroundImages=this.backgroundImages,a.opacity=this.opacity},G.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},G.prototype.assignStack=function(a){this.stack=a,a.children.push(this)},G.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},G.prototype.css=function(a){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[a]||(this.styles[a]=this.computedStyles[a])},G.prototype.prefixedCss=function(a){var b=["webkit","moz","ms","o"],c=this.css(a);return c===g&&b.some(function(b){return(c=this.css(b+a.substr(0,1).toUpperCase()+a.substr(1)))!==g},this),c===g?null:c},G.prototype.computedStyle=function(a){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,a)},G.prototype.cssInt=function(a){var b=parseInt(this.css(a),10);return isNaN(b)?0:b},G.prototype.cssFloat=function(a){var b=parseFloat(this.css(a));return isNaN(b)?0:b},G.prototype.fontWeight=function(){var a=this.css("fontWeight");switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}return a},G.prototype.parseClip=function(){var a=this.css("clip").match(this.CLIP);return a?{top:parseInt(a[1],10),right:parseInt(a[2],10),bottom:parseInt(a[3],10),left:parseInt(a[4],10)}:null},G.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=K(this.css("backgroundImage")))},G.prototype.cssList=function(a,b){var c=(this.css(a)||"").split(",");return c=c[b||0]||c[0]||"auto",c=c.trim().split(" "),1===c.length&&(c=[c[0],c[0]]),c},G.prototype.parseBackgroundSize=function(a,b,c){var d,e,f=this.cssList("backgroundSize",c);if(J(f[0]))d=a.width*parseFloat(f[0])/100;else{if(/contain|cover/.test(f[0])){var g=a.width/a.height,h=b.width/b.height;return h>g^"contain"===f[0]?{width:a.height*h,height:a.height}:{width:a.width,height:a.width/h}}d=parseInt(f[0],10)}return e="auto"===f[0]&&"auto"===f[1]?b.height:"auto"===f[1]?d/b.width*b.height:J(f[1])?a.height*parseFloat(f[1])/100:parseInt(f[1],10),"auto"===f[0]&&(d=e/b.height*b.width),{width:d,height:e}},G.prototype.parseBackgroundPosition=function(a,b,c,d){var e,f,g=this.cssList("backgroundPosition",c);return e=J(g[0])?(a.width-(d||b).width)*(parseFloat(g[0])/100):parseInt(g[0],10),f="auto"===g[1]?e/b.width*b.height:J(g[1])?(a.height-(d||b).height)*parseFloat(g[1])/100:parseInt(g[1],10),"auto"===g[0]&&(e=f/b.height*b.width),{left:e,top:f}},G.prototype.parseBackgroundRepeat=function(a){return this.cssList("backgroundRepeat",a)[0]},G.prototype.parseTextShadows=function(){var a=this.css("textShadow"),b=[];if(a&&"none"!==a)for(var c=a.match(this.TEXT_SHADOW_PROPERTY),d=0;c&&d<c.length;d++){var e=c[d].match(this.TEXT_SHADOW_VALUES);b.push({color:e[0],offsetX:e[1]?parseFloat(e[1].replace("px","")):0,offsetY:e[2]?parseFloat(e[2].replace("px","")):0,blur:e[3]?e[3].replace("px",""):0})}return b},G.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var a=this.parseBounds(),b=this.prefixedCss("transformOrigin").split(" ").map(L).map(M);b[0]+=a.left,b[1]+=a.top,this.transformData={origin:b,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},G.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var a=this.prefixedCss("transform"),b=a?I(a.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=b||[1,0,0,1,0,0]}return this.transformMatrix},G.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?O(this.node):N(this.node))},G.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},G.prototype.getValue=function(){var a=this.node.value||"";return a="SELECT"===this.node.tagName?H(this.node):a,0===a.length?this.node.placeholder||"":a},G.prototype.MATRIX_PROPERTY=/(matrix)\((.+)\)/,G.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,G.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,G.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,P.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(a){if(la(a)){ma(a)&&a.appendToDOM(),a.borders=this.parseBorders(a);var b="hidden"===a.css("overflow")?[a.borders.clip]:[],c=a.parseClip();c&&-1!==["absolute","fixed"].indexOf(a.css("position"))&&b.push([["rect",a.bounds.left+c.left,a.bounds.top+c.top,c.right-c.left,c.bottom-c.top]]),a.clip=Q(a)?a.parent.clip.concat(b):b,a.backgroundClip="hidden"!==a.css("overflow")?a.clip.concat([a.borders.clip]):a.clip,ma(a)&&a.cleanDOM()}else na(a)&&(a.clip=Q(a)?a.parent.clip:[]);ma(a)||(a.bounds=null)},this)},P.prototype.asyncRenderer=function(a,b,c){c=c||Date.now(),
this.paint(a[this.renderIndex++]),a.length===this.renderIndex?b():c+20>Date.now()?this.asyncRenderer(a,b,c):setTimeout(qa(function(){this.asyncRenderer(a,b)},this),0)},P.prototype.createPseudoHideStyles=function(a){this.createStyles(a,"."+Fa.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+Fa.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},P.prototype.disableAnimations=function(a){this.createStyles(a,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},P.prototype.createStyles=function(a,b){var c=a.createElement("style");c.innerHTML=b,a.body.appendChild(c)},P.prototype.getPseudoElements=function(a){var b=[[a]];if(a.node.nodeType===Node.ELEMENT_NODE){var c=this.getPseudoElement(a,":before"),d=this.getPseudoElement(a,":after");c&&b.push(c),d&&b.push(d)}return ua(b)},P.prototype.getPseudoElement=function(a,c){var d=a.computedStyle(c);if(!d||!d.content||"none"===d.content||"-moz-alt-content"===d.content||"none"===d.display)return null;for(var e=va(d.content),f="url"===e.substr(0,3),g=b.createElement(f?"img":"html2canvaspseudoelement"),h=new Fa(g,a,c),i=d.length-1;i>=0;i--){var j=R(d.item(i));g.style[j]=d[j]}if(g.className=Fa.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+Fa.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,f)return g.src=K(e)[0].args[0],[h];var k=b.createTextNode(e);return g.appendChild(k),[h,new Ma(k,h)]},P.prototype.getChildren=function(a){return ua([].filter.call(a.node.childNodes,fa).map(function(b){var c=[b.nodeType===Node.TEXT_NODE?new Ma(b,a):new G(b,a)].filter(ta);return b.nodeType===Node.ELEMENT_NODE&&c.length&&"TEXTAREA"!==b.tagName?c[0].isElementVisible()?c.concat(this.getChildren(c[0])):[]:c},this))},P.prototype.newStackingContext=function(a,b){var c=new Ha(b,a.getOpacity(),a.node,a.parent);a.cloneTo(c),(b?c.getParentStack(this):c.parent.stack).contexts.push(c),a.stack=c},P.prototype.createStackingContexts=function(){this.nodes.forEach(function(a){la(a)&&(this.isRootElement(a)||pa(a)||ga(a)||this.isBodyWithTransparentRoot(a)||a.hasTransform())?this.newStackingContext(a,!0):la(a)&&(ha(a)&&_(a)||ja(a)||ia(a))?this.newStackingContext(a,!1):a.assignStack(a.parent.stack)},this)},P.prototype.isBodyWithTransparentRoot=function(a){return"BODY"===a.node.nodeName&&this.renderer.isTransparent(a.parent.css("backgroundColor"))},P.prototype.isRootElement=function(a){return null===a.parent},P.prototype.sortStackingContexts=function(a){a.contexts.sort(oa(a.contexts.slice(0))),a.contexts.forEach(this.sortStackingContexts,this)},P.prototype.parseTextBounds=function(a){return function(b,c,d){if("none"!==a.parent.css("textDecoration").substr(0,4)||0!==b.trim().length){if(this.support.rangeBounds&&!a.parent.hasTransform()){var e=d.slice(0,c).join("").length;return this.getRangeBounds(a.node,e,b.length)}if(a.node&&"string"==typeof a.node.data){var f=a.node.splitText(b.length),g=this.getWrapperBounds(a.node,a.parent.hasTransform());return a.node=f,g}}else this.support.rangeBounds&&!a.parent.hasTransform()||(a.node=a.node.splitText(b.length));return{}}},P.prototype.getWrapperBounds=function(a,b){var c=a.ownerDocument.createElement("html2canvaswrapper"),d=a.parentNode,e=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),d.replaceChild(c,a);var f=b?O(c):N(c);return d.replaceChild(e,c),f},P.prototype.getRangeBounds=function(a,b,c){var d=this.range||(this.range=a.ownerDocument.createRange());return d.setStart(a,b),d.setEnd(a,b+c),d.getBoundingClientRect()},P.prototype.parse=function(a){var b=a.contexts.filter(Z),c=a.children.filter(la),d=c.filter(ka(ia)),e=d.filter(ka(ha)).filter(ka(aa)),f=c.filter(ka(ha)).filter(ia),g=d.filter(ka(ha)).filter(aa),h=a.contexts.concat(d.filter(ha)).filter(_),i=a.children.filter(na).filter(ca),j=a.contexts.filter($);b.concat(e).concat(f).concat(g).concat(h).concat(i).concat(j).forEach(function(a){this.renderQueue.push(a),ba(a)&&(this.parse(a),this.renderQueue.push(new S))},this)},P.prototype.paint=function(a){try{a instanceof S?this.renderer.ctx.restore():na(a)?(ma(a.parent)&&a.parent.appendToDOM(),this.paintText(a),ma(a.parent)&&a.parent.cleanDOM()):this.paintNode(a)}catch(a){F(a)}},P.prototype.paintNode=function(a){if(ba(a)&&(this.renderer.setOpacity(a.opacity),this.renderer.ctx.save(),a.hasTransform()&&this.renderer.setTransform(a.parseTransform())),"INPUT"===a.node.nodeName&&"checkbox"===a.node.type)this.paintCheckbox(a);else if("INPUT"===a.node.nodeName&&"radio"===a.node.type)this.paintRadio(a);else{if("always"===a.css("page-break-before")){var b=this.options.canvas.getContext("2d");"function"==typeof b._pageBreakAt&&b._pageBreakAt(a.node.offsetTop)}this.paintElement(a)}if(a.node.getAttribute){var c=a.node.getAttribute("name");if(null===c)var c=a.node.getAttribute("id");if(null!==c){var d=this.options.canvas.annotations;d&&d.setName(c,a.bounds)}}},P.prototype.paintElement=function(a){var b=a.parseBounds();this.renderer.clip(a.backgroundClip,function(){this.renderer.renderBackground(a,b,a.borders.borders.map(sa))},this),this.renderer.clip(a.clip,function(){this.renderer.renderBorders(a.borders.borders)},this),this.renderer.clip(a.backgroundClip,function(){switch(a.node.nodeName){case"svg":case"IFRAME":var c=this.images.get(a.node);c?this.renderer.renderImage(a,b,a.borders,c):F("Error loading <"+a.node.nodeName+">",a.node);break;case"IMG":var d=this.images.get(a.node.src);d?this.renderer.renderImage(a,b,a.borders,d):F("Error loading <img>",a.node.src);break;case"CANVAS":this.renderer.renderImage(a,b,a.borders,{image:a.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(a)}},this)},P.prototype.paintCheckbox=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height),d={width:c-1,height:c-1,top:b.top,left:b.left},e=[3,3],f=[e,e,e,e],g=[1,1,1,1].map(function(a){return{color:"#A5A5A5",width:a}}),h=V(d,f,g);this.renderer.clip(a.backgroundClip,function(){this.renderer.rectangle(d.left+1,d.top+1,d.width-2,d.height-2,"#DEDEDE"),this.renderer.renderBorders(T(g,d,h,f)),a.node.checked&&(this.renderer.font("#424242","normal","normal","bold",c-3+"px","arial"),this.renderer.text("",d.left+c/6,d.top+c-1))},this)},P.prototype.paintRadio=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height)-2;this.renderer.clip(a.backgroundClip,function(){this.renderer.circleStroke(b.left+1,b.top+1,c,"#DEDEDE",1,"#A5A5A5"),a.node.checked&&this.renderer.circle(Math.ceil(b.left+c/4)+1,Math.ceil(b.top+c/4)+1,Math.floor(c/2),"#424242")},this)},P.prototype.paintFormValue=function(a){if(a.getValue().length>0){var b=a.node.ownerDocument,c=b.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(b){try{c.style[b]=a.css(b)}catch(a){F("html2canvas: Parse: Exception caught in renderFormValue: "+a.message)}});var d=a.parseBounds();c.style.position="fixed",c.style.left=d.left+"px",c.style.top=d.top+"px",c.textContent=a.getValue(),b.body.appendChild(c),this.paintText(new Ma(c.firstChild,a)),b.body.removeChild(c)}},P.prototype.paintText=function(b){b.applyTextTransform();var c=a.html2canvas.punycode.ucs2.decode(b.node.data),d=this.options.letterRendering&&!da(b)||ya(b.node.data)?c.map(function(b){return a.html2canvas.punycode.ucs2.encode([b])}):wa(c),e=b.parent.fontWeight(),f=b.parent.css("fontSize"),h=b.parent.css("fontFamily"),i=b.parent.parseTextShadows();this.renderer.font(b.parent.css("color"),b.parent.css("fontStyle"),b.parent.css("fontVariant"),e,f,h),i.length?this.renderer.fontShadow(i[0].color,i[0].offsetX,i[0].offsetY,i[0].blur):this.renderer.clearShadow(),this.renderer.clip(b.parent.clip,function(){d.map(this.parseTextBounds(b),this).forEach(function(a,c){a&&(a.left===g&&(a.left=0),a.bottom===g&&(a.bottom=0),this.renderer.text(d[c],a.left,a.bottom),this.renderTextDecoration(b.parent,a,this.fontMetrics.getMetrics(h,f)),0==c&&"LI"===b.parent.node.nodeName&&this.renderBullet(b,a),0==c&&this.renderAnnotation(b.parent,a))},this)},this)},P.prototype.generateListNumber={listAlpha:function(a){var b,c="";do{b=a%26,c=String.fromCharCode(b+64)+c,a/=26}while(26*a>26);return c},listRoman:function(a){var b,c=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"],d=[1e3,900,500,400,100,90,50,40,10,9,5,4,1],e="",f=c.length;if(0>=a||a>=4e3)return a;for(b=0;f>b;b+=1)for(;a>=d[b];)a-=d[b],e+=c[b];return e}},P.prototype.listItemText=function(a,b){switch(a){case"decimal-leading-zero":text=1===b.toString().length?b="0"+b.toString():b.toString();break;case"upper-roman":text=this.generateListNumber.listRoman(b);break;case"lower-roman":text=this.generateListNumber.listRoman(b).toLowerCase();break;case"lower-alpha":text=this.generateListNumber.listAlpha(b).toLowerCase();break;case"upper-alpha":text=this.generateListNumber.listAlpha(b);break;case"decimal":default:text=b}return text},P.prototype.renderBullet=function(a,b){var c=a.parent.css("listStyleType");if("none"!==c){var d=b.top+(b.bottom-b.top)/2,e=this.renderer.canvas.getContext("2d"),f=e.measureText("M").width,g=f/4,h=.75*f,i=b.left-h;switch(c){case"decimal":case"decimal-leading-zero":case"upper-alpha":case"lower-alpha":case"upper-roman":case"lower-roman":var j=a.parent,k=j.parent,l=Array.prototype.slice.call(k.node.children),m=l.indexOf(j.node)+1,n=this.listItemText(c,m);n+=".";var o=b.left-h;o-=e.measureText(n).width,e.fillText(n,o,b.bottom);break;case"square":var g=f/3;i-=g,d-=g/2,e.fillRect(i,d,g,g);break;case"circle":var g=f/6;i-=g,e.beginPath(),e.arc(i,d,g,0,2*Math.PI),e.closePath(),e.stroke();break;case"disc":default:var g=f/6;i-=g,e.beginPath(),e.arc(i,d,g,0,2*Math.PI),e.closePath(),e.fill()}}},P.prototype.renderTextDecoration=function(a,b,c){switch(a.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(b.left,Math.round(b.top+c.baseline+c.lineWidth),b.width,1,a.css("color"));break;case"overline":this.renderer.rectangle(b.left,Math.round(b.top),b.width,1,a.css("color"));break;case"line-through":this.renderer.rectangle(b.left,Math.ceil(b.top+c.middle+c.lineWidth),b.width,1,a.css("color"))}},P.prototype.renderAnnotation=function(a,b){if("A"===a.node.nodeName){var c=a.node.getAttribute("href");if(c){var d=this.options.canvas.annotations;d&&d.createAnnotation(c,a.bounds)}}},P.prototype.parseBorders=function(a){var b=a.parseBounds(),c=ea(a),d=["Top","Right","Bottom","Left"].map(function(b){return{width:a.cssInt("border"+b+"Width"),color:a.css("border"+b+"Color"),args:null}}),e=V(b,c,d);return{clip:this.parseBackgroundClip(a,e,d,c,b),borders:T(d,b,e,c)}},P.prototype.parseBackgroundClip=function(a,b,c,d,e){var f=a.css("backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":Y(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),Y(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),Y(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),Y(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:Y(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),Y(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),Y(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),Y(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g};var Va=0,Wa="withCredentials"in new XMLHttpRequest,Xa="crossOrigin"in new Image;Fa.prototype.cloneTo=function(a){Fa.prototype.cloneTo.call(this,a),a.isPseudoElement=!0,a.before=this.before},Fa.prototype=Object.create(G.prototype),Fa.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},Fa.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},Fa.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},Fa.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",Fa.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",Ga.prototype.renderImage=function(a,b,c,d){var e=a.cssInt("paddingLeft"),f=a.cssInt("paddingTop"),g=a.cssInt("paddingRight"),h=a.cssInt("paddingBottom"),i=c.borders,j=b.width-(i[1].width+i[3].width+e+g),k=b.height-(i[0].width+i[2].width+f+h);this.drawImage(d,0,0,d.image.width||j,d.image.height||k,b.left+e+i[3].width,b.top+f+i[0].width,j,k)},Ga.prototype.renderBackground=function(a,b,c){b.height>0&&b.width>0&&(this.renderBackgroundColor(a,b),this.renderBackgroundImage(a,b,c))},Ga.prototype.renderBackgroundColor=function(a,b){var c=a.css("backgroundColor");this.isTransparent(c)||this.rectangle(b.left,b.top,b.width,b.height,a.css("backgroundColor"))},Ga.prototype.renderBorders=function(a){a.forEach(this.renderBorder,this)},Ga.prototype.renderBorder=function(a){this.isTransparent(a.color)||null===a.args||this.drawShape(a.args,a.color)},Ga.prototype.renderBackgroundImage=function(a,b,c){a.parseBackgroundImages().reverse().forEach(function(d,e,f){switch(d.method){case"url":var g=this.images.get(d.args[0]);g?this.renderBackgroundRepeating(a,b,g,f.length-(e+1),c):F("Error loading background-image",d.args[0]);break;case"linear-gradient":case"gradient":var h=this.images.get(d.value);h?this.renderBackgroundGradient(h,b,c):F("Error loading background-image",d.args[0]);break;case"none":break;default:F("Unknown background-image type",d.args[0])}},this)},Ga.prototype.renderBackgroundRepeating=function(a,b,c,d,e){var f=a.parseBackgroundSize(b,c.image,d),g=a.parseBackgroundPosition(b,c.image,d,f);switch(a.parseBackgroundRepeat(d)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+e[3],b.top+g.top+e[0],99999,f.height,e);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+e[0],f.width,99999,e);break;case"no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+g.top+e[0],f.width,f.height,e);break;default:this.renderBackgroundRepeat(c,g,f,{top:b.top,left:b.left},e[3],e[0])}},Ga.prototype.isTransparent=function(a){return!a||"transparent"===a||"rgba(0, 0, 0, 0)"===a},Ha.prototype=Object.create(G.prototype),Ha.prototype.getParentStack=function(a){var b=this.parent?this.parent.stack:null;return b?b.ownStacking?b:b.getParentStack(a):a.stack},Ia.prototype.testRangeBounds=function(a){var b,c,d,e,f=!1;return a.createRange&&(b=a.createRange(),b.getBoundingClientRect&&(c=a.createElement("boundtest"),c.style.height="123px",c.style.display="block",a.body.appendChild(c),b.selectNode(c),d=b.getBoundingClientRect(),e=d.height,123===e&&(f=!0),a.body.removeChild(c))),f},Ia.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},Ia.prototype.testSVG=function(){var a=new Image,c=b.createElement("canvas"),d=c.getContext("2d");a.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(a,0,0),c.toDataURL()}catch(a){return!1}return!0},Ja.prototype.hasFabric=function(){return html2canvas.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},Ja.prototype.inlineFormatting=function(a){return/^data:image\/svg\+xml;base64,/.test(a)?this.decode64(this.removeContentType(a)):this.removeContentType(a)},Ja.prototype.removeContentType=function(a){return a.replace(/^data:image\/svg\+xml(;base64)?,/,"")},Ja.prototype.isInline=function(a){return/^data:image\/svg\+xml/i.test(a)},Ja.prototype.createCanvas=function(a){var b=this;return function(c,d){var e=new html2canvas.fabric.StaticCanvas("c");b.image=e.lowerCanvasEl,e.setWidth(d.width).setHeight(d.height).add(html2canvas.fabric.util.groupSVGElements(c,d)).renderAll(),a(e.lowerCanvasEl)}},Ja.prototype.decode64=function(b){return"function"==typeof a.atob?a.atob(b):Ka(b)},La.prototype=Object.create(Ja.prototype),Ma.prototype=Object.create(G.prototype),Ma.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},Ma.prototype.transform=function(a){var b=this.node.data;switch(a){case"lowercase":return b.toLowerCase();case"capitalize":return b.replace(/(^|\s|:|-|\(|\))([a-z])/g,Na);case"uppercase":return b.toUpperCase();default:return b}},Oa.prototype=Object.create(B.prototype),Qa.prototype=Object.create(Ga.prototype),Qa.prototype.setFillStyle=function(a){return this.ctx.fillStyle=a,this.ctx},Qa.prototype.rectangle=function(a,b,c,d,e){this.setFillStyle(e).fillRect(a,b,c,d)},Qa.prototype.circle=function(a,b,c,d){this.setFillStyle(d),this.ctx.beginPath(),this.ctx.arc(a+c/2,b+c/2,c/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},Qa.prototype.circleStroke=function(a,b,c,d,e,f){this.circle(a,b,c,d),this.ctx.strokeStyle=f,this.ctx.stroke()},Qa.prototype.drawShape=function(a,b){this.shape(a),this.setFillStyle(b).fill()},Qa.prototype.taints=function(a){if(null===a.tainted){this.taintCtx.drawImage(a.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),a.tainted=!1}catch(c){this.taintCtx=b.createElement("canvas").getContext("2d"),a.tainted=!0}}return a.tainted},Qa.prototype.drawImage=function(a,b,c,d,e,f,g,h,i){this.taints(a)&&!this.options.allowTaint||this.ctx.drawImage(a.image,b,c,d,e,f,g,h,i)},Qa.prototype.clip=function(a,b,c){this.ctx.save(),a.filter(Ra).forEach(function(a){this.shape(a).clip()},this),b.call(c),this.ctx.restore()},Qa.prototype.shape=function(a){return this.ctx.beginPath(),a.forEach(function(a,b){"rect"===a[0]?this.ctx.rect.apply(this.ctx,a.slice(1)):this.ctx[0===b?"moveTo":a[0]+"To"].apply(this.ctx,a.slice(1))},this),this.ctx.closePath(),this.ctx},Qa.prototype.font=function(a,b,c,d,e,f){this.setFillStyle(a).font=[b,c,d,e,f].join(" ").split(",")[0]},Qa.prototype.fontShadow=function(a,b,c,d){this.setVariable("shadowColor",a).setVariable("shadowOffsetY",b).setVariable("shadowOffsetX",c).setVariable("shadowBlur",d)},Qa.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},Qa.prototype.setOpacity=function(a){this.ctx.globalAlpha=a},Qa.prototype.setTransform=function(a){this.ctx.translate(a.origin[0],a.origin[1]),this.ctx.transform.apply(this.ctx,a.matrix),this.ctx.translate(-a.origin[0],-a.origin[1])},Qa.prototype.setVariable=function(a,b){return this.variables[a]!==b&&(this.variables[a]=this.ctx[a]=b),this},Qa.prototype.text=function(a,b,c){this.ctx.fillText(a,b,c)},Qa.prototype.backgroundRepeatShape=function(a,b,c,d,e,f,g,h,i){var j=[["line",Math.round(e),Math.round(f)],["line",Math.round(e+g),Math.round(f)],["line",Math.round(e+g),Math.round(h+f)],["line",Math.round(e),Math.round(h+f)]];this.clip([j],function(){this.renderBackgroundRepeat(a,b,c,d,i[3],i[0])},this)},Qa.prototype.renderBackgroundRepeat=function(a,b,c,d,e,f){var g=Math.round(d.left+b.left+e),h=Math.round(d.top+b.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(a,c),"repeat")),this.ctx.translate(g,h),this.ctx.fill(),this.ctx.translate(-g,-h)},Qa.prototype.renderBackgroundGradient=function(a,b){if(a instanceof E){var c=this.ctx.createLinearGradient(b.left+b.width*a.x0,b.top+b.height*a.y0,b.left+b.width*a.x1,b.top+b.height*a.y1);a.colorStops.forEach(function(a){c.addColorStop(a.stop,a.color)}),this.rectangle(b.left,b.top,b.width,b.height,c)}},Qa.prototype.resizeImage=function(a,c){var d=a.image;if(d.width===c.width&&d.height===c.height)return d;var e,f=b.createElement("canvas");return f.width=c.width,f.height=c.height,e=f.getContext("2d"),e.drawImage(d,0,0,d.width,d.height,0,0,c.width,c.height),f}}).call({},window,document);var html2canvasNodeAttribute="data-html2canvas-node",html2canvasCanvasCloneAttribute="data-html2canvas-canvas-clone",html2canvasCanvasCloneIndex=0;window.html2canvas=function(a,b){if(b=b||{},b.logging&&(window.html2canvas.logging=!0,window.html2canvas.start=Date.now()),b.async=void 0===b.async||b.async,b.allowTaint=void 0!==b.allowTaint&&b.allowTaint,b.removeContainer=void 0===b.removeContainer||b.removeContainer,b.javascriptEnabled=void 0!==b.javascriptEnabled&&b.javascriptEnabled,b.imageTimeout=void 0===b.imageTimeout?1e4:b.imageTimeout,"string"==typeof a)return"string"!=typeof b.proxy?Promise.reject("Proxy must be used when rendering url"):loadUrlDocument(absoluteUrl(a),b.proxy,document,window.innerWidth,window.innerHeight,b).then(function(a){return renderWindow(a.contentWindow.document.documentElement,a,b,window.innerWidth,window.innerHeight)});var c=(void 0===a?[document.documentElement]:a.length?a:[a])[0];return c.setAttribute(html2canvasNodeAttribute,"true"),renderDocument(c.ownerDocument,b,c.ownerDocument.defaultView.innerWidth,c.ownerDocument.defaultView.innerHeight).then(function(a){return"function"==typeof b.onrendered&&(log("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),b.onrendered(a)),a})},window.html2canvas.punycode=this.punycode,window.html2canvas.proxy={},"function"==typeof Object.create&&"function"==typeof document.createElement("canvas").getContext||(window.html2canvas=function(){return Promise.reject("No canvas support")}),FontMetrics.prototype.getMetrics=function(a,b){return void 0===this.data[a+"-"+b]&&(this.data[a+"-"+b]=new Font(a,b)),this.data[a+"-"+b]},FrameContainer.prototype.proxyLoad=function(a,b,c){var d=this.src;return loadUrlDocument(d.src,a,d.ownerDocument,b.width,b.height,c)},GradientContainer.prototype.TYPES={LINEAR:1,RADIAL:2},ImageLoader.prototype.findImages=function(a){var b=[];return a.reduce(function(a,b){switch(b.node.nodeName){case"IMG":return a.concat([{args:[b.node.src],method:"url"}]);case"svg":case"IFRAME":return a.concat([{args:[b.node],method:b.node.nodeName}])}return a},[]).forEach(this.addImage(b,this.loadImage),this),b},ImageLoader.prototype.findBackgroundImage=function(a,b){return b.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(a,this.loadImage),this),a},ImageLoader.prototype.addImage=function(a,b){return function(c){c.args.forEach(function(d){this.imageExists(a,d)||(a.splice(0,0,b.call(this,c)),log("Added image #"+a.length,"string"==typeof d?d.substring(0,100):d))},this)}},ImageLoader.prototype.hasImageBackground=function(a){return"none"!==a.method},ImageLoader.prototype.loadImage=function(a){if("url"===a.method){var b=a.args[0];return!this.isSVG(b)||this.support.svg||this.options.allowTaint?b.match(/data:image\/.*;base64,/i)?new ImageContainer(b.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(b)||!0===this.options.allowTaint||this.isSVG(b)?new ImageContainer(b,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new ImageContainer(b,!0):this.options.proxy?new ProxyImageContainer(b,this.options.proxy):new DummyImageContainer(b):new SVGContainer(b)}return"linear-gradient"===a.method?new LinearGradientContainer(a):"gradient"===a.method?new WebkitGradientContainer(a):"svg"===a.method?new SVGNodeContainer(a.args[0],this.support.svg):"IFRAME"===a.method?new FrameContainer(a.args[0],this.isSameOrigin(a.args[0].src),this.options):new DummyImageContainer(a)},ImageLoader.prototype.isSVG=function(a){return"svg"===a.substring(a.length-3).toLowerCase()||SVGContainer.prototype.isInline(a)},ImageLoader.prototype.imageExists=function(a,b){return a.some(function(a){return a.src===b})},ImageLoader.prototype.isSameOrigin=function(a){return this.getOrigin(a)===this.origin},ImageLoader.prototype.getOrigin=function(a){var b=this.link||(this.link=document.createElement("a"));return b.href=a,b.href=b.href,b.protocol+b.hostname+b.port},ImageLoader.prototype.getPromise=function(a){return this.timeout(a,this.options.imageTimeout).catch(function(){return new DummyImageContainer(a.src).promise.then(function(b){a.image=b})})},ImageLoader.prototype.get=function(a){var b=null;return this.images.some(function(c){return(b=c).src===a})?b:null},ImageLoader.prototype.fetch=function(a){return this.images=a.reduce(bind(this.findBackgroundImage,this),this.findImages(a)),this.images.forEach(function(a,b){a.promise.then(function(){log("Succesfully loaded image #"+(b+1),a)},function(c){log("Failed loading image #"+(b+1),a,c)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),log("Finished searching images"),this},ImageLoader.prototype.timeout=function(a,b){var c;return Promise.race([a.promise,new Promise(function(d,e){c=setTimeout(function(){log("Timed out loading image",a),e(a)},b)})]).then(function(a){return clearTimeout(c),a})},LinearGradientContainer.prototype=Object.create(GradientContainer.prototype),LinearGradientContainer.prototype.stepRegExp=/((?:rgb|rgba)\(\d{1,3},\s\d{1,3},\s\d{1,3}(?:,\s[0-9\.]+)?\))\s*(\d{1,3})?(%|px)?/,NodeContainer.prototype.cloneTo=function(a){a.visible=this.visible,a.borders=this.borders,a.bounds=this.bounds,a.clip=this.clip,a.backgroundClip=this.backgroundClip,a.computedStyles=this.computedStyles,a.styles=this.styles,a.backgroundImages=this.backgroundImages,a.opacity=this.opacity},NodeContainer.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},NodeContainer.prototype.assignStack=function(a){this.stack=a,a.children.push(this)},NodeContainer.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},NodeContainer.prototype.css=function(a){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[a]||(this.styles[a]=this.computedStyles[a])},NodeContainer.prototype.prefixedCss=function(a){var b=["webkit","moz","ms","o"],c=this.css(a);return void 0===c&&b.some(function(b){return void 0!==(c=this.css(b+a.substr(0,1).toUpperCase()+a.substr(1)))},this),void 0===c?null:c},NodeContainer.prototype.computedStyle=function(a){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,a)},NodeContainer.prototype.cssInt=function(a){var b=parseInt(this.css(a),10);return isNaN(b)?0:b},NodeContainer.prototype.cssFloat=function(a){var b=parseFloat(this.css(a));return isNaN(b)?0:b},NodeContainer.prototype.fontWeight=function(){var a=this.css("fontWeight");switch(parseInt(a,10)){case 401:a="bold";break;case 400:a="normal"}return a},NodeContainer.prototype.parseClip=function(){var a=this.css("clip").match(this.CLIP);return a?{top:parseInt(a[1],10),right:parseInt(a[2],10),bottom:parseInt(a[3],10),left:parseInt(a[4],10)}:null},NodeContainer.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=parseBackgrounds(this.css("backgroundImage")))},NodeContainer.prototype.cssList=function(a,b){var c=(this.css(a)||"").split(",");return c=c[b||0]||c[0]||"auto",c=c.trim().split(" "),1===c.length&&(c=[c[0],c[0]]),c},NodeContainer.prototype.parseBackgroundSize=function(a,b,c){var d,e,f=this.cssList("backgroundSize",c);if(isPercentage(f[0]))d=a.width*parseFloat(f[0])/100;else{if(/contain|cover/.test(f[0])){var g=a.width/a.height,h=b.width/b.height;return h>g^"contain"===f[0]?{width:a.height*h,height:a.height}:{width:a.width,height:a.width/h}}d=parseInt(f[0],10)}return e="auto"===f[0]&&"auto"===f[1]?b.height:"auto"===f[1]?d/b.width*b.height:isPercentage(f[1])?a.height*parseFloat(f[1])/100:parseInt(f[1],10),"auto"===f[0]&&(d=e/b.height*b.width),{width:d,height:e}},NodeContainer.prototype.parseBackgroundPosition=function(a,b,c,d){var e,f,g=this.cssList("backgroundPosition",c);return e=isPercentage(g[0])?(a.width-(d||b).width)*(parseFloat(g[0])/100):parseInt(g[0],10),f="auto"===g[1]?e/b.width*b.height:isPercentage(g[1])?(a.height-(d||b).height)*parseFloat(g[1])/100:parseInt(g[1],10),"auto"===g[0]&&(e=f/b.height*b.width),{left:e,top:f}},NodeContainer.prototype.parseBackgroundRepeat=function(a){return this.cssList("backgroundRepeat",a)[0]},NodeContainer.prototype.parseTextShadows=function(){var a=this.css("textShadow"),b=[];if(a&&"none"!==a)for(var c=a.match(this.TEXT_SHADOW_PROPERTY),d=0;c&&d<c.length;d++){var e=c[d].match(this.TEXT_SHADOW_VALUES);b.push({color:e[0],offsetX:e[1]?parseFloat(e[1].replace("px","")):0,offsetY:e[2]?parseFloat(e[2].replace("px","")):0,blur:e[3]?e[3].replace("px",""):0})}return b},NodeContainer.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var a=this.parseBounds(),b=this.prefixedCss("transformOrigin").split(" ").map(removePx).map(asFloat);b[0]+=a.left,b[1]+=a.top,this.transformData={origin:b,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},NodeContainer.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var a=this.prefixedCss("transform"),b=a?parseMatrix(a.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=b||[1,0,0,1,0,0]}return this.transformMatrix},NodeContainer.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?offsetBounds(this.node):getBounds(this.node))},NodeContainer.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},NodeContainer.prototype.getValue=function(){var a=this.node.value||"";return a="SELECT"===this.node.tagName?selectionValue(this.node):a,0===a.length?this.node.placeholder||"":a},NodeContainer.prototype.MATRIX_PROPERTY=/(matrix)\((.+)\)/,NodeContainer.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,NodeContainer.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,NodeContainer.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,NodeParser.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(a){if(isElement(a)){isPseudoElement(a)&&a.appendToDOM(),a.borders=this.parseBorders(a);var b="hidden"===a.css("overflow")?[a.borders.clip]:[],c=a.parseClip();c&&-1!==["absolute","fixed"].indexOf(a.css("position"))&&b.push([["rect",a.bounds.left+c.left,a.bounds.top+c.top,c.right-c.left,c.bottom-c.top]]),a.clip=hasParentClip(a)?a.parent.clip.concat(b):b,a.backgroundClip="hidden"!==a.css("overflow")?a.clip.concat([a.borders.clip]):a.clip,isPseudoElement(a)&&a.cleanDOM()}else isTextNode(a)&&(a.clip=hasParentClip(a)?a.parent.clip:[]);isPseudoElement(a)||(a.bounds=null)},this)},NodeParser.prototype.asyncRenderer=function(a,b,c){c=c||Date.now(),this.paint(a[this.renderIndex++]),a.length===this.renderIndex?b():c+20>Date.now()?this.asyncRenderer(a,b,c):setTimeout(bind(function(){this.asyncRenderer(a,b)},this),0)},NodeParser.prototype.createPseudoHideStyles=function(a){this.createStyles(a,"."+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},NodeParser.prototype.disableAnimations=function(a){this.createStyles(a,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},NodeParser.prototype.createStyles=function(a,b){var c=a.createElement("style");c.innerHTML=b,a.body.appendChild(c)},NodeParser.prototype.getPseudoElements=function(a){var b=[[a]];if(a.node.nodeType===Node.ELEMENT_NODE){
var c=this.getPseudoElement(a,":before"),d=this.getPseudoElement(a,":after");c&&b.push(c),d&&b.push(d)}return flatten(b)},NodeParser.prototype.getPseudoElement=function(a,b){var c=a.computedStyle(b);if(!c||!c.content||"none"===c.content||"-moz-alt-content"===c.content||"none"===c.display)return null;for(var d=stripQuotes(c.content),e="url"===d.substr(0,3),f=document.createElement(e?"img":"html2canvaspseudoelement"),g=new PseudoElementContainer(f,a,b),h=c.length-1;h>=0;h--){var i=toCamelCase(c.item(h));f.style[i]=c[i]}if(f.className=PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,e)return f.src=parseBackgrounds(d)[0].args[0],[g];var j=document.createTextNode(d);return f.appendChild(j),[g,new TextContainer(j,g)]},NodeParser.prototype.getChildren=function(a){return flatten([].filter.call(a.node.childNodes,renderableNode).map(function(b){var c=[b.nodeType===Node.TEXT_NODE?new TextContainer(b,a):new NodeContainer(b,a)].filter(nonIgnoredElement);return b.nodeType===Node.ELEMENT_NODE&&c.length&&"TEXTAREA"!==b.tagName?c[0].isElementVisible()?c.concat(this.getChildren(c[0])):[]:c},this))},NodeParser.prototype.newStackingContext=function(a,b){var c=new StackingContext(b,a.getOpacity(),a.node,a.parent);a.cloneTo(c),(b?c.getParentStack(this):c.parent.stack).contexts.push(c),a.stack=c},NodeParser.prototype.createStackingContexts=function(){this.nodes.forEach(function(a){isElement(a)&&(this.isRootElement(a)||hasOpacity(a)||isPositionedForStacking(a)||this.isBodyWithTransparentRoot(a)||a.hasTransform())?this.newStackingContext(a,!0):isElement(a)&&(isPositioned(a)&&zIndex0(a)||isInlineBlock(a)||isFloating(a))?this.newStackingContext(a,!1):a.assignStack(a.parent.stack)},this)},NodeParser.prototype.isBodyWithTransparentRoot=function(a){return"BODY"===a.node.nodeName&&this.renderer.isTransparent(a.parent.css("backgroundColor"))},NodeParser.prototype.isRootElement=function(a){return null===a.parent},NodeParser.prototype.sortStackingContexts=function(a){a.contexts.sort(zIndexSort(a.contexts.slice(0))),a.contexts.forEach(this.sortStackingContexts,this)},NodeParser.prototype.parseTextBounds=function(a){return function(b,c,d){if("none"!==a.parent.css("textDecoration").substr(0,4)||0!==b.trim().length){if(this.support.rangeBounds&&!a.parent.hasTransform()){var e=d.slice(0,c).join("").length;return this.getRangeBounds(a.node,e,b.length)}if(a.node&&"string"==typeof a.node.data){var f=a.node.splitText(b.length),g=this.getWrapperBounds(a.node,a.parent.hasTransform());return a.node=f,g}}else this.support.rangeBounds&&!a.parent.hasTransform()||(a.node=a.node.splitText(b.length));return{}}},NodeParser.prototype.getWrapperBounds=function(a,b){var c=a.ownerDocument.createElement("html2canvaswrapper"),d=a.parentNode,e=a.cloneNode(!0);c.appendChild(a.cloneNode(!0)),d.replaceChild(c,a);var f=b?offsetBounds(c):getBounds(c);return d.replaceChild(e,c),f},NodeParser.prototype.getRangeBounds=function(a,b,c){var d=this.range||(this.range=a.ownerDocument.createRange());return d.setStart(a,b),d.setEnd(a,b+c),d.getBoundingClientRect()},NodeParser.prototype.parse=function(a){var b=a.contexts.filter(negativeZIndex),c=a.children.filter(isElement),d=c.filter(not(isFloating)),e=d.filter(not(isPositioned)).filter(not(inlineLevel)),f=c.filter(not(isPositioned)).filter(isFloating),g=d.filter(not(isPositioned)).filter(inlineLevel),h=a.contexts.concat(d.filter(isPositioned)).filter(zIndex0),i=a.children.filter(isTextNode).filter(hasText),j=a.contexts.filter(positiveZIndex);b.concat(e).concat(f).concat(g).concat(h).concat(i).concat(j).forEach(function(a){this.renderQueue.push(a),isStackingContext(a)&&(this.parse(a),this.renderQueue.push(new ClearTransform))},this)},NodeParser.prototype.paint=function(a){try{a instanceof ClearTransform?this.renderer.ctx.restore():isTextNode(a)?(isPseudoElement(a.parent)&&a.parent.appendToDOM(),this.paintText(a),isPseudoElement(a.parent)&&a.parent.cleanDOM()):this.paintNode(a)}catch(a){log(a)}},NodeParser.prototype.paintNode=function(a){isStackingContext(a)&&(this.renderer.setOpacity(a.opacity),this.renderer.ctx.save(),a.hasTransform()&&this.renderer.setTransform(a.parseTransform())),"INPUT"===a.node.nodeName&&"checkbox"===a.node.type?this.paintCheckbox(a):"INPUT"===a.node.nodeName&&"radio"===a.node.type?this.paintRadio(a):this.paintElement(a)},NodeParser.prototype.paintElement=function(a){var b=a.parseBounds();this.renderer.clip(a.backgroundClip,function(){this.renderer.renderBackground(a,b,a.borders.borders.map(getWidth))},this),this.renderer.clip(a.clip,function(){this.renderer.renderBorders(a.borders.borders)},this),this.renderer.clip(a.backgroundClip,function(){switch(a.node.nodeName){case"svg":case"IFRAME":var c=this.images.get(a.node);c?this.renderer.renderImage(a,b,a.borders,c):log("Error loading <"+a.node.nodeName+">",a.node);break;case"IMG":var d=this.images.get(a.node.src);d?this.renderer.renderImage(a,b,a.borders,d):log("Error loading <img>",a.node.src);break;case"CANVAS":this.renderer.renderImage(a,b,a.borders,{image:a.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(a)}},this)},NodeParser.prototype.paintCheckbox=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height),d={width:c-1,height:c-1,top:b.top,left:b.left},e=[3,3],f=[e,e,e,e],g=[1,1,1,1].map(function(a){return{color:"#A5A5A5",width:a}}),h=calculateCurvePoints(d,f,g);this.renderer.clip(a.backgroundClip,function(){this.renderer.rectangle(d.left+1,d.top+1,d.width-2,d.height-2,"#DEDEDE"),this.renderer.renderBorders(calculateBorders(g,d,h,f)),a.node.checked&&(this.renderer.font("#424242","normal","normal","bold",c-3+"px","arial"),this.renderer.text("",d.left+c/6,d.top+c-1))},this)},NodeParser.prototype.paintRadio=function(a){var b=a.parseBounds(),c=Math.min(b.width,b.height)-2;this.renderer.clip(a.backgroundClip,function(){this.renderer.circleStroke(b.left+1,b.top+1,c,"#DEDEDE",1,"#A5A5A5"),a.node.checked&&this.renderer.circle(Math.ceil(b.left+c/4)+1,Math.ceil(b.top+c/4)+1,Math.floor(c/2),"#424242")},this)},NodeParser.prototype.paintFormValue=function(a){if(a.getValue().length>0){var b=a.node.ownerDocument,c=b.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap","list-style-type"].forEach(function(b){try{c.style[b]=a.css(b)}catch(a){log("html2canvas: Parse: Exception caught in renderFormValue: "+a.message)}});var d=a.parseBounds();c.style.position="fixed",c.style.left=d.left+"px",c.style.top=d.top+"px",c.textContent=a.getValue(),b.body.appendChild(c),this.paintText(new TextContainer(c.firstChild,a)),b.body.removeChild(c)}},NodeParser.prototype.paintText=function(a){a.applyTextTransform();var b=window.html2canvas.punycode.ucs2.decode(a.node.data),c=this.options.letterRendering&&!noLetterSpacing(a)||hasUnicode(a.node.data)?b.map(function(a){return window.html2canvas.punycode.ucs2.encode([a])}):getWords(b),d=a.parent.fontWeight(),e=a.parent.css("fontSize"),f=a.parent.css("fontFamily"),g=a.parent.parseTextShadows();this.renderer.font(a.parent.css("color"),a.parent.css("fontStyle"),a.parent.css("fontVariant"),d,e,f),g.length?this.renderer.fontShadow(g[0].color,g[0].offsetX,g[0].offsetY,g[0].blur):this.renderer.clearShadow(),this.renderer.clip(a.parent.clip,function(){c.map(this.parseTextBounds(a),this).forEach(function(b,d){b&&(this.renderer.text(c[d],b.left,b.bottom),this.renderTextDecoration(a.parent,b,this.fontMetrics.getMetrics(f,e)))},this)},this)},NodeParser.prototype.renderTextDecoration=function(a,b,c){switch(a.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(b.left,Math.round(b.top+c.baseline+c.lineWidth),b.width,1,a.css("color"));break;case"overline":this.renderer.rectangle(b.left,Math.round(b.top),b.width,1,a.css("color"));break;case"line-through":this.renderer.rectangle(b.left,Math.ceil(b.top+c.middle+c.lineWidth),b.width,1,a.css("color"))}},NodeParser.prototype.parseBorders=function(a){var b=a.parseBounds(),c=getBorderRadiusData(a),d=["Top","Right","Bottom","Left"].map(function(b){return{width:a.cssInt("border"+b+"Width"),color:a.css("border"+b+"Color"),args:null}}),e=calculateCurvePoints(b,c,d);return{clip:this.parseBackgroundClip(a,e,d,c,b),borders:calculateBorders(d,b,e,c)}},NodeParser.prototype.parseBackgroundClip=function(a,b,c,d,e){var f=a.css("backgroundClip"),g=[];switch(f){case"content-box":case"padding-box":parseCorner(g,d[0],d[1],b.topLeftInner,b.topRightInner,e.left+c[3].width,e.top+c[0].width),parseCorner(g,d[1],d[2],b.topRightInner,b.bottomRightInner,e.left+e.width-c[1].width,e.top+c[0].width),parseCorner(g,d[2],d[3],b.bottomRightInner,b.bottomLeftInner,e.left+e.width-c[1].width,e.top+e.height-c[2].width),parseCorner(g,d[3],d[0],b.bottomLeftInner,b.topLeftInner,e.left+c[3].width,e.top+e.height-c[2].width);break;default:parseCorner(g,d[0],d[1],b.topLeftOuter,b.topRightOuter,e.left,e.top),parseCorner(g,d[1],d[2],b.topRightOuter,b.bottomRightOuter,e.left+e.width,e.top),parseCorner(g,d[2],d[3],b.bottomRightOuter,b.bottomLeftOuter,e.left+e.width,e.top+e.height),parseCorner(g,d[3],d[0],b.bottomLeftOuter,b.topLeftOuter,e.left,e.top+e.height)}return g},function(){var a,b,c,d;!function(){var e={},f={};a=function(a,b,c){e[a]={deps:b,callback:c}},d=c=b=function(a){function c(b){if("."!==b.charAt(0))return b;for(var c=b.split("/"),d=a.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d._eak_seen=e,f[a])return f[a];if(f[a]={},!e[a])throw new Error("Could not find module "+a);for(var g,h=e[a],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)"exports"===i[l]?k.push(g={}):k.push(b(c(i[l])));var n=j.apply(this,k);return f[a]=g||n}}(),a("promise/all",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to all.");return new b(function(b,c){function d(a){return function(b){f(a,b)}}function f(a,c){h[a]=c,0==--i&&b(h)}var g,h=[],i=a.length;0===i&&b([]);for(var j=0;j<a.length;j++)g=a[j],g&&e(g.then)?g.then(d(j),c):f(j,g)})}var d=a.isArray,e=a.isFunction;b.all=c}),a("promise/asap",["exports"],function(a){function b(){return function(){process.nextTick(e)}}function c(){var a=0,b=new i(e),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){return function(){j.setTimeout(e,1)}}function e(){for(var a=0;a<k.length;a++){var b=k[a];(0,b[0])(b[1])}k=[]}function f(a,b){1===k.push([a,b])&&g()}var g,h="undefined"!=typeof window?window:{},i=h.MutationObserver||h.WebKitMutationObserver,j=void 0!==global?global:this,k=[];g="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():i?c():d(),a.asap=f}),a("promise/cast",["exports"],function(a){function b(a){return a&&"object"==typeof a&&a.constructor===this?a:new this(function(b){b(a)})}a.cast=b}),a("promise/config",["exports"],function(a){function b(a,b){return 2!==arguments.length?c[a]:void(c[a]=b)}var c={instrument:!1};a.config=c,a.configure=b}),a("promise/polyfill",["./promise","./utils","exports"],function(a,b,c){function d(){"Promise"in window&&"cast"in window.Promise&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&function(){var a;return new window.Promise(function(b){a=b}),f(a)}()||(window.Promise=e)}var e=a.Promise,f=b.isFunction;c.polyfill=d}),a("promise/promise",["./config","./utils","./cast","./all","./race","./resolve","./reject","./asap","exports"],function(a,b,c,d,e,f,g,h,i){function j(a){if(!w(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof j))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],k(a,this)}function k(a,b){function c(a){p(b,a)}function d(a){r(b,a)}try{a(c,d)}catch(a){d(a)}}function l(a,b,c,d){var e,f,g,h,i=w(c);if(i)try{e=c(d),g=!0}catch(a){h=!0,f=a}else e=d,g=!0;o(b,e)||(i&&g?p(b,e):h?r(b,f):a===F?p(b,e):a===G&&r(b,e))}function m(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+F]=c,e[f+G]=d}function n(a,b){for(var c,d,e=a._subscribers,f=a._detail,g=0;g<e.length;g+=3)c=e[g],d=e[g+b],l(b,c,d,f);a._subscribers=null}function o(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(v(b)&&(d=b.then,w(d)))return d.call(b,function(d){return!!c||(c=!0,void(b!==d?p(a,d):q(a,d)))},function(b){return!!c||(c=!0,void r(a,b))}),!0}catch(b){return!!c||(r(a,b),!0)}return!1}function p(a,b){a===b?q(a,b):o(a,b)||q(a,b)}function q(a,b){a._state===D&&(a._state=E,a._detail=b,u.async(s,a))}function r(a,b){a._state===D&&(a._state=E,a._detail=b,u.async(t,a))}function s(a){n(a,a._state=F)}function t(a){n(a,a._state=G)}var u=a.config,v=(a.configure,b.objectOrFunction),w=b.isFunction,x=(b.now,c.cast),y=d.all,z=e.race,A=f.resolve,B=g.reject,C=h.asap;u.async=C;var D=void 0,E=0,F=1,G=2;j.prototype={constructor:j,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(a,b){var c=this,d=new this.constructor(function(){});if(this._state){var e=arguments;u.async(function(){l(c._state,d,e[c._state-1],c._detail)})}else m(this,d,a,b);return d},catch:function(a){return this.then(null,a)}},j.all=y,j.cast=x,j.race=z,j.resolve=A,j.reject=B,i.Promise=j}),a("promise/race",["./utils","exports"],function(a,b){function c(a){var b=this;if(!d(a))throw new TypeError("You must pass an array to race.");return new b(function(b,c){for(var d,e=0;e<a.length;e++)d=a[e],d&&"function"==typeof d.then?d.then(b,c):b(d)})}var d=a.isArray;b.race=c}),a("promise/reject",["exports"],function(a){function b(a){return new this(function(b,c){c(a)})}a.reject=b}),a("promise/resolve",["exports"],function(a){function b(a){return new this(function(b){b(a)})}a.resolve=b}),a("promise/utils",["exports"],function(a){function b(a){return c(a)||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return"[object Array]"===Object.prototype.toString.call(a)}var e=Date.now||function(){return(new Date).getTime()};a.objectOrFunction=b,a.isFunction=c,a.isArray=d,a.now=e}),b("promise/polyfill").polyfill()}();var proxyCount=0,supportsCORS="withCredentials"in new XMLHttpRequest,supportsCORSImage="crossOrigin"in new Image;PseudoElementContainer.prototype.cloneTo=function(a){PseudoElementContainer.prototype.cloneTo.call(this,a),a.isPseudoElement=!0,a.before=this.before},PseudoElementContainer.prototype=Object.create(NodeContainer.prototype),PseudoElementContainer.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},PseudoElementContainer.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},PseudoElementContainer.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",Renderer.prototype.renderImage=function(a,b,c,d){var e=a.cssInt("paddingLeft"),f=a.cssInt("paddingTop"),g=a.cssInt("paddingRight"),h=a.cssInt("paddingBottom"),i=c.borders,j=b.width-(i[1].width+i[3].width+e+g),k=b.height-(i[0].width+i[2].width+f+h);this.drawImage(d,0,0,d.image.width||j,d.image.height||k,b.left+e+i[3].width,b.top+f+i[0].width,j,k)},Renderer.prototype.renderBackground=function(a,b,c){b.height>0&&b.width>0&&(this.renderBackgroundColor(a,b),this.renderBackgroundImage(a,b,c))},Renderer.prototype.renderBackgroundColor=function(a,b){var c=a.css("backgroundColor");this.isTransparent(c)||this.rectangle(b.left,b.top,b.width,b.height,a.css("backgroundColor"))},Renderer.prototype.renderBorders=function(a){a.forEach(this.renderBorder,this)},Renderer.prototype.renderBorder=function(a){this.isTransparent(a.color)||null===a.args||this.drawShape(a.args,a.color)},Renderer.prototype.renderBackgroundImage=function(a,b,c){a.parseBackgroundImages().reverse().forEach(function(d,e,f){switch(d.method){case"url":var g=this.images.get(d.args[0]);g?this.renderBackgroundRepeating(a,b,g,f.length-(e+1),c):log("Error loading background-image",d.args[0]);break;case"linear-gradient":case"gradient":var h=this.images.get(d.value);h?this.renderBackgroundGradient(h,b,c):log("Error loading background-image",d.args[0]);break;case"none":break;default:log("Unknown background-image type",d.args[0])}},this)},Renderer.prototype.renderBackgroundRepeating=function(a,b,c,d,e){var f=a.parseBackgroundSize(b,c.image,d),g=a.parseBackgroundPosition(b,c.image,d,f);switch(a.parseBackgroundRepeat(d)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+e[3],b.top+g.top+e[0],99999,f.height,e);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+e[0],f.width,99999,e);break;case"no-repeat":this.backgroundRepeatShape(c,g,f,b,b.left+g.left+e[3],b.top+g.top+e[0],f.width,f.height,e);break;default:this.renderBackgroundRepeat(c,g,f,{top:b.top,left:b.left},e[3],e[0])}},Renderer.prototype.isTransparent=function(a){return!a||"transparent"===a||"rgba(0, 0, 0, 0)"===a},StackingContext.prototype=Object.create(NodeContainer.prototype),StackingContext.prototype.getParentStack=function(a){var b=this.parent?this.parent.stack:null;return b?b.ownStacking?b:b.getParentStack(a):a.stack},Support.prototype.testRangeBounds=function(a){var b,c,d,e,f=!1;return a.createRange&&(b=a.createRange(),b.getBoundingClientRect&&(c=a.createElement("boundtest"),c.style.height="123px",c.style.display="block",a.body.appendChild(c),b.selectNode(c),d=b.getBoundingClientRect(),e=d.height,123===e&&(f=!0),a.body.removeChild(c))),f},Support.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},Support.prototype.testSVG=function(){var a=new Image,b=document.createElement("canvas"),c=b.getContext("2d");a.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{c.drawImage(a,0,0),b.toDataURL()}catch(a){return!1}return!0},SVGContainer.prototype.hasFabric=function(){return html2canvas.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},SVGContainer.prototype.inlineFormatting=function(a){return/^data:image\/svg\+xml;base64,/.test(a)?this.decode64(this.removeContentType(a)):this.removeContentType(a)},SVGContainer.prototype.removeContentType=function(a){return a.replace(/^data:image\/svg\+xml(;base64)?,/,"")},SVGContainer.prototype.isInline=function(a){return/^data:image\/svg\+xml/i.test(a)},SVGContainer.prototype.createCanvas=function(a){var b=this;return function(c,d){var e=new html2canvas.fabric.StaticCanvas("c");b.image=e.lowerCanvasEl,e.setWidth(d.width).setHeight(d.height).add(html2canvas.fabric.util.groupSVGElements(c,d)).renderAll(),a(e.lowerCanvasEl)}},SVGContainer.prototype.decode64=function(a){return"function"==typeof window.atob?window.atob(a):decode64(a)},SVGNodeContainer.prototype=Object.create(SVGContainer.prototype),TextContainer.prototype=Object.create(NodeContainer.prototype),TextContainer.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},TextContainer.prototype.transform=function(a){var b=this.node.data;switch(a){case"lowercase":return b.toLowerCase();case"capitalize":return b.replace(/(^|\s|:|-|\(|\))([a-z])/g,capitalize);case"uppercase":return b.toUpperCase();default:return b}},WebkitGradientContainer.prototype=Object.create(GradientContainer.prototype),function(a){var b;b=function(){function b(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(b=this.readUInt32(),k=function(){var a,b;for(b=[],h=a=0;4>a;h=++a)b.push(String.fromCharCode(this.data[this.pos++]));return b}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(b);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),e=this.readUInt16()||100,g.delay=1e3*f/e,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for("fdAT"===k&&(this.pos+=4,b-=4),a=(null!=g?g.data:void 0)||this.imgData,h=n=0;b>=0?b>n:n>b;h=b>=0?++n:--n)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(b),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((l=d-this.transparency.indexed.length)>0)for(h=o=0;l>=0?l>o:o>l;h=l>=0?++o:--o)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(b)[0];break;case 2:this.transparency.rgb=this.read(b)}break;case"tEXt":m=this.read(b),i=m.indexOf(0),j=String.fromCharCode.apply(String,m.slice(0,i)),this.text[j]=String.fromCharCode.apply(String,m.slice(i+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=b}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var c,d,e,f,g,h;b.load=function(a,c,d){var e;return"function"==typeof c&&(d=c),e=new XMLHttpRequest,e.open("GET",a,!0),e.responseType="arraybuffer",e.onload=function(){var a,f;return a=new Uint8Array(e.response||e.mozResponseArrayBuffer),f=new b(a),"function"==typeof(null!=c?c.getContext:void 0)&&f.render(c),"function"==typeof d?d(f):void 0},e.send(null)},0,d=1,e=2,c=0,1,b.prototype.read=function(a){var b,c;for(c=[],b=0;a>=0?a>b:b>a;a>=0?++b:--b)c.push(this.data[this.pos++]);return c},b.prototype.readUInt32=function(){var a,b,c,d;return a=this.data[this.pos++]<<24,b=this.data[this.pos++]<<16,c=this.data[this.pos++]<<8,d=this.data[this.pos++],a|b|c|d},b.prototype.readUInt16=function(){var a,b;return a=this.data[this.pos++]<<8,b=this.data[this.pos++],a|b},b.prototype.decodePixels=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(null==a&&(a=this.imgData),0===a.length)return new Uint8Array(0);for(a=new FlateStream(a),a=a.getBytes(),m=this.pixelBitlength/8,q=m*this.width,n=new Uint8Array(q*this.height),g=a.length,p=0,o=0,c=0;g>o;){switch(a[o++]){case 0:for(e=t=0;q>t;e=t+=1)n[c++]=a[o++];break;case 1:for(e=u=0;q>u;e=u+=1)b=a[o++],f=m>e?0:n[c-m],n[c++]=(b+f)%256;break;case 2:for(e=v=0;q>v;e=v+=1)b=a[o++],d=(e-e%m)/m,r=p&&n[(p-1)*q+d*m+e%m],n[c++]=(r+b)%256;break;case 3:for(e=w=0;q>w;e=w+=1)b=a[o++],d=(e-e%m)/m,f=m>e?0:n[c-m],r=p&&n[(p-1)*q+d*m+e%m],n[c++]=(b+Math.floor((f+r)/2))%256;break;case 4:for(e=x=0;q>x;e=x+=1)b=a[o++],d=(e-e%m)/m,f=m>e?0:n[c-m],0===p?r=s=0:(r=n[(p-1)*q+d*m+e%m],s=d&&n[(p-1)*q+(d-1)*m+e%m]),h=f+r-s,i=Math.abs(h-f),k=Math.abs(h-r),l=Math.abs(h-s),j=k>=i&&l>=i?f:l>=k?r:s,n[c++]=(b+j)%256;break;default:throw new Error("Invalid filter algorithm: "+a[o-1])}p++}return n},b.prototype.decodePalette=function(){var a,b,c,d,e,f,g,h,i;for(c=this.palette,f=this.transparency.indexed||[],e=new Uint8Array((f.length||0)+c.length),d=0,c.length,a=0,b=g=0,h=c.length;h>g;b=g+=3)e[d++]=c[b],e[d++]=c[b+1],e[d++]=c[b+2],e[d++]=null!=(i=f[a++])?i:255;return e},b.prototype.copyToImageData=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(d=this.colors,k=null,c=this.hasAlphaChannel,this.palette.length&&(k=null!=(m=this._decodedPalette)?m:this._decodedPalette=this.decodePalette(),d=4,c=!0),e=a.data||a,j=e.length,g=k||b,f=h=0,1===d)for(;j>f;)i=k?4*b[f/4]:h,l=g[i++],e[f++]=l,e[f++]=l,e[f++]=l,e[f++]=c?g[i++]:255,h=i;else for(;j>f;)i=k?4*b[f/4]:h,e[f++]=g[i++],e[f++]=g[i++],e[f++]=g[i++],e[f++]=c?g[i++]:255,h=i},b.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};try{g=a.document.createElement("canvas"),h=g.getContext("2d")}catch(a){return-1}return f=function(a){var b;return h.width=a.width,h.height=a.height,h.clearRect(0,0,a.width,a.height),h.putImageData(a,0,0),b=new Image,b.src=g.toDataURL(),b},b.prototype.decodeFrames=function(a){var b,c,d,e,g,h,i,j;if(this.animation){for(i=this.animation.frames,j=[],c=g=0,h=i.length;h>g;c=++g)b=i[c],d=a.createImageData(b.width,b.height),e=this.decodePixels(new Uint8Array(b.data)),this.copyToImageData(d,e),b.imageData=d,j.push(b.image=f(d));return j}},b.prototype.renderFrame=function(a,b){var f,g,h;return g=this.animation.frames,f=g[b],h=g[b-1],0===b&&a.clearRect(0,0,this.width,this.height),(null!=h?h.disposeOp:void 0)===d?a.clearRect(h.xOffset,h.yOffset,h.width,h.height):(null!=h?h.disposeOp:void 0)===e&&a.putImageData(h.imageData,h.xOffset,h.yOffset),f.blendOp===c&&a.clearRect(f.xOffset,f.yOffset,f.width,f.height),a.drawImage(f.image,f.xOffset,f.yOffset)},b.prototype.animate=function(a){var b,c,d,e,f,g,h=this;return c=0,g=this.animation,e=g.numFrames,d=g.frames,f=g.numPlays,(b=function(){var g,i;return g=c++%e,i=d[g],h.renderFrame(a,g),e>1&&f>c/e?h.animation._timeout=setTimeout(b,i.delay):void 0})()},b.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)},b.prototype.render=function(a){var b,c;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,b=a.getContext("2d"),this.animation?(this.decodeFrames(b),this.animate(b)):(c=b.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),b.putImageData(c,0,0))},b}(),a.PNG=b}("undefined"!=typeof window&&window||this);var DecodeStream=function(){function a(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return a.prototype={ensureBuffer:function(a){var b=this.buffer,c=b?b.byteLength:0;if(c>a)return b;for(var d=512;a>d;)d<<=1;for(var e=new Uint8Array(d),f=0;c>f;++f)e[f]=b[f];return this.buffer=e},getByte:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(a){var b=this.pos;if(a){this.ensureBuffer(b+a);for(var c=b+a;!this.eof&&this.bufferLength<c;)this.readBlock();var d=this.bufferLength;c>d&&(c=d)}else{for(;!this.eof;)this.readBlock();var c=this.bufferLength}return this.pos=c,this.buffer.subarray(b,c)},lookChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(a,b,c){for(var d=a+b;this.bufferLength<=d&&!this.eof;)this.readBlock();return new Stream(this.buffer,a,b,c)},skip:function(a){a||(a=1),this.pos+=a},reset:function(){this.pos=0}},a}(),FlateStream=function(){function a(a){throw new Error(a)}function b(b){var c=0,d=b[c++],e=b[c++];-1!=d&&-1!=e||a("Invalid header in flate stream"),8!=(15&d)&&a("Unknown compression method in flate stream"),((d<<8)+e)%31!=0&&a("Bad FCHECK in flate stream"),32&e&&a("FDICT bit set in flate stream"),this.bytes=b,this.bytesPos=c,this.codeSize=0,this.codeBuf=0,DecodeStream.call(this)}if("undefined"!=typeof Uint32Array){
var c=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),e=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),f=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],g=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return b.prototype=Object.create(DecodeStream.prototype),b.prototype.getBits=function(b){for(var c,d=this.codeSize,e=this.codeBuf,f=this.bytes,g=this.bytesPos;b>d;)void 0===(c=f[g++])&&a("Bad encoding in flate stream"),e|=c<<d,d+=8;return c=e&(1<<b)-1,this.codeBuf=e>>b,this.codeSize=d-=b,this.bytesPos=g,c},b.prototype.getCode=function(b){for(var c=b[0],d=b[1],e=this.codeSize,f=this.codeBuf,g=this.bytes,h=this.bytesPos;d>e;){var i;void 0===(i=g[h++])&&a("Bad encoding in flate stream"),f|=i<<e,e+=8}var j=c[f&(1<<d)-1],k=j>>16,l=65535&j;return(0==e||k>e||0==k)&&a("Bad encoding in flate stream"),this.codeBuf=f>>k,this.codeSize=e-k,this.bytesPos=h,l},b.prototype.generateHuffmanTable=function(a){for(var b=a.length,c=0,d=0;b>d;++d)a[d]>c&&(c=a[d]);for(var e=1<<c,f=new Uint32Array(e),g=1,h=0,i=2;c>=g;++g,h<<=1,i<<=1)for(var j=0;b>j;++j)if(a[j]==g){for(var k=0,l=h,d=0;g>d;++d)k=k<<1|1&l,l>>=1;for(var d=k;e>d;d+=i)f[d]=g<<16|j;++h}return[f,c]},b.prototype.readBlock=function(){function b(a,b,c,d,e){for(var f=a.getBits(c)+d;f-- >0;)b[x++]=e}var h=this.getBits(3);if(1&h&&(this.eof=!0),0==(h>>=1)){var i,j=this.bytes,k=this.bytesPos;void 0===(i=j[k++])&&a("Bad block header in flate stream");var l=i;void 0===(i=j[k++])&&a("Bad block header in flate stream"),l|=i<<8,void 0===(i=j[k++])&&a("Bad block header in flate stream");var m=i;void 0===(i=j[k++])&&a("Bad block header in flate stream"),m|=i<<8,m!=(65535&~l)&&a("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var n=this.bufferLength,o=this.ensureBuffer(n+l),p=n+l;this.bufferLength=p;for(var q=n;p>q;++q){if(void 0===(i=j[k++])){this.eof=!0;break}o[q]=i}return void(this.bytesPos=k)}var r,s;if(1==h)r=f,s=g;else if(2==h){for(var t=this.getBits(5)+257,u=this.getBits(5)+1,v=this.getBits(4)+4,w=Array(c.length),x=0;v>x;)w[c[x++]]=this.getBits(3);for(var y=this.generateHuffmanTable(w),z=0,x=0,A=t+u,B=new Array(A);A>x;){var C=this.getCode(y);16==C?b(this,B,2,3,z):17==C?b(this,B,3,3,z=0):18==C?b(this,B,7,11,z=0):B[x++]=z=C}r=this.generateHuffmanTable(B.slice(0,t)),s=this.generateHuffmanTable(B.slice(t,A))}else a("Unknown block type in flate stream");for(var o=this.buffer,D=o?o.length:0,E=this.bufferLength;;){var F=this.getCode(r);if(256>F)E+1>=D&&(o=this.ensureBuffer(E+1),D=o.length),o[E++]=F;else{if(256==F)return void(this.bufferLength=E);F-=257,F=d[F];var G=F>>16;G>0&&(G=this.getBits(G));var z=(65535&F)+G;F=this.getCode(s),F=e[F],(G=F>>16)>0&&(G=this.getBits(G));var H=(65535&F)+G;E+z>=D&&(o=this.ensureBuffer(E+z),D=o.length);for(var I=0;z>I;++I,++E)o[E]=o[E-H]}}},b}}();!function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===a.btoa&&(a.btoa=function(a){var c,d,e,f,g,h,i,j,k=0,l=0,m="",n=[];if(!a)return a;do{c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),j=c<<16|d<<8|e,f=j>>18&63,g=j>>12&63,h=j>>6&63,i=63&j,n[l++]=b.charAt(f)+b.charAt(g)+b.charAt(h)+b.charAt(i)}while(k<a.length);m=n.join("");var o=a.length%3;return(o?m.slice(0,o-3):m)+"===".slice(o||3)}),void 0===a.atob&&(a.atob=function(a){var c,d,e,f,g,h,i,j,k=0,l=0,m=[];if(!a)return a;a+="";do{f=b.indexOf(a.charAt(k++)),g=b.indexOf(a.charAt(k++)),h=b.indexOf(a.charAt(k++)),i=b.indexOf(a.charAt(k++)),j=f<<18|g<<12|h<<6|i,c=j>>16&255,d=j>>8&255,e=255&j,m[l++]=64==h?String.fromCharCode(c):64==i?String.fromCharCode(c,d):String.fromCharCode(c,d,e)}while(k<a.length);return m.join("")}),Array.prototype.map||(Array.prototype.map=function(a){if(void 0===this||null===this||"function"!=typeof a)throw new TypeError;for(var b=Object(this),c=b.length>>>0,d=new Array(c),e=arguments.length>1?arguments[1]:void 0,f=0;c>f;f++)f in b&&(d[f]=a.call(e,b[f],f,b));return d}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),Array.prototype.forEach||(Array.prototype.forEach=function(a,b){if(void 0===this||null===this||"function"!=typeof a)throw new TypeError;for(var c=Object(this),d=c.length>>>0,e=0;d>e;e++)e in c&&a.call(b,c[e],e,c)}),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError;var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this),"object"==typeof require&&("undefined"==typeof require_baseUrl_override&&(require_baseUrl_override="../"),require.config({baseUrl:require_baseUrl_override,shim:{"plugins/standard_fonts_metrics":{deps:["jspdf"]},"plugins/split_text_to_size":{deps:["jspdf"]},"plugins/annotations":{deps:["jspdf","plugins/standard_fonts_metrics","plugins/split_text_to_size"]},"plugins/outline":{deps:["jspdf"]},"plugins/addimage":{deps:["jspdf"]},"plugins/png_support":{deps:["jspdf","libs/png_support/png","libs/png_support/zlib"]},"plugins/from_html":{deps:["jspdf"]},"plugins/context2d":{deps:["jspdf","plugins/png_support","plugins/addimage","libs/css_colors"]},"libs/html2canvas/dist/html2canvas":{deps:["jspdf"]},"plugins/canvas":{deps:["jspdf"]},"plugins/acroform":{deps:["jspdf","plugins/annotations"]},html2pdf:{deps:["jspdf","plugins/standard_fonts_metrics","plugins/split_text_to_size","plugins/png_support","plugins/context2d","plugins/canvas","plugins/annotations","libs/html2canvas/dist/html2canvas"]},"test/test_harness":{deps:["jspdf","jspdf.plugin.standard_fonts_metrics","jspdf.plugin.split_text_to_size"]}},paths:{html2pdf:"libs/html2pdf"}}));var requirejs,require,define;!function(global){function isFunction(a){return"[object Function]"===ostring.call(a)}function isArray(a){return"[object Array]"===ostring.call(a)}function each(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function eachReverse(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function hasProp(a,b){return hasOwn.call(a,b)}function getOwn(a,b){return hasProp(a,b)&&a[b]}function eachProp(a,b){var c;for(c in a)if(hasProp(a,c)&&b(a[c],c))break}function mixin(a,b,c,d){return b&&eachProp(b,function(b,e){!c&&hasProp(a,e)||(!d||"object"!=typeof b||!b||isArray(b)||isFunction(b)||b instanceof RegExp?a[e]=b:(a[e]||(a[e]={}),mixin(a[e],b,c,d)))}),a}function bind(a,b){return function(){return b.apply(a,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(a){throw a}function getGlobal(a){if(!a)return a;var b=global;return each(a.split("."),function(a){b=b[a]}),b}function makeError(a,b,c,d){var e=new Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a);return e.requireType=a,e.requireModules=d,c&&(e.originalError=c),e}function newContext(a){function b(a){var b,c;for(b=0;b<a.length;b++)if("."===(c=a[b]))a.splice(b,1),b-=1;else if(".."===c){if(0===b||1==b&&".."===a[2]||".."===a[b-1])continue;b>0&&(a.splice(b-1,2),b-=2)}}function c(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p=c&&c.split("/"),q=x.map,r=q&&q["*"];if(a&&(a=a.split("/"),j=a.length-1,x.nodeIdCompat&&jsSuffixRegExp.test(a[j])&&(a[j]=a[j].replace(jsSuffixRegExp,"")),"."===a[0].charAt(0)&&p&&(o=p.slice(0,p.length-1),a=o.concat(a)),b(a),a=a.join("/")),d&&q&&(p||r)){f=a.split("/");a:for(g=f.length;g>0;g-=1){if(i=f.slice(0,g).join("/"),p)for(h=p.length;h>0;h-=1)if((e=getOwn(q,p.slice(0,h).join("/")))&&(e=getOwn(e,i))){k=e,l=g;break a}!m&&r&&getOwn(r,i)&&(m=getOwn(r,i),n=g)}!k&&m&&(k=m,l=n),k&&(f.splice(0,l,k),a=f.join("/"))}return getOwn(x.pkgs,a)||a}function d(a){isBrowser&&each(scripts(),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===u.contextName?(b.parentNode.removeChild(b),!0):void 0})}function e(a){var b=getOwn(x.paths,a);return b&&isArray(b)&&b.length>1?(b.shift(),u.require.undef(a),u.makeRequire(null,{skipMap:!0})([a]),!0):void 0}function f(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function g(a,b,d,e){var g,h,i,j,k=null,l=b?b.name:null,m=a,n=!0,o="";return a||(n=!1,a="_@r"+(F+=1)),j=f(a),k=j[0],a=j[1],k&&(k=c(k,l,e),h=getOwn(C,k)),a&&(k?o=h&&h.normalize?h.normalize(a,function(a){return c(a,l,e)}):-1===a.indexOf("!")?c(a,l,e):a:(o=c(a,l,e),j=f(o),k=j[0],o=j[1],d=!0,g=u.nameToUrl(o))),i=!k||h||d?"":"_unnormalized"+(G+=1),{prefix:k,name:o,parentMap:b,unnormalized:!!i,url:g,originalName:m,isDefine:n,id:(k?k+"!"+o:o)+i}}function h(a){var b=a.id,c=getOwn(y,b);return c||(c=y[b]=new u.Module(a)),c}function i(a,b,c){var d=a.id,e=getOwn(y,d);!hasProp(C,d)||e&&!e.defineEmitComplete?(e=h(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(C[d])}function j(a,b){var c=a.requireModules,d=!1;b?b(a):(each(c,function(b){var c=getOwn(y,b);c&&(c.error=a,c.events.error&&(d=!0,c.emit("error",a)))}),d||req.onError(a))}function k(){globalDefQueue.length&&(apsp.apply(B,[B.length,0].concat(globalDefQueue)),globalDefQueue=[])}function l(a){delete y[a],delete z[a]}function m(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,each(a.depMaps,function(d,e){var f=d.id,g=getOwn(y,f);!g||a.depMatched[e]||c[f]||(getOwn(b,f)?(a.defineDep(e,C[f]),a.check()):m(g,b,c))}),c[d]=!0)}function n(){var a,b,c=1e3*x.waitSeconds,f=c&&u.startTime+c<(new Date).getTime(),g=[],h=[],i=!1,k=!0;if(!s){if(s=!0,eachProp(z,function(a){var c=a.map,j=c.id;if(a.enabled&&(c.isDefine||h.push(a),!a.error))if(!a.inited&&f)e(j)?(b=!0,i=!0):(g.push(j),d(j));else if(!a.inited&&a.fetched&&c.isDefine&&(i=!0,!c.prefix))return k=!1}),f&&g.length)return a=makeError("timeout","Load timeout for modules: "+g,null,g),a.contextName=u.contextName,j(a);k&&each(h,function(a){m(a,{},{})}),f&&!b||!i||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,n()},50)),s=!1}}function o(a){hasProp(C,a[0])||h(g(a[0],null,!0)).init(a[1],a[2])}function p(a,b,c,d){a.detachEvent&&!isOpera?d&&a.detachEvent(d,b):a.removeEventListener(c,b,!1)}function q(a){var b=a.currentTarget||a.srcElement;return p(b,u.onScriptLoad,"load","onreadystatechange"),p(b,u.onScriptError,"error"),{node:b,id:b&&b.getAttribute("data-requiremodule")}}function r(){var a;for(k();B.length;){if(a=B.shift(),null===a[0])return j(makeError("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}}var s,t,u,v,w,x={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},y={},z={},A={},B=[],C={},D={},E={},F=1,G=1;return v={require:function(a){return a.require?a.require:a.require=u.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?C[a.map.id]=a.exports:a.exports=C[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){return getOwn(x.config,a.map.id)||{}},exports:a.exports||(a.exports={})}}},t=function(a){this.events=getOwn(A,a.id)||{},this.map=a,this.shim=getOwn(x.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},t.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=bind(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,u.startTime=(new Date).getTime();var a=this.map;return this.shim?void u.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return a.prefix?this.callPlugin():this.load()})):a.prefix?this.callPlugin():this.load()}},load:function(){var a=this.map.url;D[a]||(D[a]=!0,u.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id,d=this.depExports,e=this.exports,f=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(f)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{e=u.execCb(c,f,d,e)}catch(b){a=b}else e=u.execCb(c,f,d,e);if(this.map.isDefine&&void 0===e&&(b=this.module,b?e=b.exports:this.usingExports&&(e=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",j(this.error=a)}else e=f;this.exports=e,this.map.isDefine&&!this.ignore&&(C[c]=e,req.onResourceLoad&&req.onResourceLoad(u,this.map,this.depMaps)),l(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,b=a.id,d=g(a.prefix);this.depMaps.push(d),i(d,"defined",bind(this,function(d){var e,f,k,m=getOwn(E,this.map.id),n=this.map.name,o=this.map.parentMap?this.map.parentMap.name:null,p=u.makeRequire(a.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(d.normalize&&(n=d.normalize(n,function(a){return c(a,o,!0)})||""),f=g(a.prefix+"!"+n,this.map.parentMap),i(f,"defined",bind(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),void((k=getOwn(y,f.id))&&(this.depMaps.push(f),this.events.error&&k.on("error",bind(this,function(a){this.emit("error",a)})),k.enable()))):m?(this.map.url=u.nameToUrl(m),void this.load()):(e=bind(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=bind(this,function(a){this.inited=!0,this.error=a,a.requireModules=[b],eachProp(y,function(a){0===a.map.id.indexOf(b+"_unnormalized")&&l(a.map.id)}),j(a)}),e.fromText=bind(this,function(c,d){var f=a.name,i=g(f),k=useInteractive;d&&(c=d),k&&(useInteractive=!1),h(i),hasProp(x.config,b)&&(x.config[f]=x.config[b]);try{req.exec(c)}catch(a){return j(makeError("fromtexteval","fromText eval for "+b+" failed: "+a,a,[b]))}k&&(useInteractive=!0),this.depMaps.push(i),u.completeLoad(f),p([f],e)}),void d.load(a.name,p,e,x))})),u.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){z[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(a,b){var c,d,e;if("string"==typeof a){if(a=g(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,e=getOwn(v,a.id))return void(this.depExports[b]=e(this));this.depCount+=1,i(a,"defined",bind(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&i(a,"error",bind(this,this.errback))}c=a.id,d=y[c],hasProp(v,c)||!d||d.enabled||u.enable(a,this)})),eachProp(this.pluginMaps,bind(this,function(a){var b=getOwn(y,a.id);b&&!b.enabled&&u.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){each(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},u={config:x,contextName:a,registry:y,defined:C,urlFetched:D,defQueue:B,Module:t,makeModuleMap:g,nextTick:req.nextTick,onError:j,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=x.shim,c={paths:!0,bundles:!0,config:!0,map:!0};eachProp(a,function(a,b){c[b]?(x[b]||(x[b]={}),mixin(x[b],a,!0,!0)):x[b]=a}),a.bundles&&eachProp(a.bundles,function(a,b){each(a,function(a){a!==b&&(E[a]=b)})}),a.shim&&(eachProp(a.shim,function(a,c){isArray(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=u.makeShimExports(a)),b[c]=a}),x.shim=b),a.packages&&each(a.packages,function(a){var b,c;a="string"==typeof a?{name:a}:a,c=a.name,b=a.location,b&&(x.paths[c]=a.location),x.pkgs[c]=a.name+"/"+(a.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(y,function(a,b){a.inited||a.map.unnormalized||(a.map=g(b))}),(a.deps||a.callback)&&u.require(a.deps||[],a.callback)},makeShimExports:function(a){function b(){var b;return a.init&&(b=a.init.apply(global,arguments)),b||a.exports&&getGlobal(a.exports)}return b},makeRequire:function(b,e){function f(c,d,i){var k,l,m;return e.enableBuildCallback&&d&&isFunction(d)&&(d.__requireJsBuild=!0),"string"==typeof c?isFunction(d)?j(makeError("requireargs","Invalid require call"),i):b&&hasProp(v,c)?v[c](y[b.id]):req.get?req.get(u,c,b,f):(l=g(c,b,!1,!0),k=l.id,hasProp(C,k)?C[k]:j(makeError("notloaded",'Module name "'+k+'" has not been loaded yet for context: '+a+(b?"":". Use require([])")))):(r(),u.nextTick(function(){r(),m=h(g(null,b)),m.skipMap=e.skipMap,m.init(c,d,i,{enabled:!0}),n()}),f)}return e=e||{},mixin(f,{isBrowser:isBrowser,toUrl:function(a){var d,e=a.lastIndexOf("."),f=a.split("/")[0],g="."===f||".."===f;return-1!==e&&(!g||e>1)&&(d=a.substring(e,a.length),a=a.substring(0,e)),u.nameToUrl(c(a,b&&b.id,!0),d,!0)},defined:function(a){return hasProp(C,g(a,b,!1,!0).id)},specified:function(a){return a=g(a,b,!1,!0).id,hasProp(C,a)||hasProp(y,a)}}),b||(f.undef=function(a){k();var c=g(a,b,!0),e=getOwn(y,a);d(a),delete C[a],delete D[c.url],delete A[a],eachReverse(B,function(b,c){b[0]===a&&B.splice(c,1)}),e&&(e.events.defined&&(A[a]=e.events),l(a))}),f},enable:function(a){getOwn(y,a.id)&&h(a).enable()},completeLoad:function(a){var b,c,d,f=getOwn(x.shim,a)||{},g=f.exports;for(k();B.length;){if(c=B.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);o(c)}if(d=getOwn(y,a),!b&&!hasProp(C,a)&&d&&!d.inited){if(!(!x.enforceDefine||g&&getGlobal(g)))return e(a)?void 0:j(makeError("nodefine","No define call for "+a,null,[a]));o([a,f.deps||[],f.exportsFn])}n()},nameToUrl:function(a,b,c){var d,e,f,g,h,i,j,k=getOwn(x.pkgs,a);if(k&&(a=k),j=getOwn(E,a))return u.nameToUrl(j,b,c);if(req.jsExtRegExp.test(a))h=a+(b||"");else{for(d=x.paths,e=a.split("/"),f=e.length;f>0;f-=1)if(g=e.slice(0,f).join("/"),i=getOwn(d,g)){isArray(i)&&(i=i[0]),e.splice(0,f,i);break}h=e.join("/"),h+=b||(/^data\:|\?/.test(h)||c?"":".js"),h=("/"===h.charAt(0)||h.match(/^[\w\+\.\-]+:/)?"":x.baseUrl)+h}return x.urlArgs?h+(-1===h.indexOf("?")?"?":"&")+x.urlArgs:h},load:function(a,b){req.load(u,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){if("load"===a.type||readyRegExp.test((a.currentTarget||a.srcElement).readyState)){interactiveScript=null;var b=q(a);u.completeLoad(b.id)}},onScriptError:function(a){var b=q(a);return e(b.id)?void 0:j(makeError("scripterror","Script error for: "+b.id,a,[b.id]))}},u.require=u.makeRequire(),u}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(a){return"interactive"===a.readyState?interactiveScript=a:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.15",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(a,b,c,d){var e,f,g=defContextName;return isArray(a)||"string"==typeof a||(f=a,isArray(b)?(a=b,b=c,c=d):a=[]),f&&f.context&&(g=f.context),e=getOwn(contexts,g),e||(e=contexts[g]=req.s.newContext(g)),f&&e.configure(f),e.require(a,b,c)},req.config=function(a){return req(a)},req.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(a){req[a]=function(){var b=contexts[defContextName];return b.require[a].apply(b,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(a,b,c){var d=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return d.type=a.scriptType||"text/javascript",d.charset="utf-8",d.async=!0,d},req.load=function(a,b,c){var d,e=a&&a.config||{};if(isBrowser)return d=req.createNode(e,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&d.attachEvent.toString().indexOf("[native code")<0||isOpera?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(useInteractive=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,currentlyAddingScript=d,baseElement?head.insertBefore(d,baseElement):head.appendChild(d),currentlyAddingScript=null,d;if(isWebWorker)try{importScripts(c),a.completeLoad(b)}catch(d){a.onError(makeError("importscripts","importScripts failed for "+b+" at "+c,d,[b]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(a){return head||(head=a.parentNode),dataMain=a.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),isArray(b)||(c=b,b=null),!b&&isFunction(c)&&(b=[],c.length&&(c.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),useInteractive&&(d=currentlyAddingScript||getInteractiveScript())&&(a||(a=d.getAttribute("data-requiremodule")),e=contexts[d.getAttribute("data-requirecontext")]),(e?e.defQueue:globalDefQueue).push([a,b,c])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),global[""]=exports}({},function(){return this}()),angular.module("directive.g+signin",[]).directive("googlePlusSignin",["$window","$rootScope",function(a,b){var c=/\.apps\.googleusercontent\.com$/;return{restrict:"E",transclude:!0,template:"<span></span>",replace:!0,link:function(d,e,f,g,h){function i(a){b.$broadcast("event:google-plus-signin-success",a)}function j(){b.$broadcast("event:google-plus-signin-failure",null)}f.clientid+=c.test(f.clientid)?"":".apps.googleusercontent.com",f.$set("data-clientid",f.clientid);var k={onsuccess:i,cookiepolicy:"single_host_origin",onfailure:j,scope:"profile email",longtitle:!1,theme:"dark",autorender:!0,customtargetid:"googlebutton"};k.clientid=f.clientid,angular.forEach(Object.getOwnPropertyNames(k),function(a){f.hasOwnProperty(a)&&(k[a]=f[a])});var l=void 0!==k.autorender&&("true"===k.autorender||!0===k.autorender);l||"googlebutton"!==k.customtargetid||(console.log("element",e),e[0].innerHTML='<div id="googlebutton"> <div class="google-icon"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" viewBox="0 0 14 14" class="abcRioButtonSvg">   <g><path d="m7.228,7.958l-.661-.514c-.201-.166-.476-.386-.476-.79 0-.405 .275-.663 .513-.901 .769-.606 1.538-1.25 1.538-2.611 0-1.256-.632-1.862-.94-2.24h.899l.899-.902h-3.622c-.989,0-2.235,.147-3.278,1.01-.788,.68-1.172,1.618-1.172,2.464 0,1.433 1.098,2.885 3.04,2.885 .183,0 .384-.018 .586-.036-.092,.22-.183,.405-.183,.717 0,.569 .048,.809 .305,1.14-.824,.055-2.119,.12-3.254,.819-1.082,.644-1.411,1.717-1.411,2.379 0,1.361 1.281,2.629 3.938,2.629 3.149,0 4.816-1.747 4.816-3.474 .001-1.269-.731-1.894-1.537-2.575zm-4.689-5.384c0-.479 .091-.975 .402-1.361 .293-.368 .806-.607 1.283-.607 1.519,0 2.306,2.06 2.306,3.383 0,.33-.037,.918-.457,1.341-.294,.295-.786,.515-1.244,.515-1.575,0-2.29-2.041-2.29-3.271zm2.308,10.66c-1.96,0-3.224-.938-3.224-2.243s1.063-1.691 1.466-1.839c.77-.256 1.788-.348 1.788-.348s.456,.026 .665,.019c1.115,.546 1.997,1.487 1.997,2.428 0,1.138-.935,1.983-2.692,1.983z"></path></g> </svg></div> <div class="sign-in-text">Sign in</div></div>'),f.$observe("language",function(b){a.___gcfg={lang:b||"en"}});var m=document.createElement("script");m.type="text/javascript",m.async=!0,m.src="https://apis.google.com/js/client:platform.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(m,n),h(function(a,b){m.onload=function(){a.length&&e.append(a),gapi.load("auth2",function(){var a=gapi.auth2.init({client_id:k.clientid,cookie_policy:k.cookiepolicy});l?gapi.signin2.render(e[0],k):a.attachClickHandler(k.customtargetid,{},k.onsuccess,k.onfailure)})}})}}}]).run(),function(){function a(a,b,c,d,e,f,g){function h(){return v.length}function i(a){if(1!==arguments.length||a)if(a)o(a.toastId);else for(var b=0;b<v.length;b++)o(v[b].toastId)}function j(a,b,c){return p(q().iconClasses.error,a,b,c)}function k(a,b,c){return p(q().iconClasses.info,a,b,c)}function l(a,b,c){return p(q().iconClasses.success,a,b,c)}function m(a,b,c){return p(q().iconClasses.warning,a,b,c)}function n(a,b){a&&a.isOpened&&v.indexOf(a)>=0&&a.scope.refreshTimer(b)}function o(b,c){function d(a){for(var b=0;b<v.length;b++)if(v[b].toastId===a)return v[b]}function e(){return!v.length}var h=d(b);h&&!h.deleting&&(h.deleting=!0,h.isOpened=!1,a.leave(h.el).then(function(){h.scope.options.onHidden&&h.scope.options.onHidden(!!c,h),h.scope.$destroy();var a=v.indexOf(h);delete x[h.scope.message],v.splice(a,1);var b=f.maxOpened;b&&v.length>=b&&v[b-1].open.resolve(),e()&&(t.remove(),t=null,y=g.defer())}))}function p(a,b,c,d){return angular.isObject(c)&&(d=c,c=null),s({iconClass:a,message:b,optionsOverride:d,title:c})}function q(){return angular.extend({},f)}function r(b){if(t)return y.promise;t=angular.element("<div></div>"),t.attr("id",b.containerId),t.addClass(b.positionClass),t.css({"pointer-events":"auto"});var c=angular.element(document.querySelector(b.target));if(!c||!c.length)throw"Target for toasts doesn't exist";return a.enter(t,c).then(function(){y.resolve()}),y.promise}function s(c){function f(){return m.autoDismiss&&m.maxOpened&&v.length>m.maxOpened}function h(a,b,c){function d(b){if(c[b])return function(){c[b](a)}}c.allowHtml?(a.scope.allowHtml=!0,a.scope.title=e.trustAsHtml(b.title),a.scope.message=e.trustAsHtml(b.message)):(a.scope.title=b.title,a.scope.message=b.message),a.scope.toastType=a.iconClass,a.scope.toastId=a.toastId,a.scope.extraData=c.extraData,a.scope.options={extendedTimeOut:c.extendedTimeOut,messageClass:c.messageClass,onHidden:c.onHidden,onShown:d("onShown"),onTap:d("onTap"),progressBar:c.progressBar,tapToDismiss:c.tapToDismiss,timeOut:c.timeOut,titleClass:c.titleClass,toastClass:c.toastClass},c.closeButton&&(a.scope.options.closeHtml=c.closeHtml)}function i(){function a(a){for(var b=["containerId","iconClasses","maxOpened","newestOnTop","positionClass","preventDuplicates","preventOpenDuplicates","templates"],c=0,d=b.length;c<d;c++)delete a[b[c]];return a}
var b={toastId:u++,isOpened:!1,scope:d.$new(),open:g.defer()};return b.iconClass=c.iconClass,c.optionsOverride&&(angular.extend(m,a(c.optionsOverride)),b.iconClass=c.optionsOverride.iconClass||b.iconClass),h(b,c,m),b.el=j(b.scope),b}function j(a){var c=angular.element("<div toast></div>");return b.get("$compile")(c)(a)}function k(){return m.maxOpened&&v.length<=m.maxOpened||!m.maxOpened}function l(){var a=m.preventDuplicates&&c.message===w,b=m.preventOpenDuplicates&&x[c.message];return!(!a&&!b)||(w=c.message,x[c.message]=!0,!1)}var m=q();if(!l()){var n=i();if(v.push(n),f())for(var p=v.slice(0,v.length-m.maxOpened),s=0,y=p.length;s<y;s++)o(p[s].toastId);return k()&&n.open.resolve(),n.open.promise.then(function(){r(m).then(function(){if(n.isOpened=!0,m.newestOnTop)a.enter(n.el,t).then(function(){n.scope.init()});else{var b=t[0].lastChild?angular.element(t[0].lastChild):null;a.enter(n.el,t,b).then(function(){n.scope.init()})}})}),n}}var t,u=0,v=[],w="",x={},y=g.defer();return{active:h,clear:i,error:j,info:k,remove:o,success:l,warning:m,refreshTimer:n}}angular.module("toastr",[]).factory("toastr",a),a.$inject=["$animate","$injector","$document","$rootScope","$sce","toastrConfig","$q"]}(),function(){angular.module("toastr").constant("toastrConfig",{allowHtml:!1,autoDismiss:!1,closeButton:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},maxOpened:0,messageClass:"toast-message",newestOnTop:!0,onHidden:null,onShown:null,onTap:null,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,progressBar:!1,tapToDismiss:!0,target:"body",templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}(),function(){function a(a){function b(a,b,c,d){function e(){var a=(h-(new Date).getTime())/g*100;b.css("width",a+"%")}var f,g,h;d.progressBar=a,a.start=function(a){f&&clearInterval(f),g=parseFloat(a),h=(new Date).getTime()+g,f=setInterval(e,10)},a.stop=function(){f&&clearInterval(f)},a.$on("$destroy",function(){clearInterval(f)})}return{require:"^toast",templateUrl:function(){return a.templates.progressbar},link:b}}angular.module("toastr").directive("progressBar",a),a.$inject=["toastrConfig"]}(),function(){function a(){this.progressBar=null,this.startProgressBar=function(a){this.progressBar&&this.progressBar.start(a)},this.stopProgressBar=function(){this.progressBar&&this.progressBar.stop()}}angular.module("toastr").controller("ToastController",a)}(),function(){function a(a,b,c,d){function e(c,e,f,g){function h(a){return g.startProgressBar(a),b(function(){g.stopProgressBar(),d.remove(c.toastId)},a,1)}function i(){c.progressBar=!1,g.stopProgressBar()}function j(){return c.options.closeHtml}var k;if(c.toastClass=c.options.toastClass,c.titleClass=c.options.titleClass,c.messageClass=c.options.messageClass,c.progressBar=c.options.progressBar,j()){var l=angular.element(c.options.closeHtml),m=a.get("$compile");l.addClass("toast-close-button"),l.attr("ng-click","close(true, $event)"),m(l)(c),e.children().prepend(l)}c.init=function(){c.options.timeOut&&(k=h(c.options.timeOut)),c.options.onShown&&c.options.onShown()},e.on("mouseenter",function(){i(),k&&b.cancel(k)}),c.tapToast=function(){angular.isFunction(c.options.onTap)&&c.options.onTap(),c.options.tapToDismiss&&c.close(!0)},c.close=function(a,b){b&&angular.isFunction(b.stopPropagation)&&b.stopPropagation(),d.remove(c.toastId,a)},c.refreshTimer=function(a){k&&(b.cancel(k),k=h(a||c.options.timeOut))},e.on("mouseleave",function(){0===c.options.timeOut&&0===c.options.extendedTimeOut||(c.$apply(function(){c.progressBar=c.options.progressBar}),k=h(c.options.extendedTimeOut))})}return{templateUrl:function(){return c.templates.toast},controller:"ToastController",link:e}}angular.module("toastr").directive("toast",a),a.$inject=["$injector","$interval","toastrConfig","toastr"]}(),angular.module("toastr").run(["$templateCache",function(a){a.put("directives/progressbar/progressbar.html",'<div class="toast-progress"></div>\n'),a.put("directives/toast/toast.html",'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()">\n  <div ng-switch on="allowHtml">\n    <div ng-switch-default ng-if="title" class="{{titleClass}}" aria-label="{{title}}">{{title}}</div>\n    <div ng-switch-default class="{{messageClass}}" aria-label="{{message}}">{{message}}</div>\n    <div ng-switch-when="true" ng-if="title" class="{{titleClass}}" ng-bind-html="title"></div>\n    <div ng-switch-when="true" class="{{messageClass}}" ng-bind-html="message"></div>\n  </div>\n  <progress-bar ng-if="progressBar"></progress-bar>\n</div>\n')}]);